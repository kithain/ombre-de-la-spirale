(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function r(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=r(c);fetch(c.href,d)}})();function rc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Tu={exports:{}},oi={};var Lf;function i1(){if(Lf)return oi;Lf=1;var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(o,c,d){var p=null;if(d!==void 0&&(p=""+d),c.key!==void 0&&(p=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:n,type:o,key:p,ref:c!==void 0?c:null,props:d}}return oi.Fragment=i,oi.jsx=r,oi.jsxs=r,oi}var Nf;function r1(){return Nf||(Nf=1,Tu.exports=i1()),Tu.exports}var m=r1(),Cu={exports:{}},ue={};var Mf;function l1(){if(Mf)return ue;Mf=1;var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function C(_){return _===null||typeof _!="object"?null:(_=T&&_[T]||_["@@iterator"],typeof _=="function"?_:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,V={};function B(_,U,F){this.props=_,this.context=U,this.refs=V,this.updater=F||L}B.prototype.isReactComponent={},B.prototype.setState=function(_,U){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,U,"setState")},B.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function G(){}G.prototype=B.prototype;function J(_,U,F){this.props=_,this.context=U,this.refs=V,this.updater=F||L}var $=J.prototype=new G;$.constructor=J,z($,B.prototype),$.isPureReactComponent=!0;var ie=Array.isArray;function Y(){}var H={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function Q(_,U,F){var X=F.ref;return{$$typeof:n,type:_,key:U,ref:X!==void 0?X:null,props:F}}function ee(_,U){return Q(_.type,U,_.props)}function le(_){return typeof _=="object"&&_!==null&&_.$$typeof===n}function K(_){var U={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(F){return U[F]})}var Ee=/\/+/g;function me(_,U){return typeof _=="object"&&_!==null&&_.key!=null?K(""+_.key):U.toString(36)}function Pe(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(Y,Y):(_.status="pending",_.then(function(U){_.status==="pending"&&(_.status="fulfilled",_.value=U)},function(U){_.status==="pending"&&(_.status="rejected",_.reason=U)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function E(_,U,F,X,ce){var ge=typeof _;(ge==="undefined"||ge==="boolean")&&(_=null);var je=!1;if(_===null)je=!0;else switch(ge){case"bigint":case"string":case"number":je=!0;break;case"object":switch(_.$$typeof){case n:case i:je=!0;break;case y:return je=_._init,E(je(_._payload),U,F,X,ce)}}if(je)return ce=ce(_),je=X===""?"."+me(_,0):X,ie(ce)?(F="",je!=null&&(F=je.replace(Ee,"$&/")+"/"),E(ce,U,F,"",function(hn){return hn})):ce!=null&&(le(ce)&&(ce=ee(ce,F+(ce.key==null||_&&_.key===ce.key?"":(""+ce.key).replace(Ee,"$&/")+"/")+je)),U.push(ce)),1;je=0;var rt=X===""?".":X+":";if(ie(_))for(var He=0;He<_.length;He++)X=_[He],ge=rt+me(X,He),je+=E(X,U,F,ge,ce);else if(He=C(_),typeof He=="function")for(_=He.call(_),He=0;!(X=_.next()).done;)X=X.value,ge=rt+me(X,He++),je+=E(X,U,F,ge,ce);else if(ge==="object"){if(typeof _.then=="function")return E(Pe(_),U,F,X,ce);throw U=String(_),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return je}function k(_,U,F){if(_==null)return _;var X=[],ce=0;return E(_,X,"","",function(ge){return U.call(F,ge,ce++)}),X}function ae(_){if(_._status===-1){var U=_._result;U=U(),U.then(function(F){(_._status===0||_._status===-1)&&(_._status=1,_._result=F)},function(F){(_._status===0||_._status===-1)&&(_._status=2,_._result=F)}),_._status===-1&&(_._status=0,_._result=U)}if(_._status===1)return _._result.default;throw _._result}var he=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},_e={map:k,forEach:function(_,U,F){k(_,function(){U.apply(this,arguments)},F)},count:function(_){var U=0;return k(_,function(){U++}),U},toArray:function(_){return k(_,function(U){return U})||[]},only:function(_){if(!le(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return ue.Activity=b,ue.Children=_e,ue.Component=B,ue.Fragment=r,ue.Profiler=c,ue.PureComponent=J,ue.StrictMode=o,ue.Suspense=v,ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ue.__COMPILER_RUNTIME={__proto__:null,c:function(_){return H.H.useMemoCache(_)}},ue.cache=function(_){return function(){return _.apply(null,arguments)}},ue.cacheSignal=function(){return null},ue.cloneElement=function(_,U,F){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var X=z({},_.props),ce=_.key;if(U!=null)for(ge in U.key!==void 0&&(ce=""+U.key),U)!te.call(U,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&U.ref===void 0||(X[ge]=U[ge]);var ge=arguments.length-2;if(ge===1)X.children=F;else if(1<ge){for(var je=Array(ge),rt=0;rt<ge;rt++)je[rt]=arguments[rt+2];X.children=je}return Q(_.type,ce,X)},ue.createContext=function(_){return _={$$typeof:p,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:d,_context:_},_},ue.createElement=function(_,U,F){var X,ce={},ge=null;if(U!=null)for(X in U.key!==void 0&&(ge=""+U.key),U)te.call(U,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(ce[X]=U[X]);var je=arguments.length-2;if(je===1)ce.children=F;else if(1<je){for(var rt=Array(je),He=0;He<je;He++)rt[He]=arguments[He+2];ce.children=rt}if(_&&_.defaultProps)for(X in je=_.defaultProps,je)ce[X]===void 0&&(ce[X]=je[X]);return Q(_,ge,ce)},ue.createRef=function(){return{current:null}},ue.forwardRef=function(_){return{$$typeof:h,render:_}},ue.isValidElement=le,ue.lazy=function(_){return{$$typeof:y,_payload:{_status:-1,_result:_},_init:ae}},ue.memo=function(_,U){return{$$typeof:g,type:_,compare:U===void 0?null:U}},ue.startTransition=function(_){var U=H.T,F={};H.T=F;try{var X=_(),ce=H.S;ce!==null&&ce(F,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(Y,he)}catch(ge){he(ge)}finally{U!==null&&F.types!==null&&(U.types=F.types),H.T=U}},ue.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ue.use=function(_){return H.H.use(_)},ue.useActionState=function(_,U,F){return H.H.useActionState(_,U,F)},ue.useCallback=function(_,U){return H.H.useCallback(_,U)},ue.useContext=function(_){return H.H.useContext(_)},ue.useDebugValue=function(){},ue.useDeferredValue=function(_,U){return H.H.useDeferredValue(_,U)},ue.useEffect=function(_,U){return H.H.useEffect(_,U)},ue.useEffectEvent=function(_){return H.H.useEffectEvent(_)},ue.useId=function(){return H.H.useId()},ue.useImperativeHandle=function(_,U,F){return H.H.useImperativeHandle(_,U,F)},ue.useInsertionEffect=function(_,U){return H.H.useInsertionEffect(_,U)},ue.useLayoutEffect=function(_,U){return H.H.useLayoutEffect(_,U)},ue.useMemo=function(_,U){return H.H.useMemo(_,U)},ue.useOptimistic=function(_,U){return H.H.useOptimistic(_,U)},ue.useReducer=function(_,U,F){return H.H.useReducer(_,U,F)},ue.useRef=function(_){return H.H.useRef(_)},ue.useState=function(_){return H.H.useState(_)},ue.useSyncExternalStore=function(_,U,F){return H.H.useSyncExternalStore(_,U,F)},ue.useTransition=function(){return H.H.useTransition()},ue.version="19.2.0",ue}var Ef;function $r(){return Ef||(Ef=1,Cu.exports=l1()),Cu.exports}var A=$r();const Ch=rc(A);var ju={exports:{}},ui={},Au={exports:{}},Du={};var Rf;function o1(){return Rf||(Rf=1,(function(n){function i(E,k){var ae=E.length;E.push(k);e:for(;0<ae;){var he=ae-1>>>1,_e=E[he];if(0<c(_e,k))E[he]=k,E[ae]=_e,ae=he;else break e}}function r(E){return E.length===0?null:E[0]}function o(E){if(E.length===0)return null;var k=E[0],ae=E.pop();if(ae!==k){E[0]=ae;e:for(var he=0,_e=E.length,_=_e>>>1;he<_;){var U=2*(he+1)-1,F=E[U],X=U+1,ce=E[X];if(0>c(F,ae))X<_e&&0>c(ce,F)?(E[he]=ce,E[X]=ae,he=X):(E[he]=F,E[U]=ae,he=U);else if(X<_e&&0>c(ce,ae))E[he]=ce,E[X]=ae,he=X;else break e}}return k}function c(E,k){var ae=E.sortIndex-k.sortIndex;return ae!==0?ae:E.id-k.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var p=Date,h=p.now();n.unstable_now=function(){return p.now()-h}}var v=[],g=[],y=1,b=null,T=3,C=!1,L=!1,z=!1,V=!1,B=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function $(E){for(var k=r(g);k!==null;){if(k.callback===null)o(g);else if(k.startTime<=E)o(g),k.sortIndex=k.expirationTime,i(v,k);else break;k=r(g)}}function ie(E){if(z=!1,$(E),!L)if(r(v)!==null)L=!0,Y||(Y=!0,K());else{var k=r(g);k!==null&&Pe(ie,k.startTime-E)}}var Y=!1,H=-1,te=5,Q=-1;function ee(){return V?!0:!(n.unstable_now()-Q<te)}function le(){if(V=!1,Y){var E=n.unstable_now();Q=E;var k=!0;try{e:{L=!1,z&&(z=!1,G(H),H=-1),C=!0;var ae=T;try{t:{for($(E),b=r(v);b!==null&&!(b.expirationTime>E&&ee());){var he=b.callback;if(typeof he=="function"){b.callback=null,T=b.priorityLevel;var _e=he(b.expirationTime<=E);if(E=n.unstable_now(),typeof _e=="function"){b.callback=_e,$(E),k=!0;break t}b===r(v)&&o(v),$(E)}else o(v);b=r(v)}if(b!==null)k=!0;else{var _=r(g);_!==null&&Pe(ie,_.startTime-E),k=!1}}break e}finally{b=null,T=ae,C=!1}k=void 0}}finally{k?K():Y=!1}}}var K;if(typeof J=="function")K=function(){J(le)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,me=Ee.port2;Ee.port1.onmessage=le,K=function(){me.postMessage(null)}}else K=function(){B(le,0)};function Pe(E,k){H=B(function(){E(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(E){E.callback=null},n.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<E?Math.floor(1e3/E):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(E){switch(T){case 1:case 2:case 3:var k=3;break;default:k=T}var ae=T;T=k;try{return E()}finally{T=ae}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(E,k){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var ae=T;T=E;try{return k()}finally{T=ae}},n.unstable_scheduleCallback=function(E,k,ae){var he=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?he+ae:he):ae=he,E){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ae+_e,E={id:y++,callback:k,priorityLevel:E,startTime:ae,expirationTime:_e,sortIndex:-1},ae>he?(E.sortIndex=ae,i(g,E),r(v)===null&&E===r(g)&&(z?(G(H),H=-1):z=!0,Pe(ie,ae-he))):(E.sortIndex=_e,i(v,E),L||C||(L=!0,Y||(Y=!0,K()))),E},n.unstable_shouldYield=ee,n.unstable_wrapCallback=function(E){var k=T;return function(){var ae=T;T=k;try{return E.apply(this,arguments)}finally{T=ae}}}})(Du)),Du}var zf;function u1(){return zf||(zf=1,Au.exports=o1()),Au.exports}var Lu={exports:{}},it={};var Of;function c1(){if(Of)return it;Of=1;var n=$r();function i(v){var g="https://react.dev/errors/"+v;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+v+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(i(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(v,g,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:v,containerInfo:g,implementation:y}}var p=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(v,g){if(v==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return it.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,it.createPortal=function(v,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(i(299));return d(v,g,null,y)},it.flushSync=function(v){var g=p.T,y=o.p;try{if(p.T=null,o.p=2,v)return v()}finally{p.T=g,o.p=y,o.d.f()}},it.preconnect=function(v,g){typeof v=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(v,g))},it.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},it.preinit=function(v,g){if(typeof v=="string"&&g&&typeof g.as=="string"){var y=g.as,b=h(y,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?o.d.S(v,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:C}):y==="script"&&o.d.X(v,{crossOrigin:b,integrity:T,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},it.preinitModule=function(v,g){if(typeof v=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);o.d.M(v,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(v)},it.preload=function(v,g){if(typeof v=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,b=h(y,g.crossOrigin);o.d.L(v,y,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},it.preloadModule=function(v,g){if(typeof v=="string")if(g){var y=h(g.as,g.crossOrigin);o.d.m(v,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(v)},it.requestFormReset=function(v){o.d.r(v)},it.unstable_batchedUpdates=function(v,g){return v(g)},it.useFormState=function(v,g,y){return p.H.useFormState(v,g,y)},it.useFormStatus=function(){return p.H.useHostTransitionStatus()},it.version="19.2.0",it}var Vf;function d1(){if(Vf)return Lu.exports;Vf=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),Lu.exports=c1(),Lu.exports}var Pf;function m1(){if(Pf)return ui;Pf=1;var n=u1(),i=$r(),r=d1();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(d(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,s=t;;){var l=a.return;if(l===null)break;var u=l.alternate;if(u===null){if(s=l.return,s!==null){a=s;continue}break}if(l.child===u.child){for(u=l.child;u;){if(u===a)return v(l),e;if(u===s)return v(l),t;u=u.sibling}throw Error(o(188))}if(a.return!==s.return)a=l,s=u;else{for(var f=!1,x=l.child;x;){if(x===a){f=!0,a=l,s=u;break}if(x===s){f=!0,s=l,a=u;break}x=x.sibling}if(!f){for(x=u.child;x;){if(x===a){f=!0,a=u,s=l;break}if(x===s){f=!0,s=u,a=l;break}x=x.sibling}if(!f)throw Error(o(189))}}if(a.alternate!==s)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),J=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=le&&e[le]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Symbol.for("react.client.reference");function me(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ee?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case B:return"Profiler";case V:return"StrictMode";case ie:return"Suspense";case Y:return"SuspenseList";case Q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case J:return e.displayName||"Context";case G:return(e._context.displayName||"Context")+".Consumer";case $:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return t=e.displayName||null,t!==null?t:me(e.type)||"Memo";case te:t=e._payload,e=e._init;try{return me(e(t))}catch{}}return null}var Pe=Array.isArray,E=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},he=[],_e=-1;function _(e){return{current:e}}function U(e){0>_e||(e.current=he[_e],he[_e]=null,_e--)}function F(e,t){_e++,he[_e]=e.current,e.current=t}var X=_(null),ce=_(null),ge=_(null),je=_(null);function rt(e,t){switch(F(ge,t),F(ce,e),F(X,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Zp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Zp(t),e=$p(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(X),F(X,e)}function He(){U(X),U(ce),U(ge)}function hn(e){e.memoizedState!==null&&F(je,e);var t=X.current,a=$p(t,e.type);t!==a&&(F(ce,e),F(X,a))}function _i(e){ce.current===e&&(U(X),U(ce)),je.current===e&&(U(je),ni._currentValue=ae)}var il,Ac;function Wa(e){if(il===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);il=t&&t[1]||"",Ac=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+il+e+Ac}var rl=!1;function ll(e,t){if(!e||rl)return"";rl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(R){var M=R}Reflect.construct(e,[],I)}else{try{I.call()}catch(R){M=R}e.call(I.prototype)}}else{try{throw Error()}catch(R){M=R}(I=e())&&typeof I.catch=="function"&&I.catch(function(){})}}catch(R){if(R&&M&&typeof R.stack=="string")return[R.stack,M.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=s.DetermineComponentFrameRoot(),f=u[0],x=u[1];if(f&&x){var S=f.split(`
`),N=x.split(`
`);for(l=s=0;s<S.length&&!S[s].includes("DetermineComponentFrameRoot");)s++;for(;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;if(s===S.length||l===N.length)for(s=S.length-1,l=N.length-1;1<=s&&0<=l&&S[s]!==N[l];)l--;for(;1<=s&&0<=l;s--,l--)if(S[s]!==N[l]){if(s!==1||l!==1)do if(s--,l--,0>l||S[s]!==N[l]){var P=`
`+S[s].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=s&&0<=l);break}}}finally{rl=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Wa(a):""}function Vg(e,t){switch(e.tag){case 26:case 27:case 5:return Wa(e.type);case 16:return Wa("Lazy");case 13:return e.child!==t&&t!==null?Wa("Suspense Fallback"):Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 15:return ll(e.type,!1);case 11:return ll(e.type.render,!1);case 1:return ll(e.type,!0);case 31:return Wa("Activity");default:return""}}function Dc(e){try{var t="",a=null;do t+=Vg(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var ol=Object.prototype.hasOwnProperty,ul=n.unstable_scheduleCallback,cl=n.unstable_cancelCallback,Pg=n.unstable_shouldYield,Ug=n.unstable_requestPaint,vt=n.unstable_now,wg=n.unstable_getCurrentPriorityLevel,Lc=n.unstable_ImmediatePriority,Nc=n.unstable_UserBlockingPriority,qi=n.unstable_NormalPriority,Ig=n.unstable_LowPriority,Mc=n.unstable_IdlePriority,Bg=n.log,Gg=n.unstable_setDisableYieldValue,gn=null,bt=null;function _a(e){if(typeof Bg=="function"&&Gg(e),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(gn,e)}catch{}}var xt=Math.clz32?Math.clz32:Jg,Hg=Math.log,kg=Math.LN2;function Jg(e){return e>>>=0,e===0?32:31-(Hg(e)/kg|0)|0}var Ti=256,Ci=262144,ji=4194304;function es(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ai(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var l=0,u=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var x=s&134217727;return x!==0?(s=x&~u,s!==0?l=es(s):(f&=x,f!==0?l=es(f):a||(a=x&~e,a!==0&&(l=es(a))))):(x=s&~u,x!==0?l=es(x):f!==0?l=es(f):a||(a=s&~e,a!==0&&(l=es(a)))),l===0?0:t!==0&&t!==l&&(t&u)===0&&(u=l&-l,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:l}function vn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Fg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ec(){var e=ji;return ji<<=1,(ji&62914560)===0&&(ji=4194304),e}function dl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function bn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Yg(e,t,a,s,l,u){var f=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var x=e.entanglements,S=e.expirationTimes,N=e.hiddenUpdates;for(a=f&~a;0<a;){var P=31-xt(a),I=1<<P;x[P]=0,S[P]=-1;var M=N[P];if(M!==null)for(N[P]=null,P=0;P<M.length;P++){var R=M[P];R!==null&&(R.lane&=-536870913)}a&=~I}s!==0&&Rc(e,s,0),u!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=u&~(f&~t))}function Rc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-xt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function zc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-xt(a),l=1<<s;l&t|e[s]&t&&(e[s]|=t),a&=~l}}function Oc(e,t){var a=t&-t;return a=(a&42)!==0?1:ml(a),(a&(e.suspendedLanes|t))!==0?0:a}function ml(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Vc(){var e=k.p;return e!==0?e:(e=window.event,e===void 0?32:_f(e.type))}function Pc(e,t){var a=k.p;try{return k.p=e,t()}finally{k.p=a}}var qa=Math.random().toString(36).slice(2),et="__reactFiber$"+qa,ut="__reactProps$"+qa,_s="__reactContainer$"+qa,fl="__reactEvents$"+qa,Qg="__reactListeners$"+qa,Kg="__reactHandles$"+qa,Uc="__reactResources$"+qa,xn="__reactMarker$"+qa;function hl(e){delete e[et],delete e[ut],delete e[fl],delete e[Qg],delete e[Kg]}function qs(e){var t=e[et];if(t)return t;for(var a=e.parentNode;a;){if(t=a[_s]||a[et]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=rf(e);e!==null;){if(a=e[et])return a;e=rf(e)}return t}e=a,a=e.parentNode}return null}function Ts(e){if(e=e[et]||e[_s]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function yn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Cs(e){var t=e[Uc];return t||(t=e[Uc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function $e(e){e[xn]=!0}var wc=new Set,Ic={};function ts(e,t){js(e,t),js(e+"Capture",t)}function js(e,t){for(Ic[e]=t,e=0;e<t.length;e++)wc.add(t[e])}var Xg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bc={},Gc={};function Zg(e){return ol.call(Gc,e)?!0:ol.call(Bc,e)?!1:Xg.test(e)?Gc[e]=!0:(Bc[e]=!0,!1)}function Di(e,t,a){if(Zg(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Li(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Xt(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function Dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $g(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,u=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){a=""+f,u.call(this,f)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gl(e){if(!e._valueTracker){var t=Hc(e)?"checked":"value";e._valueTracker=$g(e,t,""+e[t])}}function kc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Hc(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Ni(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wg=/[\n"\\]/g;function Lt(e){return e.replace(Wg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function vl(e,t,a,s,l,u,f,x){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Dt(t)):e.value!==""+Dt(t)&&(e.value=""+Dt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?bl(e,f,Dt(t)):a!=null?bl(e,f,Dt(a)):s!=null&&e.removeAttribute("value"),l==null&&u!=null&&(e.defaultChecked=!!u),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+Dt(x):e.removeAttribute("name")}function Jc(e,t,a,s,l,u,f,x){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){gl(e);return}a=a!=null?""+Dt(a):"",t=t!=null?""+Dt(t):a,x||t===e.value||(e.value=t),e.defaultValue=t}s=s??l,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=x?e.checked:!!s,e.defaultChecked=!!s,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),gl(e)}function bl(e,t,a){t==="number"&&Ni(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function As(e,t,a,s){if(e=e.options,t){t={};for(var l=0;l<a.length;l++)t["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=t.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&s&&(e[a].defaultSelected=!0)}else{for(a=""+Dt(a),t=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Fc(e,t,a){if(t!=null&&(t=""+Dt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Dt(a):""}function Yc(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(o(92));if(Pe(s)){if(1<s.length)throw Error(o(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=Dt(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),gl(e)}function Ds(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var ev=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qc(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||ev.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Kc(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var l in t)s=t[l],t.hasOwnProperty(l)&&a[l]!==s&&Qc(e,l,s)}else for(var u in t)t.hasOwnProperty(u)&&Qc(e,u,t[u])}function xl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),av=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mi(e){return av.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Zt(){}var yl=null;function Sl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ls=null,Ns=null;function Xc(e){var t=Ts(e);if(t&&(e=t.stateNode)){var a=e[ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(vl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Lt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var l=s[ut]||null;if(!l)throw Error(o(90));vl(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&kc(s)}break e;case"textarea":Fc(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&As(e,!!a.multiple,t,!1)}}}var _l=!1;function Zc(e,t,a){if(_l)return e(t,a);_l=!0;try{var s=e(t);return s}finally{if(_l=!1,(Ls!==null||Ns!==null)&&(br(),Ls&&(t=Ls,e=Ns,Ns=Ls=null,Xc(t),e)))for(t=0;t<e.length;t++)Xc(e[t])}}function Sn(e,t){var a=e.stateNode;if(a===null)return null;var s=a[ut]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ql=!1;if($t)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){ql=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{ql=!1}var Ta=null,Tl=null,Ei=null;function $c(){if(Ei)return Ei;var e,t=Tl,a=t.length,s,l="value"in Ta?Ta.value:Ta.textContent,u=l.length;for(e=0;e<a&&t[e]===l[e];e++);var f=a-e;for(s=1;s<=f&&t[a-s]===l[u-s];s++);return Ei=l.slice(e,1<s?1-s:void 0)}function Ri(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zi(){return!0}function Wc(){return!1}function ct(e){function t(a,s,l,u,f){this._reactName=a,this._targetInst=l,this.type=s,this.nativeEvent=u,this.target=f,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(a=e[x],this[x]=a?a(u):u[x]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?zi:Wc,this.isPropagationStopped=Wc,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),t}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=ct(as),qn=b({},as,{view:0,detail:0}),sv=ct(qn),Cl,jl,Tn,Vi=b({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tn&&(Tn&&e.type==="mousemove"?(Cl=e.screenX-Tn.screenX,jl=e.screenY-Tn.screenY):jl=Cl=0,Tn=e),Cl)},movementY:function(e){return"movementY"in e?e.movementY:jl}}),ed=ct(Vi),nv=b({},Vi,{dataTransfer:0}),iv=ct(nv),rv=b({},qn,{relatedTarget:0}),Al=ct(rv),lv=b({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),ov=ct(lv),uv=b({},as,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cv=ct(uv),dv=b({},as,{data:0}),td=ct(dv),mv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fv[e])?!!t[e]:!1}function Dl(){return hv}var gv=b({},qn,{key:function(e){if(e.key){var t=mv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dl,charCode:function(e){return e.type==="keypress"?Ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vv=ct(gv),bv=b({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=ct(bv),xv=b({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dl}),yv=ct(xv),Sv=b({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),_v=ct(Sv),qv=b({},Vi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tv=ct(qv),Cv=b({},as,{newState:0,oldState:0}),jv=ct(Cv),Av=[9,13,27,32],Ll=$t&&"CompositionEvent"in window,Cn=null;$t&&"documentMode"in document&&(Cn=document.documentMode);var Dv=$t&&"TextEvent"in window&&!Cn,sd=$t&&(!Ll||Cn&&8<Cn&&11>=Cn),nd=" ",id=!1;function rd(e,t){switch(e){case"keyup":return Av.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ld(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ms=!1;function Lv(e,t){switch(e){case"compositionend":return ld(t);case"keypress":return t.which!==32?null:(id=!0,nd);case"textInput":return e=t.data,e===nd&&id?null:e;default:return null}}function Nv(e,t){if(Ms)return e==="compositionend"||!Ll&&rd(e,t)?(e=$c(),Ei=Tl=Ta=null,Ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sd&&t.locale!=="ko"?null:t.data;default:return null}}var Mv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function od(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mv[e.type]:t==="textarea"}function ud(e,t,a,s){Ls?Ns?Ns.push(s):Ns=[s]:Ls=s,t=Cr(t,"onChange"),0<t.length&&(a=new Oi("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var jn=null,An=null;function Ev(e){Jp(e,0)}function Pi(e){var t=yn(e);if(kc(t))return e}function cd(e,t){if(e==="change")return t}var dd=!1;if($t){var Nl;if($t){var Ml="oninput"in document;if(!Ml){var md=document.createElement("div");md.setAttribute("oninput","return;"),Ml=typeof md.oninput=="function"}Nl=Ml}else Nl=!1;dd=Nl&&(!document.documentMode||9<document.documentMode)}function pd(){jn&&(jn.detachEvent("onpropertychange",fd),An=jn=null)}function fd(e){if(e.propertyName==="value"&&Pi(An)){var t=[];ud(t,An,e,Sl(e)),Zc(Ev,t)}}function Rv(e,t,a){e==="focusin"?(pd(),jn=t,An=a,jn.attachEvent("onpropertychange",fd)):e==="focusout"&&pd()}function zv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pi(An)}function Ov(e,t){if(e==="click")return Pi(t)}function Vv(e,t){if(e==="input"||e==="change")return Pi(t)}function Pv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yt=typeof Object.is=="function"?Object.is:Pv;function Dn(e,t){if(yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var l=a[s];if(!ol.call(t,l)||!yt(e[l],t[l]))return!1}return!0}function hd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gd(e,t){var a=hd(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=hd(a)}}function vd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ni(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ni(e.document)}return t}function El(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Uv=$t&&"documentMode"in document&&11>=document.documentMode,Es=null,Rl=null,Ln=null,zl=!1;function xd(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zl||Es==null||Es!==Ni(s)||(s=Es,"selectionStart"in s&&El(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ln&&Dn(Ln,s)||(Ln=s,s=Cr(Rl,"onSelect"),0<s.length&&(t=new Oi("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Es)))}function ss(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Rs={animationend:ss("Animation","AnimationEnd"),animationiteration:ss("Animation","AnimationIteration"),animationstart:ss("Animation","AnimationStart"),transitionrun:ss("Transition","TransitionRun"),transitionstart:ss("Transition","TransitionStart"),transitioncancel:ss("Transition","TransitionCancel"),transitionend:ss("Transition","TransitionEnd")},Ol={},yd={};$t&&(yd=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function ns(e){if(Ol[e])return Ol[e];if(!Rs[e])return e;var t=Rs[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in yd)return Ol[e]=t[a];return e}var Sd=ns("animationend"),_d=ns("animationiteration"),qd=ns("animationstart"),wv=ns("transitionrun"),Iv=ns("transitionstart"),Bv=ns("transitioncancel"),Td=ns("transitionend"),Cd=new Map,Vl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vl.push("scrollEnd");function It(e,t){Cd.set(e,t),ts(t,[e])}var Ui=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Nt=[],zs=0,Pl=0;function wi(){for(var e=zs,t=Pl=zs=0;t<e;){var a=Nt[t];Nt[t++]=null;var s=Nt[t];Nt[t++]=null;var l=Nt[t];Nt[t++]=null;var u=Nt[t];if(Nt[t++]=null,s!==null&&l!==null){var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}u!==0&&jd(a,l,u)}}function Ii(e,t,a,s){Nt[zs++]=e,Nt[zs++]=t,Nt[zs++]=a,Nt[zs++]=s,Pl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ul(e,t,a,s){return Ii(e,t,a,s),Bi(e)}function is(e,t){return Ii(e,null,null,t),Bi(e)}function jd(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var l=!1,u=e.return;u!==null;)u.childLanes|=a,s=u.alternate,s!==null&&(s.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(l=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,l&&t!==null&&(l=31-xt(a),e=u.hiddenUpdates,s=e[l],s===null?e[l]=[t]:s.push(t),t.lane=a|536870912),u):null}function Bi(e){if(50<Zn)throw Zn=0,Qo=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Os={};function Gv(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,a,s){return new Gv(e,t,a,s)}function wl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wt(e,t){var a=e.alternate;return a===null?(a=St(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Ad(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Gi(e,t,a,s,l,u){var f=0;if(s=e,typeof e=="function")wl(e)&&(f=1);else if(typeof e=="string")f=Yb(e,a,X.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Q:return e=St(31,a,t,l),e.elementType=Q,e.lanes=u,e;case z:return rs(a.children,l,u,t);case V:f=8,l|=24;break;case B:return e=St(12,a,t,l|2),e.elementType=B,e.lanes=u,e;case ie:return e=St(13,a,t,l),e.elementType=ie,e.lanes=u,e;case Y:return e=St(19,a,t,l),e.elementType=Y,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case J:f=10;break e;case G:f=9;break e;case $:f=11;break e;case H:f=14;break e;case te:f=16,s=null;break e}f=29,a=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=St(f,a,t,l),t.elementType=e,t.type=s,t.lanes=u,t}function rs(e,t,a,s){return e=St(7,e,s,t),e.lanes=a,e}function Il(e,t,a){return e=St(6,e,null,t),e.lanes=a,e}function Dd(e){var t=St(18,null,null,0);return t.stateNode=e,t}function Bl(e,t,a){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ld=new WeakMap;function Mt(e,t){if(typeof e=="object"&&e!==null){var a=Ld.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Dc(t)},Ld.set(e,t),t)}return{value:e,source:t,stack:Dc(t)}}var Vs=[],Ps=0,Hi=null,Nn=0,Et=[],Rt=0,Ca=null,Ht=1,kt="";function ea(e,t){Vs[Ps++]=Nn,Vs[Ps++]=Hi,Hi=e,Nn=t}function Nd(e,t,a){Et[Rt++]=Ht,Et[Rt++]=kt,Et[Rt++]=Ca,Ca=e;var s=Ht;e=kt;var l=32-xt(s)-1;s&=~(1<<l),a+=1;var u=32-xt(t)+l;if(30<u){var f=l-l%5;u=(s&(1<<f)-1).toString(32),s>>=f,l-=f,Ht=1<<32-xt(t)+l|a<<l|s,kt=u+e}else Ht=1<<u|a<<l|s,kt=e}function Gl(e){e.return!==null&&(ea(e,1),Nd(e,1,0))}function Hl(e){for(;e===Hi;)Hi=Vs[--Ps],Vs[Ps]=null,Nn=Vs[--Ps],Vs[Ps]=null;for(;e===Ca;)Ca=Et[--Rt],Et[Rt]=null,kt=Et[--Rt],Et[Rt]=null,Ht=Et[--Rt],Et[Rt]=null}function Md(e,t){Et[Rt++]=Ht,Et[Rt++]=kt,Et[Rt++]=Ca,Ht=t.id,kt=t.overflow,Ca=e}var tt=null,ze=null,Se=!1,ja=null,zt=!1,kl=Error(o(519));function Aa(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mn(Mt(t,e)),kl}function Ed(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[et]=e,t[ut]=s,a){case"dialog":be("cancel",t),be("close",t);break;case"iframe":case"object":case"embed":be("load",t);break;case"video":case"audio":for(a=0;a<Wn.length;a++)be(Wn[a],t);break;case"source":be("error",t);break;case"img":case"image":case"link":be("error",t),be("load",t);break;case"details":be("toggle",t);break;case"input":be("invalid",t),Jc(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":be("invalid",t);break;case"textarea":be("invalid",t),Yc(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||Kp(t.textContent,a)?(s.popover!=null&&(be("beforetoggle",t),be("toggle",t)),s.onScroll!=null&&be("scroll",t),s.onScrollEnd!=null&&be("scrollend",t),s.onClick!=null&&(t.onclick=Zt),t=!0):t=!1,t||Aa(e,!0)}function Rd(e){for(tt=e.return;tt;)switch(tt.tag){case 5:case 31:case 13:zt=!1;return;case 27:case 3:zt=!0;return;default:tt=tt.return}}function Us(e){if(e!==tt)return!1;if(!Se)return Rd(e),Se=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||uu(e.type,e.memoizedProps)),a=!a),a&&ze&&Aa(e),Rd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));ze=nf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));ze=nf(e)}else t===27?(t=ze,Ba(e.type)?(e=fu,fu=null,ze=e):ze=t):ze=tt?Vt(e.stateNode.nextSibling):null;return!0}function ls(){ze=tt=null,Se=!1}function Jl(){var e=ja;return e!==null&&(ft===null?ft=e:ft.push.apply(ft,e),ja=null),e}function Mn(e){ja===null?ja=[e]:ja.push(e)}var Fl=_(null),os=null,ta=null;function Da(e,t,a){F(Fl,t._currentValue),t._currentValue=a}function aa(e){e._currentValue=Fl.current,U(Fl)}function Yl(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Ql(e,t,a,s){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var u=l.dependencies;if(u!==null){var f=l.child;u=u.firstContext;e:for(;u!==null;){var x=u;u=l;for(var S=0;S<t.length;S++)if(x.context===t[S]){u.lanes|=a,x=u.alternate,x!==null&&(x.lanes|=a),Yl(u.return,a,e),s||(f=null);break e}u=x.next}}else if(l.tag===18){if(f=l.return,f===null)throw Error(o(341));f.lanes|=a,u=f.alternate,u!==null&&(u.lanes|=a),Yl(f,a,e),f=null}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}}function ws(e,t,a,s){e=null;for(var l=t,u=!1;l!==null;){if(!u){if((l.flags&524288)!==0)u=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var f=l.alternate;if(f===null)throw Error(o(387));if(f=f.memoizedProps,f!==null){var x=l.type;yt(l.pendingProps.value,f.value)||(e!==null?e.push(x):e=[x])}}else if(l===je.current){if(f=l.alternate,f===null)throw Error(o(387));f.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(ni):e=[ni])}l=l.return}e!==null&&Ql(t,e,a,s),t.flags|=262144}function ki(e){for(e=e.firstContext;e!==null;){if(!yt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function us(e){os=e,ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function at(e){return zd(os,e)}function Ji(e,t){return os===null&&us(e),zd(e,t)}function zd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ta===null){if(e===null)throw Error(o(308));ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ta=ta.next=t;return a}var Hv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},kv=n.unstable_scheduleCallback,Jv=n.unstable_NormalPriority,Fe={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kl(){return{controller:new Hv,data:new Map,refCount:0}}function En(e){e.refCount--,e.refCount===0&&kv(Jv,function(){e.controller.abort()})}var Rn=null,Xl=0,Is=0,Bs=null;function Fv(e,t){if(Rn===null){var a=Rn=[];Xl=0,Is=eu(),Bs={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Xl++,t.then(Od,Od),t}function Od(){if(--Xl===0&&Rn!==null){Bs!==null&&(Bs.status="fulfilled");var e=Rn;Rn=null,Is=0,Bs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Yv(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var l=0;l<a.length;l++)(0,a[l])(t)},function(l){for(s.status="rejected",s.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),s}var Vd=E.S;E.S=function(e,t){xp=vt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Fv(e,t),Vd!==null&&Vd(e,t)};var cs=_(null);function Zl(){var e=cs.current;return e!==null?e:Re.pooledCache}function Fi(e,t){t===null?F(cs,cs.current):F(cs,t.pool)}function Pd(){var e=Zl();return e===null?null:{parent:Fe._currentValue,pool:e}}var Gs=Error(o(460)),$l=Error(o(474)),Yi=Error(o(542)),Qi={then:function(){}};function Ud(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Zt,Zt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bd(e),e;default:if(typeof t.status=="string")t.then(Zt,Zt);else{if(e=Re,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=s}},function(s){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bd(e),e}throw ms=t,Gs}}function ds(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ms=a,Gs):a}}var ms=null;function Id(){if(ms===null)throw Error(o(459));var e=ms;return ms=null,e}function Bd(e){if(e===Gs||e===Yi)throw Error(o(483))}var Hs=null,zn=0;function Ki(e){var t=zn;return zn+=1,Hs===null&&(Hs=[]),wd(Hs,e,t)}function On(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Xi(e,t){throw t.$$typeof===T?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Gd(e){function t(j,q){if(e){var D=j.deletions;D===null?(j.deletions=[q],j.flags|=16):D.push(q)}}function a(j,q){if(!e)return null;for(;q!==null;)t(j,q),q=q.sibling;return null}function s(j){for(var q=new Map;j!==null;)j.key!==null?q.set(j.key,j):q.set(j.index,j),j=j.sibling;return q}function l(j,q){return j=Wt(j,q),j.index=0,j.sibling=null,j}function u(j,q,D){return j.index=D,e?(D=j.alternate,D!==null?(D=D.index,D<q?(j.flags|=67108866,q):D):(j.flags|=67108866,q)):(j.flags|=1048576,q)}function f(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function x(j,q,D,w){return q===null||q.tag!==6?(q=Il(D,j.mode,w),q.return=j,q):(q=l(q,D),q.return=j,q)}function S(j,q,D,w){var se=D.type;return se===z?P(j,q,D.props.children,w,D.key):q!==null&&(q.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===te&&ds(se)===q.type)?(q=l(q,D.props),On(q,D),q.return=j,q):(q=Gi(D.type,D.key,D.props,null,j.mode,w),On(q,D),q.return=j,q)}function N(j,q,D,w){return q===null||q.tag!==4||q.stateNode.containerInfo!==D.containerInfo||q.stateNode.implementation!==D.implementation?(q=Bl(D,j.mode,w),q.return=j,q):(q=l(q,D.children||[]),q.return=j,q)}function P(j,q,D,w,se){return q===null||q.tag!==7?(q=rs(D,j.mode,w,se),q.return=j,q):(q=l(q,D),q.return=j,q)}function I(j,q,D){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Il(""+q,j.mode,D),q.return=j,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case C:return D=Gi(q.type,q.key,q.props,null,j.mode,D),On(D,q),D.return=j,D;case L:return q=Bl(q,j.mode,D),q.return=j,q;case te:return q=ds(q),I(j,q,D)}if(Pe(q)||K(q))return q=rs(q,j.mode,D,null),q.return=j,q;if(typeof q.then=="function")return I(j,Ki(q),D);if(q.$$typeof===J)return I(j,Ji(j,q),D);Xi(j,q)}return null}function M(j,q,D,w){var se=q!==null?q.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return se!==null?null:x(j,q,""+D,w);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case C:return D.key===se?S(j,q,D,w):null;case L:return D.key===se?N(j,q,D,w):null;case te:return D=ds(D),M(j,q,D,w)}if(Pe(D)||K(D))return se!==null?null:P(j,q,D,w,null);if(typeof D.then=="function")return M(j,q,Ki(D),w);if(D.$$typeof===J)return M(j,q,Ji(j,D),w);Xi(j,D)}return null}function R(j,q,D,w,se){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return j=j.get(D)||null,x(q,j,""+w,se);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case C:return j=j.get(w.key===null?D:w.key)||null,S(q,j,w,se);case L:return j=j.get(w.key===null?D:w.key)||null,N(q,j,w,se);case te:return w=ds(w),R(j,q,D,w,se)}if(Pe(w)||K(w))return j=j.get(D)||null,P(q,j,w,se,null);if(typeof w.then=="function")return R(j,q,D,Ki(w),se);if(w.$$typeof===J)return R(j,q,D,Ji(q,w),se);Xi(q,w)}return null}function Z(j,q,D,w){for(var se=null,qe=null,W=q,pe=q=0,ye=null;W!==null&&pe<D.length;pe++){W.index>pe?(ye=W,W=null):ye=W.sibling;var Te=M(j,W,D[pe],w);if(Te===null){W===null&&(W=ye);break}e&&W&&Te.alternate===null&&t(j,W),q=u(Te,q,pe),qe===null?se=Te:qe.sibling=Te,qe=Te,W=ye}if(pe===D.length)return a(j,W),Se&&ea(j,pe),se;if(W===null){for(;pe<D.length;pe++)W=I(j,D[pe],w),W!==null&&(q=u(W,q,pe),qe===null?se=W:qe.sibling=W,qe=W);return Se&&ea(j,pe),se}for(W=s(W);pe<D.length;pe++)ye=R(W,j,pe,D[pe],w),ye!==null&&(e&&ye.alternate!==null&&W.delete(ye.key===null?pe:ye.key),q=u(ye,q,pe),qe===null?se=ye:qe.sibling=ye,qe=ye);return e&&W.forEach(function(Fa){return t(j,Fa)}),Se&&ea(j,pe),se}function ne(j,q,D,w){if(D==null)throw Error(o(151));for(var se=null,qe=null,W=q,pe=q=0,ye=null,Te=D.next();W!==null&&!Te.done;pe++,Te=D.next()){W.index>pe?(ye=W,W=null):ye=W.sibling;var Fa=M(j,W,Te.value,w);if(Fa===null){W===null&&(W=ye);break}e&&W&&Fa.alternate===null&&t(j,W),q=u(Fa,q,pe),qe===null?se=Fa:qe.sibling=Fa,qe=Fa,W=ye}if(Te.done)return a(j,W),Se&&ea(j,pe),se;if(W===null){for(;!Te.done;pe++,Te=D.next())Te=I(j,Te.value,w),Te!==null&&(q=u(Te,q,pe),qe===null?se=Te:qe.sibling=Te,qe=Te);return Se&&ea(j,pe),se}for(W=s(W);!Te.done;pe++,Te=D.next())Te=R(W,j,pe,Te.value,w),Te!==null&&(e&&Te.alternate!==null&&W.delete(Te.key===null?pe:Te.key),q=u(Te,q,pe),qe===null?se=Te:qe.sibling=Te,qe=Te);return e&&W.forEach(function(n1){return t(j,n1)}),Se&&ea(j,pe),se}function Me(j,q,D,w){if(typeof D=="object"&&D!==null&&D.type===z&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case C:e:{for(var se=D.key;q!==null;){if(q.key===se){if(se=D.type,se===z){if(q.tag===7){a(j,q.sibling),w=l(q,D.props.children),w.return=j,j=w;break e}}else if(q.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===te&&ds(se)===q.type){a(j,q.sibling),w=l(q,D.props),On(w,D),w.return=j,j=w;break e}a(j,q);break}else t(j,q);q=q.sibling}D.type===z?(w=rs(D.props.children,j.mode,w,D.key),w.return=j,j=w):(w=Gi(D.type,D.key,D.props,null,j.mode,w),On(w,D),w.return=j,j=w)}return f(j);case L:e:{for(se=D.key;q!==null;){if(q.key===se)if(q.tag===4&&q.stateNode.containerInfo===D.containerInfo&&q.stateNode.implementation===D.implementation){a(j,q.sibling),w=l(q,D.children||[]),w.return=j,j=w;break e}else{a(j,q);break}else t(j,q);q=q.sibling}w=Bl(D,j.mode,w),w.return=j,j=w}return f(j);case te:return D=ds(D),Me(j,q,D,w)}if(Pe(D))return Z(j,q,D,w);if(K(D)){if(se=K(D),typeof se!="function")throw Error(o(150));return D=se.call(D),ne(j,q,D,w)}if(typeof D.then=="function")return Me(j,q,Ki(D),w);if(D.$$typeof===J)return Me(j,q,Ji(j,D),w);Xi(j,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,q!==null&&q.tag===6?(a(j,q.sibling),w=l(q,D),w.return=j,j=w):(a(j,q),w=Il(D,j.mode,w),w.return=j,j=w),f(j)):a(j,q)}return function(j,q,D,w){try{zn=0;var se=Me(j,q,D,w);return Hs=null,se}catch(W){if(W===Gs||W===Yi)throw W;var qe=St(29,W,null,j.mode);return qe.lanes=w,qe.return=j,qe}finally{}}}var ps=Gd(!0),Hd=Gd(!1),La=!1;function Wl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ce&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,t=Bi(e),jd(e,null,a),t}return Ii(e,s,t,a),Bi(e)}function Vn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,zc(e,a)}}function to(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var l=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var f={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?l=u=f:u=u.next=f,a=a.next}while(a!==null);u===null?l=u=t:u=u.next=t}else l=u=t;a={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:u,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var ao=!1;function Pn(){if(ao){var e=Bs;if(e!==null)throw e}}function Un(e,t,a,s){ao=!1;var l=e.updateQueue;La=!1;var u=l.firstBaseUpdate,f=l.lastBaseUpdate,x=l.shared.pending;if(x!==null){l.shared.pending=null;var S=x,N=S.next;S.next=null,f===null?u=N:f.next=N,f=S;var P=e.alternate;P!==null&&(P=P.updateQueue,x=P.lastBaseUpdate,x!==f&&(x===null?P.firstBaseUpdate=N:x.next=N,P.lastBaseUpdate=S))}if(u!==null){var I=l.baseState;f=0,P=N=S=null,x=u;do{var M=x.lane&-536870913,R=M!==x.lane;if(R?(xe&M)===M:(s&M)===M){M!==0&&M===Is&&(ao=!0),P!==null&&(P=P.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Z=e,ne=x;M=t;var Me=a;switch(ne.tag){case 1:if(Z=ne.payload,typeof Z=="function"){I=Z.call(Me,I,M);break e}I=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=ne.payload,M=typeof Z=="function"?Z.call(Me,I,M):Z,M==null)break e;I=b({},I,M);break e;case 2:La=!0}}M=x.callback,M!==null&&(e.flags|=64,R&&(e.flags|=8192),R=l.callbacks,R===null?l.callbacks=[M]:R.push(M))}else R={lane:M,tag:x.tag,payload:x.payload,callback:x.callback,next:null},P===null?(N=P=R,S=I):P=P.next=R,f|=M;if(x=x.next,x===null){if(x=l.shared.pending,x===null)break;R=x,x=R.next,R.next=null,l.lastBaseUpdate=R,l.shared.pending=null}}while(!0);P===null&&(S=I),l.baseState=S,l.firstBaseUpdate=N,l.lastBaseUpdate=P,u===null&&(l.shared.lanes=0),Va|=f,e.lanes=f,e.memoizedState=I}}function kd(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Jd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)kd(a[e],t)}var ks=_(null),Zi=_(0);function Fd(e,t){e=da,F(Zi,e),F(ks,t),da=e|t.baseLanes}function so(){F(Zi,da),F(ks,ks.current)}function no(){da=Zi.current,U(ks),U(Zi)}var _t=_(null),Ot=null;function Ea(e){var t=e.alternate;F(ke,ke.current&1),F(_t,e),Ot===null&&(t===null||ks.current!==null||t.memoizedState!==null)&&(Ot=e)}function io(e){F(ke,ke.current),F(_t,e),Ot===null&&(Ot=e)}function Yd(e){e.tag===22?(F(ke,ke.current),F(_t,e),Ot===null&&(Ot=e)):Ra()}function Ra(){F(ke,ke.current),F(_t,_t.current)}function qt(e){U(_t),Ot===e&&(Ot=null),U(ke)}var ke=_(0);function $i(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||mu(a)||pu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sa=0,de=null,Le=null,Ye=null,Wi=!1,Js=!1,fs=!1,er=0,wn=0,Fs=null,Qv=0;function Ie(){throw Error(o(321))}function ro(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!yt(e[a],t[a]))return!1;return!0}function lo(e,t,a,s,l,u){return sa=u,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?Nm:qo,fs=!1,u=a(s,l),fs=!1,Js&&(u=Kd(t,a,s,l)),Qd(e),u}function Qd(e){E.H=Gn;var t=Le!==null&&Le.next!==null;if(sa=0,Ye=Le=de=null,Wi=!1,wn=0,Fs=null,t)throw Error(o(300));e===null||Qe||(e=e.dependencies,e!==null&&ki(e)&&(Qe=!0))}function Kd(e,t,a,s){de=e;var l=0;do{if(Js&&(Fs=null),wn=0,Js=!1,25<=l)throw Error(o(301));if(l+=1,Ye=Le=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}E.H=Mm,u=t(a,s)}while(Js);return u}function Kv(){var e=E.H,t=e.useState()[0];return t=typeof t.then=="function"?In(t):t,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(de.flags|=1024),t}function oo(){var e=er!==0;return er=0,e}function uo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function co(e){if(Wi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Wi=!1}sa=0,Ye=Le=de=null,Js=!1,wn=er=0,Fs=null}function lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?de.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Je(){if(Le===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=Ye===null?de.memoizedState:Ye.next;if(t!==null)Ye=t,Le=e;else{if(e===null)throw de.alternate===null?Error(o(467)):Error(o(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Ye===null?de.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function tr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function In(e){var t=wn;return wn+=1,Fs===null&&(Fs=[]),e=wd(Fs,e,t),t=de,(Ye===null?t.memoizedState:Ye.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?Nm:qo),e}function ar(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return In(e);if(e.$$typeof===J)return at(e)}throw Error(o(438,String(e)))}function mo(e){var t=null,a=de.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=de.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=tr(),de.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=ee;return t.index++,a}function na(e,t){return typeof t=="function"?t(e):t}function sr(e){var t=Je();return po(t,Le,e)}function po(e,t,a){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=a;var l=e.baseQueue,u=s.pending;if(u!==null){if(l!==null){var f=l.next;l.next=u.next,u.next=f}t.baseQueue=l=u,s.pending=null}if(u=e.baseState,l===null)e.memoizedState=u;else{t=l.next;var x=f=null,S=null,N=t,P=!1;do{var I=N.lane&-536870913;if(I!==N.lane?(xe&I)===I:(sa&I)===I){var M=N.revertLane;if(M===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),I===Is&&(P=!0);else if((sa&M)===M){N=N.next,M===Is&&(P=!0);continue}else I={lane:0,revertLane:N.revertLane,gesture:null,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},S===null?(x=S=I,f=u):S=S.next=I,de.lanes|=M,Va|=M;I=N.action,fs&&a(u,I),u=N.hasEagerState?N.eagerState:a(u,I)}else M={lane:I,revertLane:N.revertLane,gesture:N.gesture,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},S===null?(x=S=M,f=u):S=S.next=M,de.lanes|=I,Va|=I;N=N.next}while(N!==null&&N!==t);if(S===null?f=u:S.next=x,!yt(u,e.memoizedState)&&(Qe=!0,P&&(a=Bs,a!==null)))throw a;e.memoizedState=u,e.baseState=f,e.baseQueue=S,s.lastRenderedState=u}return l===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function fo(e){var t=Je(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var s=a.dispatch,l=a.pending,u=t.memoizedState;if(l!==null){a.pending=null;var f=l=l.next;do u=e(u,f.action),f=f.next;while(f!==l);yt(u,t.memoizedState)||(Qe=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,s]}function Xd(e,t,a){var s=de,l=Je(),u=Se;if(u){if(a===void 0)throw Error(o(407));a=a()}else a=t();var f=!yt((Le||l).memoizedState,a);if(f&&(l.memoizedState=a,Qe=!0),l=l.queue,vo(Wd.bind(null,s,l,e),[e]),l.getSnapshot!==t||f||Ye!==null&&Ye.memoizedState.tag&1){if(s.flags|=2048,Ys(9,{destroy:void 0},$d.bind(null,s,l,a,t),null),Re===null)throw Error(o(349));u||(sa&127)!==0||Zd(s,t,a)}return a}function Zd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=de.updateQueue,t===null?(t=tr(),de.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function $d(e,t,a,s){t.value=a,t.getSnapshot=s,em(t)&&tm(e)}function Wd(e,t,a){return a(function(){em(t)&&tm(e)})}function em(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!yt(e,a)}catch{return!0}}function tm(e){var t=is(e,2);t!==null&&ht(t,e,2)}function ho(e){var t=lt();if(typeof e=="function"){var a=e;if(e=a(),fs){_a(!0);try{a()}finally{_a(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:e},t}function am(e,t,a,s){return e.baseState=a,po(e,Le,typeof s=="function"?s:na)}function Xv(e,t,a,s,l){if(rr(e))throw Error(o(485));if(e=t.action,e!==null){var u={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){u.listeners.push(f)}};E.T!==null?a(!0):u.isTransition=!1,s(u),a=t.pending,a===null?(u.next=t.pending=u,sm(t,u)):(u.next=a.next,t.pending=a.next=u)}}function sm(e,t){var a=t.action,s=t.payload,l=e.state;if(t.isTransition){var u=E.T,f={};E.T=f;try{var x=a(l,s),S=E.S;S!==null&&S(f,x),nm(e,t,x)}catch(N){go(e,t,N)}finally{u!==null&&f.types!==null&&(u.types=f.types),E.T=u}}else try{u=a(l,s),nm(e,t,u)}catch(N){go(e,t,N)}}function nm(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){im(e,t,s)},function(s){return go(e,t,s)}):im(e,t,a)}function im(e,t,a){t.status="fulfilled",t.value=a,rm(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,sm(e,a)))}function go(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,rm(t),t=t.next;while(t!==s)}e.action=null}function rm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lm(e,t){return t}function om(e,t){if(Se){var a=Re.formState;if(a!==null){e:{var s=de;if(Se){if(ze){t:{for(var l=ze,u=zt;l.nodeType!==8;){if(!u){l=null;break t}if(l=Vt(l.nextSibling),l===null){l=null;break t}}u=l.data,l=u==="F!"||u==="F"?l:null}if(l){ze=Vt(l.nextSibling),s=l.data==="F!";break e}}Aa(s)}s=!1}s&&(t=a[0])}}return a=lt(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lm,lastRenderedState:t},a.queue=s,a=Am.bind(null,de,s),s.dispatch=a,s=ho(!1),u=_o.bind(null,de,!1,s.queue),s=lt(),l={state:t,dispatch:null,action:e,pending:null},s.queue=l,a=Xv.bind(null,de,l,u,a),l.dispatch=a,s.memoizedState=e,[t,a,!1]}function um(e){var t=Je();return cm(t,Le,e)}function cm(e,t,a){if(t=po(e,t,lm)[0],e=sr(na)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=In(t)}catch(f){throw f===Gs?Yi:f}else s=t;t=Je();var l=t.queue,u=l.dispatch;return a!==t.memoizedState&&(de.flags|=2048,Ys(9,{destroy:void 0},Zv.bind(null,l,a),null)),[s,u,e]}function Zv(e,t){e.action=t}function dm(e){var t=Je(),a=Le;if(a!==null)return cm(t,a,e);Je(),t=t.memoizedState,a=Je();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Ys(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=de.updateQueue,t===null&&(t=tr(),de.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function mm(){return Je().memoizedState}function nr(e,t,a,s){var l=lt();de.flags|=e,l.memoizedState=Ys(1|t,{destroy:void 0},a,s===void 0?null:s)}function ir(e,t,a,s){var l=Je();s=s===void 0?null:s;var u=l.memoizedState.inst;Le!==null&&s!==null&&ro(s,Le.memoizedState.deps)?l.memoizedState=Ys(t,u,a,s):(de.flags|=e,l.memoizedState=Ys(1|t,u,a,s))}function pm(e,t){nr(8390656,8,e,t)}function vo(e,t){ir(2048,8,e,t)}function $v(e){de.flags|=4;var t=de.updateQueue;if(t===null)t=tr(),de.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function fm(e){var t=Je().memoizedState;return $v({ref:t,nextImpl:e}),function(){if((Ce&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function hm(e,t){return ir(4,2,e,t)}function gm(e,t){return ir(4,4,e,t)}function vm(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bm(e,t,a){a=a!=null?a.concat([e]):null,ir(4,4,vm.bind(null,t,e),a)}function bo(){}function xm(e,t){var a=Je();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&ro(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function ym(e,t){var a=Je();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&ro(t,s[1]))return s[0];if(s=e(),fs){_a(!0);try{e()}finally{_a(!1)}}return a.memoizedState=[s,t],s}function xo(e,t,a){return a===void 0||(sa&1073741824)!==0&&(xe&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Sp(),de.lanes|=e,Va|=e,a)}function Sm(e,t,a,s){return yt(a,t)?a:ks.current!==null?(e=xo(e,a,s),yt(e,t)||(Qe=!0),e):(sa&42)===0||(sa&1073741824)!==0&&(xe&261930)===0?(Qe=!0,e.memoizedState=a):(e=Sp(),de.lanes|=e,Va|=e,t)}function _m(e,t,a,s,l){var u=k.p;k.p=u!==0&&8>u?u:8;var f=E.T,x={};E.T=x,_o(e,!1,t,a);try{var S=l(),N=E.S;if(N!==null&&N(x,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var P=Yv(S,s);Bn(e,t,P,jt(e))}else Bn(e,t,s,jt(e))}catch(I){Bn(e,t,{then:function(){},status:"rejected",reason:I},jt())}finally{k.p=u,f!==null&&x.types!==null&&(f.types=x.types),E.T=f}}function Wv(){}function yo(e,t,a,s){if(e.tag!==5)throw Error(o(476));var l=qm(e).queue;_m(e,l,t,ae,a===null?Wv:function(){return Tm(e),a(s)})}function qm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:ae},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Tm(e){var t=qm(e);t.next===null&&(t=e.alternate.memoizedState),Bn(e,t.next.queue,{},jt())}function So(){return at(ni)}function Cm(){return Je().memoizedState}function jm(){return Je().memoizedState}function eb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=jt();e=Na(a);var s=Ma(t,e,a);s!==null&&(ht(s,t,a),Vn(s,t,a)),t={cache:Kl()},e.payload=t;return}t=t.return}}function tb(e,t,a){var s=jt();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},rr(e)?Dm(t,a):(a=Ul(e,t,a,s),a!==null&&(ht(a,e,s),Lm(a,t,s)))}function Am(e,t,a){var s=jt();Bn(e,t,a,s)}function Bn(e,t,a,s){var l={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(rr(e))Dm(t,l);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var f=t.lastRenderedState,x=u(f,a);if(l.hasEagerState=!0,l.eagerState=x,yt(x,f))return Ii(e,t,l,0),Re===null&&wi(),!1}catch{}finally{}if(a=Ul(e,t,l,s),a!==null)return ht(a,e,s),Lm(a,t,s),!0}return!1}function _o(e,t,a,s){if(s={lane:2,revertLane:eu(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},rr(e)){if(t)throw Error(o(479))}else t=Ul(e,a,s,2),t!==null&&ht(t,e,2)}function rr(e){var t=e.alternate;return e===de||t!==null&&t===de}function Dm(e,t){Js=Wi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Lm(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,zc(e,a)}}var Gn={readContext:at,use:ar,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie,useHostTransitionStatus:Ie,useFormState:Ie,useActionState:Ie,useOptimistic:Ie,useMemoCache:Ie,useCacheRefresh:Ie};Gn.useEffectEvent=Ie;var Nm={readContext:at,use:ar,useCallback:function(e,t){return lt().memoizedState=[e,t===void 0?null:t],e},useContext:at,useEffect:pm,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,nr(4194308,4,vm.bind(null,t,e),a)},useLayoutEffect:function(e,t){return nr(4194308,4,e,t)},useInsertionEffect:function(e,t){nr(4,2,e,t)},useMemo:function(e,t){var a=lt();t=t===void 0?null:t;var s=e();if(fs){_a(!0);try{e()}finally{_a(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=lt();if(a!==void 0){var l=a(t);if(fs){_a(!0);try{a(t)}finally{_a(!1)}}}else l=t;return s.memoizedState=s.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},s.queue=e,e=e.dispatch=tb.bind(null,de,e),[s.memoizedState,e]},useRef:function(e){var t=lt();return e={current:e},t.memoizedState=e},useState:function(e){e=ho(e);var t=e.queue,a=Am.bind(null,de,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:bo,useDeferredValue:function(e,t){var a=lt();return xo(a,e,t)},useTransition:function(){var e=ho(!1);return e=_m.bind(null,de,e.queue,!0,!1),lt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=de,l=lt();if(Se){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),Re===null)throw Error(o(349));(xe&127)!==0||Zd(s,t,a)}l.memoizedState=a;var u={value:a,getSnapshot:t};return l.queue=u,pm(Wd.bind(null,s,u,e),[e]),s.flags|=2048,Ys(9,{destroy:void 0},$d.bind(null,s,u,a,t),null),a},useId:function(){var e=lt(),t=Re.identifierPrefix;if(Se){var a=kt,s=Ht;a=(s&~(1<<32-xt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=er++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Qv++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:So,useFormState:om,useActionState:om,useOptimistic:function(e){var t=lt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=_o.bind(null,de,!0,a),a.dispatch=t,[e,t]},useMemoCache:mo,useCacheRefresh:function(){return lt().memoizedState=eb.bind(null,de)},useEffectEvent:function(e){var t=lt(),a={impl:e};return t.memoizedState=a,function(){if((Ce&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},qo={readContext:at,use:ar,useCallback:xm,useContext:at,useEffect:vo,useImperativeHandle:bm,useInsertionEffect:hm,useLayoutEffect:gm,useMemo:ym,useReducer:sr,useRef:mm,useState:function(){return sr(na)},useDebugValue:bo,useDeferredValue:function(e,t){var a=Je();return Sm(a,Le.memoizedState,e,t)},useTransition:function(){var e=sr(na)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:In(e),t]},useSyncExternalStore:Xd,useId:Cm,useHostTransitionStatus:So,useFormState:um,useActionState:um,useOptimistic:function(e,t){var a=Je();return am(a,Le,e,t)},useMemoCache:mo,useCacheRefresh:jm};qo.useEffectEvent=fm;var Mm={readContext:at,use:ar,useCallback:xm,useContext:at,useEffect:vo,useImperativeHandle:bm,useInsertionEffect:hm,useLayoutEffect:gm,useMemo:ym,useReducer:fo,useRef:mm,useState:function(){return fo(na)},useDebugValue:bo,useDeferredValue:function(e,t){var a=Je();return Le===null?xo(a,e,t):Sm(a,Le.memoizedState,e,t)},useTransition:function(){var e=fo(na)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:In(e),t]},useSyncExternalStore:Xd,useId:Cm,useHostTransitionStatus:So,useFormState:dm,useActionState:dm,useOptimistic:function(e,t){var a=Je();return Le!==null?am(a,Le,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:mo,useCacheRefresh:jm};Mm.useEffectEvent=fm;function To(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:b({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Co={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=jt(),l=Na(s);l.payload=t,a!=null&&(l.callback=a),t=Ma(e,l,s),t!==null&&(ht(t,e,s),Vn(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=jt(),l=Na(s);l.tag=1,l.payload=t,a!=null&&(l.callback=a),t=Ma(e,l,s),t!==null&&(ht(t,e,s),Vn(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=jt(),s=Na(a);s.tag=2,t!=null&&(s.callback=t),t=Ma(e,s,a),t!==null&&(ht(t,e,a),Vn(t,e,a))}};function Em(e,t,a,s,l,u,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,f):t.prototype&&t.prototype.isPureReactComponent?!Dn(a,s)||!Dn(l,u):!0}function Rm(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&Co.enqueueReplaceState(t,t.state,null)}function hs(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=b({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}function zm(e){Ui(e)}function Om(e){console.error(e)}function Vm(e){Ui(e)}function lr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Pm(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function jo(e,t,a){return a=Na(a),a.tag=3,a.payload={element:null},a.callback=function(){lr(e,t)},a}function Um(e){return e=Na(e),e.tag=3,e}function wm(e,t,a,s){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var u=s.value;e.payload=function(){return l(u)},e.callback=function(){Pm(t,a,s)}}var f=a.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){Pm(t,a,s),typeof l!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})})}function ab(e,t,a,s,l){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&ws(t,a,l,!0),a=_t.current,a!==null){switch(a.tag){case 31:case 13:return Ot===null?xr():a.alternate===null&&Be===0&&(Be=3),a.flags&=-257,a.flags|=65536,a.lanes=l,s===Qi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Zo(e,s,l)),!1;case 22:return a.flags|=65536,s===Qi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Zo(e,s,l)),!1}throw Error(o(435,a.tag))}return Zo(e,s,l),xr(),!1}if(Se)return t=_t.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,s!==kl&&(e=Error(o(422),{cause:s}),Mn(Mt(e,a)))):(s!==kl&&(t=Error(o(423),{cause:s}),Mn(Mt(t,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,s=Mt(s,a),l=jo(e.stateNode,s,l),to(e,l),Be!==4&&(Be=2)),!1;var u=Error(o(520),{cause:s});if(u=Mt(u,a),Xn===null?Xn=[u]:Xn.push(u),Be!==4&&(Be=2),t===null)return!0;s=Mt(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=jo(a.stateNode,s,e),to(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Pa===null||!Pa.has(u))))return a.flags|=65536,l&=-l,a.lanes|=l,l=Um(l),wm(l,e,a,s),to(a,l),!1}a=a.return}while(a!==null);return!1}var Ao=Error(o(461)),Qe=!1;function st(e,t,a,s){t.child=e===null?Hd(t,null,a,s):ps(t,e.child,a,s)}function Im(e,t,a,s,l){a=a.render;var u=t.ref;if("ref"in s){var f={};for(var x in s)x!=="ref"&&(f[x]=s[x])}else f=s;return us(t),s=lo(e,t,a,f,u,l),x=oo(),e!==null&&!Qe?(uo(e,t,l),ia(e,t,l)):(Se&&x&&Gl(t),t.flags|=1,st(e,t,s,l),t.child)}function Bm(e,t,a,s,l){if(e===null){var u=a.type;return typeof u=="function"&&!wl(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,Gm(e,t,u,s,l)):(e=Gi(a.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Oo(e,l)){var f=u.memoizedProps;if(a=a.compare,a=a!==null?a:Dn,a(f,s)&&e.ref===t.ref)return ia(e,t,l)}return t.flags|=1,e=Wt(u,s),e.ref=t.ref,e.return=t,t.child=e}function Gm(e,t,a,s,l){if(e!==null){var u=e.memoizedProps;if(Dn(u,s)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=s=u,Oo(e,l))(e.flags&131072)!==0&&(Qe=!0);else return t.lanes=e.lanes,ia(e,t,l)}return Do(e,t,a,s,l)}function Hm(e,t,a,s){var l=s.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(s=t.child=e.child,l=0;s!==null;)l=l|s.lanes|s.childLanes,s=s.sibling;s=l&~u}else s=0,t.child=null;return km(e,t,u,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Fi(t,u!==null?u.cachePool:null),u!==null?Fd(t,u):so(),Yd(t);else return s=t.lanes=536870912,km(e,t,u!==null?u.baseLanes|a:a,a,s)}else u!==null?(Fi(t,u.cachePool),Fd(t,u),Ra(),t.memoizedState=null):(e!==null&&Fi(t,null),so(),Ra());return st(e,t,l,a),t.child}function Hn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function km(e,t,a,s,l){var u=Zl();return u=u===null?null:{parent:Fe._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&Fi(t,null),so(),Yd(t),e!==null&&ws(e,t,s,!0),t.childLanes=l,null}function or(e,t){return t=cr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Jm(e,t,a){return ps(t,e.child,null,a),e=or(t,t.pendingProps),e.flags|=2,qt(t),t.memoizedState=null,e}function sb(e,t,a){var s=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Se){if(s.mode==="hidden")return e=or(t,s),t.lanes=536870912,Hn(null,e);if(io(t),(e=ze)?(e=sf(e,zt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ca!==null?{id:Ht,overflow:kt}:null,retryLane:536870912,hydrationErrors:null},a=Dd(e),a.return=t,t.child=a,tt=t,ze=null)):e=null,e===null)throw Aa(t);return t.lanes=536870912,null}return or(t,s)}var u=e.memoizedState;if(u!==null){var f=u.dehydrated;if(io(t),l)if(t.flags&256)t.flags&=-257,t=Jm(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Qe||ws(e,t,a,!1),l=(a&e.childLanes)!==0,Qe||l){if(s=Re,s!==null&&(f=Oc(s,a),f!==0&&f!==u.retryLane))throw u.retryLane=f,is(e,f),ht(s,e,f),Ao;xr(),t=Jm(e,t,a)}else e=u.treeContext,ze=Vt(f.nextSibling),tt=t,Se=!0,ja=null,zt=!1,e!==null&&Md(t,e),t=or(t,s),t.flags|=4096;return t}return e=Wt(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ur(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Do(e,t,a,s,l){return us(t),a=lo(e,t,a,s,void 0,l),s=oo(),e!==null&&!Qe?(uo(e,t,l),ia(e,t,l)):(Se&&s&&Gl(t),t.flags|=1,st(e,t,a,l),t.child)}function Fm(e,t,a,s,l,u){return us(t),t.updateQueue=null,a=Kd(t,s,a,l),Qd(e),s=oo(),e!==null&&!Qe?(uo(e,t,u),ia(e,t,u)):(Se&&s&&Gl(t),t.flags|=1,st(e,t,a,u),t.child)}function Ym(e,t,a,s,l){if(us(t),t.stateNode===null){var u=Os,f=a.contextType;typeof f=="object"&&f!==null&&(u=at(f)),u=new a(s,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Co,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=s,u.state=t.memoizedState,u.refs={},Wl(t),f=a.contextType,u.context=typeof f=="object"&&f!==null?at(f):Os,u.state=t.memoizedState,f=a.getDerivedStateFromProps,typeof f=="function"&&(To(t,a,f,s),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(f=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),f!==u.state&&Co.enqueueReplaceState(u,u.state,null),Un(t,s,u,l),Pn(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){u=t.stateNode;var x=t.memoizedProps,S=hs(a,x);u.props=S;var N=u.context,P=a.contextType;f=Os,typeof P=="object"&&P!==null&&(f=at(P));var I=a.getDerivedStateFromProps;P=typeof I=="function"||typeof u.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,P||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(x||N!==f)&&Rm(t,u,s,f),La=!1;var M=t.memoizedState;u.state=M,Un(t,s,u,l),Pn(),N=t.memoizedState,x||M!==N||La?(typeof I=="function"&&(To(t,a,I,s),N=t.memoizedState),(S=La||Em(t,a,S,s,M,N,f))?(P||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=N),u.props=s,u.state=N,u.context=f,s=S):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,eo(e,t),f=t.memoizedProps,P=hs(a,f),u.props=P,I=t.pendingProps,M=u.context,N=a.contextType,S=Os,typeof N=="object"&&N!==null&&(S=at(N)),x=a.getDerivedStateFromProps,(N=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==I||M!==S)&&Rm(t,u,s,S),La=!1,M=t.memoizedState,u.state=M,Un(t,s,u,l),Pn();var R=t.memoizedState;f!==I||M!==R||La||e!==null&&e.dependencies!==null&&ki(e.dependencies)?(typeof x=="function"&&(To(t,a,x,s),R=t.memoizedState),(P=La||Em(t,a,P,s,M,R,S)||e!==null&&e.dependencies!==null&&ki(e.dependencies))?(N||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,R,S),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,R,S)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=R),u.props=s,u.state=R,u.context=S,s=P):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),s=!1)}return u=s,ur(e,t),s=(t.flags&128)!==0,u||s?(u=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&s?(t.child=ps(t,e.child,null,l),t.child=ps(t,null,a,l)):st(e,t,a,l),t.memoizedState=u.state,e=t.child):e=ia(e,t,l),e}function Qm(e,t,a,s){return ls(),t.flags|=256,st(e,t,a,s),t.child}var Lo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function No(e){return{baseLanes:e,cachePool:Pd()}}function Mo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ct),e}function Km(e,t,a){var s=t.pendingProps,l=!1,u=(t.flags&128)!==0,f;if((f=u)||(f=e!==null&&e.memoizedState===null?!1:(ke.current&2)!==0),f&&(l=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Se){if(l?Ea(t):Ra(),(e=ze)?(e=sf(e,zt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ca!==null?{id:Ht,overflow:kt}:null,retryLane:536870912,hydrationErrors:null},a=Dd(e),a.return=t,t.child=a,tt=t,ze=null)):e=null,e===null)throw Aa(t);return pu(e)?t.lanes=32:t.lanes=536870912,null}var x=s.children;return s=s.fallback,l?(Ra(),l=t.mode,x=cr({mode:"hidden",children:x},l),s=rs(s,l,a,null),x.return=t,s.return=t,x.sibling=s,t.child=x,s=t.child,s.memoizedState=No(a),s.childLanes=Mo(e,f,a),t.memoizedState=Lo,Hn(null,s)):(Ea(t),Eo(t,x))}var S=e.memoizedState;if(S!==null&&(x=S.dehydrated,x!==null)){if(u)t.flags&256?(Ea(t),t.flags&=-257,t=Ro(e,t,a)):t.memoizedState!==null?(Ra(),t.child=e.child,t.flags|=128,t=null):(Ra(),x=s.fallback,l=t.mode,s=cr({mode:"visible",children:s.children},l),x=rs(x,l,a,null),x.flags|=2,s.return=t,x.return=t,s.sibling=x,t.child=s,ps(t,e.child,null,a),s=t.child,s.memoizedState=No(a),s.childLanes=Mo(e,f,a),t.memoizedState=Lo,t=Hn(null,s));else if(Ea(t),pu(x)){if(f=x.nextSibling&&x.nextSibling.dataset,f)var N=f.dgst;f=N,s=Error(o(419)),s.stack="",s.digest=f,Mn({value:s,source:null,stack:null}),t=Ro(e,t,a)}else if(Qe||ws(e,t,a,!1),f=(a&e.childLanes)!==0,Qe||f){if(f=Re,f!==null&&(s=Oc(f,a),s!==0&&s!==S.retryLane))throw S.retryLane=s,is(e,s),ht(f,e,s),Ao;mu(x)||xr(),t=Ro(e,t,a)}else mu(x)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,ze=Vt(x.nextSibling),tt=t,Se=!0,ja=null,zt=!1,e!==null&&Md(t,e),t=Eo(t,s.children),t.flags|=4096);return t}return l?(Ra(),x=s.fallback,l=t.mode,S=e.child,N=S.sibling,s=Wt(S,{mode:"hidden",children:s.children}),s.subtreeFlags=S.subtreeFlags&65011712,N!==null?x=Wt(N,x):(x=rs(x,l,a,null),x.flags|=2),x.return=t,s.return=t,s.sibling=x,t.child=s,Hn(null,s),s=t.child,x=e.child.memoizedState,x===null?x=No(a):(l=x.cachePool,l!==null?(S=Fe._currentValue,l=l.parent!==S?{parent:S,pool:S}:l):l=Pd(),x={baseLanes:x.baseLanes|a,cachePool:l}),s.memoizedState=x,s.childLanes=Mo(e,f,a),t.memoizedState=Lo,Hn(e.child,s)):(Ea(t),a=e.child,e=a.sibling,a=Wt(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=a,t.memoizedState=null,a)}function Eo(e,t){return t=cr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function cr(e,t){return e=St(22,e,null,t),e.lanes=0,e}function Ro(e,t,a){return ps(t,e.child,null,a),e=Eo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xm(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Yl(e.return,t,a)}function zo(e,t,a,s,l,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:l,treeForkCount:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=s,f.tail=a,f.tailMode=l,f.treeForkCount=u)}function Zm(e,t,a){var s=t.pendingProps,l=s.revealOrder,u=s.tail;s=s.children;var f=ke.current,x=(f&2)!==0;if(x?(f=f&1|2,t.flags|=128):f&=1,F(ke,f),st(e,t,s,a),s=Se?Nn:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xm(e,a,t);else if(e.tag===19)Xm(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(a=t.child,l=null;a!==null;)e=a.alternate,e!==null&&$i(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=t.child,t.child=null):(l=a.sibling,a.sibling=null),zo(t,!1,l,a,u,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&$i(e)===null){t.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}zo(t,!0,a,null,u,s);break;case"together":zo(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function ia(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Va|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ws(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=Wt(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Wt(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Oo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ki(e)))}function nb(e,t,a){switch(t.tag){case 3:rt(t,t.stateNode.containerInfo),Da(t,Fe,e.memoizedState.cache),ls();break;case 27:case 5:hn(t);break;case 4:rt(t,t.stateNode.containerInfo);break;case 10:Da(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,io(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Ea(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Km(e,t,a):(Ea(t),e=ia(e,t,a),e!==null?e.sibling:null);Ea(t);break;case 19:var l=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(ws(e,t,a,!1),s=(a&t.childLanes)!==0),l){if(s)return Zm(e,t,a);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),F(ke,ke.current),s)break;return null;case 22:return t.lanes=0,Hm(e,t,a,t.pendingProps);case 24:Da(t,Fe,e.memoizedState.cache)}return ia(e,t,a)}function $m(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Qe=!0;else{if(!Oo(e,a)&&(t.flags&128)===0)return Qe=!1,nb(e,t,a);Qe=(e.flags&131072)!==0}else Qe=!1,Se&&(t.flags&1048576)!==0&&Nd(t,Nn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=ds(t.elementType),t.type=e,typeof e=="function")wl(e)?(s=hs(e,s),t.tag=1,t=Ym(null,t,e,s,a)):(t.tag=0,t=Do(null,t,e,s,a));else{if(e!=null){var l=e.$$typeof;if(l===$){t.tag=11,t=Im(null,t,e,s,a);break e}else if(l===H){t.tag=14,t=Bm(null,t,e,s,a);break e}}throw t=me(e)||e,Error(o(306,t,""))}}return t;case 0:return Do(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,l=hs(s,t.pendingProps),Ym(e,t,s,l,a);case 3:e:{if(rt(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var u=t.memoizedState;l=u.element,eo(e,t),Un(t,s,null,a);var f=t.memoizedState;if(s=f.cache,Da(t,Fe,s),s!==u.cache&&Ql(t,[Fe],a,!0),Pn(),s=f.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Qm(e,t,s,a);break e}else if(s!==l){l=Mt(Error(o(424)),t),Mn(l),t=Qm(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ze=Vt(e.firstChild),tt=t,Se=!0,ja=null,zt=!0,a=Hd(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ls(),s===l){t=ia(e,t,a);break e}st(e,t,s,a)}t=t.child}return t;case 26:return ur(e,t),e===null?(a=cf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Se||(a=t.type,e=t.pendingProps,s=jr(ge.current).createElement(a),s[et]=t,s[ut]=e,nt(s,a,e),$e(s),t.stateNode=s):t.memoizedState=cf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return hn(t),e===null&&Se&&(s=t.stateNode=lf(t.type,t.pendingProps,ge.current),tt=t,zt=!0,l=ze,Ba(t.type)?(fu=l,ze=Vt(s.firstChild)):ze=l),st(e,t,t.pendingProps.children,a),ur(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Se&&((l=s=ze)&&(s=zb(s,t.type,t.pendingProps,zt),s!==null?(t.stateNode=s,tt=t,ze=Vt(s.firstChild),zt=!1,l=!0):l=!1),l||Aa(t)),hn(t),l=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,s=u.children,uu(l,u)?s=null:f!==null&&uu(l,f)&&(t.flags|=32),t.memoizedState!==null&&(l=lo(e,t,Kv,null,null,a),ni._currentValue=l),ur(e,t),st(e,t,s,a),t.child;case 6:return e===null&&Se&&((e=a=ze)&&(a=Ob(a,t.pendingProps,zt),a!==null?(t.stateNode=a,tt=t,ze=null,e=!0):e=!1),e||Aa(t)),null;case 13:return Km(e,t,a);case 4:return rt(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ps(t,null,s,a):st(e,t,s,a),t.child;case 11:return Im(e,t,t.type,t.pendingProps,a);case 7:return st(e,t,t.pendingProps,a),t.child;case 8:return st(e,t,t.pendingProps.children,a),t.child;case 12:return st(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,Da(t,t.type,s.value),st(e,t,s.children,a),t.child;case 9:return l=t.type._context,s=t.pendingProps.children,us(t),l=at(l),s=s(l),t.flags|=1,st(e,t,s,a),t.child;case 14:return Bm(e,t,t.type,t.pendingProps,a);case 15:return Gm(e,t,t.type,t.pendingProps,a);case 19:return Zm(e,t,a);case 31:return sb(e,t,a);case 22:return Hm(e,t,a,t.pendingProps);case 24:return us(t),s=at(Fe),e===null?(l=Zl(),l===null&&(l=Re,u=Kl(),l.pooledCache=u,u.refCount++,u!==null&&(l.pooledCacheLanes|=a),l=u),t.memoizedState={parent:s,cache:l},Wl(t),Da(t,Fe,l)):((e.lanes&a)!==0&&(eo(e,t),Un(t,null,null,a),Pn()),l=e.memoizedState,u=t.memoizedState,l.parent!==s?(l={parent:s,cache:s},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),Da(t,Fe,s)):(s=u.cache,Da(t,Fe,s),s!==l.cache&&Ql(t,[Fe],a,!0))),st(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ra(e){e.flags|=4}function Vo(e,t,a,s,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Cp())e.flags|=8192;else throw ms=Qi,$l}else e.flags&=-16777217}function Wm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!hf(t))if(Cp())e.flags|=8192;else throw ms=Qi,$l}function dr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ec():536870912,e.lanes|=t,Zs|=t)}function kn(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,s|=l.subtreeFlags&65011712,s|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function ib(e,t,a){var s=t.pendingProps;switch(Hl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return Oe(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),aa(Fe),He(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Us(t)?ra(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Jl())),Oe(t),null;case 26:var l=t.type,u=t.memoizedState;return e===null?(ra(t),u!==null?(Oe(t),Wm(t,u)):(Oe(t),Vo(t,l,null,s,a))):u?u!==e.memoizedState?(ra(t),Oe(t),Wm(t,u)):(Oe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&ra(t),Oe(t),Vo(t,l,e,s,a)),null;case 27:if(_i(t),a=ge.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ra(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return Oe(t),null}e=X.current,Us(t)?Ed(t):(e=lf(l,s,a),t.stateNode=e,ra(t))}return Oe(t),null;case 5:if(_i(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ra(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return Oe(t),null}if(u=X.current,Us(t))Ed(t);else{var f=jr(ge.current);switch(u){case 1:u=f.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:u=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":u=f.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":u=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":u=f.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof s.is=="string"?f.createElement("select",{is:s.is}):f.createElement("select"),s.multiple?u.multiple=!0:s.size&&(u.size=s.size);break;default:u=typeof s.is=="string"?f.createElement(l,{is:s.is}):f.createElement(l)}}u[et]=t,u[ut]=s;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)u.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=u;e:switch(nt(u,l,s),l){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ra(t)}}return Oe(t),Vo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ra(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=ge.current,Us(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,l=tt,l!==null)switch(l.tag){case 27:case 5:s=l.memoizedProps}e[et]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||Kp(e.nodeValue,a)),e||Aa(t,!0)}else e=jr(e).createTextNode(s),e[et]=t,t.stateNode=e}return Oe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=Us(t),a!==null){if(e===null){if(!s)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[et]=t}else ls(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Oe(t),e=!1}else a=Jl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(qt(t),t):(qt(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Oe(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Us(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(o(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));l[et]=t}else ls(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Oe(t),l=!1}else l=Jl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(qt(t),t):(qt(t),null)}return qt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,l=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(l=s.alternate.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),dr(t,t.updateQueue),Oe(t),null);case 4:return He(),e===null&&nu(t.stateNode.containerInfo),Oe(t),null;case 10:return aa(t.type),Oe(t),null;case 19:if(U(ke),s=t.memoizedState,s===null)return Oe(t),null;if(l=(t.flags&128)!==0,u=s.rendering,u===null)if(l)kn(s,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=$i(e),u!==null){for(t.flags|=128,kn(s,!1),e=u.updateQueue,t.updateQueue=e,dr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Ad(a,e),a=a.sibling;return F(ke,ke.current&1|2),Se&&ea(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&vt()>gr&&(t.flags|=128,l=!0,kn(s,!1),t.lanes=4194304)}else{if(!l)if(e=$i(u),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,dr(t,e),kn(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!Se)return Oe(t),null}else 2*vt()-s.renderingStartTime>gr&&a!==536870912&&(t.flags|=128,l=!0,kn(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(e=s.last,e!==null?e.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vt(),e.sibling=null,a=ke.current,F(ke,l?a&1|2:a&1),Se&&ea(t,s.treeForkCount),e):(Oe(t),null);case 22:case 23:return qt(t),no(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),a=t.updateQueue,a!==null&&dr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&U(cs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),aa(Fe),Oe(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function rb(e,t){switch(Hl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return aa(Fe),He(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return _i(t),null;case 31:if(t.memoizedState!==null){if(qt(t),t.alternate===null)throw Error(o(340));ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return U(ke),null;case 4:return He(),null;case 10:return aa(t.type),null;case 22:case 23:return qt(t),no(),e!==null&&U(cs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return aa(Fe),null;case 25:return null;default:return null}}function ep(e,t){switch(Hl(t),t.tag){case 3:aa(Fe),He();break;case 26:case 27:case 5:_i(t);break;case 4:He();break;case 31:t.memoizedState!==null&&qt(t);break;case 13:qt(t);break;case 19:U(ke);break;case 10:aa(t.type);break;case 22:case 23:qt(t),no(),e!==null&&U(cs);break;case 24:aa(Fe)}}function Jn(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var l=s.next;a=l;do{if((a.tag&e)===e){s=void 0;var u=a.create,f=a.inst;s=u(),f.destroy=s}a=a.next}while(a!==l)}}catch(x){De(t,t.return,x)}}function za(e,t,a){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var u=l.next;s=u;do{if((s.tag&e)===e){var f=s.inst,x=f.destroy;if(x!==void 0){f.destroy=void 0,l=t;var S=a,N=x;try{N()}catch(P){De(l,S,P)}}}s=s.next}while(s!==u)}}catch(P){De(t,t.return,P)}}function tp(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Jd(t,a)}catch(s){De(e,e.return,s)}}}function ap(e,t,a){a.props=hs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){De(e,t,s)}}function Fn(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(l){De(e,t,l)}}function Jt(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(l){De(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){De(e,t,l)}else a.current=null}function sp(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(l){De(e,e.return,l)}}function Po(e,t,a){try{var s=e.stateNode;Db(s,e.type,a,t),s[ut]=t}catch(l){De(e,e.return,l)}}function np(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ba(e.type)||e.tag===4}function Uo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||np(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ba(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wo(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Zt));else if(s!==4&&(s===27&&Ba(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(wo(e,t,a),e=e.sibling;e!==null;)wo(e,t,a),e=e.sibling}function mr(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Ba(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(mr(e,t,a),e=e.sibling;e!==null;)mr(e,t,a),e=e.sibling}function ip(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);nt(t,s,a),t[et]=e,t[ut]=a}catch(u){De(e,e.return,u)}}var la=!1,Ke=!1,Io=!1,rp=typeof WeakSet=="function"?WeakSet:Set,We=null;function lb(e,t){if(e=e.containerInfo,lu=Rr,e=bd(e),El(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var l=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var f=0,x=-1,S=-1,N=0,P=0,I=e,M=null;t:for(;;){for(var R;I!==a||l!==0&&I.nodeType!==3||(x=f+l),I!==u||s!==0&&I.nodeType!==3||(S=f+s),I.nodeType===3&&(f+=I.nodeValue.length),(R=I.firstChild)!==null;)M=I,I=R;for(;;){if(I===e)break t;if(M===a&&++N===l&&(x=f),M===u&&++P===s&&(S=f),(R=I.nextSibling)!==null)break;I=M,M=I.parentNode}I=R}a=x===-1||S===-1?null:{start:x,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(ou={focusedElem:e,selectionRange:a},Rr=!1,We=t;We!==null;)if(t=We,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,We=e;else for(;We!==null;){switch(t=We,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)l=e[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,l=u.memoizedProps,u=u.memoizedState,s=a.stateNode;try{var Z=hs(a.type,l);e=s.getSnapshotBeforeUpdate(Z,u),s.__reactInternalSnapshotBeforeUpdate=e}catch(ne){De(a,a.return,ne)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)du(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":du(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,We=e;break}We=t.return}}function lp(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:ua(e,a),s&4&&Jn(5,a);break;case 1:if(ua(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(f){De(a,a.return,f)}else{var l=hs(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){De(a,a.return,f)}}s&64&&tp(a),s&512&&Fn(a,a.return);break;case 3:if(ua(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Jd(e,t)}catch(f){De(a,a.return,f)}}break;case 27:t===null&&s&4&&ip(a);case 26:case 5:ua(e,a),t===null&&s&4&&sp(a),s&512&&Fn(a,a.return);break;case 12:ua(e,a);break;case 31:ua(e,a),s&4&&cp(e,a);break;case 13:ua(e,a),s&4&&dp(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=gb.bind(null,a),Vb(e,a))));break;case 22:if(s=a.memoizedState!==null||la,!s){t=t!==null&&t.memoizedState!==null||Ke,l=la;var u=Ke;la=s,(Ke=t)&&!u?ca(e,a,(a.subtreeFlags&8772)!==0):ua(e,a),la=l,Ke=u}break;case 30:break;default:ua(e,a)}}function op(e){var t=e.alternate;t!==null&&(e.alternate=null,op(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&hl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ue=null,dt=!1;function oa(e,t,a){for(a=a.child;a!==null;)up(e,t,a),a=a.sibling}function up(e,t,a){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(gn,a)}catch{}switch(a.tag){case 26:Ke||Jt(a,t),oa(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ke||Jt(a,t);var s=Ue,l=dt;Ba(a.type)&&(Ue=a.stateNode,dt=!1),oa(e,t,a),ti(a.stateNode),Ue=s,dt=l;break;case 5:Ke||Jt(a,t);case 6:if(s=Ue,l=dt,Ue=null,oa(e,t,a),Ue=s,dt=l,Ue!==null)if(dt)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(a.stateNode)}catch(u){De(a,t,u)}else try{Ue.removeChild(a.stateNode)}catch(u){De(a,t,u)}break;case 18:Ue!==null&&(dt?(e=Ue,tf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),rn(e)):tf(Ue,a.stateNode));break;case 4:s=Ue,l=dt,Ue=a.stateNode.containerInfo,dt=!0,oa(e,t,a),Ue=s,dt=l;break;case 0:case 11:case 14:case 15:za(2,a,t),Ke||za(4,a,t),oa(e,t,a);break;case 1:Ke||(Jt(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&ap(a,t,s)),oa(e,t,a);break;case 21:oa(e,t,a);break;case 22:Ke=(s=Ke)||a.memoizedState!==null,oa(e,t,a),Ke=s;break;default:oa(e,t,a)}}function cp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{rn(e)}catch(a){De(t,t.return,a)}}}function dp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{rn(e)}catch(a){De(t,t.return,a)}}function ob(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new rp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new rp),t;default:throw Error(o(435,e.tag))}}function pr(e,t){var a=ob(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var l=vb.bind(null,e,s);s.then(l,l)}})}function mt(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var l=a[s],u=e,f=t,x=f;e:for(;x!==null;){switch(x.tag){case 27:if(Ba(x.type)){Ue=x.stateNode,dt=!1;break e}break;case 5:Ue=x.stateNode,dt=!1;break e;case 3:case 4:Ue=x.stateNode.containerInfo,dt=!0;break e}x=x.return}if(Ue===null)throw Error(o(160));up(u,f,l),Ue=null,dt=!1,u=l.alternate,u!==null&&(u.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)mp(t,e),t=t.sibling}var Bt=null;function mp(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:mt(t,e),pt(e),s&4&&(za(3,e,e.return),Jn(3,e),za(5,e,e.return));break;case 1:mt(t,e),pt(e),s&512&&(Ke||a===null||Jt(a,a.return)),s&64&&la&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var l=Bt;if(mt(t,e),pt(e),s&512&&(Ke||a===null||Jt(a,a.return)),s&4){var u=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(s){case"title":u=l.getElementsByTagName("title")[0],(!u||u[xn]||u[et]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=l.createElement(s),l.head.insertBefore(u,l.querySelector("head > title"))),nt(u,s,a),u[et]=e,$e(u),s=u;break e;case"link":var f=pf("link","href",l).get(s+(a.href||""));if(f){for(var x=0;x<f.length;x++)if(u=f[x],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){f.splice(x,1);break t}}u=l.createElement(s),nt(u,s,a),l.head.appendChild(u);break;case"meta":if(f=pf("meta","content",l).get(s+(a.content||""))){for(x=0;x<f.length;x++)if(u=f[x],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){f.splice(x,1);break t}}u=l.createElement(s),nt(u,s,a),l.head.appendChild(u);break;default:throw Error(o(468,s))}u[et]=e,$e(u),s=u}e.stateNode=s}else ff(l,e.type,e.stateNode);else e.stateNode=mf(l,s,e.memoizedProps);else u!==s?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,s===null?ff(l,e.type,e.stateNode):mf(l,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Po(e,e.memoizedProps,a.memoizedProps)}break;case 27:mt(t,e),pt(e),s&512&&(Ke||a===null||Jt(a,a.return)),a!==null&&s&4&&Po(e,e.memoizedProps,a.memoizedProps);break;case 5:if(mt(t,e),pt(e),s&512&&(Ke||a===null||Jt(a,a.return)),e.flags&32){l=e.stateNode;try{Ds(l,"")}catch(Z){De(e,e.return,Z)}}s&4&&e.stateNode!=null&&(l=e.memoizedProps,Po(e,l,a!==null?a.memoizedProps:l)),s&1024&&(Io=!0);break;case 6:if(mt(t,e),pt(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(Z){De(e,e.return,Z)}}break;case 3:if(Lr=null,l=Bt,Bt=Ar(t.containerInfo),mt(t,e),Bt=l,pt(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{rn(t.containerInfo)}catch(Z){De(e,e.return,Z)}Io&&(Io=!1,pp(e));break;case 4:s=Bt,Bt=Ar(e.stateNode.containerInfo),mt(t,e),pt(e),Bt=s;break;case 12:mt(t,e),pt(e);break;case 31:mt(t,e),pt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,pr(e,s)));break;case 13:mt(t,e),pt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hr=vt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,pr(e,s)));break;case 22:l=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,N=la,P=Ke;if(la=N||l,Ke=P||S,mt(t,e),Ke=P,la=N,pt(e),s&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(a===null||S||la||Ke||gs(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(u=S.stateNode,l)f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{x=S.stateNode;var I=S.memoizedProps.style,M=I!=null&&I.hasOwnProperty("display")?I.display:null;x.style.display=M==null||typeof M=="boolean"?"":(""+M).trim()}}catch(Z){De(S,S.return,Z)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=l?"":S.memoizedProps}catch(Z){De(S,S.return,Z)}}}else if(t.tag===18){if(a===null){S=t;try{var R=S.stateNode;l?af(R,!0):af(S.stateNode,!1)}catch(Z){De(S,S.return,Z)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,pr(e,a))));break;case 19:mt(t,e),pt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,pr(e,s)));break;case 30:break;case 21:break;default:mt(t,e),pt(e)}}function pt(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(np(s)){a=s;break}s=s.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var l=a.stateNode,u=Uo(e);mr(e,u,l);break;case 5:var f=a.stateNode;a.flags&32&&(Ds(f,""),a.flags&=-33);var x=Uo(e);mr(e,x,f);break;case 3:case 4:var S=a.stateNode.containerInfo,N=Uo(e);wo(e,N,S);break;default:throw Error(o(161))}}catch(P){De(e,e.return,P)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;pp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ua(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)lp(e,t.alternate,t),t=t.sibling}function gs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:za(4,t,t.return),gs(t);break;case 1:Jt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&ap(t,t.return,a),gs(t);break;case 27:ti(t.stateNode);case 26:case 5:Jt(t,t.return),gs(t);break;case 22:t.memoizedState===null&&gs(t);break;case 30:gs(t);break;default:gs(t)}e=e.sibling}}function ca(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,l=e,u=t,f=u.flags;switch(u.tag){case 0:case 11:case 15:ca(l,u,a),Jn(4,u);break;case 1:if(ca(l,u,a),s=u,l=s.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(N){De(s,s.return,N)}if(s=u,l=s.updateQueue,l!==null){var x=s.stateNode;try{var S=l.shared.hiddenCallbacks;if(S!==null)for(l.shared.hiddenCallbacks=null,l=0;l<S.length;l++)kd(S[l],x)}catch(N){De(s,s.return,N)}}a&&f&64&&tp(u),Fn(u,u.return);break;case 27:ip(u);case 26:case 5:ca(l,u,a),a&&s===null&&f&4&&sp(u),Fn(u,u.return);break;case 12:ca(l,u,a);break;case 31:ca(l,u,a),a&&f&4&&cp(l,u);break;case 13:ca(l,u,a),a&&f&4&&dp(l,u);break;case 22:u.memoizedState===null&&ca(l,u,a),Fn(u,u.return);break;case 30:break;default:ca(l,u,a)}t=t.sibling}}function Bo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&En(a))}function Go(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&En(e))}function Gt(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fp(e,t,a,s),t=t.sibling}function fp(e,t,a,s){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Gt(e,t,a,s),l&2048&&Jn(9,t);break;case 1:Gt(e,t,a,s);break;case 3:Gt(e,t,a,s),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&En(e)));break;case 12:if(l&2048){Gt(e,t,a,s),e=t.stateNode;try{var u=t.memoizedProps,f=u.id,x=u.onPostCommit;typeof x=="function"&&x(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){De(t,t.return,S)}}else Gt(e,t,a,s);break;case 31:Gt(e,t,a,s);break;case 13:Gt(e,t,a,s);break;case 23:break;case 22:u=t.stateNode,f=t.alternate,t.memoizedState!==null?u._visibility&2?Gt(e,t,a,s):Yn(e,t):u._visibility&2?Gt(e,t,a,s):(u._visibility|=2,Qs(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Bo(f,t);break;case 24:Gt(e,t,a,s),l&2048&&Go(t.alternate,t);break;default:Gt(e,t,a,s)}}function Qs(e,t,a,s,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,f=t,x=a,S=s,N=f.flags;switch(f.tag){case 0:case 11:case 15:Qs(u,f,x,S,l),Jn(8,f);break;case 23:break;case 22:var P=f.stateNode;f.memoizedState!==null?P._visibility&2?Qs(u,f,x,S,l):Yn(u,f):(P._visibility|=2,Qs(u,f,x,S,l)),l&&N&2048&&Bo(f.alternate,f);break;case 24:Qs(u,f,x,S,l),l&&N&2048&&Go(f.alternate,f);break;default:Qs(u,f,x,S,l)}t=t.sibling}}function Yn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,l=s.flags;switch(s.tag){case 22:Yn(a,s),l&2048&&Bo(s.alternate,s);break;case 24:Yn(a,s),l&2048&&Go(s.alternate,s);break;default:Yn(a,s)}t=t.sibling}}var Qn=8192;function Ks(e,t,a){if(e.subtreeFlags&Qn)for(e=e.child;e!==null;)hp(e,t,a),e=e.sibling}function hp(e,t,a){switch(e.tag){case 26:Ks(e,t,a),e.flags&Qn&&e.memoizedState!==null&&Qb(a,Bt,e.memoizedState,e.memoizedProps);break;case 5:Ks(e,t,a);break;case 3:case 4:var s=Bt;Bt=Ar(e.stateNode.containerInfo),Ks(e,t,a),Bt=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Qn,Qn=16777216,Ks(e,t,a),Qn=s):Ks(e,t,a));break;default:Ks(e,t,a)}}function gp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Kn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];We=s,bp(s,e)}gp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vp(e),e=e.sibling}function vp(e){switch(e.tag){case 0:case 11:case 15:Kn(e),e.flags&2048&&za(9,e,e.return);break;case 3:Kn(e);break;case 12:Kn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,fr(e)):Kn(e);break;default:Kn(e)}}function fr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];We=s,bp(s,e)}gp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:za(8,t,t.return),fr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,fr(t));break;default:fr(t)}e=e.sibling}}function bp(e,t){for(;We!==null;){var a=We;switch(a.tag){case 0:case 11:case 15:za(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:En(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,We=s;else e:for(a=e;We!==null;){s=We;var l=s.sibling,u=s.return;if(op(s),s===a){We=null;break e}if(l!==null){l.return=u,We=l;break e}We=u}}}var ub={getCacheForType:function(e){var t=at(Fe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return at(Fe).controller.signal}},cb=typeof WeakMap=="function"?WeakMap:Map,Ce=0,Re=null,ve=null,xe=0,Ae=0,Tt=null,Oa=!1,Xs=!1,Ho=!1,da=0,Be=0,Va=0,vs=0,ko=0,Ct=0,Zs=0,Xn=null,ft=null,Jo=!1,hr=0,xp=0,gr=1/0,vr=null,Pa=null,Xe=0,Ua=null,$s=null,ma=0,Fo=0,Yo=null,yp=null,Zn=0,Qo=null;function jt(){return(Ce&2)!==0&&xe!==0?xe&-xe:E.T!==null?eu():Vc()}function Sp(){if(Ct===0)if((xe&536870912)===0||Se){var e=Ci;Ci<<=1,(Ci&3932160)===0&&(Ci=262144),Ct=e}else Ct=536870912;return e=_t.current,e!==null&&(e.flags|=32),Ct}function ht(e,t,a){(e===Re&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)&&(Ws(e,0),wa(e,xe,Ct,!1)),bn(e,a),((Ce&2)===0||e!==Re)&&(e===Re&&((Ce&2)===0&&(vs|=a),Be===4&&wa(e,xe,Ct,!1)),Ft(e))}function _p(e,t,a){if((Ce&6)!==0)throw Error(o(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||vn(e,t),l=s?pb(e,t):Xo(e,t,!0),u=s;do{if(l===0){Xs&&!s&&wa(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!db(a)){l=Xo(e,t,!1),u=!1;continue}if(l===2){if(u=t,e.errorRecoveryDisabledLanes&u)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var x=e;l=Xn;var S=x.current.memoizedState.isDehydrated;if(S&&(Ws(x,f).flags|=256),f=Xo(x,f,!1),f!==2){if(Ho&&!S){x.errorRecoveryDisabledLanes|=u,vs|=u,l=4;break e}u=ft,ft=l,u!==null&&(ft===null?ft=u:ft.push.apply(ft,u))}l=f}if(u=!1,l!==2)continue}}if(l===1){Ws(e,0),wa(e,t,0,!0);break}e:{switch(s=e,u=l,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:wa(s,t,Ct,!Oa);break e;case 2:ft=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(l=hr+300-vt(),10<l)){if(wa(s,t,Ct,!Oa),Ai(s,0,!0)!==0)break e;ma=t,s.timeoutHandle=Wp(qp.bind(null,s,a,ft,vr,Jo,t,Ct,vs,Zs,Oa,u,"Throttled",-0,0),l);break e}qp(s,a,ft,vr,Jo,t,Ct,vs,Zs,Oa,u,null,-0,0)}}break}while(!0);Ft(e)}function qp(e,t,a,s,l,u,f,x,S,N,P,I,M,R){if(e.timeoutHandle=-1,I=t.subtreeFlags,I&8192||(I&16785408)===16785408){I={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zt},hp(t,u,I);var Z=(u&62914560)===u?hr-vt():(u&4194048)===u?xp-vt():0;if(Z=Kb(I,Z),Z!==null){ma=u,e.cancelPendingCommit=Z(Mp.bind(null,e,t,u,a,s,l,f,x,S,P,I,null,M,R)),wa(e,u,f,!N);return}}Mp(e,t,u,a,s,l,f,x,S)}function db(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var l=a[s],u=l.getSnapshot;l=l.value;try{if(!yt(u(),l))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wa(e,t,a,s){t&=~ko,t&=~vs,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var l=t;0<l;){var u=31-xt(l),f=1<<u;s[u]=-1,l&=~f}a!==0&&Rc(e,a,t)}function br(){return(Ce&6)===0?($n(0),!1):!0}function Ko(){if(ve!==null){if(Ae===0)var e=ve.return;else e=ve,ta=os=null,co(e),Hs=null,zn=0,e=ve;for(;e!==null;)ep(e.alternate,e),e=e.return;ve=null}}function Ws(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Mb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ma=0,Ko(),Re=e,ve=a=Wt(e.current,null),xe=t,Ae=0,Tt=null,Oa=!1,Xs=vn(e,t),Ho=!1,Zs=Ct=ko=vs=Va=Be=0,ft=Xn=null,Jo=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var l=31-xt(s),u=1<<l;t|=e[l],s&=~u}return da=t,wi(),a}function Tp(e,t){de=null,E.H=Gn,t===Gs||t===Yi?(t=Id(),Ae=3):t===$l?(t=Id(),Ae=4):Ae=t===Ao?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Tt=t,ve===null&&(Be=1,lr(e,Mt(t,e.current)))}function Cp(){var e=_t.current;return e===null?!0:(xe&4194048)===xe?Ot===null:(xe&62914560)===xe||(xe&536870912)!==0?e===Ot:!1}function jp(){var e=E.H;return E.H=Gn,e===null?Gn:e}function Ap(){var e=E.A;return E.A=ub,e}function xr(){Be=4,Oa||(xe&4194048)!==xe&&_t.current!==null||(Xs=!0),(Va&134217727)===0&&(vs&134217727)===0||Re===null||wa(Re,xe,Ct,!1)}function Xo(e,t,a){var s=Ce;Ce|=2;var l=jp(),u=Ap();(Re!==e||xe!==t)&&(vr=null,Ws(e,t)),t=!1;var f=Be;e:do try{if(Ae!==0&&ve!==null){var x=ve,S=Tt;switch(Ae){case 8:Ko(),f=6;break e;case 3:case 2:case 9:case 6:_t.current===null&&(t=!0);var N=Ae;if(Ae=0,Tt=null,en(e,x,S,N),a&&Xs){f=0;break e}break;default:N=Ae,Ae=0,Tt=null,en(e,x,S,N)}}mb(),f=Be;break}catch(P){Tp(e,P)}while(!0);return t&&e.shellSuspendCounter++,ta=os=null,Ce=s,E.H=l,E.A=u,ve===null&&(Re=null,xe=0,wi()),f}function mb(){for(;ve!==null;)Dp(ve)}function pb(e,t){var a=Ce;Ce|=2;var s=jp(),l=Ap();Re!==e||xe!==t?(vr=null,gr=vt()+500,Ws(e,t)):Xs=vn(e,t);e:do try{if(Ae!==0&&ve!==null){t=ve;var u=Tt;t:switch(Ae){case 1:Ae=0,Tt=null,en(e,t,u,1);break;case 2:case 9:if(Ud(u)){Ae=0,Tt=null,Lp(t);break}t=function(){Ae!==2&&Ae!==9||Re!==e||(Ae=7),Ft(e)},u.then(t,t);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:Ud(u)?(Ae=0,Tt=null,Lp(t)):(Ae=0,Tt=null,en(e,t,u,7));break;case 5:var f=null;switch(ve.tag){case 26:f=ve.memoizedState;case 5:case 27:var x=ve;if(f?hf(f):x.stateNode.complete){Ae=0,Tt=null;var S=x.sibling;if(S!==null)ve=S;else{var N=x.return;N!==null?(ve=N,yr(N)):ve=null}break t}}Ae=0,Tt=null,en(e,t,u,5);break;case 6:Ae=0,Tt=null,en(e,t,u,6);break;case 8:Ko(),Be=6;break e;default:throw Error(o(462))}}fb();break}catch(P){Tp(e,P)}while(!0);return ta=os=null,E.H=s,E.A=l,Ce=a,ve!==null?0:(Re=null,xe=0,wi(),Be)}function fb(){for(;ve!==null&&!Pg();)Dp(ve)}function Dp(e){var t=$m(e.alternate,e,da);e.memoizedProps=e.pendingProps,t===null?yr(e):ve=t}function Lp(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Fm(a,t,t.pendingProps,t.type,void 0,xe);break;case 11:t=Fm(a,t,t.pendingProps,t.type.render,t.ref,xe);break;case 5:co(t);default:ep(a,t),t=ve=Ad(t,da),t=$m(a,t,da)}e.memoizedProps=e.pendingProps,t===null?yr(e):ve=t}function en(e,t,a,s){ta=os=null,co(t),Hs=null,zn=0;var l=t.return;try{if(ab(e,l,t,a,xe)){Be=1,lr(e,Mt(a,e.current)),ve=null;return}}catch(u){if(l!==null)throw ve=l,u;Be=1,lr(e,Mt(a,e.current)),ve=null;return}t.flags&32768?(Se||s===1?e=!0:Xs||(xe&536870912)!==0?e=!1:(Oa=e=!0,(s===2||s===9||s===3||s===6)&&(s=_t.current,s!==null&&s.tag===13&&(s.flags|=16384))),Np(t,e)):yr(t)}function yr(e){var t=e;do{if((t.flags&32768)!==0){Np(t,Oa);return}e=t.return;var a=ib(t.alternate,t,da);if(a!==null){ve=a;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);Be===0&&(Be=5)}function Np(e,t){do{var a=rb(e.alternate,e);if(a!==null){a.flags&=32767,ve=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ve=e;return}ve=e=a}while(e!==null);Be=6,ve=null}function Mp(e,t,a,s,l,u,f,x,S){e.cancelPendingCommit=null;do Sr();while(Xe!==0);if((Ce&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(u=t.lanes|t.childLanes,u|=Pl,Yg(e,a,u,f,x,S),e===Re&&(ve=Re=null,xe=0),$s=t,Ua=e,ma=a,Fo=u,Yo=l,yp=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,bb(qi,function(){return Vp(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=E.T,E.T=null,l=k.p,k.p=2,f=Ce,Ce|=4;try{lb(e,t,a)}finally{Ce=f,k.p=l,E.T=s}}Xe=1,Ep(),Rp(),zp()}}function Ep(){if(Xe===1){Xe=0;var e=Ua,t=$s,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=E.T,E.T=null;var s=k.p;k.p=2;var l=Ce;Ce|=4;try{mp(t,e);var u=ou,f=bd(e.containerInfo),x=u.focusedElem,S=u.selectionRange;if(f!==x&&x&&x.ownerDocument&&vd(x.ownerDocument.documentElement,x)){if(S!==null&&El(x)){var N=S.start,P=S.end;if(P===void 0&&(P=N),"selectionStart"in x)x.selectionStart=N,x.selectionEnd=Math.min(P,x.value.length);else{var I=x.ownerDocument||document,M=I&&I.defaultView||window;if(M.getSelection){var R=M.getSelection(),Z=x.textContent.length,ne=Math.min(S.start,Z),Me=S.end===void 0?ne:Math.min(S.end,Z);!R.extend&&ne>Me&&(f=Me,Me=ne,ne=f);var j=gd(x,ne),q=gd(x,Me);if(j&&q&&(R.rangeCount!==1||R.anchorNode!==j.node||R.anchorOffset!==j.offset||R.focusNode!==q.node||R.focusOffset!==q.offset)){var D=I.createRange();D.setStart(j.node,j.offset),R.removeAllRanges(),ne>Me?(R.addRange(D),R.extend(q.node,q.offset)):(D.setEnd(q.node,q.offset),R.addRange(D))}}}}for(I=[],R=x;R=R.parentNode;)R.nodeType===1&&I.push({element:R,left:R.scrollLeft,top:R.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<I.length;x++){var w=I[x];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Rr=!!lu,ou=lu=null}finally{Ce=l,k.p=s,E.T=a}}e.current=t,Xe=2}}function Rp(){if(Xe===2){Xe=0;var e=Ua,t=$s,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=E.T,E.T=null;var s=k.p;k.p=2;var l=Ce;Ce|=4;try{lp(e,t.alternate,t)}finally{Ce=l,k.p=s,E.T=a}}Xe=3}}function zp(){if(Xe===4||Xe===3){Xe=0,Ug();var e=Ua,t=$s,a=ma,s=yp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Xe=5:(Xe=0,$s=Ua=null,Op(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Pa=null),pl(a),t=t.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(gn,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=E.T,l=k.p,k.p=2,E.T=null;try{for(var u=e.onRecoverableError,f=0;f<s.length;f++){var x=s[f];u(x.value,{componentStack:x.stack})}}finally{E.T=t,k.p=l}}(ma&3)!==0&&Sr(),Ft(e),l=e.pendingLanes,(a&261930)!==0&&(l&42)!==0?e===Qo?Zn++:(Zn=0,Qo=e):Zn=0,$n(0)}}function Op(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,En(t)))}function Sr(){return Ep(),Rp(),zp(),Vp()}function Vp(){if(Xe!==5)return!1;var e=Ua,t=Fo;Fo=0;var a=pl(ma),s=E.T,l=k.p;try{k.p=32>a?32:a,E.T=null,a=Yo,Yo=null;var u=Ua,f=ma;if(Xe=0,$s=Ua=null,ma=0,(Ce&6)!==0)throw Error(o(331));var x=Ce;if(Ce|=4,vp(u.current),fp(u,u.current,f,a),Ce=x,$n(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(gn,u)}catch{}return!0}finally{k.p=l,E.T=s,Op(e,t)}}function Pp(e,t,a){t=Mt(a,t),t=jo(e.stateNode,t,2),e=Ma(e,t,2),e!==null&&(bn(e,2),Ft(e))}function De(e,t,a){if(e.tag===3)Pp(e,e,a);else for(;t!==null;){if(t.tag===3){Pp(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Pa===null||!Pa.has(s))){e=Mt(a,e),a=Um(2),s=Ma(t,a,2),s!==null&&(wm(a,s,t,e),bn(s,2),Ft(s));break}}t=t.return}}function Zo(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new cb;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(a)||(Ho=!0,l.add(a),e=hb.bind(null,e,t,a),t.then(e,e))}function hb(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Re===e&&(xe&a)===a&&(Be===4||Be===3&&(xe&62914560)===xe&&300>vt()-hr?(Ce&2)===0&&Ws(e,0):ko|=a,Zs===xe&&(Zs=0)),Ft(e)}function Up(e,t){t===0&&(t=Ec()),e=is(e,t),e!==null&&(bn(e,t),Ft(e))}function gb(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Up(e,a)}function vb(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),Up(e,a)}function bb(e,t){return ul(e,t)}var _r=null,tn=null,$o=!1,qr=!1,Wo=!1,Ia=0;function Ft(e){e!==tn&&e.next===null&&(tn===null?_r=tn=e:tn=tn.next=e),qr=!0,$o||($o=!0,yb())}function $n(e,t){if(!Wo&&qr){Wo=!0;do for(var a=!1,s=_r;s!==null;){if(e!==0){var l=s.pendingLanes;if(l===0)var u=0;else{var f=s.suspendedLanes,x=s.pingedLanes;u=(1<<31-xt(42|e)+1)-1,u&=l&~(f&~x),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Gp(s,u))}else u=xe,u=Ai(s,s===Re?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(u&3)===0||vn(s,u)||(a=!0,Gp(s,u));s=s.next}while(a);Wo=!1}}function xb(){wp()}function wp(){qr=$o=!1;var e=0;Ia!==0&&Nb()&&(e=Ia);for(var t=vt(),a=null,s=_r;s!==null;){var l=s.next,u=Ip(s,t);u===0?(s.next=null,a===null?_r=l:a.next=l,l===null&&(tn=a)):(a=s,(e!==0||(u&3)!==0)&&(qr=!0)),s=l}Xe!==0&&Xe!==5||$n(e),Ia!==0&&(Ia=0)}function Ip(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var f=31-xt(u),x=1<<f,S=l[f];S===-1?((x&a)===0||(x&s)!==0)&&(l[f]=Fg(x,t)):S<=t&&(e.expiredLanes|=x),u&=~x}if(t=Re,a=xe,a=Ai(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&cl(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||vn(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&cl(s),pl(a)){case 2:case 8:a=Nc;break;case 32:a=qi;break;case 268435456:a=Mc;break;default:a=qi}return s=Bp.bind(null,e),a=ul(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&cl(s),e.callbackPriority=2,e.callbackNode=null,2}function Bp(e,t){if(Xe!==0&&Xe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Sr()&&e.callbackNode!==a)return null;var s=xe;return s=Ai(e,e===Re?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(_p(e,s,t),Ip(e,vt()),e.callbackNode!=null&&e.callbackNode===a?Bp.bind(null,e):null)}function Gp(e,t){if(Sr())return null;_p(e,t,!0)}function yb(){Eb(function(){(Ce&6)!==0?ul(Lc,xb):wp()})}function eu(){if(Ia===0){var e=Is;e===0&&(e=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),Ia=e}return Ia}function Hp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Mi(""+e)}function kp(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Sb(e,t,a,s,l){if(t==="submit"&&a&&a.stateNode===l){var u=Hp((l[ut]||null).action),f=s.submitter;f&&(t=(t=f[ut]||null)?Hp(t.formAction):f.getAttribute("formAction"),t!==null&&(u=t,f=null));var x=new Oi("action","action",null,s,l);e.push({event:x,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ia!==0){var S=f?kp(l,f):new FormData(l);yo(a,{pending:!0,data:S,method:l.method,action:u},null,S)}}else typeof u=="function"&&(x.preventDefault(),S=f?kp(l,f):new FormData(l),yo(a,{pending:!0,data:S,method:l.method,action:u},u,S))},currentTarget:l}]})}}for(var tu=0;tu<Vl.length;tu++){var au=Vl[tu],_b=au.toLowerCase(),qb=au[0].toUpperCase()+au.slice(1);It(_b,"on"+qb)}It(Sd,"onAnimationEnd"),It(_d,"onAnimationIteration"),It(qd,"onAnimationStart"),It("dblclick","onDoubleClick"),It("focusin","onFocus"),It("focusout","onBlur"),It(wv,"onTransitionRun"),It(Iv,"onTransitionStart"),It(Bv,"onTransitionCancel"),It(Td,"onTransitionEnd"),js("onMouseEnter",["mouseout","mouseover"]),js("onMouseLeave",["mouseout","mouseover"]),js("onPointerEnter",["pointerout","pointerover"]),js("onPointerLeave",["pointerout","pointerover"]),ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wn));function Jp(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],l=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var f=s.length-1;0<=f;f--){var x=s[f],S=x.instance,N=x.currentTarget;if(x=x.listener,S!==u&&l.isPropagationStopped())break e;u=x,l.currentTarget=N;try{u(l)}catch(P){Ui(P)}l.currentTarget=null,u=S}else for(f=0;f<s.length;f++){if(x=s[f],S=x.instance,N=x.currentTarget,x=x.listener,S!==u&&l.isPropagationStopped())break e;u=x,l.currentTarget=N;try{u(l)}catch(P){Ui(P)}l.currentTarget=null,u=S}}}}function be(e,t){var a=t[fl];a===void 0&&(a=t[fl]=new Set);var s=e+"__bubble";a.has(s)||(Fp(t,e,2,!1),a.add(s))}function su(e,t,a){var s=0;t&&(s|=4),Fp(a,e,s,t)}var Tr="_reactListening"+Math.random().toString(36).slice(2);function nu(e){if(!e[Tr]){e[Tr]=!0,wc.forEach(function(a){a!=="selectionchange"&&(Tb.has(a)||su(a,!1,e),su(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tr]||(t[Tr]=!0,su("selectionchange",!1,t))}}function Fp(e,t,a,s){switch(_f(t)){case 2:var l=$b;break;case 8:l=Wb;break;default:l=xu}a=l.bind(null,t,a,e),l=void 0,!ql||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,a,{capture:!0,passive:l}):e.addEventListener(t,a,!0):l!==void 0?e.addEventListener(t,a,{passive:l}):e.addEventListener(t,a,!1)}function iu(e,t,a,s,l){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var x=s.stateNode.containerInfo;if(x===l)break;if(f===4)for(f=s.return;f!==null;){var S=f.tag;if((S===3||S===4)&&f.stateNode.containerInfo===l)return;f=f.return}for(;x!==null;){if(f=qs(x),f===null)return;if(S=f.tag,S===5||S===6||S===26||S===27){s=u=f;continue e}x=x.parentNode}}s=s.return}Zc(function(){var N=u,P=Sl(a),I=[];e:{var M=Cd.get(e);if(M!==void 0){var R=Oi,Z=e;switch(e){case"keypress":if(Ri(a)===0)break e;case"keydown":case"keyup":R=vv;break;case"focusin":Z="focus",R=Al;break;case"focusout":Z="blur",R=Al;break;case"beforeblur":case"afterblur":R=Al;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=ed;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=iv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=yv;break;case Sd:case _d:case qd:R=ov;break;case Td:R=_v;break;case"scroll":case"scrollend":R=sv;break;case"wheel":R=Tv;break;case"copy":case"cut":case"paste":R=cv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=ad;break;case"toggle":case"beforetoggle":R=jv}var ne=(t&4)!==0,Me=!ne&&(e==="scroll"||e==="scrollend"),j=ne?M!==null?M+"Capture":null:M;ne=[];for(var q=N,D;q!==null;){var w=q;if(D=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||D===null||j===null||(w=Sn(q,j),w!=null&&ne.push(ei(q,w,D))),Me)break;q=q.return}0<ne.length&&(M=new R(M,Z,null,a,P),I.push({event:M,listeners:ne}))}}if((t&7)===0){e:{if(M=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",M&&a!==yl&&(Z=a.relatedTarget||a.fromElement)&&(qs(Z)||Z[_s]))break e;if((R||M)&&(M=P.window===P?P:(M=P.ownerDocument)?M.defaultView||M.parentWindow:window,R?(Z=a.relatedTarget||a.toElement,R=N,Z=Z?qs(Z):null,Z!==null&&(Me=d(Z),ne=Z.tag,Z!==Me||ne!==5&&ne!==27&&ne!==6)&&(Z=null)):(R=null,Z=N),R!==Z)){if(ne=ed,w="onMouseLeave",j="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(ne=ad,w="onPointerLeave",j="onPointerEnter",q="pointer"),Me=R==null?M:yn(R),D=Z==null?M:yn(Z),M=new ne(w,q+"leave",R,a,P),M.target=Me,M.relatedTarget=D,w=null,qs(P)===N&&(ne=new ne(j,q+"enter",Z,a,P),ne.target=D,ne.relatedTarget=Me,w=ne),Me=w,R&&Z)t:{for(ne=Cb,j=R,q=Z,D=0,w=j;w;w=ne(w))D++;w=0;for(var se=q;se;se=ne(se))w++;for(;0<D-w;)j=ne(j),D--;for(;0<w-D;)q=ne(q),w--;for(;D--;){if(j===q||q!==null&&j===q.alternate){ne=j;break t}j=ne(j),q=ne(q)}ne=null}else ne=null;R!==null&&Yp(I,M,R,ne,!1),Z!==null&&Me!==null&&Yp(I,Me,Z,ne,!0)}}e:{if(M=N?yn(N):window,R=M.nodeName&&M.nodeName.toLowerCase(),R==="select"||R==="input"&&M.type==="file")var qe=cd;else if(od(M))if(dd)qe=Vv;else{qe=zv;var W=Rv}else R=M.nodeName,!R||R.toLowerCase()!=="input"||M.type!=="checkbox"&&M.type!=="radio"?N&&xl(N.elementType)&&(qe=cd):qe=Ov;if(qe&&(qe=qe(e,N))){ud(I,qe,a,P);break e}W&&W(e,M,N),e==="focusout"&&N&&M.type==="number"&&N.memoizedProps.value!=null&&bl(M,"number",M.value)}switch(W=N?yn(N):window,e){case"focusin":(od(W)||W.contentEditable==="true")&&(Es=W,Rl=N,Ln=null);break;case"focusout":Ln=Rl=Es=null;break;case"mousedown":zl=!0;break;case"contextmenu":case"mouseup":case"dragend":zl=!1,xd(I,a,P);break;case"selectionchange":if(Uv)break;case"keydown":case"keyup":xd(I,a,P)}var pe;if(Ll)e:{switch(e){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Ms?rd(e,a)&&(ye="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ye="onCompositionStart");ye&&(sd&&a.locale!=="ko"&&(Ms||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Ms&&(pe=$c()):(Ta=P,Tl="value"in Ta?Ta.value:Ta.textContent,Ms=!0)),W=Cr(N,ye),0<W.length&&(ye=new td(ye,e,null,a,P),I.push({event:ye,listeners:W}),pe?ye.data=pe:(pe=ld(a),pe!==null&&(ye.data=pe)))),(pe=Dv?Lv(e,a):Nv(e,a))&&(ye=Cr(N,"onBeforeInput"),0<ye.length&&(W=new td("onBeforeInput","beforeinput",null,a,P),I.push({event:W,listeners:ye}),W.data=pe)),Sb(I,e,N,a,P)}Jp(I,t)})}function ei(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Cr(e,t){for(var a=t+"Capture",s=[];e!==null;){var l=e,u=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||u===null||(l=Sn(e,a),l!=null&&s.unshift(ei(e,l,u)),l=Sn(e,t),l!=null&&s.push(ei(e,l,u))),e.tag===3)return s;e=e.return}return[]}function Cb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Yp(e,t,a,s,l){for(var u=t._reactName,f=[];a!==null&&a!==s;){var x=a,S=x.alternate,N=x.stateNode;if(x=x.tag,S!==null&&S===s)break;x!==5&&x!==26&&x!==27||N===null||(S=N,l?(N=Sn(a,u),N!=null&&f.unshift(ei(a,N,S))):l||(N=Sn(a,u),N!=null&&f.push(ei(a,N,S)))),a=a.return}f.length!==0&&e.push({event:t,listeners:f})}var jb=/\r\n?/g,Ab=/\u0000|\uFFFD/g;function Qp(e){return(typeof e=="string"?e:""+e).replace(jb,`
`).replace(Ab,"")}function Kp(e,t){return t=Qp(t),Qp(e)===t}function Ne(e,t,a,s,l,u){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Ds(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Ds(e,""+s);break;case"className":Li(e,"class",s);break;case"tabIndex":Li(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Li(e,a,s);break;case"style":Kc(e,s,u);break;case"data":if(t!=="object"){Li(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Mi(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&Ne(e,t,"name",l.name,l,null),Ne(e,t,"formEncType",l.formEncType,l,null),Ne(e,t,"formMethod",l.formMethod,l,null),Ne(e,t,"formTarget",l.formTarget,l,null)):(Ne(e,t,"encType",l.encType,l,null),Ne(e,t,"method",l.method,l,null),Ne(e,t,"target",l.target,l,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Mi(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Zt);break;case"onScroll":s!=null&&be("scroll",e);break;case"onScrollEnd":s!=null&&be("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(a=s.__html,a!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Mi(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":be("beforetoggle",e),be("toggle",e),Di(e,"popover",s);break;case"xlinkActuate":Xt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Xt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Xt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Xt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Xt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Xt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Di(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=tv.get(a)||a,Di(e,a,s))}}function ru(e,t,a,s,l,u){switch(a){case"style":Kc(e,s,u);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(a=s.__html,a!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof s=="string"?Ds(e,s):(typeof s=="number"||typeof s=="bigint")&&Ds(e,""+s);break;case"onScroll":s!=null&&be("scroll",e);break;case"onScrollEnd":s!=null&&be("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Zt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ic.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),t=a.slice(2,l?a.length-7:void 0),u=e[ut]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,l),typeof s=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,l);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Di(e,a,s)}}}function nt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",e),be("load",e);var s=!1,l=!1,u;for(u in a)if(a.hasOwnProperty(u)){var f=a[u];if(f!=null)switch(u){case"src":s=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ne(e,t,u,f,a,null)}}l&&Ne(e,t,"srcSet",a.srcSet,a,null),s&&Ne(e,t,"src",a.src,a,null);return;case"input":be("invalid",e);var x=u=f=l=null,S=null,N=null;for(s in a)if(a.hasOwnProperty(s)){var P=a[s];if(P!=null)switch(s){case"name":l=P;break;case"type":f=P;break;case"checked":S=P;break;case"defaultChecked":N=P;break;case"value":u=P;break;case"defaultValue":x=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,t));break;default:Ne(e,t,s,P,a,null)}}Jc(e,u,x,S,N,f,l,!1);return;case"select":be("invalid",e),s=f=u=null;for(l in a)if(a.hasOwnProperty(l)&&(x=a[l],x!=null))switch(l){case"value":u=x;break;case"defaultValue":f=x;break;case"multiple":s=x;default:Ne(e,t,l,x,a,null)}t=u,a=f,e.multiple=!!s,t!=null?As(e,!!s,t,!1):a!=null&&As(e,!!s,a,!0);return;case"textarea":be("invalid",e),u=l=s=null;for(f in a)if(a.hasOwnProperty(f)&&(x=a[f],x!=null))switch(f){case"value":s=x;break;case"defaultValue":l=x;break;case"children":u=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(o(91));break;default:Ne(e,t,f,x,a,null)}Yc(e,s,l,u);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(s=a[S],s!=null))switch(S){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ne(e,t,S,s,a,null)}return;case"dialog":be("beforetoggle",e),be("toggle",e),be("cancel",e),be("close",e);break;case"iframe":case"object":be("load",e);break;case"video":case"audio":for(s=0;s<Wn.length;s++)be(Wn[s],e);break;case"image":be("error",e),be("load",e);break;case"details":be("toggle",e);break;case"embed":case"source":case"link":be("error",e),be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in a)if(a.hasOwnProperty(N)&&(s=a[N],s!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ne(e,t,N,s,a,null)}return;default:if(xl(t)){for(P in a)a.hasOwnProperty(P)&&(s=a[P],s!==void 0&&ru(e,t,P,s,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(s=a[x],s!=null&&Ne(e,t,x,s,a,null))}function Db(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,u=null,f=null,x=null,S=null,N=null,P=null;for(R in a){var I=a[R];if(a.hasOwnProperty(R)&&I!=null)switch(R){case"checked":break;case"value":break;case"defaultValue":S=I;default:s.hasOwnProperty(R)||Ne(e,t,R,null,s,I)}}for(var M in s){var R=s[M];if(I=a[M],s.hasOwnProperty(M)&&(R!=null||I!=null))switch(M){case"type":u=R;break;case"name":l=R;break;case"checked":N=R;break;case"defaultChecked":P=R;break;case"value":f=R;break;case"defaultValue":x=R;break;case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(137,t));break;default:R!==I&&Ne(e,t,M,R,s,I)}}vl(e,f,x,S,N,P,u,l);return;case"select":R=f=x=M=null;for(u in a)if(S=a[u],a.hasOwnProperty(u)&&S!=null)switch(u){case"value":break;case"multiple":R=S;default:s.hasOwnProperty(u)||Ne(e,t,u,null,s,S)}for(l in s)if(u=s[l],S=a[l],s.hasOwnProperty(l)&&(u!=null||S!=null))switch(l){case"value":M=u;break;case"defaultValue":x=u;break;case"multiple":f=u;default:u!==S&&Ne(e,t,l,u,s,S)}t=x,a=f,s=R,M!=null?As(e,!!a,M,!1):!!s!=!!a&&(t!=null?As(e,!!a,t,!0):As(e,!!a,a?[]:"",!1));return;case"textarea":R=M=null;for(x in a)if(l=a[x],a.hasOwnProperty(x)&&l!=null&&!s.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Ne(e,t,x,null,s,l)}for(f in s)if(l=s[f],u=a[f],s.hasOwnProperty(f)&&(l!=null||u!=null))switch(f){case"value":M=l;break;case"defaultValue":R=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(o(91));break;default:l!==u&&Ne(e,t,f,l,s,u)}Fc(e,M,R);return;case"option":for(var Z in a)if(M=a[Z],a.hasOwnProperty(Z)&&M!=null&&!s.hasOwnProperty(Z))switch(Z){case"selected":e.selected=!1;break;default:Ne(e,t,Z,null,s,M)}for(S in s)if(M=s[S],R=a[S],s.hasOwnProperty(S)&&M!==R&&(M!=null||R!=null))switch(S){case"selected":e.selected=M&&typeof M!="function"&&typeof M!="symbol";break;default:Ne(e,t,S,M,s,R)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ne in a)M=a[ne],a.hasOwnProperty(ne)&&M!=null&&!s.hasOwnProperty(ne)&&Ne(e,t,ne,null,s,M);for(N in s)if(M=s[N],R=a[N],s.hasOwnProperty(N)&&M!==R&&(M!=null||R!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(o(137,t));break;default:Ne(e,t,N,M,s,R)}return;default:if(xl(t)){for(var Me in a)M=a[Me],a.hasOwnProperty(Me)&&M!==void 0&&!s.hasOwnProperty(Me)&&ru(e,t,Me,void 0,s,M);for(P in s)M=s[P],R=a[P],!s.hasOwnProperty(P)||M===R||M===void 0&&R===void 0||ru(e,t,P,M,s,R);return}}for(var j in a)M=a[j],a.hasOwnProperty(j)&&M!=null&&!s.hasOwnProperty(j)&&Ne(e,t,j,null,s,M);for(I in s)M=s[I],R=a[I],!s.hasOwnProperty(I)||M===R||M==null&&R==null||Ne(e,t,I,M,s,R)}function Xp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var l=a[s],u=l.transferSize,f=l.initiatorType,x=l.duration;if(u&&x&&Xp(f)){for(f=0,x=l.responseEnd,s+=1;s<a.length;s++){var S=a[s],N=S.startTime;if(N>x)break;var P=S.transferSize,I=S.initiatorType;P&&Xp(I)&&(S=S.responseEnd,f+=P*(S<x?1:(x-N)/(S-N)))}if(--s,t+=8*(u+f)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var lu=null,ou=null;function jr(e){return e.nodeType===9?e:e.ownerDocument}function Zp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $p(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function uu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cu=null;function Nb(){var e=window.event;return e&&e.type==="popstate"?e===cu?!1:(cu=e,!0):(cu=null,!1)}var Wp=typeof setTimeout=="function"?setTimeout:void 0,Mb=typeof clearTimeout=="function"?clearTimeout:void 0,ef=typeof Promise=="function"?Promise:void 0,Eb=typeof queueMicrotask=="function"?queueMicrotask:typeof ef<"u"?function(e){return ef.resolve(null).then(e).catch(Rb)}:Wp;function Rb(e){setTimeout(function(){throw e})}function Ba(e){return e==="head"}function tf(e,t){var a=t,s=0;do{var l=a.nextSibling;if(e.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(l),rn(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")ti(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ti(a);for(var u=a.firstChild;u;){var f=u.nextSibling,x=u.nodeName;u[xn]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=f}}else a==="body"&&ti(e.ownerDocument.body);a=l}while(a);rn(t)}function af(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function du(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":du(a),hl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function zb(e,t,a,s){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[xn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Vt(e.nextSibling),e===null)break}return null}function Ob(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Vt(e.nextSibling),e===null))return null;return e}function sf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Vt(e.nextSibling),e===null))return null;return e}function mu(e){return e.data==="$?"||e.data==="$~"}function pu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Vb(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Vt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var fu=null;function nf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Vt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function rf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function lf(e,t,a){switch(t=jr(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ti(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);hl(e)}var Pt=new Map,of=new Set;function Ar(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pa=k.d;k.d={f:Pb,r:Ub,D:wb,C:Ib,L:Bb,m:Gb,X:kb,S:Hb,M:Jb};function Pb(){var e=pa.f(),t=br();return e||t}function Ub(e){var t=Ts(e);t!==null&&t.tag===5&&t.type==="form"?Tm(t):pa.r(e)}var an=typeof document>"u"?null:document;function uf(e,t,a){var s=an;if(s&&typeof t=="string"&&t){var l=Lt(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),of.has(l)||(of.add(l),e={rel:e,crossOrigin:a,href:t},s.querySelector(l)===null&&(t=s.createElement("link"),nt(t,"link",e),$e(t),s.head.appendChild(t)))}}function wb(e){pa.D(e),uf("dns-prefetch",e,null)}function Ib(e,t){pa.C(e,t),uf("preconnect",e,t)}function Bb(e,t,a){pa.L(e,t,a);var s=an;if(s&&e&&t){var l='link[rel="preload"][as="'+Lt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+Lt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+Lt(a.imageSizes)+'"]')):l+='[href="'+Lt(e)+'"]';var u=l;switch(t){case"style":u=sn(e);break;case"script":u=nn(e)}Pt.has(u)||(e=b({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Pt.set(u,e),s.querySelector(l)!==null||t==="style"&&s.querySelector(ai(u))||t==="script"&&s.querySelector(si(u))||(t=s.createElement("link"),nt(t,"link",e),$e(t),s.head.appendChild(t)))}}function Gb(e,t){pa.m(e,t);var a=an;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Lt(s)+'"][href="'+Lt(e)+'"]',u=l;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=nn(e)}if(!Pt.has(u)&&(e=b({rel:"modulepreload",href:e},t),Pt.set(u,e),a.querySelector(l)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(si(u)))return}s=a.createElement("link"),nt(s,"link",e),$e(s),a.head.appendChild(s)}}}function Hb(e,t,a){pa.S(e,t,a);var s=an;if(s&&e){var l=Cs(s).hoistableStyles,u=sn(e);t=t||"default";var f=l.get(u);if(!f){var x={loading:0,preload:null};if(f=s.querySelector(ai(u)))x.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Pt.get(u))&&hu(e,a);var S=f=s.createElement("link");$e(S),nt(S,"link",e),S._p=new Promise(function(N,P){S.onload=N,S.onerror=P}),S.addEventListener("load",function(){x.loading|=1}),S.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Dr(f,t,s)}f={type:"stylesheet",instance:f,count:1,state:x},l.set(u,f)}}}function kb(e,t){pa.X(e,t);var a=an;if(a&&e){var s=Cs(a).hoistableScripts,l=nn(e),u=s.get(l);u||(u=a.querySelector(si(l)),u||(e=b({src:e,async:!0},t),(t=Pt.get(l))&&gu(e,t),u=a.createElement("script"),$e(u),nt(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(l,u))}}function Jb(e,t){pa.M(e,t);var a=an;if(a&&e){var s=Cs(a).hoistableScripts,l=nn(e),u=s.get(l);u||(u=a.querySelector(si(l)),u||(e=b({src:e,async:!0,type:"module"},t),(t=Pt.get(l))&&gu(e,t),u=a.createElement("script"),$e(u),nt(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(l,u))}}function cf(e,t,a,s){var l=(l=ge.current)?Ar(l):null;if(!l)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=sn(a.href),a=Cs(l).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=sn(a.href);var u=Cs(l).hoistableStyles,f=u.get(e);if(f||(l=l.ownerDocument||l,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,f),(u=l.querySelector(ai(e)))&&!u._p&&(f.instance=u,f.state.loading=5),Pt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pt.set(e,a),u||Fb(l,e,a,f.state))),t&&s===null)throw Error(o(528,""));return f}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=nn(a),a=Cs(l).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function sn(e){return'href="'+Lt(e)+'"'}function ai(e){return'link[rel="stylesheet"]['+e+"]"}function df(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Fb(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),nt(t,"link",a),$e(t),e.head.appendChild(t))}function nn(e){return'[src="'+Lt(e)+'"]'}function si(e){return"script[async]"+e}function mf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Lt(a.href)+'"]');if(s)return t.instance=s,$e(s),s;var l=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),$e(s),nt(s,"style",l),Dr(s,a.precedence,e),t.instance=s;case"stylesheet":l=sn(a.href);var u=e.querySelector(ai(l));if(u)return t.state.loading|=4,t.instance=u,$e(u),u;s=df(a),(l=Pt.get(l))&&hu(s,l),u=(e.ownerDocument||e).createElement("link"),$e(u);var f=u;return f._p=new Promise(function(x,S){f.onload=x,f.onerror=S}),nt(u,"link",s),t.state.loading|=4,Dr(u,a.precedence,e),t.instance=u;case"script":return u=nn(a.src),(l=e.querySelector(si(u)))?(t.instance=l,$e(l),l):(s=a,(l=Pt.get(u))&&(s=b({},a),gu(s,l)),e=e.ownerDocument||e,l=e.createElement("script"),$e(l),nt(l,"link",s),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Dr(s,a.precedence,e));return t.instance}function Dr(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=s.length?s[s.length-1]:null,u=l,f=0;f<s.length;f++){var x=s[f];if(x.dataset.precedence===t)u=x;else if(u!==l)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function hu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function gu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Lr=null;function pf(e,t,a){if(Lr===null){var s=new Map,l=Lr=new Map;l.set(a,s)}else l=Lr,s=l.get(a),s||(s=new Map,l.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var u=a[l];if(!(u[xn]||u[et]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var f=u.getAttribute(t)||"";f=e+f;var x=s.get(f);x?x.push(u):s.set(f,[u])}}return s}function ff(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Yb(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function hf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Qb(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var l=sn(s.href),u=t.querySelector(ai(l));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Nr.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,$e(u);return}u=t.ownerDocument||t,s=df(s),(l=Pt.get(l))&&hu(s,l),u=u.createElement("link"),$e(u);var f=u;f._p=new Promise(function(x,S){f.onload=x,f.onerror=S}),nt(u,"link",s),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Nr.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var vu=0;function Kb(e,t){return e.stylesheets&&e.count===0&&Er(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&Er(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&vu===0&&(vu=62500*Lb());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Er(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>vu?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(l)}}:null}function Nr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Er(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mr=null;function Er(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mr=new Map,t.forEach(Xb,e),Mr=null,Nr.call(e))}function Xb(e,t){if(!(t.state.loading&4)){var a=Mr.get(e);if(a)var s=a.get(null);else{a=new Map,Mr.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<l.length;u++){var f=l[u];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(a.set(f.dataset.precedence,f),s=f)}s&&a.set(null,s)}l=t.instance,f=l.getAttribute("data-precedence"),u=a.get(f)||s,u===s&&a.set(null,l),a.set(f,l),this.count++,s=Nr.bind(this),l.addEventListener("load",s),l.addEventListener("error",s),u?u.parentNode.insertBefore(l,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var ni={$$typeof:J,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function Zb(e,t,a,s,l,u,f,x,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dl(0),this.hiddenUpdates=dl(null),this.identifierPrefix=s,this.onUncaughtError=l,this.onCaughtError=u,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function gf(e,t,a,s,l,u,f,x,S,N,P,I){return e=new Zb(e,t,a,f,S,N,P,I,x),t=1,u===!0&&(t|=24),u=St(3,null,null,t),e.current=u,u.stateNode=e,t=Kl(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:s,isDehydrated:a,cache:t},Wl(u),e}function vf(e){return e?(e=Os,e):Os}function bf(e,t,a,s,l,u){l=vf(l),s.context===null?s.context=l:s.pendingContext=l,s=Na(t),s.payload={element:a},u=u===void 0?null:u,u!==null&&(s.callback=u),a=Ma(e,s,t),a!==null&&(ht(a,e,t),Vn(a,e,t))}function xf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function bu(e,t){xf(e,t),(e=e.alternate)&&xf(e,t)}function yf(e){if(e.tag===13||e.tag===31){var t=is(e,67108864);t!==null&&ht(t,e,67108864),bu(e,67108864)}}function Sf(e){if(e.tag===13||e.tag===31){var t=jt();t=ml(t);var a=is(e,t);a!==null&&ht(a,e,t),bu(e,t)}}var Rr=!0;function $b(e,t,a,s){var l=E.T;E.T=null;var u=k.p;try{k.p=2,xu(e,t,a,s)}finally{k.p=u,E.T=l}}function Wb(e,t,a,s){var l=E.T;E.T=null;var u=k.p;try{k.p=8,xu(e,t,a,s)}finally{k.p=u,E.T=l}}function xu(e,t,a,s){if(Rr){var l=yu(s);if(l===null)iu(e,t,s,zr,a),qf(e,s);else if(t1(l,e,t,a,s))s.stopPropagation();else if(qf(e,s),t&4&&-1<e1.indexOf(e)){for(;l!==null;){var u=Ts(l);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var f=es(u.pendingLanes);if(f!==0){var x=u;for(x.pendingLanes|=2,x.entangledLanes|=2;f;){var S=1<<31-xt(f);x.entanglements[1]|=S,f&=~S}Ft(u),(Ce&6)===0&&(gr=vt()+500,$n(0))}}break;case 31:case 13:x=is(u,2),x!==null&&ht(x,u,2),br(),bu(u,2)}if(u=yu(s),u===null&&iu(e,t,s,zr,a),u===l)break;l=u}l!==null&&s.stopPropagation()}else iu(e,t,s,null,a)}}function yu(e){return e=Sl(e),Su(e)}var zr=null;function Su(e){if(zr=null,e=qs(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=p(t),e!==null)return e;e=null}else if(a===31){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return zr=e,null}function _f(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wg()){case Lc:return 2;case Nc:return 8;case qi:case Ig:return 32;case Mc:return 268435456;default:return 32}default:return 32}}var _u=!1,Ga=null,Ha=null,ka=null,ii=new Map,ri=new Map,Ja=[],e1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qf(e,t){switch(e){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":ii.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ri.delete(t.pointerId)}}function li(e,t,a,s,l,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:u,targetContainers:[l]},t!==null&&(t=Ts(t),t!==null&&yf(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function t1(e,t,a,s,l){switch(t){case"focusin":return Ga=li(Ga,e,t,a,s,l),!0;case"dragenter":return Ha=li(Ha,e,t,a,s,l),!0;case"mouseover":return ka=li(ka,e,t,a,s,l),!0;case"pointerover":var u=l.pointerId;return ii.set(u,li(ii.get(u)||null,e,t,a,s,l)),!0;case"gotpointercapture":return u=l.pointerId,ri.set(u,li(ri.get(u)||null,e,t,a,s,l)),!0}return!1}function Tf(e){var t=qs(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=p(a),t!==null){e.blockedOn=t,Pc(e.priority,function(){Sf(a)});return}}else if(t===31){if(t=h(a),t!==null){e.blockedOn=t,Pc(e.priority,function(){Sf(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Or(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=yu(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);yl=s,a.target.dispatchEvent(s),yl=null}else return t=Ts(a),t!==null&&yf(t),e.blockedOn=a,!1;t.shift()}return!0}function Cf(e,t,a){Or(e)&&a.delete(t)}function a1(){_u=!1,Ga!==null&&Or(Ga)&&(Ga=null),Ha!==null&&Or(Ha)&&(Ha=null),ka!==null&&Or(ka)&&(ka=null),ii.forEach(Cf),ri.forEach(Cf)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,_u||(_u=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,a1)))}var Pr=null;function jf(e){Pr!==e&&(Pr=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Pr===e&&(Pr=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],l=e[t+2];if(typeof s!="function"){if(Su(s||a)===null)continue;break}var u=Ts(a);u!==null&&(e.splice(t,3),t-=3,yo(u,{pending:!0,data:l,method:a.method,action:s},s,l))}}))}function rn(e){function t(S){return Vr(S,e)}Ga!==null&&Vr(Ga,e),Ha!==null&&Vr(Ha,e),ka!==null&&Vr(ka,e),ii.forEach(t),ri.forEach(t);for(var a=0;a<Ja.length;a++){var s=Ja[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ja.length&&(a=Ja[0],a.blockedOn===null);)Tf(a),a.blockedOn===null&&Ja.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var l=a[s],u=a[s+1],f=l[ut]||null;if(typeof u=="function")f||jf(a);else if(f){var x=null;if(u&&u.hasAttribute("formAction")){if(l=u,f=u[ut]||null)x=f.formAction;else if(Su(l)!==null)continue}else x=f.action;typeof x=="function"?a[s+1]=x:(a.splice(s,3),s-=3),jf(a)}}}function Af(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(f){return l=f})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function qu(e){this._internalRoot=e}Ur.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,s=jt();bf(a,s,e,t,null,null)},Ur.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bf(e.current,2,null,e,null,null),br(),t[_s]=null}};function Ur(e){this._internalRoot=e}Ur.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ja.length&&t!==0&&t<Ja[a].priority;a++);Ja.splice(a,0,e),a===0&&Tf(e)}};var Df=i.version;if(Df!=="19.2.0")throw Error(o(527,Df,"19.2.0"));k.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var s1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wr.isDisabled&&wr.supportsFiber)try{gn=wr.inject(s1),bt=wr}catch{}}return ui.createRoot=function(e,t){if(!c(e))throw Error(o(299));var a=!1,s="",l=zm,u=Om,f=Vm;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=gf(e,1,!1,null,null,a,s,null,l,u,f,Af),e[_s]=t.current,nu(e),new qu(t)},ui.hydrateRoot=function(e,t,a){if(!c(e))throw Error(o(299));var s=!1,l="",u=zm,f=Om,x=Vm,S=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),t=gf(e,1,!0,t,a??null,s,l,S,u,f,x,Af),t.context=vf(null),a=t.current,s=jt(),s=ml(s),l=Na(s),l.callback=null,Ma(a,l,s),a=s,t.current.lanes=a,bn(t,a),Ft(t),e[_s]=t.current,nu(e),new Ur(t)},ui.version="19.2.0",ui}var Uf;function p1(){if(Uf)return ju.exports;Uf=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),ju.exports=m1(),ju.exports}var f1=p1();const h1=rc(f1);var wf="popstate";function g1(n={}){function i(c,d){let{pathname:p="/",search:h="",hash:v=""}=Ss(c.location.hash.substring(1));return!p.startsWith("/")&&!p.startsWith(".")&&(p="/"+p),Hu("",{pathname:p,search:h,hash:v},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function r(c,d){let p=c.document.querySelector("base"),h="";if(p&&p.getAttribute("href")){let v=c.location.href,g=v.indexOf("#");h=g===-1?v:v.slice(0,g)}return h+"#"+(typeof d=="string"?d:gi(d))}function o(c,d){gt(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return b1(i,r,o,n)}function we(n,i){if(n===!1||n===null||typeof n>"u")throw new Error(i)}function gt(n,i){if(!n){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function v1(){return Math.random().toString(36).substring(2,10)}function If(n,i){return{usr:n.state,key:n.key,idx:i}}function Hu(n,i,r=null,o){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof i=="string"?Ss(i):i,state:r,key:i&&i.key||o||v1()}}function gi({pathname:n="/",search:i="",hash:r=""}){return i&&i!=="?"&&(n+=i.charAt(0)==="?"?i:"?"+i),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function Ss(n){let i={};if(n){let r=n.indexOf("#");r>=0&&(i.hash=n.substring(r),n=n.substring(0,r));let o=n.indexOf("?");o>=0&&(i.search=n.substring(o),n=n.substring(0,o)),n&&(i.pathname=n)}return i}function b1(n,i,r,o={}){let{window:c=document.defaultView,v5Compat:d=!1}=o,p=c.history,h="POP",v=null,g=y();g==null&&(g=0,p.replaceState({...p.state,idx:g},""));function y(){return(p.state||{idx:null}).idx}function b(){h="POP";let V=y(),B=V==null?null:V-g;g=V,v&&v({action:h,location:z.location,delta:B})}function T(V,B){h="PUSH";let G=Hu(z.location,V,B);r&&r(G,V),g=y()+1;let J=If(G,g),$=z.createHref(G);try{p.pushState(J,"",$)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;c.location.assign($)}d&&v&&v({action:h,location:z.location,delta:1})}function C(V,B){h="REPLACE";let G=Hu(z.location,V,B);r&&r(G,V),g=y();let J=If(G,g),$=z.createHref(G);p.replaceState(J,"",$),d&&v&&v({action:h,location:z.location,delta:0})}function L(V){return x1(V)}let z={get action(){return h},get location(){return n(c,p)},listen(V){if(v)throw new Error("A history only accepts one active listener");return c.addEventListener(wf,b),v=V,()=>{c.removeEventListener(wf,b),v=null}},createHref(V){return i(c,V)},createURL:L,encodeLocation(V){let B=L(V);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:T,replace:C,go(V){return p.go(V)}};return z}function x1(n,i=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),we(r,"No window.location.(origin|href) available to create URL");let o=typeof n=="string"?n:gi(n);return o=o.replace(/ $/,"%20"),!i&&o.startsWith("//")&&(o=r+o),new URL(o,r)}function jh(n,i,r="/"){return y1(n,i,r,!1)}function y1(n,i,r,o){let c=typeof i=="string"?Ss(i):i,d=xa(c.pathname||"/",r);if(d==null)return null;let p=Ah(n);S1(p);let h=null;for(let v=0;h==null&&v<p.length;++v){let g=E1(d);h=N1(p[v],g,o)}return h}function Ah(n,i=[],r=[],o="",c=!1){let d=(p,h,v=c,g)=>{let y={relativePath:g===void 0?p.path||"":g,caseSensitive:p.caseSensitive===!0,childrenIndex:h,route:p};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&v)return;we(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let b=ba([o,y.relativePath]),T=r.concat(y);p.children&&p.children.length>0&&(we(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Ah(p.children,i,T,b,v)),!(p.path==null&&!p.index)&&i.push({path:b,score:D1(b,p.index),routesMeta:T})};return n.forEach((p,h)=>{if(p.path===""||!p.path?.includes("?"))d(p,h);else for(let v of Dh(p.path))d(p,h,!0,v)}),i}function Dh(n){let i=n.split("/");if(i.length===0)return[];let[r,...o]=i,c=r.endsWith("?"),d=r.replace(/\?$/,"");if(o.length===0)return c?[d,""]:[d];let p=Dh(o.join("/")),h=[];return h.push(...p.map(v=>v===""?d:[d,v].join("/"))),c&&h.push(...p),h.map(v=>n.startsWith("/")&&v===""?"/":v)}function S1(n){n.sort((i,r)=>i.score!==r.score?r.score-i.score:L1(i.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}var _1=/^:[\w-]+$/,q1=3,T1=2,C1=1,j1=10,A1=-2,Bf=n=>n==="*";function D1(n,i){let r=n.split("/"),o=r.length;return r.some(Bf)&&(o+=A1),i&&(o+=T1),r.filter(c=>!Bf(c)).reduce((c,d)=>c+(_1.test(d)?q1:d===""?C1:j1),o)}function L1(n,i){return n.length===i.length&&n.slice(0,-1).every((o,c)=>o===i[c])?n[n.length-1]-i[i.length-1]:0}function N1(n,i,r=!1){let{routesMeta:o}=n,c={},d="/",p=[];for(let h=0;h<o.length;++h){let v=o[h],g=h===o.length-1,y=d==="/"?i:i.slice(d.length)||"/",b=Jr({path:v.relativePath,caseSensitive:v.caseSensitive,end:g},y),T=v.route;if(!b&&g&&r&&!o[o.length-1].route.index&&(b=Jr({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},y)),!b)return null;Object.assign(c,b.params),p.push({params:c,pathname:ba([d,b.pathname]),pathnameBase:P1(ba([d,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(d=ba([d,b.pathnameBase]))}return p}function Jr(n,i){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,o]=M1(n.path,n.caseSensitive,n.end),c=i.match(r);if(!c)return null;let d=c[0],p=d.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:o.reduce((g,{paramName:y,isOptional:b},T)=>{if(y==="*"){let L=h[T]||"";p=d.slice(0,d.length-L.length).replace(/(.)\/+$/,"$1")}const C=h[T];return b&&!C?g[y]=void 0:g[y]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:d,pathnameBase:p,pattern:n}}function M1(n,i=!1,r=!0){gt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let o=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,h,v)=>(o.push({paramName:h,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(o.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,i?void 0:"i"),o]}function E1(n){try{return n.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return gt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),n}}function xa(n,i){if(i==="/")return n;if(!n.toLowerCase().startsWith(i.toLowerCase()))return null;let r=i.endsWith("/")?i.length-1:i.length,o=n.charAt(r);return o&&o!=="/"?null:n.slice(r)||"/"}var R1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z1=n=>R1.test(n);function O1(n,i="/"){let{pathname:r,search:o="",hash:c=""}=typeof n=="string"?Ss(n):n,d;if(r)if(z1(r))d=r;else{if(r.includes("//")){let p=r;r=r.replace(/\/\/+/g,"/"),gt(!1,`Pathnames cannot have embedded double slashes - normalizing ${p} -> ${r}`)}r.startsWith("/")?d=Gf(r.substring(1),"/"):d=Gf(r,i)}else d=i;return{pathname:d,search:U1(o),hash:w1(c)}}function Gf(n,i){let r=i.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function Nu(n,i,r,o){return`Cannot include a '${n}' character in a manually specified \`to.${i}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function V1(n){return n.filter((i,r)=>r===0||i.route.path&&i.route.path.length>0)}function lc(n){let i=V1(n);return i.map((r,o)=>o===i.length-1?r.pathname:r.pathnameBase)}function oc(n,i,r,o=!1){let c;typeof n=="string"?c=Ss(n):(c={...n},we(!c.pathname||!c.pathname.includes("?"),Nu("?","pathname","search",c)),we(!c.pathname||!c.pathname.includes("#"),Nu("#","pathname","hash",c)),we(!c.search||!c.search.includes("#"),Nu("#","search","hash",c)));let d=n===""||c.pathname==="",p=d?"/":c.pathname,h;if(p==null)h=r;else{let b=i.length-1;if(!o&&p.startsWith("..")){let T=p.split("/");for(;T[0]==="..";)T.shift(),b-=1;c.pathname=T.join("/")}h=b>=0?i[b]:"/"}let v=O1(c,h),g=p&&p!=="/"&&p.endsWith("/"),y=(d||p===".")&&r.endsWith("/");return!v.pathname.endsWith("/")&&(g||y)&&(v.pathname+="/"),v}var ba=n=>n.join("/").replace(/\/\/+/g,"/"),P1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),U1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,w1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function I1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function B1(n){return n.map(i=>i.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Lh=["POST","PUT","PATCH","DELETE"];new Set(Lh);var G1=["GET",...Lh];new Set(G1);var cn=A.createContext(null);cn.displayName="DataRouter";var Wr=A.createContext(null);Wr.displayName="DataRouterState";A.createContext(!1);var Nh=A.createContext({isTransitioning:!1});Nh.displayName="ViewTransition";var H1=A.createContext(new Map);H1.displayName="Fetchers";var k1=A.createContext(null);k1.displayName="Await";var Ut=A.createContext(null);Ut.displayName="Navigation";var bi=A.createContext(null);bi.displayName="Location";var wt=A.createContext({outlet:null,matches:[],isDataRoute:!1});wt.displayName="Route";var uc=A.createContext(null);uc.displayName="RouteError";function J1(n,{relative:i}={}){we(dn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:o}=A.useContext(Ut),{hash:c,pathname:d,search:p}=xi(n,{relative:i}),h=d;return r!=="/"&&(h=d==="/"?r:ba([r,d])),o.createHref({pathname:h,search:p,hash:c})}function dn(){return A.useContext(bi)!=null}function Kt(){return we(dn(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(bi).location}var Mh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Eh(n){A.useContext(Ut).static||A.useLayoutEffect(n)}function el(){let{isDataRoute:n}=A.useContext(wt);return n?lx():F1()}function F1(){we(dn(),"useNavigate() may be used only in the context of a <Router> component.");let n=A.useContext(cn),{basename:i,navigator:r}=A.useContext(Ut),{matches:o}=A.useContext(wt),{pathname:c}=Kt(),d=JSON.stringify(lc(o)),p=A.useRef(!1);return Eh(()=>{p.current=!0}),A.useCallback((v,g={})=>{if(gt(p.current,Mh),!p.current)return;if(typeof v=="number"){r.go(v);return}let y=oc(v,JSON.parse(d),c,g.relative==="path");n==null&&i!=="/"&&(y.pathname=y.pathname==="/"?i:ba([i,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[i,r,d,c,n])}var Y1=A.createContext(null);function Q1(n){let i=A.useContext(wt).outlet;return A.useMemo(()=>i&&A.createElement(Y1.Provider,{value:n},i),[i,n])}function K1(){let{matches:n}=A.useContext(wt),i=n[n.length-1];return i?i.params:{}}function xi(n,{relative:i}={}){let{matches:r}=A.useContext(wt),{pathname:o}=Kt(),c=JSON.stringify(lc(r));return A.useMemo(()=>oc(n,JSON.parse(c),o,i==="path"),[n,c,o,i])}function X1(n,i){return Rh(n,i)}function Rh(n,i,r,o,c){we(dn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=A.useContext(Ut),{matches:p}=A.useContext(wt),h=p[p.length-1],v=h?h.params:{},g=h?h.pathname:"/",y=h?h.pathnameBase:"/",b=h&&h.route;{let G=b&&b.path||"";zh(g,!b||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let T=Kt(),C;if(i){let G=typeof i=="string"?Ss(i):i;we(y==="/"||G.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${G.pathname}" was given in the \`location\` prop.`),C=G}else C=T;let L=C.pathname||"/",z=L;if(y!=="/"){let G=y.replace(/^\//,"").split("/");z="/"+L.replace(/^\//,"").split("/").slice(G.length).join("/")}let V=jh(n,{pathname:z});gt(b||V!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),gt(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=tx(V&&V.map(G=>Object.assign({},G,{params:Object.assign({},v,G.params),pathname:ba([y,d.encodeLocation?d.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?y:ba([y,d.encodeLocation?d.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),p,r,o,c);return i&&B?A.createElement(bi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},B):B}function Z1(){let n=rx(),i=I1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,o="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},p=null;return console.error("Error handled by React Router default ErrorBoundary:",n),p=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:d},"ErrorBoundary")," or"," ",A.createElement("code",{style:d},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},i),r?A.createElement("pre",{style:c},r):null,p)}var $1=A.createElement(Z1,null),W1=class extends A.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,i){return i.location!==n.location||i.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:i.error,location:i.location,revalidation:n.revalidation||i.revalidation}}componentDidCatch(n,i){this.props.onError?this.props.onError(n,i):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?A.createElement(wt.Provider,{value:this.props.routeContext},A.createElement(uc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ex({routeContext:n,match:i,children:r}){let o=A.useContext(cn);return o&&o.static&&o.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=i.route.id),A.createElement(wt.Provider,{value:n},r)}function tx(n,i=[],r=null,o=null,c=null){if(n==null){if(!r)return null;if(r.errors)n=r.matches;else if(i.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let d=n,p=r?.errors;if(p!=null){let y=d.findIndex(b=>b.route.id&&p?.[b.route.id]!==void 0);we(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),d=d.slice(0,Math.min(d.length,y+1))}let h=!1,v=-1;if(r)for(let y=0;y<d.length;y++){let b=d[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(v=y),b.route.id){let{loaderData:T,errors:C}=r,L=b.route.loader&&!T.hasOwnProperty(b.route.id)&&(!C||C[b.route.id]===void 0);if(b.route.lazy||L){h=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}let g=r&&o?(y,b)=>{o(y,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:B1(r.matches),errorInfo:b})}:void 0;return d.reduceRight((y,b,T)=>{let C,L=!1,z=null,V=null;r&&(C=p&&b.route.id?p[b.route.id]:void 0,z=b.route.errorElement||$1,h&&(v<0&&T===0?(zh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,V=null):v===T&&(L=!0,V=b.route.hydrateFallbackElement||null)));let B=i.concat(d.slice(0,T+1)),G=()=>{let J;return C?J=z:L?J=V:b.route.Component?J=A.createElement(b.route.Component,null):b.route.element?J=b.route.element:J=y,A.createElement(ex,{match:b,routeContext:{outlet:y,matches:B,isDataRoute:r!=null},children:J})};return r&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?A.createElement(W1,{location:r.location,revalidation:r.revalidation,component:z,error:C,children:G(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:g}):G()},null)}function cc(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ax(n){let i=A.useContext(cn);return we(i,cc(n)),i}function sx(n){let i=A.useContext(Wr);return we(i,cc(n)),i}function nx(n){let i=A.useContext(wt);return we(i,cc(n)),i}function dc(n){let i=nx(n),r=i.matches[i.matches.length-1];return we(r.route.id,`${n} can only be used on routes that contain a unique "id"`),r.route.id}function ix(){return dc("useRouteId")}function rx(){let n=A.useContext(uc),i=sx("useRouteError"),r=dc("useRouteError");return n!==void 0?n:i.errors?.[r]}function lx(){let{router:n}=ax("useNavigate"),i=dc("useNavigate"),r=A.useRef(!1);return Eh(()=>{r.current=!0}),A.useCallback(async(c,d={})=>{gt(r.current,Mh),r.current&&(typeof c=="number"?await n.navigate(c):await n.navigate(c,{fromRouteId:i,...d}))},[n,i])}var Hf={};function zh(n,i,r){!i&&!Hf[n]&&(Hf[n]=!0,gt(!1,r))}A.memo(ox);function ox({routes:n,future:i,state:r,unstable_onError:o}){return Rh(n,void 0,r,o,i)}function kf({to:n,replace:i,state:r,relative:o}){we(dn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=A.useContext(Ut);gt(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=A.useContext(wt),{pathname:p}=Kt(),h=el(),v=oc(n,lc(d),p,o==="path"),g=JSON.stringify(v);return A.useEffect(()=>{h(JSON.parse(g),{replace:i,state:r,relative:o})},[h,g,o,i,r]),null}function ux(n){return Q1(n.context)}function ha(n){we(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cx({basename:n="/",children:i=null,location:r,navigationType:o="POP",navigator:c,static:d=!1,unstable_useTransitions:p}){we(!dn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),v=A.useMemo(()=>({basename:h,navigator:c,static:d,unstable_useTransitions:p,future:{}}),[h,c,d,p]);typeof r=="string"&&(r=Ss(r));let{pathname:g="/",search:y="",hash:b="",state:T=null,key:C="default"}=r,L=A.useMemo(()=>{let z=xa(g,h);return z==null?null:{location:{pathname:z,search:y,hash:b,state:T,key:C},navigationType:o}},[h,g,y,b,T,C,o]);return gt(L!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${b}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:A.createElement(Ut.Provider,{value:v},A.createElement(bi.Provider,{children:i,value:L}))}function dx({children:n,location:i}){return X1(ku(n),i)}function ku(n,i=[]){let r=[];return A.Children.forEach(n,(o,c)=>{if(!A.isValidElement(o))return;let d=[...i,c];if(o.type===A.Fragment){r.push.apply(r,ku(o.props.children,d));return}we(o.type===ha,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),we(!o.props.index||!o.props.children,"An index route cannot have child routes.");let p={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(p.children=ku(o.props.children,d)),r.push(p)}),r}var Hr="get",kr="application/x-www-form-urlencoded";function tl(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function mx(n){return tl(n)&&n.tagName.toLowerCase()==="button"}function px(n){return tl(n)&&n.tagName.toLowerCase()==="form"}function fx(n){return tl(n)&&n.tagName.toLowerCase()==="input"}function hx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function gx(n,i){return n.button===0&&(!i||i==="_self")&&!hx(n)}function Ju(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((i,r)=>{let o=n[r];return i.concat(Array.isArray(o)?o.map(c=>[r,c]):[[r,o]])},[]))}function vx(n,i){let r=Ju(n);return i&&i.forEach((o,c)=>{r.has(c)||i.getAll(c).forEach(d=>{r.append(c,d)})}),r}var Ir=null;function bx(){if(Ir===null)try{new FormData(document.createElement("form"),0),Ir=!1}catch{Ir=!0}return Ir}var xx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mu(n){return n!=null&&!xx.has(n)?(gt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kr}"`),null):n}function yx(n,i){let r,o,c,d,p;if(px(n)){let h=n.getAttribute("action");o=h?xa(h,i):null,r=n.getAttribute("method")||Hr,c=Mu(n.getAttribute("enctype"))||kr,d=new FormData(n)}else if(mx(n)||fx(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=n.getAttribute("formaction")||h.getAttribute("action");if(o=v?xa(v,i):null,r=n.getAttribute("formmethod")||h.getAttribute("method")||Hr,c=Mu(n.getAttribute("formenctype"))||Mu(h.getAttribute("enctype"))||kr,d=new FormData(h,n),!bx()){let{name:g,type:y,value:b}=n;if(y==="image"){let T=g?`${g}.`:"";d.append(`${T}x`,"0"),d.append(`${T}y`,"0")}else g&&d.append(g,b)}}else{if(tl(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Hr,o=null,c=kr,p=n}return d&&c==="text/plain"&&(p=d,d=void 0),{action:o,method:r.toLowerCase(),encType:c,formData:d,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mc(n,i){if(n===!1||n===null||typeof n>"u")throw new Error(i)}function Sx(n,i,r){let o=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return o.pathname==="/"?o.pathname=`_root.${r}`:i&&xa(o.pathname,i)==="/"?o.pathname=`${i.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function _x(n,i){if(n.id in i)return i[n.id];try{let r=await import(n.module);return i[n.id]=r,r}catch(r){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Tx(n,i,r){let o=await Promise.all(n.map(async c=>{let d=i.routes[c.route.id];if(d){let p=await _x(d,r);return p.links?p.links():[]}return[]}));return Dx(o.flat(1).filter(qx).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Jf(n,i,r,o,c,d){let p=(v,g)=>r[g]?v.route.id!==r[g].route.id:!0,h=(v,g)=>r[g].pathname!==v.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==v.params["*"];return d==="assets"?i.filter((v,g)=>p(v,g)||h(v,g)):d==="data"?i.filter((v,g)=>{let y=o.routes[v.route.id];if(!y||!y.hasLoader)return!1;if(p(v,g)||h(v,g))return!0;if(v.route.shouldRevalidate){let b=v.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Cx(n,i,{includeHydrateFallback:r}={}){return jx(n.map(o=>{let c=i.routes[o.route.id];if(!c)return[];let d=[c.module];return c.clientActionModule&&(d=d.concat(c.clientActionModule)),c.clientLoaderModule&&(d=d.concat(c.clientLoaderModule)),r&&c.hydrateFallbackModule&&(d=d.concat(c.hydrateFallbackModule)),c.imports&&(d=d.concat(c.imports)),d}).flat(1))}function jx(n){return[...new Set(n)]}function Ax(n){let i={},r=Object.keys(n).sort();for(let o of r)i[o]=n[o];return i}function Dx(n,i){let r=new Set;return new Set(i),n.reduce((o,c)=>{let d=JSON.stringify(Ax(c));return r.has(d)||(r.add(d),o.push({key:d,link:c})),o},[])}function Oh(){let n=A.useContext(cn);return mc(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Lx(){let n=A.useContext(Wr);return mc(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var pc=A.createContext(void 0);pc.displayName="FrameworkContext";function Vh(){let n=A.useContext(pc);return mc(n,"You must render this element inside a <HydratedRouter> element"),n}function Nx(n,i){let r=A.useContext(pc),[o,c]=A.useState(!1),[d,p]=A.useState(!1),{onFocus:h,onBlur:v,onMouseEnter:g,onMouseLeave:y,onTouchStart:b}=i,T=A.useRef(null);A.useEffect(()=>{if(n==="render"&&p(!0),n==="viewport"){let z=B=>{B.forEach(G=>{p(G.isIntersecting)})},V=new IntersectionObserver(z,{threshold:.5});return T.current&&V.observe(T.current),()=>{V.disconnect()}}},[n]),A.useEffect(()=>{if(o){let z=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(z)}}},[o]);let C=()=>{c(!0)},L=()=>{c(!1),p(!1)};return r?n!=="intent"?[d,T,{}]:[d,T,{onFocus:ci(h,C),onBlur:ci(v,L),onMouseEnter:ci(g,C),onMouseLeave:ci(y,L),onTouchStart:ci(b,C)}]:[!1,T,{}]}function ci(n,i){return r=>{n&&n(r),r.defaultPrevented||i(r)}}function Mx({page:n,...i}){let{router:r}=Oh(),o=A.useMemo(()=>jh(r.routes,n,r.basename),[r.routes,n,r.basename]);return o?A.createElement(Rx,{page:n,matches:o,...i}):null}function Ex(n){let{manifest:i,routeModules:r}=Vh(),[o,c]=A.useState([]);return A.useEffect(()=>{let d=!1;return Tx(n,i,r).then(p=>{d||c(p)}),()=>{d=!0}},[n,i,r]),o}function Rx({page:n,matches:i,...r}){let o=Kt(),{manifest:c,routeModules:d}=Vh(),{basename:p}=Oh(),{loaderData:h,matches:v}=Lx(),g=A.useMemo(()=>Jf(n,i,v,c,o,"data"),[n,i,v,c,o]),y=A.useMemo(()=>Jf(n,i,v,c,o,"assets"),[n,i,v,c,o]),b=A.useMemo(()=>{if(n===o.pathname+o.search+o.hash)return[];let L=new Set,z=!1;if(i.forEach(B=>{let G=c.routes[B.route.id];!G||!G.hasLoader||(!g.some(J=>J.route.id===B.route.id)&&B.route.id in h&&d[B.route.id]?.shouldRevalidate||G.hasClientLoader?z=!0:L.add(B.route.id))}),L.size===0)return[];let V=Sx(n,p,"data");return z&&L.size>0&&V.searchParams.set("_routes",i.filter(B=>L.has(B.route.id)).map(B=>B.route.id).join(",")),[V.pathname+V.search]},[p,h,o,c,g,i,n,d]),T=A.useMemo(()=>Cx(y,c),[y,c]),C=Ex(y);return A.createElement(A.Fragment,null,b.map(L=>A.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...r})),T.map(L=>A.createElement("link",{key:L,rel:"modulepreload",href:L,...r})),C.map(({key:L,link:z})=>A.createElement("link",{key:L,nonce:r.nonce,...z})))}function zx(...n){return i=>{n.forEach(r=>{typeof r=="function"?r(i):r!=null&&(r.current=i)})}}var Ph=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ph&&(window.__reactRouterVersion="7.10.1")}catch{}function Ox({basename:n,children:i,unstable_useTransitions:r,window:o}){let c=A.useRef();c.current==null&&(c.current=g1({window:o,v5Compat:!0}));let d=c.current,[p,h]=A.useState({action:d.action,location:d.location}),v=A.useCallback(g=>{r===!1?h(g):A.startTransition(()=>h(g))},[r]);return A.useLayoutEffect(()=>d.listen(v),[d,v]),A.createElement(cx,{basename:n,children:i,location:p.location,navigationType:p.action,navigator:d,unstable_useTransitions:r===!0})}var Uh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ya=A.forwardRef(function({onClick:i,discover:r="render",prefetch:o="none",relative:c,reloadDocument:d,replace:p,state:h,target:v,to:g,preventScrollReset:y,viewTransition:b,...T},C){let{basename:L,unstable_useTransitions:z}=A.useContext(Ut),V=typeof g=="string"&&Uh.test(g),B,G=!1;if(typeof g=="string"&&V&&(B=g,Ph))try{let ee=new URL(window.location.href),le=g.startsWith("//")?new URL(ee.protocol+g):new URL(g),K=xa(le.pathname,L);le.origin===ee.origin&&K!=null?g=K+le.search+le.hash:G=!0}catch{gt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=J1(g,{relative:c}),[$,ie,Y]=Nx(o,T),H=Ux(g,{replace:p,state:h,target:v,preventScrollReset:y,relative:c,viewTransition:b,unstable_useTransitions:z});function te(ee){i&&i(ee),ee.defaultPrevented||H(ee)}let Q=A.createElement("a",{...T,...Y,href:B||J,onClick:G||d?i:te,ref:zx(C,ie),target:v,"data-discover":!V&&r==="render"?"true":void 0});return $&&!V?A.createElement(A.Fragment,null,Q,A.createElement(Mx,{page:J})):Q});ya.displayName="Link";var wh=A.forwardRef(function({"aria-current":i="page",caseSensitive:r=!1,className:o="",end:c=!1,style:d,to:p,viewTransition:h,children:v,...g},y){let b=xi(p,{relative:g.relative}),T=Kt(),C=A.useContext(Wr),{navigator:L,basename:z}=A.useContext(Ut),V=C!=null&&Hx(b)&&h===!0,B=L.encodeLocation?L.encodeLocation(b).pathname:b.pathname,G=T.pathname,J=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;r||(G=G.toLowerCase(),J=J?J.toLowerCase():null,B=B.toLowerCase()),J&&z&&(J=xa(J,z)||J);const $=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ie=G===B||!c&&G.startsWith(B)&&G.charAt($)==="/",Y=J!=null&&(J===B||!c&&J.startsWith(B)&&J.charAt(B.length)==="/"),H={isActive:ie,isPending:Y,isTransitioning:V},te=ie?i:void 0,Q;typeof o=="function"?Q=o(H):Q=[o,ie?"active":null,Y?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let ee=typeof d=="function"?d(H):d;return A.createElement(ya,{...g,"aria-current":te,className:Q,ref:y,style:ee,to:p,viewTransition:h},typeof v=="function"?v(H):v)});wh.displayName="NavLink";var Vx=A.forwardRef(({discover:n="render",fetcherKey:i,navigate:r,reloadDocument:o,replace:c,state:d,method:p=Hr,action:h,onSubmit:v,relative:g,preventScrollReset:y,viewTransition:b,...T},C)=>{let{unstable_useTransitions:L}=A.useContext(Ut),z=Bx(),V=Gx(h,{relative:g}),B=p.toLowerCase()==="get"?"get":"post",G=typeof h=="string"&&Uh.test(h),J=$=>{if(v&&v($),$.defaultPrevented)return;$.preventDefault();let ie=$.nativeEvent.submitter,Y=ie?.getAttribute("formmethod")||p,H=()=>z(ie||$.currentTarget,{fetcherKey:i,method:Y,navigate:r,replace:c,state:d,relative:g,preventScrollReset:y,viewTransition:b});L&&r!==!1?A.startTransition(()=>H()):H()};return A.createElement("form",{ref:C,method:B,action:V,onSubmit:o?v:J,...T,"data-discover":!G&&n==="render"?"true":void 0})});Vx.displayName="Form";function Px(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ih(n){let i=A.useContext(cn);return we(i,Px(n)),i}function Ux(n,{target:i,replace:r,state:o,preventScrollReset:c,relative:d,viewTransition:p,unstable_useTransitions:h}={}){let v=el(),g=Kt(),y=xi(n,{relative:d});return A.useCallback(b=>{if(gx(b,i)){b.preventDefault();let T=r!==void 0?r:gi(g)===gi(y),C=()=>v(n,{replace:T,state:o,preventScrollReset:c,relative:d,viewTransition:p});h?A.startTransition(()=>C()):C()}},[g,v,y,r,o,i,n,c,d,p,h])}function fc(n){gt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=A.useRef(Ju(n)),r=A.useRef(!1),o=Kt(),c=A.useMemo(()=>vx(o.search,r.current?null:i.current),[o.search]),d=el(),p=A.useCallback((h,v)=>{const g=Ju(typeof h=="function"?h(new URLSearchParams(c)):h);r.current=!0,d("?"+g,v)},[d,c]);return[c,p]}var wx=0,Ix=()=>`__${String(++wx)}__`;function Bx(){let{router:n}=Ih("useSubmit"),{basename:i}=A.useContext(Ut),r=ix(),o=n.fetch,c=n.navigate;return A.useCallback(async(d,p={})=>{let{action:h,method:v,encType:g,formData:y,body:b}=yx(d,i);if(p.navigate===!1){let T=p.fetcherKey||Ix();await o(T,r,p.action||h,{preventScrollReset:p.preventScrollReset,formData:y,body:b,formMethod:p.method||v,formEncType:p.encType||g,flushSync:p.flushSync})}else await c(p.action||h,{preventScrollReset:p.preventScrollReset,formData:y,body:b,formMethod:p.method||v,formEncType:p.encType||g,replace:p.replace,state:p.state,fromRouteId:r,flushSync:p.flushSync,viewTransition:p.viewTransition})},[o,c,i,r])}function Gx(n,{relative:i}={}){let{basename:r}=A.useContext(Ut),o=A.useContext(wt);we(o,"useFormAction must be used inside a RouteContext");let[c]=o.matches.slice(-1),d={...xi(n||".",{relative:i})},p=Kt();if(n==null){d.search=p.search;let h=new URLSearchParams(d.search),v=h.getAll("index");if(v.some(y=>y==="")){h.delete("index"),v.filter(b=>b).forEach(b=>h.append("index",b));let y=h.toString();d.search=y?`?${y}`:""}}return(!n||n===".")&&c.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:ba([r,d.pathname])),gi(d)}function Hx(n,{relative:i}={}){let r=A.useContext(Nh);we(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Ih("useViewTransitionState"),c=xi(n,{relative:i});if(!r.isTransitioning)return!1;let d=xa(r.currentLocation.pathname,o)||r.currentLocation.pathname,p=xa(r.nextLocation.pathname,o)||r.nextLocation.pathname;return Jr(c.pathname,p)!=null||Jr(c.pathname,d)!=null}const kx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Jx=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,r,o)=>o?o.toUpperCase():r.toLowerCase()),Ff=n=>{const i=Jx(n);return i.charAt(0).toUpperCase()+i.slice(1)},Bh=(...n)=>n.filter((i,r,o)=>!!i&&i.trim()!==""&&o.indexOf(i)===r).join(" ").trim(),Fx=n=>{for(const i in n)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};var Yx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Qx=A.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:p,...h},v)=>A.createElement("svg",{ref:v,...Yx,width:i,height:i,stroke:n,strokeWidth:o?Number(r)*24/Number(i):r,className:Bh("lucide",c),...!d&&!Fx(h)&&{"aria-hidden":"true"},...h},[...p.map(([g,y])=>A.createElement(g,y)),...Array.isArray(d)?d:[d]]));const Ze=(n,i)=>{const r=A.forwardRef(({className:o,...c},d)=>A.createElement(Qx,{ref:d,iconNode:i,className:Bh(`lucide-${kx(Ff(n))}`,`lucide-${n}`,o),...c}));return r.displayName=Ff(n),r};const Kx=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Gh=Ze("book-open",Kx);const Xx=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Zx=Ze("brain",Xx);const $x=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wx=Ze("eye",$x);const ey=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ty=Ze("funnel",ey);const ay=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],sy=Ze("ghost",ay);const ny=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Hh=Ze("heart",ny);const iy=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],kh=Ze("map",iy);const ry=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],ly=Ze("scroll-text",ry);const oy=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],uy=Ze("scroll",oy);const cy=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Jh=Ze("search",cy);const dy=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],al=Ze("shield",dy);const my=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Fr=Ze("skull",my);const py=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],fy=Ze("sparkles",py);const hy=[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]],gy=Ze("sword",hy);const vy=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],hc=Ze("swords",vy);const by=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xy=Ze("target",by);const yy=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Yr=Ze("users",yy);const Sy=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_y=Ze("x",Sy);const qy=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Fh=Ze("zap",qy);function Yh(n){var i,r,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var c=n.length;for(i=0;i<c;i++)n[i]&&(r=Yh(n[i]))&&(o&&(o+=" "),o+=r)}else for(r in n)n[r]&&(o&&(o+=" "),o+=r);return o}function Ty(){for(var n,i,r=0,o="",c=arguments.length;r<c;r++)(n=arguments[r])&&(i=Yh(n))&&(o&&(o+=" "),o+=i);return o}const gc="-",Cy=n=>{const i=Ay(n),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=n;return{getClassGroupId:p=>{const h=p.split(gc);return h[0]===""&&h.length!==1&&h.shift(),Qh(h,i)||jy(p)},getConflictingClassGroupIds:(p,h)=>{const v=r[p]||[];return h&&o[p]?[...v,...o[p]]:v}}},Qh=(n,i)=>{if(n.length===0)return i.classGroupId;const r=n[0],o=i.nextPart.get(r),c=o?Qh(n.slice(1),o):void 0;if(c)return c;if(i.validators.length===0)return;const d=n.join(gc);return i.validators.find(({validator:p})=>p(d))?.classGroupId},Yf=/^\[(.+)\]$/,jy=n=>{if(Yf.test(n)){const i=Yf.exec(n)[1],r=i?.substring(0,i.indexOf(":"));if(r)return"arbitrary.."+r}},Ay=n=>{const{theme:i,prefix:r}=n,o={nextPart:new Map,validators:[]};return Ly(Object.entries(n.classGroups),r).forEach(([d,p])=>{Fu(p,o,d,i)}),o},Fu=(n,i,r,o)=>{n.forEach(c=>{if(typeof c=="string"){const d=c===""?i:Qf(i,c);d.classGroupId=r;return}if(typeof c=="function"){if(Dy(c)){Fu(c(o),i,r,o);return}i.validators.push({validator:c,classGroupId:r});return}Object.entries(c).forEach(([d,p])=>{Fu(p,Qf(i,d),r,o)})})},Qf=(n,i)=>{let r=n;return i.split(gc).forEach(o=>{r.nextPart.has(o)||r.nextPart.set(o,{nextPart:new Map,validators:[]}),r=r.nextPart.get(o)}),r},Dy=n=>n.isThemeGetter,Ly=(n,i)=>i?n.map(([r,o])=>{const c=o.map(d=>typeof d=="string"?i+d:typeof d=="object"?Object.fromEntries(Object.entries(d).map(([p,h])=>[i+p,h])):d);return[r,c]}):n,Ny=n=>{if(n<1)return{get:()=>{},set:()=>{}};let i=0,r=new Map,o=new Map;const c=(d,p)=>{r.set(d,p),i++,i>n&&(i=0,o=r,r=new Map)};return{get(d){let p=r.get(d);if(p!==void 0)return p;if((p=o.get(d))!==void 0)return c(d,p),p},set(d,p){r.has(d)?r.set(d,p):c(d,p)}}},Kh="!",My=n=>{const{separator:i,experimentalParseClassName:r}=n,o=i.length===1,c=i[0],d=i.length,p=h=>{const v=[];let g=0,y=0,b;for(let V=0;V<h.length;V++){let B=h[V];if(g===0){if(B===c&&(o||h.slice(V,V+d)===i)){v.push(h.slice(y,V)),y=V+d;continue}if(B==="/"){b=V;continue}}B==="["?g++:B==="]"&&g--}const T=v.length===0?h:h.substring(y),C=T.startsWith(Kh),L=C?T.substring(1):T,z=b&&b>y?b-y:void 0;return{modifiers:v,hasImportantModifier:C,baseClassName:L,maybePostfixModifierPosition:z}};return r?h=>r({className:h,parseClassName:p}):p},Ey=n=>{if(n.length<=1)return n;const i=[];let r=[];return n.forEach(o=>{o[0]==="["?(i.push(...r.sort(),o),r=[]):r.push(o)}),i.push(...r.sort()),i},Ry=n=>({cache:Ny(n.cacheSize),parseClassName:My(n),...Cy(n)}),zy=/\s+/,Oy=(n,i)=>{const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:c}=i,d=[],p=n.trim().split(zy);let h="";for(let v=p.length-1;v>=0;v-=1){const g=p[v],{modifiers:y,hasImportantModifier:b,baseClassName:T,maybePostfixModifierPosition:C}=r(g);let L=!!C,z=o(L?T.substring(0,C):T);if(!z){if(!L){h=g+(h.length>0?" "+h:h);continue}if(z=o(T),!z){h=g+(h.length>0?" "+h:h);continue}L=!1}const V=Ey(y).join(":"),B=b?V+Kh:V,G=B+z;if(d.includes(G))continue;d.push(G);const J=c(z,L);for(let $=0;$<J.length;++$){const ie=J[$];d.push(B+ie)}h=g+(h.length>0?" "+h:h)}return h};function Vy(){let n=0,i,r,o="";for(;n<arguments.length;)(i=arguments[n++])&&(r=Xh(i))&&(o&&(o+=" "),o+=r);return o}const Xh=n=>{if(typeof n=="string")return n;let i,r="";for(let o=0;o<n.length;o++)n[o]&&(i=Xh(n[o]))&&(r&&(r+=" "),r+=i);return r};function Py(n,...i){let r,o,c,d=p;function p(v){const g=i.reduce((y,b)=>b(y),n());return r=Ry(g),o=r.cache.get,c=r.cache.set,d=h,h(v)}function h(v){const g=o(v);if(g)return g;const y=Oy(v,r);return c(v,y),y}return function(){return d(Vy.apply(null,arguments))}}const Ve=n=>{const i=r=>r[n]||[];return i.isThemeGetter=!0,i},Zh=/^\[(?:([a-z-]+):)?(.+)\]$/i,Uy=/^\d+\/\d+$/,wy=new Set(["px","full","screen"]),Iy=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,By=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Gy=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Hy=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ky=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fa=n=>un(n)||wy.has(n)||Uy.test(n),Ya=n=>mn(n,"length",$y),un=n=>!!n&&!Number.isNaN(Number(n)),Eu=n=>mn(n,"number",un),di=n=>!!n&&Number.isInteger(Number(n)),Jy=n=>n.endsWith("%")&&un(n.slice(0,-1)),fe=n=>Zh.test(n),Qa=n=>Iy.test(n),Fy=new Set(["length","size","percentage"]),Yy=n=>mn(n,Fy,$h),Qy=n=>mn(n,"position",$h),Ky=new Set(["image","url"]),Xy=n=>mn(n,Ky,e0),Zy=n=>mn(n,"",Wy),mi=()=>!0,mn=(n,i,r)=>{const o=Zh.exec(n);return o?o[1]?typeof i=="string"?o[1]===i:i.has(o[1]):r(o[2]):!1},$y=n=>By.test(n)&&!Gy.test(n),$h=()=>!1,Wy=n=>Hy.test(n),e0=n=>ky.test(n),t0=()=>{const n=Ve("colors"),i=Ve("spacing"),r=Ve("blur"),o=Ve("brightness"),c=Ve("borderColor"),d=Ve("borderRadius"),p=Ve("borderSpacing"),h=Ve("borderWidth"),v=Ve("contrast"),g=Ve("grayscale"),y=Ve("hueRotate"),b=Ve("invert"),T=Ve("gap"),C=Ve("gradientColorStops"),L=Ve("gradientColorStopPositions"),z=Ve("inset"),V=Ve("margin"),B=Ve("opacity"),G=Ve("padding"),J=Ve("saturate"),$=Ve("scale"),ie=Ve("sepia"),Y=Ve("skew"),H=Ve("space"),te=Ve("translate"),Q=()=>["auto","contain","none"],ee=()=>["auto","hidden","clip","visible","scroll"],le=()=>["auto",fe,i],K=()=>[fe,i],Ee=()=>["",fa,Ya],me=()=>["auto",un,fe],Pe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],E=()=>["solid","dashed","dotted","double","none"],k=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>["start","end","center","between","around","evenly","stretch"],he=()=>["","0",fe],_e=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>[un,fe];return{cacheSize:500,separator:":",theme:{colors:[mi],spacing:[fa,Ya],blur:["none","",Qa,fe],brightness:_(),borderColor:[n],borderRadius:["none","","full",Qa,fe],borderSpacing:K(),borderWidth:Ee(),contrast:_(),grayscale:he(),hueRotate:_(),invert:he(),gap:K(),gradientColorStops:[n],gradientColorStopPositions:[Jy,Ya],inset:le(),margin:le(),opacity:_(),padding:K(),saturate:_(),scale:_(),sepia:he(),skew:_(),space:K(),translate:K()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[Qa]}],"break-after":[{"break-after":_e()}],"break-before":[{"break-before":_e()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Pe(),fe]}],overflow:[{overflow:ee()}],"overflow-x":[{"overflow-x":ee()}],"overflow-y":[{"overflow-y":ee()}],overscroll:[{overscroll:Q()}],"overscroll-x":[{"overscroll-x":Q()}],"overscroll-y":[{"overscroll-y":Q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[z]}],"inset-x":[{"inset-x":[z]}],"inset-y":[{"inset-y":[z]}],start:[{start:[z]}],end:[{end:[z]}],top:[{top:[z]}],right:[{right:[z]}],bottom:[{bottom:[z]}],left:[{left:[z]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",di,fe]}],basis:[{basis:le()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:he()}],shrink:[{shrink:he()}],order:[{order:["first","last","none",di,fe]}],"grid-cols":[{"grid-cols":[mi]}],"col-start-end":[{col:["auto",{span:["full",di,fe]},fe]}],"col-start":[{"col-start":me()}],"col-end":[{"col-end":me()}],"grid-rows":[{"grid-rows":[mi]}],"row-start-end":[{row:["auto",{span:[di,fe]},fe]}],"row-start":[{"row-start":me()}],"row-end":[{"row-end":me()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[T]}],"gap-x":[{"gap-x":[T]}],"gap-y":[{"gap-y":[T]}],"justify-content":[{justify:["normal",...ae()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ae(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ae(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[G]}],px:[{px:[G]}],py:[{py:[G]}],ps:[{ps:[G]}],pe:[{pe:[G]}],pt:[{pt:[G]}],pr:[{pr:[G]}],pb:[{pb:[G]}],pl:[{pl:[G]}],m:[{m:[V]}],mx:[{mx:[V]}],my:[{my:[V]}],ms:[{ms:[V]}],me:[{me:[V]}],mt:[{mt:[V]}],mr:[{mr:[V]}],mb:[{mb:[V]}],ml:[{ml:[V]}],"space-x":[{"space-x":[H]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[H]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fe,i]}],"min-w":[{"min-w":[fe,i,"min","max","fit"]}],"max-w":[{"max-w":[fe,i,"none","full","min","max","fit","prose",{screen:[Qa]},Qa]}],h:[{h:[fe,i,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fe,i,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fe,i,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fe,i,"auto","min","max","fit"]}],"font-size":[{text:["base",Qa,Ya]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Eu]}],"font-family":[{font:[mi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",un,Eu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fa,fe]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[B]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...E(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fa,Ya]}],"underline-offset":[{"underline-offset":["auto",fa,fe]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[B]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Pe(),Qy]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Yy]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Xy]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[L]}],"gradient-via-pos":[{via:[L]}],"gradient-to-pos":[{to:[L]}],"gradient-from":[{from:[C]}],"gradient-via":[{via:[C]}],"gradient-to":[{to:[C]}],rounded:[{rounded:[d]}],"rounded-s":[{"rounded-s":[d]}],"rounded-e":[{"rounded-e":[d]}],"rounded-t":[{"rounded-t":[d]}],"rounded-r":[{"rounded-r":[d]}],"rounded-b":[{"rounded-b":[d]}],"rounded-l":[{"rounded-l":[d]}],"rounded-ss":[{"rounded-ss":[d]}],"rounded-se":[{"rounded-se":[d]}],"rounded-ee":[{"rounded-ee":[d]}],"rounded-es":[{"rounded-es":[d]}],"rounded-tl":[{"rounded-tl":[d]}],"rounded-tr":[{"rounded-tr":[d]}],"rounded-br":[{"rounded-br":[d]}],"rounded-bl":[{"rounded-bl":[d]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[B]}],"border-style":[{border:[...E(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[B]}],"divide-style":[{divide:E()}],"border-color":[{border:[c]}],"border-color-x":[{"border-x":[c]}],"border-color-y":[{"border-y":[c]}],"border-color-s":[{"border-s":[c]}],"border-color-e":[{"border-e":[c]}],"border-color-t":[{"border-t":[c]}],"border-color-r":[{"border-r":[c]}],"border-color-b":[{"border-b":[c]}],"border-color-l":[{"border-l":[c]}],"divide-color":[{divide:[c]}],"outline-style":[{outline:["",...E()]}],"outline-offset":[{"outline-offset":[fa,fe]}],"outline-w":[{outline:[fa,Ya]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[B]}],"ring-offset-w":[{"ring-offset":[fa,Ya]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Qa,Zy]}],"shadow-color":[{shadow:[mi]}],opacity:[{opacity:[B]}],"mix-blend":[{"mix-blend":[...k(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":k()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[o]}],contrast:[{contrast:[v]}],"drop-shadow":[{"drop-shadow":["","none",Qa,fe]}],grayscale:[{grayscale:[g]}],"hue-rotate":[{"hue-rotate":[y]}],invert:[{invert:[b]}],saturate:[{saturate:[J]}],sepia:[{sepia:[ie]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[v]}],"backdrop-grayscale":[{"backdrop-grayscale":[g]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[y]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[B]}],"backdrop-saturate":[{"backdrop-saturate":[J]}],"backdrop-sepia":[{"backdrop-sepia":[ie]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[p]}],"border-spacing-x":[{"border-spacing-x":[p]}],"border-spacing-y":[{"border-spacing-y":[p]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:_()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:_()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[$]}],"scale-x":[{"scale-x":[$]}],"scale-y":[{"scale-y":[$]}],rotate:[{rotate:[di,fe]}],"translate-x":[{"translate-x":[te]}],"translate-y":[{"translate-y":[te]}],"skew-x":[{"skew-x":[Y]}],"skew-y":[{"skew-y":[Y]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[fa,Ya,Eu]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},a0=Py(t0);function Ge(...n){return a0(Ty(n))}var Ru={exports:{}},zu,Kf;function s0(){if(Kf)return zu;Kf=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return zu=n,zu}var Ou,Xf;function n0(){if(Xf)return Ou;Xf=1;var n=s0();function i(){}function r(){}return r.resetWarningCache=i,Ou=function(){function o(p,h,v,g,y,b){if(b!==n){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}o.isRequired=o;function c(){return o}var d={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:c,element:o,elementType:o,instanceOf:c,node:o,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:r,resetWarningCache:i};return d.PropTypes=d,d},Ou}var Zf;function i0(){return Zf||(Zf=1,Ru.exports=n0()()),Ru.exports}var r0=i0();const O=rc(r0),re=n=>typeof n=="string",pi=()=>{let n,i;const r=new Promise((o,c)=>{n=o,i=c});return r.resolve=n,r.reject=i,r},$f=n=>n==null?"":""+n,l0=(n,i,r)=>{n.forEach(o=>{i[o]&&(r[o]=i[o])})},o0=/###/g,Wf=n=>n&&n.indexOf("###")>-1?n.replace(o0,"."):n,eh=n=>!n||re(n),fi=(n,i,r)=>{const o=re(i)?i.split("."):i;let c=0;for(;c<o.length-1;){if(eh(n))return{};const d=Wf(o[c]);!n[d]&&r&&(n[d]=new r),Object.prototype.hasOwnProperty.call(n,d)?n=n[d]:n={},++c}return eh(n)?{}:{obj:n,k:Wf(o[c])}},th=(n,i,r)=>{const{obj:o,k:c}=fi(n,i,Object);if(o!==void 0||i.length===1){o[c]=r;return}let d=i[i.length-1],p=i.slice(0,i.length-1),h=fi(n,p,Object);for(;h.obj===void 0&&p.length;)d=`${p[p.length-1]}.${d}`,p=p.slice(0,p.length-1),h=fi(n,p,Object),h?.obj&&typeof h.obj[`${h.k}.${d}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${d}`]=r},u0=(n,i,r,o)=>{const{obj:c,k:d}=fi(n,i,Object);c[d]=c[d]||[],c[d].push(r)},Qr=(n,i)=>{const{obj:r,k:o}=fi(n,i);if(r&&Object.prototype.hasOwnProperty.call(r,o))return r[o]},c0=(n,i,r)=>{const o=Qr(n,r);return o!==void 0?o:Qr(i,r)},Wh=(n,i,r)=>{for(const o in i)o!=="__proto__"&&o!=="constructor"&&(o in n?re(n[o])||n[o]instanceof String||re(i[o])||i[o]instanceof String?r&&(n[o]=i[o]):Wh(n[o],i[o],r):n[o]=i[o]);return n},ln=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var d0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const m0=n=>re(n)?n.replace(/[&<>"'\/]/g,i=>d0[i]):n;class p0{constructor(i){this.capacity=i,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(i){const r=this.regExpMap.get(i);if(r!==void 0)return r;const o=new RegExp(i);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(i,o),this.regExpQueue.push(i),o}}const f0=[" ",",","?","!",";"],h0=new p0(20),g0=(n,i,r)=>{i=i||"",r=r||"";const o=f0.filter(p=>i.indexOf(p)<0&&r.indexOf(p)<0);if(o.length===0)return!0;const c=h0.getRegExp(`(${o.map(p=>p==="?"?"\\?":p).join("|")})`);let d=!c.test(n);if(!d){const p=n.indexOf(r);p>0&&!c.test(n.substring(0,p))&&(d=!0)}return d},Yu=(n,i,r=".")=>{if(!n)return;if(n[i])return Object.prototype.hasOwnProperty.call(n,i)?n[i]:void 0;const o=i.split(r);let c=n;for(let d=0;d<o.length;){if(!c||typeof c!="object")return;let p,h="";for(let v=d;v<o.length;++v)if(v!==d&&(h+=r),h+=o[v],p=c[h],p!==void 0){if(["string","number","boolean"].indexOf(typeof p)>-1&&v<o.length-1)continue;d+=v-d+1;break}c=p}return c},vi=n=>n?.replace("_","-"),v0={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,i){console?.[n]?.apply?.(console,i)}};class Kr{constructor(i,r={}){this.init(i,r)}init(i,r={}){this.prefix=r.prefix||"i18next:",this.logger=i||v0,this.options=r,this.debug=r.debug}log(...i){return this.forward(i,"log","",!0)}warn(...i){return this.forward(i,"warn","",!0)}error(...i){return this.forward(i,"error","")}deprecate(...i){return this.forward(i,"warn","WARNING DEPRECATED: ",!0)}forward(i,r,o,c){return c&&!this.debug?null:(re(i[0])&&(i[0]=`${o}${this.prefix} ${i[0]}`),this.logger[r](i))}create(i){return new Kr(this.logger,{prefix:`${this.prefix}:${i}:`,...this.options})}clone(i){return i=i||this.options,i.prefix=i.prefix||this.prefix,new Kr(this.logger,i)}}var Yt=new Kr;class sl{constructor(){this.observers={}}on(i,r){return i.split(" ").forEach(o=>{this.observers[o]||(this.observers[o]=new Map);const c=this.observers[o].get(r)||0;this.observers[o].set(r,c+1)}),this}off(i,r){if(this.observers[i]){if(!r){delete this.observers[i];return}this.observers[i].delete(r)}}emit(i,...r){this.observers[i]&&Array.from(this.observers[i].entries()).forEach(([c,d])=>{for(let p=0;p<d;p++)c(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([c,d])=>{for(let p=0;p<d;p++)c.apply(c,[i,...r])})}}class ah extends sl{constructor(i,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=i||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}removeNamespaces(i){const r=this.options.ns.indexOf(i);r>-1&&this.options.ns.splice(r,1)}getResource(i,r,o,c={}){const d=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,p=c.ignoreJSONStructure!==void 0?c.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;i.indexOf(".")>-1?h=i.split("."):(h=[i,r],o&&(Array.isArray(o)?h.push(...o):re(o)&&d?h.push(...o.split(d)):h.push(o)));const v=Qr(this.data,h);return!v&&!r&&!o&&i.indexOf(".")>-1&&(i=h[0],r=h[1],o=h.slice(2).join(".")),v||!p||!re(o)?v:Yu(this.data?.[i]?.[r],o,d)}addResource(i,r,o,c,d={silent:!1}){const p=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator;let h=[i,r];o&&(h=h.concat(p?o.split(p):o)),i.indexOf(".")>-1&&(h=i.split("."),c=r,r=h[1]),this.addNamespaces(r),th(this.data,h,c),d.silent||this.emit("added",i,r,o,c)}addResources(i,r,o,c={silent:!1}){for(const d in o)(re(o[d])||Array.isArray(o[d]))&&this.addResource(i,r,d,o[d],{silent:!0});c.silent||this.emit("added",i,r,o)}addResourceBundle(i,r,o,c,d,p={silent:!1,skipCopy:!1}){let h=[i,r];i.indexOf(".")>-1&&(h=i.split("."),c=o,o=r,r=h[1]),this.addNamespaces(r);let v=Qr(this.data,h)||{};p.skipCopy||(o=JSON.parse(JSON.stringify(o))),c?Wh(v,o,d):v={...v,...o},th(this.data,h,v),p.silent||this.emit("added",i,r,o)}removeResourceBundle(i,r){this.hasResourceBundle(i,r)&&delete this.data[i][r],this.removeNamespaces(r),this.emit("removed",i,r)}hasResourceBundle(i,r){return this.getResource(i,r)!==void 0}getResourceBundle(i,r){return r||(r=this.options.defaultNS),this.getResource(i,r)}getDataByLanguage(i){return this.data[i]}hasLanguageSomeTranslations(i){const r=this.getDataByLanguage(i);return!!(r&&Object.keys(r)||[]).find(c=>r[c]&&Object.keys(r[c]).length>0)}toJSON(){return this.data}}var eg={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,i,r,o,c){return n.forEach(d=>{i=this.processors[d]?.process(i,r,o,c)??i}),i}};const tg=Symbol("i18next/PATH_KEY");function b0(){const n=[],i=Object.create(null);let r;return i.get=(o,c)=>(r?.revoke?.(),c===tg?n:(n.push(c),r=Proxy.revocable(o,i),r.proxy)),Proxy.revocable(Object.create(null),i).proxy}function Qu(n,i){const{[tg]:r}=n(b0());return r.join(i?.keySeparator??".")}const sh={},Vu=n=>!re(n)&&typeof n!="boolean"&&typeof n!="number";class Xr extends sl{constructor(i,r={}){super(),l0(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Yt.create("translator")}changeLanguage(i){i&&(this.language=i)}exists(i,r={interpolation:{}}){const o={...r};if(i==null)return!1;const c=this.resolve(i,o);if(c?.res===void 0)return!1;const d=Vu(c.res);return!(o.returnObjects===!1&&d)}extractFromKey(i,r){let o=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");const c=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let d=r.ns||this.options.defaultNS||[];const p=o&&i.indexOf(o)>-1,h=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!g0(i,o,c);if(p&&!h){const v=i.match(this.interpolator.nestingRegexp);if(v&&v.length>0)return{key:i,namespaces:re(d)?[d]:d};const g=i.split(o);(o!==c||o===c&&this.options.ns.indexOf(g[0])>-1)&&(d=g.shift()),i=g.join(c)}return{key:i,namespaces:re(d)?[d]:d}}translate(i,r,o){let c=typeof r=="object"?{...r}:r;if(typeof c!="object"&&this.options.overloadTranslationOptionHandler&&(c=this.options.overloadTranslationOptionHandler(arguments)),typeof c=="object"&&(c={...c}),c||(c={}),i==null)return"";typeof i=="function"&&(i=Qu(i,{...this.options,...c})),Array.isArray(i)||(i=[String(i)]);const d=c.returnDetails!==void 0?c.returnDetails:this.options.returnDetails,p=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,{key:h,namespaces:v}=this.extractFromKey(i[i.length-1],c),g=v[v.length-1];let y=c.nsSeparator!==void 0?c.nsSeparator:this.options.nsSeparator;y===void 0&&(y=":");const b=c.lng||this.language,T=c.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(b?.toLowerCase()==="cimode")return T?d?{res:`${g}${y}${h}`,usedKey:h,exactUsedKey:h,usedLng:b,usedNS:g,usedParams:this.getUsedParamsDetails(c)}:`${g}${y}${h}`:d?{res:h,usedKey:h,exactUsedKey:h,usedLng:b,usedNS:g,usedParams:this.getUsedParamsDetails(c)}:h;const C=this.resolve(i,c);let L=C?.res;const z=C?.usedKey||h,V=C?.exactUsedKey||h,B=["[object Number]","[object Function]","[object RegExp]"],G=c.joinArrays!==void 0?c.joinArrays:this.options.joinArrays,J=!this.i18nFormat||this.i18nFormat.handleAsObject,$=c.count!==void 0&&!re(c.count),ie=Xr.hasDefaultValue(c),Y=$?this.pluralResolver.getSuffix(b,c.count,c):"",H=c.ordinal&&$?this.pluralResolver.getSuffix(b,c.count,{ordinal:!1}):"",te=$&&!c.ordinal&&c.count===0,Q=te&&c[`defaultValue${this.options.pluralSeparator}zero`]||c[`defaultValue${Y}`]||c[`defaultValue${H}`]||c.defaultValue;let ee=L;J&&!L&&ie&&(ee=Q);const le=Vu(ee),K=Object.prototype.toString.apply(ee);if(J&&ee&&le&&B.indexOf(K)<0&&!(re(G)&&Array.isArray(ee))){if(!c.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ee=this.options.returnedObjectHandler?this.options.returnedObjectHandler(z,ee,{...c,ns:v}):`key '${h} (${this.language})' returned an object instead of string.`;return d?(C.res=Ee,C.usedParams=this.getUsedParamsDetails(c),C):Ee}if(p){const Ee=Array.isArray(ee),me=Ee?[]:{},Pe=Ee?V:z;for(const E in ee)if(Object.prototype.hasOwnProperty.call(ee,E)){const k=`${Pe}${p}${E}`;ie&&!L?me[E]=this.translate(k,{...c,defaultValue:Vu(Q)?Q[E]:void 0,joinArrays:!1,ns:v}):me[E]=this.translate(k,{...c,joinArrays:!1,ns:v}),me[E]===k&&(me[E]=ee[E])}L=me}}else if(J&&re(G)&&Array.isArray(L))L=L.join(G),L&&(L=this.extendTranslation(L,i,c,o));else{let Ee=!1,me=!1;!this.isValidLookup(L)&&ie&&(Ee=!0,L=Q),this.isValidLookup(L)||(me=!0,L=h);const E=(c.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&me?void 0:L,k=ie&&Q!==L&&this.options.updateMissing;if(me||Ee||k){if(this.logger.log(k?"updateKey":"missingKey",b,g,h,k?Q:L),p){const _=this.resolve(h,{...c,keySeparator:!1});_&&_.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ae=[];const he=this.languageUtils.getFallbackCodes(this.options.fallbackLng,c.lng||this.language);if(this.options.saveMissingTo==="fallback"&&he&&he[0])for(let _=0;_<he.length;_++)ae.push(he[_]);else this.options.saveMissingTo==="all"?ae=this.languageUtils.toResolveHierarchy(c.lng||this.language):ae.push(c.lng||this.language);const _e=(_,U,F)=>{const X=ie&&F!==L?F:E;this.options.missingKeyHandler?this.options.missingKeyHandler(_,g,U,X,k,c):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(_,g,U,X,k,c),this.emit("missingKey",_,g,U,L)};this.options.saveMissing&&(this.options.saveMissingPlurals&&$?ae.forEach(_=>{const U=this.pluralResolver.getSuffixes(_,c);te&&c[`defaultValue${this.options.pluralSeparator}zero`]&&U.indexOf(`${this.options.pluralSeparator}zero`)<0&&U.push(`${this.options.pluralSeparator}zero`),U.forEach(F=>{_e([_],h+F,c[`defaultValue${F}`]||Q)})}):_e(ae,h,Q))}L=this.extendTranslation(L,i,c,C,o),me&&L===h&&this.options.appendNamespaceToMissingKey&&(L=`${g}${y}${h}`),(me||Ee)&&this.options.parseMissingKeyHandler&&(L=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${g}${y}${h}`:h,Ee?L:void 0,c))}return d?(C.res=L,C.usedParams=this.getUsedParamsDetails(c),C):L}extendTranslation(i,r,o,c,d){if(this.i18nFormat?.parse)i=this.i18nFormat.parse(i,{...this.options.interpolation.defaultVariables,...o},o.lng||this.language||c.usedLng,c.usedNS,c.usedKey,{resolved:c});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init({...o,interpolation:{...this.options.interpolation,...o.interpolation}});const v=re(i)&&(o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(v){const b=i.match(this.interpolator.nestingRegexp);g=b&&b.length}let y=o.replace&&!re(o.replace)?o.replace:o;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),i=this.interpolator.interpolate(i,y,o.lng||this.language||c.usedLng,o),v){const b=i.match(this.interpolator.nestingRegexp),T=b&&b.length;g<T&&(o.nest=!1)}!o.lng&&c&&c.res&&(o.lng=this.language||c.usedLng),o.nest!==!1&&(i=this.interpolator.nest(i,(...b)=>d?.[0]===b[0]&&!o.context?(this.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${r[0]}`),null):this.translate(...b,r),o)),o.interpolation&&this.interpolator.reset()}const p=o.postProcess||this.options.postProcess,h=re(p)?[p]:p;return i!=null&&h?.length&&o.applyPostProcessor!==!1&&(i=eg.handle(h,i,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...c,usedParams:this.getUsedParamsDetails(o)},...o}:o,this)),i}resolve(i,r={}){let o,c,d,p,h;return re(i)&&(i=[i]),i.forEach(v=>{if(this.isValidLookup(o))return;const g=this.extractFromKey(v,r),y=g.key;c=y;let b=g.namespaces;this.options.fallbackNS&&(b=b.concat(this.options.fallbackNS));const T=r.count!==void 0&&!re(r.count),C=T&&!r.ordinal&&r.count===0,L=r.context!==void 0&&(re(r.context)||typeof r.context=="number")&&r.context!=="",z=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);b.forEach(V=>{this.isValidLookup(o)||(h=V,!sh[`${z[0]}-${V}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(sh[`${z[0]}-${V}`]=!0,this.logger.warn(`key "${c}" for languages "${z.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),z.forEach(B=>{if(this.isValidLookup(o))return;p=B;const G=[y];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(G,y,B,V,r);else{let $;T&&($=this.pluralResolver.getSuffix(B,r.count,r));const ie=`${this.options.pluralSeparator}zero`,Y=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(T&&(r.ordinal&&$.indexOf(Y)===0&&G.push(y+$.replace(Y,this.options.pluralSeparator)),G.push(y+$),C&&G.push(y+ie)),L){const H=`${y}${this.options.contextSeparator||"_"}${r.context}`;G.push(H),T&&(r.ordinal&&$.indexOf(Y)===0&&G.push(H+$.replace(Y,this.options.pluralSeparator)),G.push(H+$),C&&G.push(H+ie))}}let J;for(;J=G.pop();)this.isValidLookup(o)||(d=J,o=this.getResource(B,V,J,r))}))})}),{res:o,usedKey:c,exactUsedKey:d,usedLng:p,usedNS:h}}isValidLookup(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}getResource(i,r,o,c={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(i,r,o,c):this.resourceStore.getResource(i,r,o,c)}getUsedParamsDetails(i={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],o=i.replace&&!re(i.replace);let c=o?i.replace:i;if(o&&typeof i.count<"u"&&(c.count=i.count),this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),!o){c={...c};for(const d of r)delete c[d]}return c}static hasDefaultValue(i){const r="defaultValue";for(const o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&r===o.substring(0,r.length)&&i[o]!==void 0)return!0;return!1}}class nh{constructor(i){this.options=i,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Yt.create("languageUtils")}getScriptPartFromCode(i){if(i=vi(i),!i||i.indexOf("-")<0)return null;const r=i.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(i){if(i=vi(i),!i||i.indexOf("-")<0)return i;const r=i.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(i){if(re(i)&&i.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(i)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?i.toLowerCase():i)}return this.options.cleanCode||this.options.lowerCaseLng?i.toLowerCase():i}isSupportedCode(i){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(i=this.getLanguagePartFromCode(i)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(i)>-1}getBestMatchFromCodes(i){if(!i)return null;let r;return i.forEach(o=>{if(r)return;const c=this.formatLanguageCode(o);(!this.options.supportedLngs||this.isSupportedCode(c))&&(r=c)}),!r&&this.options.supportedLngs&&i.forEach(o=>{if(r)return;const c=this.getScriptPartFromCode(o);if(this.isSupportedCode(c))return r=c;const d=this.getLanguagePartFromCode(o);if(this.isSupportedCode(d))return r=d;r=this.options.supportedLngs.find(p=>{if(p===d)return p;if(!(p.indexOf("-")<0&&d.indexOf("-")<0)&&(p.indexOf("-")>0&&d.indexOf("-")<0&&p.substring(0,p.indexOf("-"))===d||p.indexOf(d)===0&&d.length>1))return p})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(i,r){if(!i)return[];if(typeof i=="function"&&(i=i(r)),re(i)&&(i=[i]),Array.isArray(i))return i;if(!r)return i.default||[];let o=i[r];return o||(o=i[this.getScriptPartFromCode(r)]),o||(o=i[this.formatLanguageCode(r)]),o||(o=i[this.getLanguagePartFromCode(r)]),o||(o=i.default),o||[]}toResolveHierarchy(i,r){const o=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],i),c=[],d=p=>{p&&(this.isSupportedCode(p)?c.push(p):this.logger.warn(`rejecting language code not found in supportedLngs: ${p}`))};return re(i)&&(i.indexOf("-")>-1||i.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&d(this.formatLanguageCode(i)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&d(this.getScriptPartFromCode(i)),this.options.load!=="currentOnly"&&d(this.getLanguagePartFromCode(i))):re(i)&&d(this.formatLanguageCode(i)),o.forEach(p=>{c.indexOf(p)<0&&d(this.formatLanguageCode(p))}),c}}const ih={zero:0,one:1,two:2,few:3,many:4,other:5},rh={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class x0{constructor(i,r={}){this.languageUtils=i,this.options=r,this.logger=Yt.create("pluralResolver"),this.pluralRulesCache={}}addRule(i,r){this.rules[i]=r}clearCache(){this.pluralRulesCache={}}getRule(i,r={}){const o=vi(i==="dev"?"en":i),c=r.ordinal?"ordinal":"cardinal",d=JSON.stringify({cleanedCode:o,type:c});if(d in this.pluralRulesCache)return this.pluralRulesCache[d];let p;try{p=new Intl.PluralRules(o,{type:c})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),rh;if(!i.match(/-|_/))return rh;const v=this.languageUtils.getLanguagePartFromCode(i);p=this.getRule(v,r)}return this.pluralRulesCache[d]=p,p}needsPlural(i,r={}){let o=this.getRule(i,r);return o||(o=this.getRule("dev",r)),o?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(i,r,o={}){return this.getSuffixes(i,o).map(c=>`${r}${c}`)}getSuffixes(i,r={}){let o=this.getRule(i,r);return o||(o=this.getRule("dev",r)),o?o.resolvedOptions().pluralCategories.sort((c,d)=>ih[c]-ih[d]).map(c=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${c}`):[]}getSuffix(i,r,o={}){const c=this.getRule(i,o);return c?`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${c.select(r)}`:(this.logger.warn(`no plural rule found for: ${i}`),this.getSuffix("dev",r,o))}}const lh=(n,i,r,o=".",c=!0)=>{let d=c0(n,i,r);return!d&&c&&re(r)&&(d=Yu(n,r,o),d===void 0&&(d=Yu(i,r,o))),d},Pu=n=>n.replace(/\$/g,"$$$$");class oh{constructor(i={}){this.logger=Yt.create("interpolator"),this.options=i,this.format=i?.interpolation?.format||(r=>r),this.init(i)}init(i={}){i.interpolation||(i.interpolation={escapeValue:!0});const{escape:r,escapeValue:o,useRawValueToEscape:c,prefix:d,prefixEscaped:p,suffix:h,suffixEscaped:v,formatSeparator:g,unescapeSuffix:y,unescapePrefix:b,nestingPrefix:T,nestingPrefixEscaped:C,nestingSuffix:L,nestingSuffixEscaped:z,nestingOptionsSeparator:V,maxReplaces:B,alwaysFormat:G}=i.interpolation;this.escape=r!==void 0?r:m0,this.escapeValue=o!==void 0?o:!0,this.useRawValueToEscape=c!==void 0?c:!1,this.prefix=d?ln(d):p||"{{",this.suffix=h?ln(h):v||"}}",this.formatSeparator=g||",",this.unescapePrefix=y?"":b||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=T?ln(T):C||ln("$t("),this.nestingSuffix=L?ln(L):z||ln(")"),this.nestingOptionsSeparator=V||",",this.maxReplaces=B||1e3,this.alwaysFormat=G!==void 0?G:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const i=(r,o)=>r?.source===o?(r.lastIndex=0,r):new RegExp(o,"g");this.regexp=i(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=i(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=i(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(i,r,o,c){let d,p,h;const v=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=C=>{if(C.indexOf(this.formatSeparator)<0){const B=lh(r,v,C,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(B,void 0,o,{...c,...r,interpolationkey:C}):B}const L=C.split(this.formatSeparator),z=L.shift().trim(),V=L.join(this.formatSeparator).trim();return this.format(lh(r,v,z,this.options.keySeparator,this.options.ignoreJSONStructure),V,o,{...c,...r,interpolationkey:z})};this.resetRegExp();const y=c?.missingInterpolationHandler||this.options.missingInterpolationHandler,b=c?.interpolation?.skipOnVariables!==void 0?c.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:C=>Pu(C)},{regex:this.regexp,safeValue:C=>this.escapeValue?Pu(this.escape(C)):Pu(C)}].forEach(C=>{for(h=0;d=C.regex.exec(i);){const L=d[1].trim();if(p=g(L),p===void 0)if(typeof y=="function"){const V=y(i,d,c);p=re(V)?V:""}else if(c&&Object.prototype.hasOwnProperty.call(c,L))p="";else if(b){p=d[0];continue}else this.logger.warn(`missed to pass in variable ${L} for interpolating ${i}`),p="";else!re(p)&&!this.useRawValueToEscape&&(p=$f(p));const z=C.safeValue(p);if(i=i.replace(d[0],z),b?(C.regex.lastIndex+=p.length,C.regex.lastIndex-=d[0].length):C.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),i}nest(i,r,o={}){let c,d,p;const h=(v,g)=>{const y=this.nestingOptionsSeparator;if(v.indexOf(y)<0)return v;const b=v.split(new RegExp(`${y}[ ]*{`));let T=`{${b[1]}`;v=b[0],T=this.interpolate(T,p);const C=T.match(/'/g),L=T.match(/"/g);((C?.length??0)%2===0&&!L||L.length%2!==0)&&(T=T.replace(/'/g,'"'));try{p=JSON.parse(T),g&&(p={...g,...p})}catch(z){return this.logger.warn(`failed parsing options string in nesting for key ${v}`,z),`${v}${y}${T}`}return p.defaultValue&&p.defaultValue.indexOf(this.prefix)>-1&&delete p.defaultValue,v};for(;c=this.nestingRegexp.exec(i);){let v=[];p={...o},p=p.replace&&!re(p.replace)?p.replace:p,p.applyPostProcessor=!1,delete p.defaultValue;const g=/{.*}/.test(c[1])?c[1].lastIndexOf("}")+1:c[1].indexOf(this.formatSeparator);if(g!==-1&&(v=c[1].slice(g).split(this.formatSeparator).map(y=>y.trim()).filter(Boolean),c[1]=c[1].slice(0,g)),d=r(h.call(this,c[1].trim(),p),p),d&&c[0]===i&&!re(d))return d;re(d)||(d=$f(d)),d||(this.logger.warn(`missed to resolve ${c[1]} for nesting ${i}`),d=""),v.length&&(d=v.reduce((y,b)=>this.format(y,b,o.lng,{...o,interpolationkey:c[1].trim()}),d.trim())),i=i.replace(c[0],d),this.regexp.lastIndex=0}return i}}const y0=n=>{let i=n.toLowerCase().trim();const r={};if(n.indexOf("(")>-1){const o=n.split("(");i=o[0].toLowerCase().trim();const c=o[1].substring(0,o[1].length-1);i==="currency"&&c.indexOf(":")<0?r.currency||(r.currency=c.trim()):i==="relativetime"&&c.indexOf(":")<0?r.range||(r.range=c.trim()):c.split(";").forEach(p=>{if(p){const[h,...v]=p.split(":"),g=v.join(":").trim().replace(/^'+|'+$/g,""),y=h.trim();r[y]||(r[y]=g),g==="false"&&(r[y]=!1),g==="true"&&(r[y]=!0),isNaN(g)||(r[y]=parseInt(g,10))}})}return{formatName:i,formatOptions:r}},uh=n=>{const i={};return(r,o,c)=>{let d=c;c&&c.interpolationkey&&c.formatParams&&c.formatParams[c.interpolationkey]&&c[c.interpolationkey]&&(d={...d,[c.interpolationkey]:void 0});const p=o+JSON.stringify(d);let h=i[p];return h||(h=n(vi(o),c),i[p]=h),h(r)}},S0=n=>(i,r,o)=>n(vi(r),o)(i);class _0{constructor(i={}){this.logger=Yt.create("formatter"),this.options=i,this.init(i)}init(i,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const o=r.cacheInBuiltFormats?uh:S0;this.formats={number:o((c,d)=>{const p=new Intl.NumberFormat(c,{...d});return h=>p.format(h)}),currency:o((c,d)=>{const p=new Intl.NumberFormat(c,{...d,style:"currency"});return h=>p.format(h)}),datetime:o((c,d)=>{const p=new Intl.DateTimeFormat(c,{...d});return h=>p.format(h)}),relativetime:o((c,d)=>{const p=new Intl.RelativeTimeFormat(c,{...d});return h=>p.format(h,d.range||"day")}),list:o((c,d)=>{const p=new Intl.ListFormat(c,{...d});return h=>p.format(h)})}}add(i,r){this.formats[i.toLowerCase().trim()]=r}addCached(i,r){this.formats[i.toLowerCase().trim()]=uh(r)}format(i,r,o,c={}){const d=r.split(this.formatSeparator);if(d.length>1&&d[0].indexOf("(")>1&&d[0].indexOf(")")<0&&d.find(h=>h.indexOf(")")>-1)){const h=d.findIndex(v=>v.indexOf(")")>-1);d[0]=[d[0],...d.splice(1,h)].join(this.formatSeparator)}return d.reduce((h,v)=>{const{formatName:g,formatOptions:y}=y0(v);if(this.formats[g]){let b=h;try{const T=c?.formatParams?.[c.interpolationkey]||{},C=T.locale||T.lng||c.locale||c.lng||o;b=this.formats[g](h,C,{...y,...c,...T})}catch(T){this.logger.warn(T)}return b}else this.logger.warn(`there was no format function for ${g}`);return h},i)}}const q0=(n,i)=>{n.pending[i]!==void 0&&(delete n.pending[i],n.pendingCount--)};class T0 extends sl{constructor(i,r,o,c={}){super(),this.backend=i,this.store=r,this.services=o,this.languageUtils=o.languageUtils,this.options=c,this.logger=Yt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=c.maxParallelReads||10,this.readingCalls=0,this.maxRetries=c.maxRetries>=0?c.maxRetries:5,this.retryTimeout=c.retryTimeout>=1?c.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(o,c.backend,c)}queueLoad(i,r,o,c){const d={},p={},h={},v={};return i.forEach(g=>{let y=!0;r.forEach(b=>{const T=`${g}|${b}`;!o.reload&&this.store.hasResourceBundle(g,b)?this.state[T]=2:this.state[T]<0||(this.state[T]===1?p[T]===void 0&&(p[T]=!0):(this.state[T]=1,y=!1,p[T]===void 0&&(p[T]=!0),d[T]===void 0&&(d[T]=!0),v[b]===void 0&&(v[b]=!0)))}),y||(h[g]=!0)}),(Object.keys(d).length||Object.keys(p).length)&&this.queue.push({pending:p,pendingCount:Object.keys(p).length,loaded:{},errors:[],callback:c}),{toLoad:Object.keys(d),pending:Object.keys(p),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(v)}}loaded(i,r,o){const c=i.split("|"),d=c[0],p=c[1];r&&this.emit("failedLoading",d,p,r),!r&&o&&this.store.addResourceBundle(d,p,o,void 0,void 0,{skipCopy:!0}),this.state[i]=r?-1:2,r&&o&&(this.state[i]=0);const h={};this.queue.forEach(v=>{u0(v.loaded,[d],p),q0(v,i),r&&v.errors.push(r),v.pendingCount===0&&!v.done&&(Object.keys(v.loaded).forEach(g=>{h[g]||(h[g]={});const y=v.loaded[g];y.length&&y.forEach(b=>{h[g][b]===void 0&&(h[g][b]=!0)})}),v.done=!0,v.errors.length?v.callback(v.errors):v.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(v=>!v.done)}read(i,r,o,c=0,d=this.retryTimeout,p){if(!i.length)return p(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:r,fcName:o,tried:c,wait:d,callback:p});return}this.readingCalls++;const h=(g,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const b=this.waitingReads.shift();this.read(b.lng,b.ns,b.fcName,b.tried,b.wait,b.callback)}if(g&&y&&c<this.maxRetries){setTimeout(()=>{this.read.call(this,i,r,o,c+1,d*2,p)},d);return}p(g,y)},v=this.backend[o].bind(this.backend);if(v.length===2){try{const g=v(i,r);g&&typeof g.then=="function"?g.then(y=>h(null,y)).catch(h):h(null,g)}catch(g){h(g)}return}return v(i,r,h)}prepareLoading(i,r,o={},c){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),c&&c();re(i)&&(i=this.languageUtils.toResolveHierarchy(i)),re(r)&&(r=[r]);const d=this.queueLoad(i,r,o,c);if(!d.toLoad.length)return d.pending.length||c(),null;d.toLoad.forEach(p=>{this.loadOne(p)})}load(i,r,o){this.prepareLoading(i,r,{},o)}reload(i,r,o){this.prepareLoading(i,r,{reload:!0},o)}loadOne(i,r=""){const o=i.split("|"),c=o[0],d=o[1];this.read(c,d,"read",void 0,void 0,(p,h)=>{p&&this.logger.warn(`${r}loading namespace ${d} for language ${c} failed`,p),!p&&h&&this.logger.log(`${r}loaded namespace ${d} for language ${c}`,h),this.loaded(i,p,h)})}saveMissing(i,r,o,c,d,p={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${o}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend?.create){const v={...p,isUpdate:d},g=this.backend.create.bind(this.backend);if(g.length<6)try{let y;g.length===5?y=g(i,r,o,c,v):y=g(i,r,o,c),y&&typeof y.then=="function"?y.then(b=>h(null,b)).catch(h):h(null,y)}catch(y){h(y)}else g(i,r,o,c,h,v)}!i||!i[0]||this.store.addResource(i[0],r,o,c)}}}const ch=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let i={};if(typeof n[1]=="object"&&(i=n[1]),re(n[1])&&(i.defaultValue=n[1]),re(n[2])&&(i.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const r=n[3]||n[2];Object.keys(r).forEach(o=>{i[o]=r[o]})}return i},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),dh=n=>(re(n.ns)&&(n.ns=[n.ns]),re(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),re(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),Br=()=>{},C0=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(r=>{typeof n[r]=="function"&&(n[r]=n[r].bind(n))})};class hi extends sl{constructor(i={},r){if(super(),this.options=dh(i),this.services={},this.logger=Yt,this.modules={external:[]},C0(this),r&&!this.isInitialized&&!i.isClone){if(!this.options.initAsync)return this.init(i,r),this;setTimeout(()=>{this.init(i,r)},0)}}init(i={},r){this.isInitializing=!0,typeof i=="function"&&(r=i,i={}),i.defaultNS==null&&i.ns&&(re(i.ns)?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));const o=ch();this.options={...o,...this.options,...dh(i)},this.options.interpolation={...o.interpolation,...this.options.interpolation},i.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=i.keySeparator),i.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=i.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=o.overloadTranslationOptionHandler);const c=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?Yt.init(c(this.modules.logger),this.options):Yt.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:g=_0;const y=new nh(this.options);this.store=new ah(this.options.resources,this.options);const b=this.services;b.logger=Yt,b.resourceStore=this.store,b.languageUtils=y,b.pluralResolver=new x0(y,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==o.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),g&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(b.formatter=c(g),b.formatter.init&&b.formatter.init(b,this.options),this.options.interpolation.format=b.formatter.format.bind(b.formatter)),b.interpolator=new oh(this.options),b.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},b.backendConnector=new T0(c(this.modules.backend),b.resourceStore,b,this.options),b.backendConnector.on("*",(C,...L)=>{this.emit(C,...L)}),this.modules.languageDetector&&(b.languageDetector=c(this.modules.languageDetector),b.languageDetector.init&&b.languageDetector.init(b,this.options.detection,this.options)),this.modules.i18nFormat&&(b.i18nFormat=c(this.modules.i18nFormat),b.i18nFormat.init&&b.i18nFormat.init(this)),this.translator=new Xr(this.services,this.options),this.translator.on("*",(C,...L)=>{this.emit(C,...L)}),this.modules.external.forEach(C=>{C.init&&C.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Br),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=(...y)=>this.store[g](...y)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=(...y)=>(this.store[g](...y),this)});const h=pi(),v=()=>{const g=(y,b)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(b),r(y,b)};if(this.languages&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initAsync?v():setTimeout(v,0),h}loadResources(i,r=Br){let o=r;const c=re(i)?i:this.language;if(typeof i=="function"&&(o=i),!this.options.resources||this.options.partialBundledLanguages){if(c?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return o();const d=[],p=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(g=>{g!=="cimode"&&d.indexOf(g)<0&&d.push(g)})};c?p(c):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(v=>p(v)),this.options.preload?.forEach?.(h=>p(h)),this.services.backendConnector.load(d,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),o(h)})}else o(null)}reloadResources(i,r,o){const c=pi();return typeof i=="function"&&(o=i,i=void 0),typeof r=="function"&&(o=r,r=void 0),i||(i=this.languages),r||(r=this.options.ns),o||(o=Br),this.services.backendConnector.reload(i,r,d=>{c.resolve(),o(d)}),c}use(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&eg.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}setResolvedLanguage(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1)){for(let r=0;r<this.languages.length;r++){const o=this.languages[r];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}!this.resolvedLanguage&&this.languages.indexOf(i)<0&&this.store.hasLanguageSomeTranslations(i)&&(this.resolvedLanguage=i,this.languages.unshift(i))}}changeLanguage(i,r){this.isLanguageChangingTo=i;const o=pi();this.emit("languageChanging",i);const c=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},d=(h,v)=>{v?this.isLanguageChangingTo===i&&(c(v),this.translator.changeLanguage(v),this.isLanguageChangingTo=void 0,this.emit("languageChanged",v),this.logger.log("languageChanged",v)):this.isLanguageChangingTo=void 0,o.resolve((...g)=>this.t(...g)),r&&r(h,(...g)=>this.t(...g))},p=h=>{!i&&!h&&this.services.languageDetector&&(h=[]);const v=re(h)?h:h&&h[0],g=this.store.hasLanguageSomeTranslations(v)?v:this.services.languageUtils.getBestMatchFromCodes(re(h)?[h]:h);g&&(this.language||c(g),this.translator.language||this.translator.changeLanguage(g),this.services.languageDetector?.cacheUserLanguage?.(g)),this.loadResources(g,y=>{d(y,g)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?p(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(p):this.services.languageDetector.detect(p):p(i),o}getFixedT(i,r,o){const c=(d,p,...h)=>{let v;typeof p!="object"?v=this.options.overloadTranslationOptionHandler([d,p].concat(h)):v={...p},v.lng=v.lng||c.lng,v.lngs=v.lngs||c.lngs,v.ns=v.ns||c.ns,v.keyPrefix!==""&&(v.keyPrefix=v.keyPrefix||o||c.keyPrefix);const g=this.options.keySeparator||".";let y;return v.keyPrefix&&Array.isArray(d)?y=d.map(b=>(typeof b=="function"&&(b=Qu(b,{...this.options,...p})),`${v.keyPrefix}${g}${b}`)):(typeof d=="function"&&(d=Qu(d,{...this.options,...p})),y=v.keyPrefix?`${v.keyPrefix}${g}${d}`:d),this.t(y,v)};return re(i)?c.lng=i:c.lngs=i,c.ns=r,c.keyPrefix=o,c}t(...i){return this.translator?.translate(...i)}exists(...i){return this.translator?.exists(...i)}setDefaultNamespace(i){this.options.defaultNS=i}hasLoadedNamespace(i,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const o=r.lng||this.resolvedLanguage||this.languages[0],c=this.options?this.options.fallbackLng:!1,d=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const p=(h,v)=>{const g=this.services.backendConnector.state[`${h}|${v}`];return g===-1||g===0||g===2};if(r.precheck){const h=r.precheck(this,p);if(h!==void 0)return h}return!!(this.hasResourceBundle(o,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||p(o,i)&&(!c||p(d,i)))}loadNamespaces(i,r){const o=pi();return this.options.ns?(re(i)&&(i=[i]),i.forEach(c=>{this.options.ns.indexOf(c)<0&&this.options.ns.push(c)}),this.loadResources(c=>{o.resolve(),r&&r(c)}),o):(r&&r(),Promise.resolve())}loadLanguages(i,r){const o=pi();re(i)&&(i=[i]);const c=this.options.preload||[],d=i.filter(p=>c.indexOf(p)<0&&this.services.languageUtils.isSupportedCode(p));return d.length?(this.options.preload=c.concat(d),this.loadResources(p=>{o.resolve(),r&&r(p)}),o):(r&&r(),Promise.resolve())}dir(i){if(i||(i=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!i)return"rtl";try{const c=new Intl.Locale(i);if(c&&c.getTextInfo){const d=c.getTextInfo();if(d&&d.direction)return d.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services?.languageUtils||new nh(ch());return i.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(i={},r){const o=new hi(i,r);return o.createInstance=hi.createInstance,o}cloneInstance(i={},r=Br){const o=i.forkResourceStore;o&&delete i.forkResourceStore;const c={...this.options,...i,isClone:!0},d=new hi(c);if((i.debug!==void 0||i.prefix!==void 0)&&(d.logger=d.logger.clone(i)),["store","services","language"].forEach(h=>{d[h]=this[h]}),d.services={...this.services},d.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},o){const h=Object.keys(this.store.data).reduce((v,g)=>(v[g]={...this.store.data[g]},v[g]=Object.keys(v[g]).reduce((y,b)=>(y[b]={...v[g][b]},y),v[g]),v),{});d.store=new ah(h,c),d.services.resourceStore=d.store}return i.interpolation&&(d.services.interpolator=new oh(c)),d.translator=new Xr(d.services,c),d.translator.on("*",(h,...v)=>{d.emit(h,...v)}),d.init(c,r),d.translator.options=c,d.translator.backendConnector.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},d}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ot=hi.createInstance();ot.createInstance;ot.dir;ot.init;ot.loadResources;ot.reloadResources;ot.use;ot.changeLanguage;ot.getFixedT;ot.t;ot.exists;ot.setDefaultNamespace;ot.hasLoadedNamespace;ot.loadNamespaces;ot.loadLanguages;const j0=(n,i,r,o)=>{const c=[r,{code:i,...o||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(c,"warn","react-i18next::",!0);ys(c[0])&&(c[0]=`react-i18next:: ${c[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...c):console?.warn&&console.warn(...c)},mh={},ag=(n,i,r,o)=>{ys(r)&&mh[r]||(ys(r)&&(mh[r]=new Date),j0(n,i,r,o))},sg=(n,i)=>()=>{if(n.isInitialized)i();else{const r=()=>{setTimeout(()=>{n.off("initialized",r)},0),i()};n.on("initialized",r)}},Ku=(n,i,r)=>{n.loadNamespaces(i,sg(n,r))},ph=(n,i,r,o)=>{if(ys(r)&&(r=[r]),n.options.preload&&n.options.preload.indexOf(i)>-1)return Ku(n,r,o);r.forEach(c=>{n.options.ns.indexOf(c)<0&&n.options.ns.push(c)}),n.loadLanguages(i,sg(n,o))},A0=(n,i,r={})=>!i.languages||!i.languages.length?(ag(i,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:i.languages}),!0):i.hasLoadedNamespace(n,{lng:r.lng,precheck:(o,c)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!c(o.isLanguageChangingTo,n))return!1}}),ys=n=>typeof n=="string",D0=n=>typeof n=="object"&&n!==null,L0=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,N0={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},M0=n=>N0[n],E0=n=>n.replace(L0,M0);let Xu={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:E0,transDefaultProps:void 0};const R0=(n={})=>{Xu={...Xu,...n}},z0=()=>Xu;let ng;const O0=n=>{ng=n},V0=()=>ng,P0={type:"3rdParty",init(n){R0(n.options.react),O0(n)}},U0=A.createContext();class w0{constructor(){this.usedNamespaces={}}addUsedNamespaces(i){i.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Uu={exports:{}},wu={};var fh;function I0(){if(fh)return wu;fh=1;var n=$r();function i(b,T){return b===T&&(b!==0||1/b===1/T)||b!==b&&T!==T}var r=typeof Object.is=="function"?Object.is:i,o=n.useState,c=n.useEffect,d=n.useLayoutEffect,p=n.useDebugValue;function h(b,T){var C=T(),L=o({inst:{value:C,getSnapshot:T}}),z=L[0].inst,V=L[1];return d(function(){z.value=C,z.getSnapshot=T,v(z)&&V({inst:z})},[b,C,T]),c(function(){return v(z)&&V({inst:z}),b(function(){v(z)&&V({inst:z})})},[b]),p(C),C}function v(b){var T=b.getSnapshot;b=b.value;try{var C=T();return!r(b,C)}catch{return!0}}function g(b,T){return T()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:h;return wu.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,wu}var hh;function B0(){return hh||(hh=1,Uu.exports=I0()),Uu.exports}var G0=B0();const H0=(n,i)=>ys(i)?i:D0(i)&&ys(i.defaultValue)?i.defaultValue:Array.isArray(n)?n[n.length-1]:n,k0={t:H0,ready:!1},J0=()=>()=>{},ig=(n,i={})=>{const{i18n:r}=i,{i18n:o,defaultNS:c}=A.useContext(U0)||{},d=r||o||V0();d&&!d.reportNamespaces&&(d.reportNamespaces=new w0),d||ag(d,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const p=A.useMemo(()=>({...z0(),...d?.options?.react,...i}),[d,i]),{useSuspense:h,keyPrefix:v}=p,g=c||d?.options?.defaultNS,y=ys(g)?[g]:g||["translation"],b=A.useMemo(()=>y,y);d?.reportNamespaces?.addUsedNamespaces?.(b);const T=A.useRef(0),C=A.useCallback(Q=>{if(!d)return J0;const{bindI18n:ee,bindI18nStore:le}=p,K=()=>{T.current+=1,Q()};return ee&&d.on(ee,K),le&&d.store.on(le,K),()=>{ee&&ee.split(" ").forEach(Ee=>d.off(Ee,K)),le&&le.split(" ").forEach(Ee=>d.store.off(Ee,K))}},[d,p]),L=A.useRef(),z=A.useCallback(()=>{if(!d)return k0;const Q=!!(d.isInitialized||d.initializedStoreOnce)&&b.every(Pe=>A0(Pe,d,p)),ee=i.lng||d.language,le=T.current,K=L.current;if(K&&K.ready===Q&&K.lng===ee&&K.keyPrefix===v&&K.revision===le)return K;const me={t:d.getFixedT(ee,p.nsMode==="fallback"?b:b[0],v),ready:Q,lng:ee,keyPrefix:v,revision:le};return L.current=me,me},[d,b,v,p,i.lng]),[V,B]=A.useState(0),{t:G,ready:J}=G0.useSyncExternalStore(C,z,z);A.useEffect(()=>{if(d&&!J&&!h){const Q=()=>B(ee=>ee+1);i.lng?ph(d,i.lng,b,Q):Ku(d,b,Q)}},[d,i.lng,b,J,h,V]);const $=d||{},ie=A.useRef(null),Y=A.useRef(),H=Q=>{const ee=Object.getOwnPropertyDescriptors(Q);ee.__original&&delete ee.__original;const le=Object.create(Object.getPrototypeOf(Q),ee);if(!Object.prototype.hasOwnProperty.call(le,"__original"))try{Object.defineProperty(le,"__original",{value:Q,writable:!1,enumerable:!1,configurable:!1})}catch{}return le},te=A.useMemo(()=>{const Q=$,ee=Q?.language;let le=Q;Q&&(ie.current&&ie.current.__original===Q?Y.current!==ee?(le=H(Q),ie.current=le,Y.current=ee):le=ie.current:(le=H(Q),ie.current=le,Y.current=ee));const K=[G,le,J];return K.t=G,K.i18n=le,K.ready=J,K},[G,$,J,$.resolvedLanguage,$.language,$.languages]);if(d&&h&&!J)throw new Promise(Q=>{const ee=()=>Q();i.lng?ph(d,i.lng,b,ee):Ku(d,b,ee)});return te};function vc({value:n,onChange:i,placeholder:r,className:o}){const{t:c}=ig();return m.jsxs("div",{className:Ge("flex items-center gap-3 px-4 py-2 rounded-md border border-surface-border bg-surface/70 transition-all duration-200","focus-within:border-accent-dark focus-within:shadow-glow",o),children:[m.jsx(Jh,{size:18,className:"text-content-subtle","aria-hidden":"true"}),m.jsx("input",{type:"search",value:n,onChange:d=>i(d.target.value),placeholder:r||c("search.placeholder"),className:"bg-transparent outline-none w-full text-sm text-content placeholder:text-content-subtle","aria-label":r||c("search.placeholder")})]})}vc.propTypes={value:O.string.isRequired,onChange:O.func.isRequired,placeholder:O.string,className:O.string};vc.defaultProps={placeholder:"Rechercher...",className:""};function Sa(n){return Array.isArray?Array.isArray(n):og(n)==="[object Array]"}function F0(n){if(typeof n=="string")return n;let i=n+"";return i=="0"&&1/n==-1/0?"-0":i}function Y0(n){return n==null?"":F0(n)}function Qt(n){return typeof n=="string"}function rg(n){return typeof n=="number"}function Q0(n){return n===!0||n===!1||K0(n)&&og(n)=="[object Boolean]"}function lg(n){return typeof n=="object"}function K0(n){return lg(n)&&n!==null}function At(n){return n!=null}function Iu(n){return!n.trim().length}function og(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const X0="Incorrect 'index' type",Z0=n=>`Invalid value for key ${n}`,$0=n=>`Pattern length exceeds max of ${n}.`,W0=n=>`Missing ${n} property in key`,eS=n=>`Property 'weight' in key '${n}' must be a positive integer`,gh=Object.prototype.hasOwnProperty;class tS{constructor(i){this._keys=[],this._keyMap={};let r=0;i.forEach(o=>{let c=ug(o);r+=c.weight,this._keys.push(c),this._keyMap[c.id]=c,r+=c.weight}),this._keys.forEach(o=>{o.weight/=r})}get(i){return this._keyMap[i]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ug(n){let i=null,r=null,o=null,c=1,d=null;if(Qt(n)||Sa(n))o=n,i=vh(n),r=Zu(n);else{if(!gh.call(n,"name"))throw new Error(W0("name"));const p=n.name;if(o=p,gh.call(n,"weight")&&(c=n.weight,c<=0))throw new Error(eS(p));i=vh(p),r=Zu(p),d=n.getFn}return{path:i,id:r,weight:c,src:o,getFn:d}}function vh(n){return Sa(n)?n:n.split(".")}function Zu(n){return Sa(n)?n.join("."):n}function aS(n,i){let r=[],o=!1;const c=(d,p,h)=>{if(At(d))if(!p[h])r.push(d);else{let v=p[h];const g=d[v];if(!At(g))return;if(h===p.length-1&&(Qt(g)||rg(g)||Q0(g)))r.push(Y0(g));else if(Sa(g)){o=!0;for(let y=0,b=g.length;y<b;y+=1)c(g[y],p,h+1)}else p.length&&c(g,p,h+1)}};return c(n,Qt(i)?i.split("."):i,0),o?r:r[0]}const sS={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},nS={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,i)=>n.score===i.score?n.idx<i.idx?-1:1:n.score<i.score?-1:1},iS={location:0,threshold:.6,distance:100},rS={useExtendedSearch:!1,getFn:aS,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var oe={...nS,...sS,...iS,...rS};const lS=/[^ ]+/g;function oS(n=1,i=3){const r=new Map,o=Math.pow(10,i);return{get(c){const d=c.match(lS).length;if(r.has(d))return r.get(d);const p=1/Math.pow(d,.5*n),h=parseFloat(Math.round(p*o)/o);return r.set(d,h),h},clear(){r.clear()}}}class bc{constructor({getFn:i=oe.getFn,fieldNormWeight:r=oe.fieldNormWeight}={}){this.norm=oS(r,3),this.getFn=i,this.isCreated=!1,this.setIndexRecords()}setSources(i=[]){this.docs=i}setIndexRecords(i=[]){this.records=i}setKeys(i=[]){this.keys=i,this._keysMap={},i.forEach((r,o)=>{this._keysMap[r.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Qt(this.docs[0])?this.docs.forEach((i,r)=>{this._addString(i,r)}):this.docs.forEach((i,r)=>{this._addObject(i,r)}),this.norm.clear())}add(i){const r=this.size();Qt(i)?this._addString(i,r):this._addObject(i,r)}removeAt(i){this.records.splice(i,1);for(let r=i,o=this.size();r<o;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(i,r){return i[this._keysMap[r]]}size(){return this.records.length}_addString(i,r){if(!At(i)||Iu(i))return;let o={v:i,i:r,n:this.norm.get(i)};this.records.push(o)}_addObject(i,r){let o={i:r,$:{}};this.keys.forEach((c,d)=>{let p=c.getFn?c.getFn(i):this.getFn(i,c.path);if(At(p)){if(Sa(p)){let h=[];const v=[{nestedArrIndex:-1,value:p}];for(;v.length;){const{nestedArrIndex:g,value:y}=v.pop();if(At(y))if(Qt(y)&&!Iu(y)){let b={v:y,i:g,n:this.norm.get(y)};h.push(b)}else Sa(y)&&y.forEach((b,T)=>{v.push({nestedArrIndex:T,value:b})})}o.$[d]=h}else if(Qt(p)&&!Iu(p)){let h={v:p,n:this.norm.get(p)};o.$[d]=h}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function cg(n,i,{getFn:r=oe.getFn,fieldNormWeight:o=oe.fieldNormWeight}={}){const c=new bc({getFn:r,fieldNormWeight:o});return c.setKeys(n.map(ug)),c.setSources(i),c.create(),c}function uS(n,{getFn:i=oe.getFn,fieldNormWeight:r=oe.fieldNormWeight}={}){const{keys:o,records:c}=n,d=new bc({getFn:i,fieldNormWeight:r});return d.setKeys(o),d.setIndexRecords(c),d}function Gr(n,{errors:i=0,currentLocation:r=0,expectedLocation:o=0,distance:c=oe.distance,ignoreLocation:d=oe.ignoreLocation}={}){const p=i/n.length;if(d)return p;const h=Math.abs(o-r);return c?p+h/c:h?1:p}function cS(n=[],i=oe.minMatchCharLength){let r=[],o=-1,c=-1,d=0;for(let p=n.length;d<p;d+=1){let h=n[d];h&&o===-1?o=d:!h&&o!==-1&&(c=d-1,c-o+1>=i&&r.push([o,c]),o=-1)}return n[d-1]&&d-o>=i&&r.push([o,d-1]),r}const bs=32;function dS(n,i,r,{location:o=oe.location,distance:c=oe.distance,threshold:d=oe.threshold,findAllMatches:p=oe.findAllMatches,minMatchCharLength:h=oe.minMatchCharLength,includeMatches:v=oe.includeMatches,ignoreLocation:g=oe.ignoreLocation}={}){if(i.length>bs)throw new Error($0(bs));const y=i.length,b=n.length,T=Math.max(0,Math.min(o,b));let C=d,L=T;const z=h>1||v,V=z?Array(b):[];let B;for(;(B=n.indexOf(i,L))>-1;){let H=Gr(i,{currentLocation:B,expectedLocation:T,distance:c,ignoreLocation:g});if(C=Math.min(H,C),L=B+y,z){let te=0;for(;te<y;)V[B+te]=1,te+=1}}L=-1;let G=[],J=1,$=y+b;const ie=1<<y-1;for(let H=0;H<y;H+=1){let te=0,Q=$;for(;te<Q;)Gr(i,{errors:H,currentLocation:T+Q,expectedLocation:T,distance:c,ignoreLocation:g})<=C?te=Q:$=Q,Q=Math.floor(($-te)/2+te);$=Q;let ee=Math.max(1,T-Q+1),le=p?b:Math.min(T+Q,b)+y,K=Array(le+2);K[le+1]=(1<<H)-1;for(let me=le;me>=ee;me-=1){let Pe=me-1,E=r[n.charAt(Pe)];if(z&&(V[Pe]=+!!E),K[me]=(K[me+1]<<1|1)&E,H&&(K[me]|=(G[me+1]|G[me])<<1|1|G[me+1]),K[me]&ie&&(J=Gr(i,{errors:H,currentLocation:Pe,expectedLocation:T,distance:c,ignoreLocation:g}),J<=C)){if(C=J,L=Pe,L<=T)break;ee=Math.max(1,2*T-L)}}if(Gr(i,{errors:H+1,currentLocation:T,expectedLocation:T,distance:c,ignoreLocation:g})>C)break;G=K}const Y={isMatch:L>=0,score:Math.max(.001,J)};if(z){const H=cS(V,h);H.length?v&&(Y.indices=H):Y.isMatch=!1}return Y}function mS(n){let i={};for(let r=0,o=n.length;r<o;r+=1){const c=n.charAt(r);i[c]=(i[c]||0)|1<<o-r-1}return i}class dg{constructor(i,{location:r=oe.location,threshold:o=oe.threshold,distance:c=oe.distance,includeMatches:d=oe.includeMatches,findAllMatches:p=oe.findAllMatches,minMatchCharLength:h=oe.minMatchCharLength,isCaseSensitive:v=oe.isCaseSensitive,ignoreLocation:g=oe.ignoreLocation}={}){if(this.options={location:r,threshold:o,distance:c,includeMatches:d,findAllMatches:p,minMatchCharLength:h,isCaseSensitive:v,ignoreLocation:g},this.pattern=v?i:i.toLowerCase(),this.chunks=[],!this.pattern.length)return;const y=(T,C)=>{this.chunks.push({pattern:T,alphabet:mS(T),startIndex:C})},b=this.pattern.length;if(b>bs){let T=0;const C=b%bs,L=b-C;for(;T<L;)y(this.pattern.substr(T,bs),T),T+=bs;if(C){const z=b-bs;y(this.pattern.substr(z),z)}}else y(this.pattern,0)}searchIn(i){const{isCaseSensitive:r,includeMatches:o}=this.options;if(r||(i=i.toLowerCase()),this.pattern===i){let L={isMatch:!0,score:0};return o&&(L.indices=[[0,i.length-1]]),L}const{location:c,distance:d,threshold:p,findAllMatches:h,minMatchCharLength:v,ignoreLocation:g}=this.options;let y=[],b=0,T=!1;this.chunks.forEach(({pattern:L,alphabet:z,startIndex:V})=>{const{isMatch:B,score:G,indices:J}=dS(i,L,z,{location:c+V,distance:d,threshold:p,findAllMatches:h,minMatchCharLength:v,includeMatches:o,ignoreLocation:g});B&&(T=!0),b+=G,B&&J&&(y=[...y,...J])});let C={isMatch:T,score:T?b/this.chunks.length:1};return T&&o&&(C.indices=y),C}}class $a{constructor(i){this.pattern=i}static isMultiMatch(i){return bh(i,this.multiRegex)}static isSingleMatch(i){return bh(i,this.singleRegex)}search(){}}function bh(n,i){const r=n.match(i);return r?r[1]:null}class pS extends $a{constructor(i){super(i)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(i){const r=i===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class fS extends $a{constructor(i){super(i)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(i){const o=i.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,i.length-1]}}}class hS extends $a{constructor(i){super(i)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(i){const r=i.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class gS extends $a{constructor(i){super(i)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(i){const r=!i.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,i.length-1]}}}class vS extends $a{constructor(i){super(i)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(i){const r=i.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[i.length-this.pattern.length,i.length-1]}}}class bS extends $a{constructor(i){super(i)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(i){const r=!i.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,i.length-1]}}}class mg extends $a{constructor(i,{location:r=oe.location,threshold:o=oe.threshold,distance:c=oe.distance,includeMatches:d=oe.includeMatches,findAllMatches:p=oe.findAllMatches,minMatchCharLength:h=oe.minMatchCharLength,isCaseSensitive:v=oe.isCaseSensitive,ignoreLocation:g=oe.ignoreLocation}={}){super(i),this._bitapSearch=new dg(i,{location:r,threshold:o,distance:c,includeMatches:d,findAllMatches:p,minMatchCharLength:h,isCaseSensitive:v,ignoreLocation:g})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(i){return this._bitapSearch.searchIn(i)}}class pg extends $a{constructor(i){super(i)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(i){let r=0,o;const c=[],d=this.pattern.length;for(;(o=i.indexOf(this.pattern,r))>-1;)r=o+d,c.push([o,r-1]);const p=!!c.length;return{isMatch:p,score:p?0:1,indices:c}}}const $u=[pS,pg,hS,gS,bS,vS,fS,mg],xh=$u.length,xS=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,yS="|";function SS(n,i={}){return n.split(yS).map(r=>{let o=r.trim().split(xS).filter(d=>d&&!!d.trim()),c=[];for(let d=0,p=o.length;d<p;d+=1){const h=o[d];let v=!1,g=-1;for(;!v&&++g<xh;){const y=$u[g];let b=y.isMultiMatch(h);b&&(c.push(new y(b,i)),v=!0)}if(!v)for(g=-1;++g<xh;){const y=$u[g];let b=y.isSingleMatch(h);if(b){c.push(new y(b,i));break}}}return c})}const _S=new Set([mg.type,pg.type]);class qS{constructor(i,{isCaseSensitive:r=oe.isCaseSensitive,includeMatches:o=oe.includeMatches,minMatchCharLength:c=oe.minMatchCharLength,ignoreLocation:d=oe.ignoreLocation,findAllMatches:p=oe.findAllMatches,location:h=oe.location,threshold:v=oe.threshold,distance:g=oe.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:o,minMatchCharLength:c,findAllMatches:p,ignoreLocation:d,location:h,threshold:v,distance:g},this.pattern=r?i:i.toLowerCase(),this.query=SS(this.pattern,this.options)}static condition(i,r){return r.useExtendedSearch}searchIn(i){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:c}=this.options;i=c?i:i.toLowerCase();let d=0,p=[],h=0;for(let v=0,g=r.length;v<g;v+=1){const y=r[v];p.length=0,d=0;for(let b=0,T=y.length;b<T;b+=1){const C=y[b],{isMatch:L,indices:z,score:V}=C.search(i);if(L){if(d+=1,h+=V,o){const B=C.constructor.type;_S.has(B)?p=[...p,...z]:p.push(z)}}else{h=0,d=0,p.length=0;break}}if(d){let b={isMatch:!0,score:h/d};return o&&(b.indices=p),b}}return{isMatch:!1,score:1}}}const Wu=[];function TS(...n){Wu.push(...n)}function ec(n,i){for(let r=0,o=Wu.length;r<o;r+=1){let c=Wu[r];if(c.condition(n,i))return new c(n,i)}return new dg(n,i)}const Zr={AND:"$and",OR:"$or"},tc={PATH:"$path",PATTERN:"$val"},ac=n=>!!(n[Zr.AND]||n[Zr.OR]),CS=n=>!!n[tc.PATH],jS=n=>!Sa(n)&&lg(n)&&!ac(n),yh=n=>({[Zr.AND]:Object.keys(n).map(i=>({[i]:n[i]}))});function fg(n,i,{auto:r=!0}={}){const o=c=>{let d=Object.keys(c);const p=CS(c);if(!p&&d.length>1&&!ac(c))return o(yh(c));if(jS(c)){const v=p?c[tc.PATH]:d[0],g=p?c[tc.PATTERN]:c[v];if(!Qt(g))throw new Error(Z0(v));const y={keyId:Zu(v),pattern:g};return r&&(y.searcher=ec(g,i)),y}let h={children:[],operator:d[0]};return d.forEach(v=>{const g=c[v];Sa(g)&&g.forEach(y=>{h.children.push(o(y))})}),h};return ac(n)||(n=yh(n)),o(n)}function AS(n,{ignoreFieldNorm:i=oe.ignoreFieldNorm}){n.forEach(r=>{let o=1;r.matches.forEach(({key:c,norm:d,score:p})=>{const h=c?c.weight:null;o*=Math.pow(p===0&&h?Number.EPSILON:p,(h||1)*(i?1:d))}),r.score=o})}function DS(n,i){const r=n.matches;i.matches=[],At(r)&&r.forEach(o=>{if(!At(o.indices)||!o.indices.length)return;const{indices:c,value:d}=o;let p={indices:c,value:d};o.key&&(p.key=o.key.src),o.idx>-1&&(p.refIndex=o.idx),i.matches.push(p)})}function LS(n,i){i.score=n.score}function NS(n,i,{includeMatches:r=oe.includeMatches,includeScore:o=oe.includeScore}={}){const c=[];return r&&c.push(DS),o&&c.push(LS),n.map(d=>{const{idx:p}=d,h={item:i[p],refIndex:p};return c.length&&c.forEach(v=>{v(d,h)}),h})}class pn{constructor(i,r={},o){this.options={...oe,...r},this.options.useExtendedSearch,this._keyStore=new tS(this.options.keys),this.setCollection(i,o)}setCollection(i,r){if(this._docs=i,r&&!(r instanceof bc))throw new Error(X0);this._myIndex=r||cg(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(i){At(i)&&(this._docs.push(i),this._myIndex.add(i))}remove(i=()=>!1){const r=[];for(let o=0,c=this._docs.length;o<c;o+=1){const d=this._docs[o];i(d,o)&&(this.removeAt(o),o-=1,c-=1,r.push(d))}return r}removeAt(i){this._docs.splice(i,1),this._myIndex.removeAt(i)}getIndex(){return this._myIndex}search(i,{limit:r=-1}={}){const{includeMatches:o,includeScore:c,shouldSort:d,sortFn:p,ignoreFieldNorm:h}=this.options;let v=Qt(i)?Qt(this._docs[0])?this._searchStringList(i):this._searchObjectList(i):this._searchLogical(i);return AS(v,{ignoreFieldNorm:h}),d&&v.sort(p),rg(r)&&r>-1&&(v=v.slice(0,r)),NS(v,this._docs,{includeMatches:o,includeScore:c})}_searchStringList(i){const r=ec(i,this.options),{records:o}=this._myIndex,c=[];return o.forEach(({v:d,i:p,n:h})=>{if(!At(d))return;const{isMatch:v,score:g,indices:y}=r.searchIn(d);v&&c.push({item:d,idx:p,matches:[{score:g,value:d,norm:h,indices:y}]})}),c}_searchLogical(i){const r=fg(i,this.options),o=(h,v,g)=>{if(!h.children){const{keyId:b,searcher:T}=h,C=this._findMatches({key:this._keyStore.get(b),value:this._myIndex.getValueForItemAtKeyId(v,b),searcher:T});return C&&C.length?[{idx:g,item:v,matches:C}]:[]}const y=[];for(let b=0,T=h.children.length;b<T;b+=1){const C=h.children[b],L=o(C,v,g);if(L.length)y.push(...L);else if(h.operator===Zr.AND)return[]}return y},c=this._myIndex.records,d={},p=[];return c.forEach(({$:h,i:v})=>{if(At(h)){let g=o(r,h,v);g.length&&(d[v]||(d[v]={idx:v,item:h,matches:[]},p.push(d[v])),g.forEach(({matches:y})=>{d[v].matches.push(...y)}))}}),p}_searchObjectList(i){const r=ec(i,this.options),{keys:o,records:c}=this._myIndex,d=[];return c.forEach(({$:p,i:h})=>{if(!At(p))return;let v=[];o.forEach((g,y)=>{v.push(...this._findMatches({key:g,value:p[y],searcher:r}))}),v.length&&d.push({idx:h,item:p,matches:v})}),d}_findMatches({key:i,value:r,searcher:o}){if(!At(r))return[];let c=[];if(Sa(r))r.forEach(({v:d,i:p,n:h})=>{if(!At(d))return;const{isMatch:v,score:g,indices:y}=o.searchIn(d);v&&c.push({score:g,key:i,value:d,idx:p,norm:h,indices:y})});else{const{v:d,n:p}=r,{isMatch:h,score:v,indices:g}=o.searchIn(d);h&&c.push({score:v,key:i,value:d,norm:p,indices:g})}return c}}pn.version="6.6.2";pn.createIndex=cg;pn.parseIndex=uS;pn.config=oe;pn.parseQuery=fg;TS(qS);const MS={title:"Le Monde de l'Ombre",intro:"Val-d'Ombre, cit industrielle et gothique, touffe sous la poussire de roche et les vapeurs mtalliques.",sections:[{title:"Atmosphre Gnrale",content:["Val-d'Ombre est une cit industrielle et gothique accroche  flanc de montagne.","L'air y est satur de poussire de roche, brume froide, odeur mtallique des forges.","C'est une ville de verticalit, de terrasses, de fumes et d'ombres."]},{title:"La Spirale des ons",content:["Tour inverse titanesque qui s'enfonce dans la crote terrestre.","Non pas construite, mais  pousse  depuis une autre ralit.","Architecture vivante : les couloirs changent si on les quitte trop longtemps.","Le Secret : Thade veut s'y brancher pour figer sa conscience et devenir immortel."]}]},ES={id:"quartier_des_mineurs",name:"Quartier des Mineurs",summary:"Niveau du sol au pied de la falaise, quartier ouvrier nain o la tension sociale est permanente.",details:["Ambiance : Bruyant, satur de poussire et de jurons nains.","Tension : Piquets de grve, charrettes renverses, familles prtes  tout pour quitter la ville.","Focus : Cur du conflit social entre la Guilde des Mineurs, le Conseil et la Guilde des Mages.","Opportunits : Recruter des allis temporaires, provoquer des meutes ou organiser des actions de sabotage."],locations:[{id:"quartier_des_mineurs_place",name:"Place Centrale du Quartier",summary:"Carrefour bruyant o se croisent mineurs, contrematres et familles puises.",details:["Ambiance : Cris, odeur de sueur et de charbon, fume des forges en arrire-plan.","Tests : Diplomatie / Intimidation pour calmer ou enflammer la foule.","Ennemis potentiels : Casseurs ou briseurs de grve manipuls par Thade.","Opportunits : Lancer des rumeurs, organiser une manifestation, ngocier avec les meneurs de grve."],npcIds:["durnik_chef_mineur","contremaitre_humain"]},{id:"quartier_artisan_patrouille",name:"Alle des Artisans",summary:"Rue principale borde d'ateliers mtallurgiques, devenue terrain de rafles improvises.",details:["Ambiance : Vapeur brlante, marteaux arrts net, torches renverses.","Tests : Discrtion / Acrobaties pour se faufiler entre les barrages de caisses.","Danger : Patrouilles mixtes (gardes humains, automates de la Guilde), dnonciations forces.","Usage : Montrer la violence de la Loi Martiale et les arrestations ciblant les Nains."],npcIds:["patrouille_mixte_conseil"]},{id:"entree_mine_valdombre",name:"Entre de la Mine",summary:"Palissade garde et cage de descente massive, point de passage oblig entre la surface et les profondeurs.",details:["Ambiance : Rugissement du treuil, fume de torches, martlement des boucliers des gardes.","Tests : Diplomatie / Intimidation pour franchir le piquet de grve sans violence.","Danger : Risque d'meute, sabotage latent, surveillants prts  dclencher l'alarme.","Usage : Contrle d'accs vers la Mine d'Argent, ngociations entre Guildes et PJ."],npcIds:["garde_portail_mine"]},{id:"forge_thorgar_refuge",name:"Forge-Refuge de Thorgar",summary:"Atelier latral du Temple-Forgeron converti en sanctuaire provisoire pour les blesss et chefs nains.",details:["Ambiance : Chaleur touffante des fours, murmures de prires, odeur d'huile brle.","Tests : Premiers secours / Artisanat (forge) pour stabiliser les dfenses improvises.","Danger : Effondrement possible si les glyphes sont sabords de l'intrieur.","Usage : Lieu des dcisions morales, confrontation directe avec Thorgar sur la stratgie."],npcIds:["thorgar_pretre_nain"]},{id:"temple_forgeron",name:"Temple-Forgeron des Nains",summary:"Forteresse-temple creuse dans la roche, cur spirituel et militaire des Nains.",details:["Ambiance : Chant religieux sourd ml au martlement des marteaux sur l'enclume sacre.","Tests : Religion / Histoire pour comprendre les runes de protection graves dans la pierre.","Ennemis : Pendant la Nuit des Longs Couteaux, assaillants morts-vivants et fanatiques de Thade.","Loot : Reliques naines, armes bnies contre les morts-vivants, accs  des bndictions temporaires."],npcIds:["thorgar_pretre_nain","capitaine_garde_temple"]},{id:"egouts_val_dombre",name:"gouts de Val-d'Ombre",summary:"Rseau ancien reliant quartiers pauvres, Temple-Forgeron et Cimetire.",details:["Ambiance : Souterrains sombres, odeurs pestilentielles, eau stagnante.","Tests : Survie / Perception pour viter de se perdre ou tomber dans des fosses caches.","Ennemis : Rats gants, charognards, expriences rates de ncromancie.","Usage : Voie de fuite, terrain de gurilla naine et d'infiltration discrte."],npcIds:["sniv_kobold"]},{id:"taverne_fumees_rouges",name:"Taverne des Fumes Rouges",summary:"Bouge enfum frquent par contrematres, dockers et mercenaires sans contrat.",details:["Ambiance : Fume paisse, tables collantes, rires gras et bagarres rgulires.","Tests : Perception / Intuition pour reprer les vrais informateurs parmi les ivrognes.","Ennemis potentiels : Brutes locales, collecteurs de dettes.","Opportunits : Recruter des mercenaires, rgler des dettes, provoquer une diversion."],npcIds:["tenancier_taverne"]}]},RS={id:"quartier_du_savoir",name:"Quartier du Savoir",summary:"Quartier en terrasses ddi au savoir, aux bibliothques et aux expriences secrtes.",details:["Ambiance : De jour, agitation studieuse ; de nuit, complots en robe noire.","Tension : Rivalits entre tudiants, professeurs et cabales secrtes.","Focus : Point d'entre idal pour enquter sur la Spirale et les expriences de ncromancie.","Opportunits : Accs aux archives interdites,  des mentors ou  des ennemis puissants."],locations:[{id:"quartier_du_savoir_coeur",name:"Cur du Quartier du Savoir",summary:"Terrasses de tours fines relies par des passerelles couvertes.",details:["Ambiance : Odeur d'encre, de parchemin et d'ozone magique.","Tests : Connaissances / Investigation pour glaner des informations discrtes.","Danger : Espions de Thade  l'afft de toute curiosit mal place.","Usage : Lieu de rencontres rapides avec diffrents rudits et tudiants."],npcIds:["etudiante_cabale"]},{id:"tour_des_mages_toit",name:"Toit de la Tour des Mages",summary:"Plateforme d'affrontement final, balaye par les vents et les clairs arcaniques.",details:["Quatre pylnes alimentent un bouclier de force sur le boss.","Vue panoramique sur Val-d'Ombre en ruine.","Terrain : risque de chute, clairs, gravit instable lors de la fusion.","Climax : lieu de la confrontation contre Thade et la Spirale."],npcIds:["kaelen_vampire"]},{id:"valdombre_sommet_tour_mage",name:"Sommet ventr de la Tour des Mages",summary:"Crte brise o le tunnel de la Spirale ventre le toit, thtre d'irruptions violentes.",details:["Ambiance : Pluie de gravats, clairs arcaniques, vue panoramique sur la ville en flammes.","Tests : Acrobaties / Volont pour rester debout sous les rafales magiques.","Danger : Gardes d'lite, champs de force instables, arrive possible de Thade.","Usage : Transition entre la Spirale et l'affrontement final  la surface."],npcIds:[]},{id:"tour_des_mages",name:"Tour des Mages",summary:"Symbole de la Guilde des Mages, cur du pouvoir magique de la ville.",details:["Ambiance : Brume violette, clairs arcaniques, silhouettes en robes observant la ville.","Tests : Arcane / Politique pour naviguer entre les diffrentes factions de mages.","Ennemis : Apprentis fanatiss, lmentaires lis, gardiens magiques.","Climax : Devient thtre du combat final contre Thade dans la campagne."],npcIds:["thade_coren","archimage_defecteur","magi_tuteur_loyal"]},{id:"bureau_thade_coren",name:"Bureau de Thade Coren",summary:"Appartement panoramique o Thade orchestre la guerre : bibliothques en peau, cartes arcaniques et relais vers la Spirale.",details:["Ambiance : Parfums d'encens froid, instruments de mesure sifflants, vitraux irradiant une lueur violette.","Tests : Investigation / Magie pour dcoder les plans gravs sur les murs et dtecter les glyphes de dfense.","Danger : Serviteurs spectraux, cristaux-judas relis  la Spirale, piges qui inversent la gravit.","Usage : Pice cl pour dcouvrir les complots de Thade, voler ses recherches ou affronter sa projection."],npcIds:["thade_coren"]},{id:"universite_arcane",name:"Universit Arcane et Bibliothques",summary:"Complexe d'amphithtres, de salles de cours et d'archives interdites.",details:["Ambiance : Chuchotements, pages tournes, chandelles vacillantes.","Tests : Recherche / Investigation pour dnicher des informations sur la Spirale et la ncromancie.","Ennemis : Bibliothcaires zls, sorts de dfense animant les livres et les tagres.","Loot : Grimoires, parchemins de sorts, notes de recherches compromettantes."],npcIds:["etudiant_universite","bibliothecaire_interdits"]},{id:"place_marche_noir",name:"Place du March Noir",summary:"Place couverte  l'cart des patrouilles, ddie aux transactions interdites.",details:["Ambiance : Torches bleutres, voix basses, marchandises caches sous des bches.","Tests : Ngociation / Intimidation pour obtenir des objets rares sans se faire dpouiller.","Ennemis potentiels : Voleurs, assassins, espions.","Loot : Composants ncromantiques, artefacts de la Spirale, informations vendues au plus offrant."],npcIds:["marchand_gris"]}]},zS={id:"hauteurs_brumeuses",name:"Hauteurs Brumeuses",summary:"Plateaux suprieurs plongs dans la brume, domaine des nobles et des industriels.",details:["Ambiance : Brume froide, jardins suspendus, balcons dominant la ville.","Tension : Dcalage extrme entre le confort des hauteurs et la misre du bas.","Focus : Lieu des dcisions politiques et des complots  grande chelle.","Opportunits : Infiltration, espionnage, renversement d'alliances."],locations:[{id:"hauteurs_brumeuses_quartier",name:"Quartier des Nobles",summary:"Manoirs murs, alles silencieuses et gardes blass.",details:["Ambiance : Silence feutr, parfums coteux, lumire tamise par la brume.","Tests : Discrtion / Bluff pour se faire passer pour des invits.","Ennemis : Gardes privs, mages de cour.","Usage : Rencontres diplomatiques, chantages, soires qui peuvent tourner au massacre."],npcIds:["bourgmestre"]},{id:"manoir_bourgmestre",name:"Manoir du Bourgmestre",summary:"Rsidence officielle, mlange de luxe fatigu et de paranoa.",details:["Ambiance : Couloirs chargs de portraits svres, pices de rception rarement utilises.","Tests : Investigation pour trouver des archives caches sur la gestion de la ville.","Ennemis : Espions infiltrs, gardes loyaux au Conseil plutt qu'au Bourgmestre.","Loot : Documents compromettants, lettres codes mentionnant la Spirale."],npcIds:["secretaire_bourgmestre"]},{id:"chapelle_oublies",name:"Chapelle des Oublis",summary:"Petit sanctuaire oubli coinc entre deux demeures nobles.",details:["Ambiance : Silence pais, cierges presque consums, statues de saints oublis.","Tests : Religion / Intuition pour percevoir la lassitude du clerg local.","Ennemis potentiels : Fanatiques isols, esprits amers.","Usage : Refuge discret pour les PJ, lieu de confessions et de complots nocturnes."],npcIds:["clerc_desabuse"]},{id:"balcons_brumeux",name:"Balcons du Brumeux",summary:"Passerelles dominant le vide, idales pour rencontres secrtes et chutes spectaculaires.",details:["Ambiance : Brume paisse, vent glac, vue plongeante sur le Cimetire et la Mine.","Tests : Acrobatie / Discrtion lors de filatures en hauteur.","Ennemis : Assassins, agents de Thade, cratures volantes invoques.","Usage : Scnes dramatiques de confrontation, de trahison ou de sacrifice."],npcIds:["assassin_masque"]}]},OS={id:"vieille_ville",name:"Vieille Ville",summary:"Quartier le plus ancien, labyrinthe de ruelles troites et de maisons penches.",details:["Ambiance : Linge humide suspendu, pavs glissants, odeur de moisi.","Tension : Refuge des marginaux, des apprentis mages en fuite et des contrebandiers.","Focus : Terrain idal pour les filatures, embuscades et planques secrtes.","Opportunits : Rseaux d'information parallles, caches d'objets illicites."],locations:[{id:"vieille_ville_ruelles",name:"Vieille Ville et Ruelles Basses",summary:"Rseau de ruelles serres o l'on se perd facilement.",details:["Ambiance : Obscurit, murs humides, voix touffes derrire les volets.","Tests : Discrtion / Perception pour viter les embuscades.","Ennemis : Bandits, espions, cratures tapis dans l'ombre.","Usage : Terrain de jeu des criminels et des complots mineurs."],npcIds:["chef_bandes_ruelles"]},{id:"auberge_pic_brise",name:'Auberge "Le Pic Bris"',summary:"Grande auberge de bois sombre, point de dpart idal de la campagne.",details:["Ambiance : Rires fatigus, odeur de bire, feu chaleureux dans l'tre.","Tests : Renseignements pour glaner les premires rumeurs sur le Cimetire et la Mine.","Ennemis potentiels : Ivrognes agressifs, collecteurs de dettes.","Usage : Point de rencontre initial, lieu o les PJ reoivent leurs premires offres de mission."],npcIds:["aubergiste_pic_brise"]}]},VS={id:"centre_civique",name:"Centre Civique",summary:"Cur administratif de Val-d'Ombre, sige du pouvoir civil et judiciaire.",details:["Ambiance : Places paves, btiments officiels imposants, drapeaux flottant dans la brume.","Tension : Dcisions impopulaires, rassemblements qui dgnrent, prsence policire forte.","Focus : Lieu des annonces, des procs et des conseils de crise.","Opportunits : Plaidoyer politique, renversement d'alliances, actions spectaculaires en public."],locations:[{id:"hotel_de_ville_valdombre",name:"Htel de Ville de Val-d'Ombre",summary:"Sige administratif et salle du Conseil, cur des dcisions politiques.",details:["Ambiance : Couloirs tendus, odeur d'encre et de fume de torches.","Tests : Diplomatie / Intimidation pour influer sur les votes et discours.","Dangers : Gardes du Conseil, mages asserments, complots de Thade.","Usage : Scnes de crise, dclarations de loi martiale, assassinats politiques."],npcIds:["bourgmestre"]},{id:"hotel_de_ville_conseil",name:"Salle du Conseil Sanglant",summary:"Salle ovale aux vitraux rouges o se runissent les dirigeants lors des crises.",details:["Ambiance : Cloche d'alarme, tables couvertes de cartes, odeur de sang sch.","Tests : Diplomatie / Bluff pour survivre aux accusations croises.","Danger : Gardes du Conseil prts  dgainer, mages de Thade dissimuls.","Usage : Dclencher le massacre du Sommet et isoler les PJ politiquement."],npcIds:["bourgmestre"]},{id:"hotel_ville_place_conseil",name:"Htel de Ville et Place du Conseil",summary:"Esplanade officielle o se tiennent discours et rassemblements.",details:["Ambiance : Statues austres, estrades pour les orateurs, foule potentiellement explosive.","Tests : Discours / Intimidation pour orienter l'opinion publique.","Ennemis : Gardes du Conseil, agitateurs pays, agents de Thade.","Usage : Scnes de crise politique, dclarations de loi martiale, excutions publiques."],npcIds:["capitaine_garde_urbaine"]},{id:"rues_valdombre_nuit",name:"Rues de Val-d'Ombre (nuit)",summary:"Rseau de ruelles plonges dans la brume, patrouilles par les forces du Conseil.",details:["Ambiance : Brume lourde, lanternes sporadiques, cris touffs.","Dangers : Patrouilles mixtes (gardiens, golems de chair), embuscades.","Tests : Discrtion / Survie urbaine pour viter arrestations et rafles.","Usage : Fuites nocturnes, purges, embuscades orchestres par Thade."],npcIds:[]},{id:"rues_valdombre_brume",name:"Rues Brumeuses Ranimes",summary:"Artres noyes de brume violette o les cadavres se relvent instantanment.",details:["Ambiance : Cloches funbres, silhouettes titubantes, parfums de chair brle.","Tests : Survie / Perception pour anticiper les foyers de ranimation.","Danger : veil simultan de zombies et de golems de chair.","Usage : Mettre en scne l'veil de la Ncropole et les premires pertes massives."],npcIds:["capitaine_garde_urbaine"]},{id:"prison_conseil",name:"Prison du Conseil",summary:"Bloc de pierre sans fentres, symbole de la rpression politique.",details:["Ambiance : Couloirs troits, odeur de sueur et de dsinfectant, gravures de prires et d'insultes sur les murs.","Tests : vasion / Infiltration pour faire sortir ou entrer quelqu'un discrtement.","Ennemis : Geliers brutaux, interrogateurs, mages asserments.","Usage : Faux procs, interrogatoires politiques, vasions spectaculaires."],npcIds:["geolier_principal"]}]},PS={id:"cimetiere_et_seuil",name:"Cimetire et Seuil",summary:"Ncropole en terrasses relies par des escaliers troits, seuil vers la Spirale.",details:["Ambiance : Brume paisse, statues gothiques, lanternes mourantes.","Tension : Profanations rcentes, veilles inquites, intervention de la Garde.","Focus : Point de dpart du premier scnario, lieu de passage vers la Spirale.","Opportunits : Enqutes, combats contre les morts-vivants, rvlations sur la cabale ncromancienne."],locations:[{id:"cimetiere_terrasse",name:"Cimetire en Terrasse",summary:"Gradins funraires taills dans la falaise.",details:["Ambiance : Brouillard, silence, bruit lointain de la ville.","Tests : Perception / Investigation pour reprer les tombes profanes.","Ennemis : Pilleurs de tombes, morts-vivants, gardes nerveux.","Usage : Scnes d'enqute, de garde de nuit, de premiers combats contre la ncromancie."],npcIds:["gardien_cimetiere"]},{id:"mausolee_seuil",name:"Mausole Secret du Seuil",summary:"Tombeau scell servant de sas vers la Spirale.",details:["Ambiance : Froid mordant, silence touff, runes d'interdiction partiellement effaces.","Tests : Religion / Arcane pour comprendre les runes naines de confinement.","Ennemis : Chevaliers morts-vivants, gardiens de l'ancien ordre.","Usage : Point de non-retour de la campagne, ouverture du puits vers la Spirale."],npcIds:["spectre_ancien_heros"]},{id:"mausolee_pont_secret",name:"Pont Secret des Mausoles",summary:"Passerelle troite reliant deux terrasses funraires, pige par les ncromanciens.",details:["Ambiance : Chanes grinantes, poussire de pierre, runes fissures sous les pieds.","Tests : Acrobaties / Perception pour viter les sections sabotes.","Danger : Gardiens gargouilles, charges explosives poses par Durnik.","Usage : Lieu du sacrifice hroque bloquant l'accs au Seuil."],npcIds:["durnik_chef_mineur"]},{id:"puits_spirale_abime",name:"Puits de l'Abme Spirale",summary:"Ouverture verticale noire o l'on ressent l'appel de la Spirale.",details:["Ambiance : Vent froid venant d'en bas, chuchotements lointains.","Tests : Volont / Escalade pour affronter le vertige et descendre en rappel.","Danger : Tourbillons d'nergie attirant armes et mes, assauts d'ombres.","Usage : Dernire tape avant la fuite vers la Spirale lors de la chute de la ville."],npcIds:[]}]},US={id:"profondeurs_mine",name:"Profondeurs de la Mine",summary:"Rseau de galeries profondes, poumon conomique et porte brise vers la Spirale.",details:["Ambiance : Grincement des cages de descente, chaleur touffante, poussire de roche.","Tension : Mineurs terroriss par les hurlements de la pierre.","Focus : Dcouverte de la paroi de la Spirale au niveau -8.","Opportunits : Exploration, survie, sabotage, ngociations avec la Guilde des Mineurs."],locations:[{id:"mine_argent",name:"La Mine d'Argent",summary:"Galeries principales et niveaux de travail ordinaires.",details:["Ambiance : Lumire de lanternes, claquement des pioches, rails grinants.","Tests : Survie / Ingnierie pour viter les effondrements et poches de gaz.","Ennemis : Monstres fouisseurs, cratures attires par la magie de la Spirale.","Usage : Lieu d'introduction  la menace surnaturelle dans les profondeurs."],npcIds:["contremaitre_nain_mine"]},{id:"galeries_silencieuses",name:"Galeries Silencieuses",summary:"Niveaux -1  -7 abandonns aprs les premiers hurlements de la pierre.",details:["Ambiance : Tables renverses, repas  moiti mangs, outils abandonns.","Tests : Perception / Sang-froid pour affronter l'atmosphre oppressante.","Ennemis : Monstres rouilleurs, ankhegs, morts oublis.","Usage : Exploration horrifique et pistes vers la paroi de la Spirale."],npcIds:["geometre_fou"]}]},wS={id:"spirale",name:"La Spirale",summary:"Donjon invers aux lois changeantes, accessible par la brche dans la mine.",details:["Ambiance : Murmures lointains, gravit capricieuse, lumire violette sourde.","Tension : L'architecture se reconfigure, rien n'est fiable longtemps.","Focus : Les premiers cercles testent la rsilience et la prudence des explorateurs.","Opportunits : Dcouvrir la source des rsonances, isoler la gode chantante, comprendre la conscience du lieu."],locations:[{id:"spirale_premier_cercle",name:"Premier Cercle de la Spirale",summary:"Anfractuosits initiales aprs la fissure, couloirs qui se rcrivent derrire soi.",details:["Rgle :  chaque sortie d'une salle, le couloir prcdent change de topologie.","Dangers : Goules mineurs gares, cubes nettoyeurs, instabilit gravitationnelle lgre.","Indices : Veines cristallines pulsant au rythme des rsonances, inscriptions naines partiellement effaces.","Usage : Premire zone pour prouver les rgles de la Spirale et affronter la Gode chantante."],npcIds:["sentinelle_reliee","lysa_exploratrice_perdue"]},{id:"spirale_engrenages_plenaires",name:"Engrenages Plnaires",summary:"Segment de contrle o les engrenages modulent la gravit des niveaux suprieurs.",details:["Ambiance : clairs d'nergie pure, vibrations continues, champ magntique dsorientant.","Tests : Ingnierie / Acrobaties pour actionner les leviers synchroniss.","Danger : Compression brutale pour ceux qui ratent le rythme, arcs lectriques alatoires.","Usage : Dsamorcer le mcanisme avant de pntrer dans la Salle des Engrenages principale."],npcIds:[]},{id:"spirale_balcon_inverse",name:"Balcon Invers",summary:"Corniche donnant sur le vide, surplombant les structures retournes de la Spirale.",details:["Vertige constant, pluie de poussire cristalline tombant vers le haut.","Point d'observation idal pour reprer des passerelles mouvantes.","Risque : Chutes imprvisibles si la gravit change brusquement.","Indice : On entend le chant de la Gode rsonner plus fort ici."],npcIds:[]},{id:"spirale_coeur_geode",name:"Cur de la Gode Chantante",summary:"Salle cristalline o l'nergie de la Spirale se condense.",details:["Pulsations lumineuses violettes synchronises avec le cristal de Thade.","Chant harmoniquement discordant, fatigue mentale accrue.","Structure semi-organique : la gode se dfend en modifiant l'espace.","But : Dtruire ou canaliser l'nergie pour stabiliser la mine."],npcIds:["geode_avatar"]},{id:"spirale_zone_dechets",name:"Zone de Dchets",summary:"lots instables d'boulis et de gravats, premire halte aprs la chute.",details:["Gravit erratique, brume violette, clats cristallins tranchants.","Le sol se dsagrge si l'on s'y repose trop longtemps.","Point d'entre pour les survivants jects vers la Spirale.","Vestiges nains indiquant que d'autres sont dj tombs ici."],npcIds:["charognard_errant"]},{id:"spirale_couloirs_ether",name:"Couloirs de l'ther",summary:"Galeries translucides suspendues dans le vide, parcourues de vents inverses.",details:["Ambiance : Lumire blanche diffuse, poussire flottant  contresens, chos mtalliques dforms.","Tests : Acrobaties / Volont pour garder son orientation quand la gravit pivote de 90.","Dangers : Prdateurs thrs, bourrasques aspirant vers le plafond devenu sol.","Usage : Terrain d'introduction aux rgles physiques absurdes avant de rejoindre les couloirs organiques."],npcIds:[]},{id:"spirale_couloirs_chair",name:"Couloirs de Chair",summary:"Vaisseaux organiques pulsants, ragissant aux motions et au sang.",details:["Parois veineuses, yeux incrusts, chuchotements humides.","Gravit changeante, sols visqueux, escaliers de cartilage.","La Spirale observe : tests de volont et de sang-froid.","Accs vers le laboratoire secret plus bas."],npcIds:["marchand_fou_mercane"]},{id:"spirale_carrefour_mercane",name:"Carrefour du Mercane",summary:"Plateforme hexagonale o convergent six veines vivantes, transforme en bazar interdit.",details:["Ambiance : Odeur d'ozone et de trbenthine, cliquetis d'artefacts suspendus autour d'un brasero violet.","Tests : Marchandage / Bluff (souvenirs contre ressources).","Danger : Contrats pigs qui siphonnent des niveaux ou des souvenirs des PJ.","Usage : Rencontre avec le Marchand Fou, accs  des informations sur les niveaux infrieurs."],npcIds:["marchand_fou_mercane"]},{id:"spirale_salle_miroirs",name:"Salle des Miroirs du Regret",summary:"Cylindre tapiss de miroirs liquides refltant des futurs possibles.",details:["Ambiance : Chuchotements familiers, battements de cur amplifis, froid psychique.","Tests : Volont / Bluff contre soi-mme pour accepter un secret ou subir des dgts mentaux.","Danger : Reflets qui sortent des miroirs si l'on ment.","Usage : Confronter les PJ  leurs regrets avant d'accder au mcanisme d'ascenseur."],npcIds:[]},{id:"spirale_labo_secret",name:"Laboratoire Secret de Thade",summary:"Complexe technomagique enchss dans la paroi, cur des expriences de Thade.",details:["Portes runiques, odeur d'ozone et de formol, bassins d'mes.","Production de corps rassembls et d'artefacts de contrle.","Archives prouvant l'usage d'clats de Spirale sur le cur de Thade.","Pont vers les zones mcaniques plus profondes."],npcIds:["sujet_zero"]},{id:"spirale_bibliotheque_ames",name:"Bibliothque de Cristal des mes",summary:"Galerie d'tagres faites d'os et de quartz, contenant des souvenirs pigs.",details:["Ambiance : Bourdonnement harmonique, lueurs prisonnires dans chaque fiole.","Tests : Connaissance / Utilisation d'objets magiques pour consulter sans librer les esprits.","Danger : Fantmes archivistes, surtension mentale en cas de lecture prolonge.","Usage : Rvler le plan d'immortalit de Thade et des indices sur la Spirale."],npcIds:[]},{id:"spirale_laboratoire_clonage",name:"Laboratoire de Clonage",summary:"Chane de montage charnelle o des corps recomposs sont assembls.",details:["Ambiance : Pistons organiques, odeur d'aldhyde, clats de mtal ensanglants.","Tests : Sabotage / Artisanat (alchimie) pour drgler les cuves.","Danger : Berserkers frachement sortis des cuves, alarmes appelant Sujet Zro.","Usage : Prouver que Thade produit ses armes artificielles."],npcIds:[]},{id:"spirale_salle_engrenages",name:"Salle des Engrenages",summary:"Cathdrale mcanique d'engrenages gants suspendus dans le vide.",details:["Bruit assourdissant, vents tranchants, plateformes en rotation.","Flux d'nergie alimentant la surface et les pylnes de Thade.","Passerelles ncessitant synchronisation et sang-froid.","Point de sabotage critique pour affaiblir Thade."],npcIds:["inevitable_contremetre"]},{id:"spirale_tunnel_teleport",name:"Tunnel de Tlportation",summary:"Colonne luminescente propulsant vers la surface, protge par des ombres.",details:["Flux d'nergie vertical, salles-tampons cycles par la Spirale.","Purge rgulire des intrus par dcharges d'ombre et de vide.","Permet d'intercepter Thade pendant la remonte.","Termine sur la Tour des Mages si le flux est invers."],npcIds:[]}]},IS=[ES,RS,zS,OS,VS,PS,US,wS],xs={...MS,zones:IS},BS={id:1,title:"SCNARIO 1 : LE PRIX DE L'IMPATIENCE",level:"Niveaux 1-3",system:"D&D 3.5",synopsis:"Le cimetire nain de Val-d'Ombre est la cible de profanations inquitantes. Ces actes, maquills en pillages, dissimulent les expriences interdites de Jaren, un tudiant manipul par le Professeur Thade Coren. Les aventuriers sont engags pour rsoudre l'affaire, sans savoir qu'ils servent en ralit  effacer les traces du vritable marionnettiste.",acts:[{title:"ACTE 1 : L'INCIDENT DU CIMETIRE",stake:"Prouver sa valeur aux nains de Val-d'Ombre en dcouvrantla nature des profanations avant que le clan ne se fasse justice lui-mme.",location:"L'Auberge du Pic Bris & Le Cimetire des Terrasses.",scenes:[{title:"Scne 1 : L'Offre du Prtre",type:"Social",image:"./images/scenes/auberge_pic_brise.jpg",locationId:"auberge_pic_brise",npcIds:["thorgar_pretre_nain","aubergiste_pic_brise"],description:{resume:"Thorgar engage les PJ pour enquter sur les profanations de tombes",visuel:"Poutres basses en chne noirci, fume de pipe paisse, clats de voix graves. Un panneau  MAGIE INTERDITE  est clou au mur.",audio:"Le choc des chopes, le crpitement du foyer, et un silence pesant  l'entre des trangers.",odeur:"Bire brune forte, viande rtie et sueur de travail.",lumiere:"Tamise par la fume, foyer central ardent aux reflets orangs."},narration:{declencheur:"Thorgar, le visage marqu par la fatigue, vous fait signe de vous asseoir sans crmonie.",texte_a_lire:"Thorgar nettoie distraitement une tache de bire sur la table. Il ne vous regarde pas directement.  On a ouvert les tombes des Thanes. La garde s'en moque, mais le clan est  bout de nerfs. Si je ne trouve pas des extrieurs pour rgler a discrtement, mes frres vont descendre dans la rue et brler le quartier humain. Retrouvez les os. Le reste, je m'en fiche. ",contexte_mj:"Thorgar est pragmatique et inquiet. Il ne cherche pas la gloire, il veut viter une guerre civile. Il paie pour la discrtion autant que pour le rsultat.",objectif:"Accepter le contrat et obtenir des informations sur les tombes vises."},mecaniques:{defis:["Diplomatie (DD 15) : Ngocier une avance ou une prime supplmentaire (50 po).","Connaissances (Folklore) (DD 12) : Apprendre que les tombes vises sont celles de la ligne des Thanes (chefs de clan)."],indices:["Les tombes ne sont pas vides de leur or, mais certains os sont prlevs avec une prcision chirurgicale."],recompenses:"200  300 po (groupe) + Amulette de protection contre les morts-vivants (1 usage)."},transitions:{success:"Thorgar offre une avance et indique le chemin du cimetire.",fail:"Thorgar les engage par ncessit mais les fait surveiller par un mineur."}},{title:"Scne 2 : Un Cimetire dans la Brume",type:"Social",image:"./images/scenes/gardien_cimetiere.jpg",locationId:"cimetiere_terrasse",npcIds:["gardien_cimetiere"],description:{resume:"Ngociation avec le gardien paranoaque du cimetire",visuel:"Une grille monumentale en fer forg. Une silhouette massive (le Gardien) surveille l'entre, arbalte au poing.",audio:"Grincement des chanes et le cliquetis mtallique du mcanisme d'arbalte.",odeur:"un parfum de terre noire sature d'eau et de pierre moisie.",lumiere:"Le halo jaune et vacillant d'une lanterne sourde."},narration:{declencheur:"Les PJ s'approchent du portail principal.",texte_a_lire:"Un carreau d'arbalte vient se planter dans la terre,  un mtre de vos bottes. Une voix rauque merge de l'obscurit :  Le prochain est pour vos genoux. Reculez. ",contexte_mj:"Le Gardien est un professionnel paranoaque. Il ne discute que si les PJ prouvent immdiatement qu'ils ne sont pas une menace.",objectif:"Gagner l'accs et reprer la zone de la prochaine profanation."},mecaniques:{defis:["Diplomatie (DD 12) : Calmer le Gardien. Succs : Il offre des carreaux d'arbalte en argent (x5).","Dtection (DD 14) : Reprer des traces de pas lgres (bottes de citadins) prs de la crypte Nord.","Art de la Magie (DD 15) : Identifier l'odeur d'ozone comme une trace de ncromancie de  conservation ."],indices:["Le Gardien confirme :  Ils ont emport le fmur gauche de l'ancien Thane. Pourquoi un fmur ? "],recompenses:"Avantage tactique (Surprise) pour la scne suivante. Le Gardien peut prter main-forte (Guerrier Niv 2)."},transitions:{success:"Les PJ se mettent en embuscade prs de la crypte.",fail:"Le Gardien refuse l'entre. Les PJ arrivent trop tard : le combat commence alors que les pilleurs s'enfuient."}},{title:"Scne 3 : Les Pilleurs",type:"Combat",image:"./images/scenes/scene_3.jpg",locationId:"cimetiere_terrasse",npcIds:["etudiant_renvoye","brutes_cimetiere","squelette_Instable","gardien_cimetiere"],description:{resume:"Combat contre les pilleurs et capture de Jaren",visuel:"Trois mercenaires creusent sous l'il vigilant d'un jeune homme en robe d'tudiant. Celui-ci, qui semble diriger les oprations, examine un crne  la lumire de sa lanterne",audio:"Bruit des pelles contre la pierre et rire nerveux de l'tudiant.",odeur:"Une odeur de terre grasse et d'humus tremp s'lve du trou frachement creus.",lumiere:"Lumire crue de la lampe-tempte au centre de la scne."},narration:{declencheur:"L'assaut des PJ ou une maladresse.",texte_a_lire:"L'tudiant lche son crne de surprise. Il bouscule l'un des mercenaires pour se mettre  couvert et hurle d'une voix suraigu :  Protgez-moi ! Ils ne doivent pas voir a ! ",contexte_mj:"Jaren est un lche. Il ne combat pas, il fuit et laisse ses hommes mourir. Son arrogance disparat ds le premier coup d'pe.",objectif:"Neutraliser les gardes et capturer Jaren vivant."},mecaniques:{defis:["Combat : 3 Brutes (Guerrier 1) et Jaren (Magicien 1 - Spcialisation Ncromancie).","Intimidation (DD 13) : Faire fuir les mercenaires si Jaren est bless.","Magie Instable : Tout sort de zone a 20% de chance de ranimer un tas d'os (Squelette simple) qui attaque tout le monde."],indices:["Jaren porte une broche de la Fraternit Nyx.","Une liste de noms nains avec la mention  Compatible ."],recompenses:"Bourse de 50 po + Baguette de Lecture de la Magie (5 charges)."},transitions:{success:"Jaren est captur, prt  parler.",fail:"Jaren s'enfuit dans les bois, laissant sa sacoche derrire lui."}},{title:"Scne 4 : L'Autopsie du Crime",type:"Investigation",image:"./images/scenes/jaren_death.jpg",locationId:"cimetiere_terrasse",npcIds:["etudiant_renvoye","gardien_cimetiere"],description:{resume:"Jaren meurt par un sceau magique avant de parler",visuel:"Jaren tremble violemment. Ses yeux brillent d'une lueur arcanique instable.",audio:"Un bourdonnement haute frquence qui fait siffler les oreilles.",odeur:"Ozone et brl.",lumiere:"Flashs intermittents provenant des veines du cou de Jaren."},narration:{declencheur:"Les PJ posent une question sur  Le Matre .",texte_a_lire:"Ds que vous mentionnez son matre, Jaren se fige. Une veine noire pulse violemment sur sa tempe. Il n'a mme pas le temps de crier : ses yeux se rvulsent, du sang coule de son nez et il s'effondre comme une marionnette dont on a coup les fils.",contexte_mj:"Pas de derniers mots dramatiques. Le sceau de Censure est brutal et immdiat. C'est une excution  distance, froide et clinique.",objectif:"Comprendre que l'ennemi est au sein de l'Universit."},mecaniques:{defis:["Art de la Magie (DD 16) : Identifier le sort comme une variante interdite de  Vu de Silence .","Premiers Secours (DD 15) : Constater que la mort est d'origine magique et instantane.","Perception (DD 12) : Trouver sur le corps une invitation pour une confrence prive au nom du Professeur Thade Coren."],indices:["La broche de la Fraternit Nyx est un laissez-passer pour les quartiers tudiants."],recompenses:"XP d'investigation. Gratitude de Thorgar pour la rcupration des restes."},transitions:{success:"Fin de l'Acte 1. Les PJ ont un nom (Coren) et une destination (l'Universit)."}}]},{title:"ACTE 2 : LA PISTE ARCANIQUE",stake:"Remonter la piste de la ncromancie au sein de l'Universit et localiser le repaire de Jaren, tout en naviguant dans les intrigues du Professeur Coren.",location:"Universit de Magie de Val-d'Ombre.",scenes:[{title:"Scne 1 : La Fraternit Dissoute",type:"Social",image:"./images/scenes/universite_arcane.jpg",locationId:"universite_arcane",npcIds:["etudiant_universite"],description:{resume:"Enqute sur la Fraternit Nyx dissoute  l'Universit",visuel:"Niche au cur dune cit de pierre, la Tour des Mages se dresse comme un monolithe de marbre blanc grav de runes lumineuses, une anomalie verticale s'levant en spirales impossibles. Des passerelles de verre liquide relient les btiments entre eux, tandis que des orbes lumineux patrouillent silencieusement autour des plus hautes flches, projetant une lumire froide et clinique.",audio:"Le bourdonnement lectrique des barrires de mana, ponctu par le son cristallin des pas sur le verre et des chos de voix dsincarnes.",odeur:"Poussire de bibliothque, encre frache et th  la bergamote.",lumiere:"Une luminescence blanche et strile manant des murs eux-mmes, gommant les reliefs et donnant aux visages un aspect cireux."},narration:{declencheur:"Les PJ prsentent la broche de Nyx  un tudiant dans la cour.",texte_a_lire:"L'apprenti blmit instantanment. Il jette un coup d'il nerveux aux alentours et baisse la voix :  Rangez a. Si les recteurs vous voient avec un sceau de la Nyx, vous finirez au cachot. Allez voir le Professeur Coren, c'est lui qui gre le... nettoyage. Et oubliez que vous m'avez vu. ",contexte_mj:"L'Universit veut touffer le scandale. Orienter les PJ vers Thade Coren comme figure d'autorit morale.",objectif:"Localiser le bureau de Thade Coren et recueillir les bruits de couloir."},mecaniques:{defis:["Diplomatie (DD 13) : Convaincre l'tudiant de parler davantage.","Renseignements (DD 15) : Apprendre que Jaren tait le protg de Coren."],indices:["Rumeurs : On raconte que Jaren n'a pas quitt les lieux en silence. Il hurlait que son expulsion tait une  erreur monumentale  et que bientt, mme le Conseil des Mages devra se mettre  genoux devant son prochain matre."],recompenses:"Localisation du bureau de Thade."},transitions:{success:"Rencontre avec Thade (Scne 2).",fail:"Les PJ sont escorts par la garde universitaire jusqu'au bureau de Coren pour  interrogatoire ."}},{title:"Scne 2 : Le Professeur Bienveillant",type:"Social",image:"./images/scenes/thade_coren.jpg",locationId:"bureau_thade_coren",npcIds:["thade_coren"],description:{resume:"Thade Coren offre son aide pour retrouver Jaren",visuel:"Murs tapisss de grimoires impeccables. Thade est assis derrire un bureau de chne, lgant et calme.",audio:"Le grattement d'une plume de phnix et le tic-tac d'une horloge astronomique.",odeur:"Cire de bougie chaude et lavande sche.",lumiere:"Tamise par des vitraux illustrant les lois de la magie."},narration:{declencheur:"Aborder le sujet de Jaren.",texte_a_lire:"Thade ne touche pas la broche. Il continue d'crire, sans lever les yeux.  Jaren... Un esprit brillant, hlas bris par sa propre ambition. La ncromancie n'est pas un jeu. S'il a continu ses expriences, il est un danger pour lui-mme et pour la ville. Retrouvez-le. Je me chargerai de scuriser ses travaux. ",contexte_mj:"Thade sait qu'il a tu Jaren, mais joue la surprise. Il veut rcuprer les rsultats des expriences maintenant que son pion est hors-jeu.",objectif:"Accepter la mission de localiser le laboratoire et les notes de Jaren."},mecaniques:{defis:["Psychologie (DD 18) : Thade semble sincre, mais son dtachement face aux menaces contre le Conseil est troublant.","Ngociation (DD 14) : Obtenir 100 po d'avance pour  frais d'enqute ."],indices:["Le rapport d'expulsion de Jaren. En marge, l'criture lgante de Thade note :  Instabilit prvisible. Manque de discipline. "],recompenses:"Sauf-conduit de l'Universit + 1 parchemin de Dissipation de la Magie."},transitions:{success:"Vers le taudis de Jaren (Scne 3)."}},{title:"Scne 3 : La Descente aux Enfers",type:"Exploration",image:"./images/scenes/taudis_jaren.jpg",locationId:"vieille_ville_taudis_jaren",npcIds:[],description:{resume:"Dcouverte du taudis saccag de Jaren et de la trappe",visuel:"Une mansarde o la folie s'est inscrite sur les murs. Des parchemins forment une spirale obsessionnelle de croquis anatomiques nains. Au centre, les planches du parquet ont vol en clats autour d'une trappe bante.",audio:"Le claquement sec d'un volet mal fix et le grondement sourd, presque organique, de l'eau dans les profondeurs.",odeur:"Un mlange curant de papier jauni, de moisissure et l'odeur mtallique de la magie brute.",lumiere:"Des lames de lumire grise dcoupent l'obscurit, rvlant la poussire qui danse au-dessus du chaos."},narration:{declencheur:"Fouille approfondie de la pice.",texte_a_lire:`Ce qui rgne ici n'a rien du simple dsordre d'un tudiant. On sent qu'une rage dsespre a retourn chaque meuble, chaque papier, avec une frnsie presque palpable. Sur le mur, la paranoa s'est mue en obsession : une seule phrase s'y tale partout, griffonne  s'en briser les ongles :  Mensonge. Tout n'est que mensonge. Il a menti. IL A MENTI.  

Au milieu de ce chaos, le regard est invitablement attir par le sol. La trappe n'a pas t simplement ouverte ; elle a t littralement arrache, le bois pulvris et les gonds sauts sous l'impact d'une force magique brutale. On ignore qui a forc le passage, mais la violence de l'effraction trahit une urgence telle qu'on n'a mme pas cherch la cl.`,contexte_mj:"Jaren est hors d'tat (mort ou fuite). Kaela est passe rcemment pour rcuprer ses notes et a forc l'accs au laboratoire souterrain. L'odeur d'ozone et la chaleur rsiduelle indiquent que l'effraction est trs rcente : la trace est encore chaude.",objectif:"S'enfoncer dans les gouts pour traquer Kaela et dcouvrir le laboratoire secret."},mecaniques:{defis:["Fouille (DD 12) : Dnicher sous un tas de linge sale un plan partiel des gouts, avec une croix rouge marquant une zone sous le vieux manoir.","Art de la Magie (DD 14) : Analyser les traces de brlures sur la trappe. Ce n'est pas la magie du niveau de Jaren, mais une force plus puissante (celle de Kaela)."],indices:["Un journal intime brl dont il ne reste qu'une page :  Tout ce qu'on a construit n'est qu'un immense mensonge pour nourrir son ambition."],recompenses:"Accs  l'Acte 3. Si le plan est trouv, les PJ ont un Avantage sur les jets de Survie dans les gouts."},transitions:{success:"Dbut de l'Acte 3 : Les gouts et le Labyrinthe."}}]},{title:"ACTE 3 : LES GOUTS ET LE LABYRINTHE",stake:"Survivre  l'environnement hostile et localiser l'entre du repaire secret de Jaren.",location:"gouts de Val-d'Ombre & Fondations du vieux manoir.",scenes:[{title:"Scne 1 : Le Kobold Tmoin",type:"Social / Investigation",image:"./images/scenes/sniv_kobold.jpg",locationId:"egouts_croisement",npcIds:["sniv_kobold"],description:{resume:"Sniv le kobold rvle l'arrive de la sorcire",visuel:"Des tunnels de briques suintantes. Deux petits yeux jaunes brillent de terreur dans un conduit de trop-plein.",audio:"Le clapotis de l'eau noire.",odeur:"Soufre, eaux croupie.",lumiere:"La lumire des PJ projette des ombres dformes sur les murs incurvs."},narration:{declencheur:"Les PJ entendent des pleurs touffs derrire une grille de fer.",texte_a_lire:" Pas taper ! Sniv rien fait ! La femme... la sorcire aux yeux fous ! Elle est arrive et l'autre... le Matre Jaren... il ne vient plus. Il ne donne plus d'ordres. Elle est pire ! Elle a pris les autres... mais les frres reviennent jamais. Pourquoi ils reviennent jamais ?",contexte_mj:"Sniv a vu la transition de pouvoir. Il servait Jaren, mais Kaela a pris le relais avec une cruaut dcuple pour finir le rituel. Il est traumatis par le changement de rgime.",objectif:"Calmer Sniv pour obtenir des informations sur les piges et l'entre du manoir."},mecaniques:{defis:["Diplomatie (DD 12) : Calmer Sniv (lui offrir de la nourriture rduit le DD  10).","Intimidation (DD 15) : Le forcer  parler, mais il risque de s'enfuir  la premire occasion."],indices:["Sniv rvle :  Elle dit que Jaren tait trop mou. Elle dit que le Matre sera fier d'elle quand le Conseil brlera. "],recompenses:"Arrive Furtive : Ils commencent la scne suivante en mode Discrtion avec un bonus de +2 ou un avantage, car ils arrivent par un endroit que les gardes de Kaela ne surveillent pas."},transitions:{success:"Sniv guide les PJ vers la porte du manoir (Scne 2).",fail:"Sniv s'enfuit dans les tuyaux. Les PJ doivent naviguer  l'aveugle (Survie DD 15) pour viter de se perdre."}},{title:"Scne 2 : La Porte du Manoir Englouti",type:"Combat / Investigation",image:"./images/scenes/egouts_entree_manoir.jpg",locationId:"egouts_entree_manoir",npcIds:["squelettes_nains_gardiens"],description:{resume:"Combat contre les gardiens squelettiques du manoir",visuel:"Au dtour d'un conduit effondr, la brique suintante laisse place  une arche, sculpte de runes naines marteles. Une lourde porte en fer forg, barre le passage. Deux gardiens squelettiques, draps dans leurs armures, montent la  garde.",odeur:"L'air devient soudainement sec, froid tranche avec la puanteur des gouts.",lumiere:"Une lueur violette instable filtre  travers le trou de la serrure.",audio:"Le cliquetis des os et un bourdonnement sourd, comme un battement de cur, qui mane de derriere la porte."},narration:{declencheur:"Les PJ arrivent  porte de vue de la porte.",texte_a_lire:"Ces gardiens ne sont pas des serviteurs anonymes. Sur leurs plastrons briss, vous reconnaissez les blasons des clans fondateurs de Val-d'Ombre.  votre approche, leurs orbites vides s'allument d'une lueur haineuse, et ils lvent leurs haches de guerre dans un silence de mort.",contexte_mj:"C'est un combat symbolique. Les PJ voient ici le rsultat direct des profanations. La porte est scelle magiquement et ragit  la broche de la Fraternit Nyx.",objectif:"Vaincre les gardiens pour accder au mcanisme de la porte."},mecaniques:{defis:["Combat : 2 Squelettes de Thanes (Guerriers Nains lites, CA 16, RD 5/Contondant). Ils utilisent des tactiques militaires coordonnes.","Savoir Arcanique (DD 14) : Remarquer que le flux magique de la porte rpond  la signature de la broche de Nyx."],recompenses:"Hache de matre (naine) + la broche de Nyx s'illumine, agissant comme une cl pour la porte.",indices:["Sur le bouclier de l'un d'eux, une gravure rcente et grossire :  Nyx  par-dessus les runes anciennes."],recompenses:"Armes de matre (Haches naines) et ouverture de la porte grce  la broche."},transitions:{success:"La porte s'ouvre sur un escalier montant vers le laboratoire (Acte 4).",fail:"Le combat dure trop longtemps. L'alarme est donne et l'Acte 4 commence en alerte maximale."}}]},{title:"ACTE 4 : LE RITUEL DE LA SPIRALE",stake:"Arrter l'activation de la Spirale et dcouvrir qui a pris la suite de Jaren.",location:"Laboratoire secret du Manoir Van Kel.",scenes:[{title:"Scne 1 : L'veil Forc",type:"Combat",image:"./images/scenes/manoir_hall.jpg",locationId:"manoir_hall",npcIds:["ilse_nyx"],description:{resume:"Ilse tente de stabiliser le rituel de Jaren",visuel:"Le hall luxueux est profan : un immense cercle de cendres et de sang sch entoure le corps de Jaren. Des fils d'nergie violace relient le cadavre  des ancres d'argent plantes dans le sol.",audio:"Un bourdonnement grave qui fait vibrer les vitraux. Ilse hurle ses incantations pour couvrir le bruit de la magie qui s'emballe.",odeur:"Ozone (magie), fer (sang).",lumiere:"Des clairs de magie noire qui illuminent par intermittence le grand escalier."},narration:{declencheur:"Les PJ entrent dans le Hall.",texte_a_lire:"Ilse von Reiner lve les mains, ignorant les spasmes du cadavre  ses pieds.  Jaren n'tait qu'un mdiocre, un esprit faible qui s'est noy dans ses propres peurs. Le Matre le savait, et je le savais aussi. Il n'tait qu'un brouillon. Mais avec son sang et ma volont, je vais enfin valider les thorie du Matre ! Admirez la naissance d'un dieu ! ",contexte_mj:"Ilse est pragmatique, elle considre Jaren comme une simple ressource magique. Elle traite la ncromancie comme une science exacte. Elle veut stabiliser Jaren pour prouver  Thade qu'elle est plus utile qu'un cadavre.",objectif:"Neutraliser Ilse avant qu'elle ne stabilise la crature."},mecaniques:{defis:["Combat : Ilse (Magicienne Niv 3) protge par 2 Squelettes Instables (anciens serviteurs de Jaren qu'elle a asservis).","Anomalie (DD 12) :  chaque tour, le rituel instable libre une onde. Quiconque est  dcouvert subit 1d4 dgts de froid."],indices:["Une note de Thade dans les poches de Ilse :  Ilse, ne me dcevez pas comme votre prdcesseur, ou ne revenez pas  l'Universit. "],recompenses:"Bourse (40 po), Bague de protection +1, et les notes de recherche."},transitions:{success:"Ilse s'croule en maudissant l'incomptence de Jaren. Dans un dernier souffle magique, le cercle explose et le 'Sujet J-01' se lve, libr de ses entraves."}},{title:"Scne 2 : Le Sujet J-01",type:"Boss",image:"./images/scenes/jaren_le_maudit.jpg",locationId:"manoir_hall",npcIds:["jaren_corrompu"],description:{resume:"Combat contre la dpouille ranime de Jaren",visuel:"Le corps de Jaren se redresse par saccades, comme une marionnette dont on tire brutalement les fils. La lueur qui s'chappe de ses orbites est blafarde, et sa peau se craquelle sous l'effet d'un froid surnaturel.",audio:"Le bruit sec des os qui se remettent en place et le sifflement de l'air qui s'chappe de ses poumons perfors. Aucun mot, juste un rle mcanique.",odeur:"Ozone et viande putride."},narration:{declencheur:"la dfaite d'Ilse.",texte_a_lire:"La chose qui fut Jaren ne hurle pas. Elle ne vous maudit pas. Elle avance simplement vers vous dans un silence terrifiant, chaque pas laissant une trace de givre sur le marbre du hall.",contexte_mj:"Jaren est incapable de reflechir son me est en train d'tre dvore par le rituel incomplet.",objectif:"Dtruire la dpouille de Jaren pour stopper l'anomalie."},mecaniques:{defis:["Aura de Froid : Toute personne au contact de Jaren subit 1d4 dgts de froid au dbut de son tour.","clats de glace :  50% de ses PV, le corps de Jaren expulse des fragments d'os et de givre (Jet de Rflexes DD 13 ou 1d8 dgts)."],recompenses:"Bague de focalisation brise, fragments d'une gemme d'me (valeur 50 po)."},transitions:{success:"Le corps de Jaren s'effondre et se change instantanment en poussire givre. Le silence revient dans le hall."}},{title:"Scne 3 : Le Bilan du Matre",type:"Conclusion",image:"./images/scenes/thade_coren.jpg",locationId:"manoir_hall",npcIds:["thade_coren"],description:{resume:"Thade rcupre les rsultats de ses expriences rates",visuel:"Thade entre dans le hall par la grande porte, comme s'il rentrait d'une promenade. Il contourne les dbris avec une lgance drangeante, rangeant sa montre  gousset.",audio:"Le bruit rgulier de sa canne sur le marbre. Sa voix est calme, pose, presque monocorde.",odeur:"Lavande et tabac froid."},narration:{declencheur:"La destruction du Sujet J-01 et la dfaite d'Ilse.",texte_a_lire:"Thade observe les restes de Jaren avec une moue de dsapprobation.  Dommage. La phase de transition tait prometteuse, mais le contenant tait trop instable. Quant  Ilse... elle a toujours manqu de patience.  Il se tourne vers vous avec un lger hochement de tte.  Vous avez t d'une efficacit remarquable pour des consultants externes. Merci d'avoir purg ces erreurs. L'Universit n'aime pas les fuites. ",contexte_mj:"Thade ne se cache mme pas. Il considre les PJ comme des prestataires de services qui ont nettoy ses expriences rates. Il ramasse les notes d'Ilse sans aucune motion pour ses lves morts.",objectif:"Rcuprer la solde et comprendre l'ampleur du cynisme de Thade."},mecaniques:{defis:["Psychologie (DD 13) : Raliser que Thade ne ressent absolument aucune tristesse, seulement de la dception technique.","Sens de la rpartie (DD 15) : Tenter d'obtenir une prime supplmentaire pour 'exposition  des risques biologiques non mentionns'."],recompenses:"Bourse de 200 po (la prime promise) + une sensation de malaise profond."},transitions:{success:"Fin de l'acte. Thade quitte le manoir, laissant les PJ seuls avec les cadavres de deux tudiants qui n'taient, au fond, que des variables dans une quation."}}]}]},GS={id:2,title:"SCNARIO 2 : L'CHO DES PROFONDEURS",level:"Niveaux 4-6",system:"D&D 3.5",synopsis:"La mine d'argent est  l'arrt. Thade Coren, agissant en expert, envoie les PJ 'stabiliser' une fissure magique. En ralit, les PJ servent de vecteurs pour charger un cristal avec l'nergie d'une anomalie plantaire : la Spirale.",acts:[{title:"ACTE 1 : LA GRVE DE LA PIOCHE",stake:"Accepter la mission et l'outil de Thade sans comprendre sa vraie nature.",location:"Quartier du Savoir & Quartier des Mineurs.",scenes:[{title:"Scne 1 : Le Conseil de Crise",type:"Social",image:"./images/scenes/universite_arcane.jpg",locationId:"universite_arcane",npcIds:["durnik_chef_mineur","thade_coren"],description:{resume:"Thade offre un cristal pour stabiliser la mine",visuel:"Durnik, couvert de suie, semble minuscule face  Thade dans le hall froid de l'Universit. Entre eux, lvitant sur un coussin de velours, repose un Cristal.",audio:"Le cristal met un sifflement tnu, presque mlodique. Durnik grogne de mpris.",odeur:"Lavande et poussire de roche.",lumiere:"Lumire znithale froide tombant de la coupole."},narration:{declencheur:"Les PJ sont convoqus ou arrivent pour enquter.",texte_a_lire:`Le hall de luniversit est anim par une discussion tendue. Durnik, le contrematre nain, fixe le cristal que Thade Coren tient entre ses mains.
Durnik :  Ce truc me donne la nause ! Thade. Mes gars crvent l-dessous pendant que tu restes l  nous vendre de la verroterie ? 
Thade (se tournant vers les PJ, visiblement agac mais souriant) :  Vous arrivez bien. Ce sont eux qui ont rgl les problmes laisss par nos anciens lves. Calmons-nous. Ce nest quun effet de rsonance arcanique. Avec ce stabilisateur, plac au niveau -8, les vibrations seront contenues et les mineurs protgs. 
Durnik :  Trs bien. Dans ce cas, commencez par les Fumes Rouges, dans les quartiers bas. Mara, la tenancire, a laccs au puits secondaire. Elle saura quels mineurs peuvent vous aider. Et rangez ce cristal. Les nains sont dj assez nerveux avec la magie.`,contexte_mj:"Thade prsente la mission comme une rparation morale. Le cristal est en ralit un siphon destin  se charger de l'nergie de la Spirale.",contexte_mj:"Thade ment froidement. Le cristal n'est pas un stabilisateur, mais un condensateur vide destin  aspirer l'nergie de la Spirale.",objectif:"Accepter le Cristal et la mission de 'stabilisation'."},mecaniques:{defis:["Sens de la Magie (DD 18) : Le cristal appartient  l'cole de l'vocation et de la Ncromancie (trange pour un outil de stabilisation).","Psychologie (DD 20) : Thade semble sincre, mais son regard trahit une impatience dvorante."],indices:["Thade insiste pour que vous gardiez le cristal 'pour mesurer les vibrations'."],recompenses:"Le Cristal de Rsonance (Objet de qute)."},transitions:{success:"Les PJ quittent l'Universit avec l'artefact en direction des quartiers miniers.",fail:"Les PJ sont vus comme des agents perturbateurs, complexifiant les interactions futures."}},{title:"Scne 2 : Le Quartier Paralys",type:"Investigation",image:"./images/scenes/val-d-ombre.jpg",locationId:"quartier_des_mineurs_place",npcIds:["tenancier_taverne"],description:{resume:"Le quartier minier paralys par la peur",visuel:"Des barricades de fortune bloquent les accs aux rues principales. Des graffitis  la chaux sur les murs dnoncent la Tour des Mages. Une effigie de magicien brle lentement sur la place centrale.",audio:"Le grondement des conversations de groupe qui s'arrtent net  votre passage. On entend des insultes lances au loin.",odeur:"Brl, goudron et bire forte.",lumiere:"La lueur orange des brasiers en opposition au gris du ciel."},narration:{declencheur:"Entre des PJ dans le quartier.",texte_a_lire:" peine avez-vous franchi les premires maisons que les regards se font assassins.  la taverne des Fumes Rouges, Mara  sert des pichets  des nains agit. Elle dsigne un groupe de mineurs aux yeux injects de sang. Les mdecins disent que c'est le grisou. Mais le grisou ne vous fait pas perdre la raison comme ca.",contexte_mj:"Les rumeurs sont exagres mais bases sur des faits rels (hallucinations causes par la proximit de la Spirale).",objectif:"Recueillir des rumeurs et comprendre la nature de la menace (psychique/sonique)."},mecaniques:{defis:["Collecte d'informations (DD 10) : Apprendre les rumeurs ('ombres vivantes', 'chant de la pierre').","Intimidation/Diplomatie (DD 14) : Convaincre un mineur de parler de ce qu'il a vu en bas."],indices:["Les mineurs les plus touchs saignent des oreilles.","Le chant semble venir des niveaux les plus profonds."],recompenses:"Information sur l'accs condamn."},transitions:{success:"Piste vers l'entre de la mine.",fail:"Perte de temps, la nuit tombe et l'ambiance devient plus oppressante."}},{title:"Scne 3 : Le Puits des Soupirs",type:"Exploration",image:"./images/scenes/puits_mine_abandonne.jpg",locationId:"puits_aeration_42",npcIds:[],description:{resume:"Descente prilleuse dans le puits d'aration",visuel:"Un immense conduit vertical tapiss de suie. Des pales de ventilation monstrueuses, tordues et immobiles, barrent le passage comme des ctes de gant. Des chelles de fer rouill descendent dans un abme de tnbres.",audio:"Un sifflement d'air constant crant une note grave et lancinante. On entend le goutte--goutte lointain de l'eau sur le mtal. Par moments, un cho cristallin rsonne comme si on brisait du verre  des kilomtres de l.",odeur:"L'odeur de la poussire de pierre mle  un parfum de fleurs fanes (anomalie ncromantique).",lumiere:"Seul un mince filet de lumire grise provient de la grille en surface, s'estompant rapidement pour laisser place au noir absolu."},narration:{declencheur:"Les PJ pntrent dans le conduit par la grille de surface.",texte_a_lire:"  mesure que vous descendez, le bruit de la ville s'efface, remplac par une vibration qui s'insinue jusque dans vos dents. L'air y est lourd, charg d'une vibration qui fait vibrer vos dents. En bas,  travers les pales bantes, vous devinez une plateforme massive : le Grand Treuil. ",contexte_mj:"Le puits est imprgn par l'nergie rsiduelle de la Spirale et provoque des vertiges. C'est une preuve de sang-froid avant d'atteindre le hub logistique des mines.",objectif:"Atteindre la plateforme du Grand Treuil (l'ascenseur) sans donner l'alerte ou tomber."},mecaniques:{defis:["Escalade (DD 12) ou Acrobaties (DD 15) : Descendre les chelles vermoulues. Un chec inflige 1d6 points de dgts de chute.","quilibre (DD 15) : Traverser les pales gantes du ventilateur pour atteindre la passerelle centrale.","Dtection (DD 15) : Reprer une plaque de 'Givre d'me' sur une paroi. La toucher inflige 1d4 dgts de froid et d'nergie ngative."],indices:["Des traces de griffures fraches sur le mtal : quelque chose (ou quelqu'un) est descendu par ici trs rcemment."],recompenses:"Une sacoche d'ingnieur trouve sur un cadavre contenant 3 fioles d'huile d'allumage et une Carte des Conduits de Vapeur."},transitions:{success:"Les PJ arrivent au-dessus de la salle de l'ascenseur, leur offrant un avantage tactique de surprise.",fail:"Un PJ tombe ou fait du bruit, Le fracas mtallique rsonne dans tout le secteur : les gardes ou les cratures en bas sont en alerte."}},{title:"Scne 4 : Le Grand Treuil",type:"Combat / Transition",image:"./images/scenes/grand_treuil_mine.jpg",locationId:"plateforme_ascenseur_principal",npcIds:["mineurs_possedes"],description:{resume:"Combat contre les mineurs possds au Grand Treuil",visuel:"Une plateforme circulaire en acier. Une cage de transport est bloque en position haute. Trois mineurs nains s'acharnent sur les rouages avec des barres de fer.",audio:"Le sifflement de la vapeur et le bruit mtallique des chocs sur le mcanisme.",odeur:"Graisse, suie et sang.",lumiere:"lampes de chantier faiblissants."},narration:{declencheur:"Les PJ arrivent sur la plateforme.",texte_a_lire:"La plateforme du Grand Treuil est un chaos de vapeur et de cris touffs. Ils ne travaillent plus : Ces nains sabotent le treuil. L'un d'eux vous repre et lve sa pioche en hurlant.",contexte_mj:"Le choc provoqu par l'onde de chox arcanique de la Spirale a grill le cerveau des nains. Ils protgent l'ascenseur pour empcher quiconque de descendre.",objectif:"Dbloquer le levier de l'ascenseur, pendant que des vagues de nains enrags attaquent l'ascenseur."},mecaniques:{defis:["Combat : 3 Mineurs Possds (Guerrier 1). Ils ignorent la douleur et ne battent jamais en retraite.","connaissance Arcanes (DD 15) : comprendre qu'a chaque mort la vibration se renforce.","Mcanique (DD 14) : Dcoincer le levier de frein pendant le combat."],indices:["Le cristal de Thade pulse en rythme avec une vibration lointaine."],recompenses:"Aucune, survie."},transitions:{success:"La cage descend. Fin de l'Acte 1.",fail:"Descente force. Les PJ arrivent en bas avec l'tat 'Secou' (-2 aux jets pour la prochaine scne)."}}]},{title:"ACTE 2 : LA DESCENTE CORROMPUE",stake:"Dcouvrir la vrit sur le Cristal de Thade tout en s'enfonant dans la corruption de la Spirale.",location:"Niveaux infrieurs (Niveaux -1  -8) de la mine d'argent.",scenes:[{title:"Scne 1 : Les chos du Pass",type:"Investigation",image:"./images/scenes/forge_desertee.jpg",locationId:"galeries_silencieuses",npcIds:[],description:{resume:"Dcouverte que le cristal absorbe l'nergie",visuel:"La salle de repos du niveau -1 est fige dans le temps. Tables renverses, repas intacts mais sec. Trace de pas en sang sur le sol.",audio:"Un bourdonnement sourd mane du cristal. Par moments, on entend des voix lointaines, des cris touffs qui semblent venir des murs eux-mmes.",odeur:"Une odeur mtallique de sang ancien et d'ozone.",lumiere:"Lampes murales brises clairent la pice par intermittence."},narration:{declencheur:"Sortie de la cage d'ascenseur.",texte_a_lire:"La cage s'immobilise dans un grincement sinistre. Devant vous, la salle de repos est un tableau de dsolation. Les mineurs ont fui en panique, abandonnant tout. Mais ce qui attire votre attention, c'est le Cristal de Thade : il pulse maintenant en rythme avec un battement lointain, comme un cur. Sur une table, un journal ouvert : 'Jour 3 : Le cristal de l'Universit brille dans le noir. Les contrematres disent que c'est pour notre scurit. Mais Gorm a disparu cette nuit. On a retrouv ses vtements... et des traces de mains ensanglantes sur les murs. Je ne veux pas finir comme lui.'",contexte_mj:"Le Cristal de Thade ragit  la proximit de la Spirale et commence  rvler sa vraie nature.",objectif:"Comprendre que le Cristal n'est pas un simple outil de mesure."},mecaniques:{defis:["Investigation (DD 13) : Trouver 3 journaux de mineurs diffrents, tous mentionnant des 'cristaux de scurit' cr par un tudiant de l'Universit.","Art de la Magie (DD 16) : Le Cristal absorbe activement l'nergie ambiante. Ce n'est pas un stabilisateur, c'est un condensateur.","Fouille (DD 15) : Remarquer que tous les canaris dans leurs cages sont morts, mais leurs corps ne sont pas dcomposs (nergie ngative)."],indices:["Journal : 'Thade Coren est venu en personne il y a 2 mois. Il a plac des cristaux aux niveaux -3, -5 et -8.'","Des traces de pas rcentes (1 semaine) mnent vers le bas. Quelqu'un d'autre est descendu aprs l'vacuation."],recompenses:"Carte annote montrant l'emplacement des autres cristaux."},transitions:{success:"Les PJ comprennent qu'ils sont manipuls et peuvent choisir de continuer ou de remonter (mais la cage ne fonctionne plus).",fail:"Progression sans comprendre le pige. Le cristal les guide insidieusement vers le bas."}},{title:"Scne 2 : Le Laboratoire Oubli",type:"Exploration",image:"./images/scenes/laboratoire_mine.jpg",locationId:"galeries_silencieuses",npcIds:["assistant_thade_mort"],description:{resume:"Laboratoire secret rvle le projet Ascension de Thade",visuel:"Une salle latrale au niveau -3, dissimule derrire un boulement rcent.  l'intrieur, un laboratoire de fortune : alambics, grimoires, et au centre, un socle vide prvu pour accueillir un cristal. Sur le mur, un schma complexe montrant une Spirale.",audio:"Le silence est oppressant. Seul le cristal des PJ met un bourdonnement de plus en plus insistant.",odeur:"Encre, parchemin brl, et cette odeur d'ozone caractristique de la magie ncromantique.",lumiere:"Des cristaux luminescents fixs au plafond projettent une lumire blafarde. Certains clignotent, mourants."},narration:{declencheur:"Les PJ suivent les traces de pas ou explorent mthodiquement.",texte_a_lire:"Derrire l'boulement, vous dcouvrez une porte de mtal grave du sceau de l'Universit Arcanique.  l'intrieur, un laboratoire secret. Sur une table, le corps d'un jeune homme en robe d'tudiant, mort depuis plusieurs jours. Son journal est ouvert : 'Le Magistere Thade m'a ordonn de placer le troisime cristal au niveau -8, prs de la brche. Il dit que c'est pour contenir l'anomalie. Mais j'ai lu ses notes... Il ne veut pas la contenir.'",contexte_mj:"Rvlation majeure : Thade Coren mne des expriences sur la Spirale depuis des mois. Il a envoy plusieurs assistants en bas, et aucun n'est remont. Les cristaux sont des siphons destins  extraire l'nergie de la Spirale pour un projet inconnu. Les PJ sont les derniers 'outils' de Thade.",objectif:"Dcouvrir les notes de Thade et comprendre le vritable objectif de la mission."},mecaniques:{defis:["Fouille (DD 12) : Rcuprer les notes cryptes.","Dchiffrement (DD 18) : Dcoder les notes. Elles rvlent un projet nomm 'Ascension' ncessitant l'nergie brute de la Spirale.","Connaissance (Arcanes) (DD 16) : Comprendre que drainer la Spirale pourrait dstabiliser la barrire entre les plans.","Mdecine (DD 10) : L'assistant est mort d'puisement magique. Son corps est dessch, comme vid de sa force vitale."],indices:["Notes de Thade : 'Le Conseil refuse de financer mes recherches. Qu'ils soient maudits. La Spirale m'offrira ce dont j'ai besoin.'","Schma montrant 4 cristaux formant un rseau. Le cristal des PJ est le dernier maillon."],recompenses:"Cl de dcodage pour les notes de Thade. Preuve de sa trahison. Possibilit de saboter le cristal (mais cela pourrait avoir des consquences)."},transitions:{success:"Les PJ peuvent dcider de continuer pour arrter Thade, ou de dtruire le cristal immdiatement (ce qui dclenche une raction en chane).",fail:"Les PJ manquent les preuves cruciales et continuent sans comprendre l'ampleur de la manipulation."}},{title:"Scne 3 : Les Veines de la Spirale",type:"Combat",image:"./images/scenes/corruption_spirale.jpg",locationId:"galeries_silencieuses",npcIds:[],description:{resume:"Combat contre les mineurs corrompus par la Spirale",visuel:" partir du niveau -5, les murs de la mine changent. Des veines violettes et pulsantes courent le long de la roche, comme des vaisseaux sanguins. Par endroits, la pierre semble respirer. Le Cristal de Thade vibre violemment, attir vers le bas.",audio:"Un battement sourd, rgulier, comme un cur gigantesque. Les veines mettent un sifflement aigu quand on s'en approche.",odeur:"Ozone intense, presque suffocant. Une odeur de chair brle.",lumiere:"Les veines mettent une lueur violette maladive qui pulse en rythme avec le battement."},narration:{declencheur:"Descente au niveau -5.",texte_a_lire:"Le tunnel change. Ce n'est plus une mine. Les murs sont vivants, couverts de veines violettes qui pulsent comme si quelque chose de gigantesque respirait autour de vous. Le Cristal de Thade devient brlant dans votre sac, tirant vers le bas avec une force presque magntique. Soudain, une des veines clate. Une crature en merge : un amas de chair et de cristal, autrefois un mineur, maintenant une abomination.",contexte_mj:"La Spirale corrompt activement la mine, la transformant en extension d'elle-mme. Les mineurs disparus ont t absorbs et transforms en cratures hybrides.",objectif:"Survivre  l'attaque des Corrompus et dcider du sort du cristal."},mecaniques:{defis:["Combat : 2-3 Mineurs Corrompus (Zombies avancs avec attaques d'nergie ngative). Ils rgnrent tant qu'ils sont prs des veines.","Connaissance (Plans) (DD 17) : Les veines sont des extensions de la Spirale. Les dtruire localement ne sert  rien, il faut atteindre la source.","Choix moral : Dtruire le cristal (fin de l'quipe) ou continuer (accomplir la mission, mais risque de corruption)."],indices:["Les Corrompus portent encore des lambeaux d'uniformes de mineurs. Certains ont des plaques d'identit.","Le cristal pulse de plus en plus fort, comme s'il voulait tre libr."],recompenses:"Si le cristal est conserv : il offre un bonus de +1 aux jets de Volont (mais corrompt lentement)."},transitions:{success:"Progression vers le niveau -7. La corruption s'intensifie.",fail:"Un PJ est bless par l'nergie ngative et gagne une condition 'Marqu par la Spirale' (malus -1 aux jets de Volont)."}},{title:"Scne 4 : Le Sanctuaire Bris",type:"Social",image:"./images/scenes/sanctuaire_nain.jpg",locationId:"galeries_silencieuses",npcIds:["pretre_nain_fantome"],description:{resume:"Le fantme du prtre rvle l'histoire des sceaux",visuel:"Une vaste salle au niveau -7, clairement artificielle et ancienne. Des piliers gravs de runes naines forment un cercle. Au centre, un autel bris. Les runes sont des sceaux de confinement, mais elles ont t marteles, rendues inoprantes.",audio:"Un cho spectral de prires naines rsonne faiblement. Le vent siffle  travers les piliers briss.",odeur:"Encens ancien et poussire de pierre millnaire.",lumiere:"Les runes mettent une faible lueur dore, mourante. Le cristal des PJ pulse violemment, comme s'il voulait teindre cette lumire."},narration:{declencheur:"Dcouverte de la salle sanctuaire.",texte_a_lire:"C'est un temple nain, ancien, profan. Les runes de confinement ont t marteles avec des outils modernes. Au centre, une forme spectrale vacille. Le fantme ne vous regarde pas, il fixe le cristal que vous portez avec une terreur absolue. Il chuchote en boucle :  Ne l'approchez pas...ne l'approchez pas... ",contexte_mj:"Rvlation majeure : les anciens nains connaissaient l'existence de la Spirale et avaient construit ce sanctuaire pour la sceller. Quelqu'un (probablement Thade ou ses agents) a sabot les sceaux il y a quelques semaines pour affaiblir la barrire. Le fantme du prtre est pig ici, condamn  voir son uvre dtruite. Il peut rvler la vrit aux PJ s'ils gagnent sa confiance.",objectif:"Comprendre l'histoire de la Spirale et le rle des sceaux nains."},mecaniques:{defis:["Diplomatie (DD 14) : Calmer le fantme et obtenir son histoire.","Connaissance (Histoire/Religion) (DD 16) : Reconnatre les runes comme des sceaux de confinement planaire, datant de l'ge des Forges.","Investigation (DD 15) : Les traces de burin sur les runes sont rcentes (quelques semaines) et faites avec des outils modernes, pas nains."],indices:["Le fantme : 'Nous l'avons trouve en creusant. Une faille vers... ailleurs. Nous avons scell ce mal. Mais vous...","Sur l'autel bris, un symbole grav : le sceau de nyx,  peine visible.","Le fantme peut rvler : 'Il y a un autre chemin. Un passage d'urgence, creus par mes frres, pour fuir si les sceaux chouaient. Niveau -8, derrire la cascade souterraine.'"],recompenses:"Bndiction du prtre (+2 aux jets de Volont contre la corruption de la Spirale). Connaissance du passage secret. Preuve irrfutable de la culpabilit de Thade."},transitions:{success:"Les PJ peuvent choisir le chemin direct (vers la brche) ou le passage secret (remont en ville).",fail:"Le fantme disparat dans un cri de dsespoir. Les PJ continuent sans sa bndiction ni ses informations."}},{title:"Scne 5 : La Fissure du Niveau -8",type:"Dcouverte",image:"./images/scenes/breche_spirale.jpg",locationId:"galeries_silencieuses",npcIds:[],description:{resume:"Arrive  la fissure et activation du socle",visuel:"Le tunnel s'arrte net sur une paroi d'un noir vitreux et anormal. Une fissure verticale laisse chapper une lumire violette instable. Le sol est jonch de dbris de roche calcine.",audio:"Un sifflement lectrique constant qui sature l'oreille. Les bruits de la mine ont totalement disparu.",odeur:"Ozone brl et air mtallique (comme aprs un orage).",lumiere:"clairs de lumire violette s'chappant de la faille."},narration:{declencheur:"Arrive au cul-de-sac du niveau le plus profond.",texte_a_lire:"La paroi devant vous n'est plus faite de pierre, mais d'une sorte de verre noir huileux qui semble absorber la lumire de vos torches. Au centre, une large fissure laisse entrevoir un vide violet. Le cristal que Thade vous a confi vibre violemment dans votre sac et devient brlant.  ct de la faille, un socle mtallique portant le sceau de l'Universit a t fix  la roche : il attend manifestement le cristal.",contexte_mj:"Le cristal agit comme une batterie. Si les PJ le posent sur le socle, il commence  pomper l'nergie de la Spirale, ce qui stabilise la brche pour permettre le passage (Acte 3), mais charge l'artefact de Thade.",objectif:"Dcider d'activer le socle ou de forcer le passage."},mecaniques:{defis:["Art de la Magie (DD 16) : Le socle est un conducteur arcanique. Poser le cristal va drainer l'anomalie plutt que la 'rparer'.","Vigueur (DD 14) : La proximit de la faille cause des vertiges et des nauses.","Connaissance (Plans) (DD 18) : La fissure est une dchirure dans la trame du plan matriel. Ce qu'on voit derrire n'est pas un tunnel, mais une autre dimension."],indices:["Le socle est tout neuf, install rcemment.","Le cristal change de couleur  mesure qu'il s'approche de la faille."],recompenses:"Stabilisation temporaire du passage vers la Spirale."},transitions:{success:"Le passage s'ouvre. Les PJ entrent dans l'Antichambre (Acte 3).",fail:"Les PJ hsitent ou sont repousss par l'nergie statique, subissant 1d6 dgts d'lectricit."}}]},{title:"ACTE 3 : LA PORTE DE L'ABME",stake:"Franchir le confinement sans y laisser sa sant mentale.",location:"Zone de confinement scelle.",scenes:[{title:"Scne 1 : Les Sceaux Inertes",type:"Observation",image:"./images/scenes/runes_avertissement.jpg",locationId:"galeries_silencieuses",npcIds:[],description:{resume:"Les sceaux nains puiss ne retiennent plus rien",visuel:"De lourdes plaques de fer nain sont boulonnes  mme la roche. Les runes de protection sont ternes, grises et froides. La pierre autour des plaques est craquele par une pression interne.",audio:"Un silence total, lourd, seulement bris par votre propre respiration.",odeur:"L'odeur de la poussire vieille de mille ans.",lumiere:"La lumire de vos lanternes semble mourir  quelques mtres."},narration:{declencheur:"Approche de la porte de confinement au niveau -8.",texte_a_lire:"Ce n'est pas un boulement qui bloque la mine, mais une porte. Les anciens nains n'ont pas construit cela pour entrer, mais pour empcher quelque chose de sortir. Les sceaux magiques, autrefois puissants, ont fini par s'teindre avec le temps. La porte est entrouverte, pousse par une force que la roche elle-mme ne peut plus contenir.",contexte_mj:"L'usure du temps a rendu les sceaux inoprants, permettant  l'nergie de la Spirale de fuiter dans la mine.",objectif:"Comprendre que la mine tait une barrire."},mecaniques:{defis:["Connaissance (Histoire) (DD 12) : Identifier ces plaques comme des verrous de 'confinement absolu' du Premier ge.","Fouille (DD 15) : Constater que la roche a fondu et recristallis  cause de la fuite d'nergie."],indices:["Les verrous ne sont pas casss, ils sont simplement puiss."],recompenses:"Une comprhension claire du danger planaire."},transitions:{success:"Les PJ franchissent le seuil."}},{title:"Scne 2 : Les Statues de Sel",type:"Combat",image:"./images/scenes/elementaires_corrompus.jpg",locationId:"galeries_silencieuses",npcIds:[],description:{resume:"Combat contre les automates de pierre corrompus",visuel:"Des formes humanodes de pierre sont figes dans des poses de combat. Elles sont couvertes de cristaux violets qui semblent sortir de leurs articulations.",audio:"Un craquement sec de pierre qui se brise.",odeur:"Ozone.",lumiere:"Lueurs violettes intermittentes."},narration:{declencheur:"Les PJ passent la porte.",texte_a_lire:"Dans ce couloir, le temps semble s'tre arrt. Des gardiens de pierre, laisss l pour surveiller la prison, ont t lentement 'grignots' par l'nergie qu'ils devaient contenir. Ils ne sont plus que des automates dtraqus qui voient en vous une source d'nergie  absorber.",contexte_mj:"Ces lmentaires sont des restes du systme de scurit nain, corrompus par des sicles d'exposition  la Spirale.",objectif:"Passer le couloir de garde."},mecaniques:{defis:["Combat : 2 Automates de Pierre (Stats de Golem de pierre affaibli).","Discrtion (DD 16) : Passer sans rveiller les statues."],indices:["Les cristaux sur leur corps vibrent en prsence du cristal de Thade."],recompenses:"clats de quartz pur (50 po)."},transitions:{success:"Accs  la faille principale.",fail:"Combat difficile qui attire l'attention de la Spirale."}},{title:"Scne 3 : La Dchirure",type:"Vision / Mcanique",image:"./images/scenes/vision_spirale.jpg",locationId:"galeries_silencieuses",npcIds:[],description:{resume:"Le cristal se charge au contact de la dchirure",visuel:"Une dchirure dans l'espace. Ce n'est pas un trou dans le mur, mais un morceau de ralit manquant.",audio:"Un sifflement de vent venant d'un endroit sans air.",odeur:"Rien. Une absence totale d'odeur.",lumiere:"Une lumire qui ne projette pas d'ombres."},narration:{declencheur:"Arrive devant la faille.",texte_a_lire:"La mine s'arrte ici. Devant vous, l'espace se courbe comme du verre chauff. Vous ne voyez pas le fond du tunnel, vous voyez un vide rempli de structures impossibles. Le cristal dans votre sac commence  absorber la lumire ambiante.",contexte_mj:"Le cristal de Thade se charge automatiquement ici. Les PJ ressentent une pression physique insupportable.",objectif:"Sauter dans l'inconnu."},mecaniques:{defis:["Volont (DD 14) : Ne pas cder au vertige devant l'infini.","Art de la Magie (DD 15) : Remarquer que la faille aspire la matire physique."],indices:["Le cristal de Thade est la seule chose qui semble stable ici."],recompenses:"Le cristal est 'Charg' (Niveau 1)."},transitions:{success:"Le groupe traverse."}},{title:"Scne 4 : L'Inversion",type:"Exploration",image:"./images/scenes/passage_gravite.jpg",locationId:"galeries_silencieuses",npcIds:[],description:{resume:"La gravit s'inverse aprs la traverse",visuel:"Le groupe 'tombe' sur ce qui tait auparavant le mur. La notion de haut et de bas disparat.",audio:"Le sang qui tape dans les tempes.",odeur:"Air froid et sec.",lumiere:"Une lumire qui ne projette pas d'ombres."},narration:{declencheur:"Sortie de la faille.",texte_a_lire:"Vous avez travers. La sensation est brutale : votre estomac se retourne, vos pieds ne touchent plus le sol, puis vous atterrissez violemment sur une surface plate. Vous le comprenez vite : ici, la gravit n'est qu'une option. Vous marchez sur une plateforme flottant dans un vide immense.",contexte_mj:"Simple scne de transition physique pour faire comprendre que les rgles D&D habituelles vont changer (mouvements en 3D).",objectif:"Stabiliser sa progression."},mecaniques:{defis:["Acrobaties (DD 12) : Se stabiliser aprs le saut.","Vigueur (DD 10) : Rsister au mal des transports dimensionnel."],indices:["Des objets flottent au loin  des angles impossibles."],recompenses:"Adaptation au milieu."},transitions:{success:"Arrive en vue du Premier Cercle.",fail:"Perte d'un objet mineur dans le vide."}}]},{title:"ACTE 4 : LE PREMIER CERCLE",stake:"Rcuprer l'nergie et vacuer avant que la prison ne se rinitialise.",location:"La Spirale (Priphrie).",scenes:[{title:"Scne 1 : La Gomtrie Changeante",type:"Mcanique",image:"./images/scenes/architecture_vivante.jpg",locationId:"spirale_premier_cercle",npcIds:[],description:{resume:"Les couloirs changent et effacent le chemin du retour",visuel:"Des couloirs de mtal gris et de pierre polie. Les angles ne semblent pas droits. Derrire vous, les portes s'effacent pour devenir des murs lisses.",audio:"Un grondement sourd, comme des plaques de mtal qui glissent les unes sur les autres.",odeur:"Air froid, sec, sans aucune particule.",lumiere:"Une lueur bleute provient des jointures entre les murs."},narration:{declencheur:"Dbut de la progression dans la Spirale.",texte_a_lire:"Ce n'est pas un donjon classique. Les couloirs se rorganisent selon une logique qui vous chappe. Si vous quittez une salle des yeux, elle n'est plus la mme quand vous vous retournez. La seule chose stable est la vibration de plus en plus forte du cristal de Thade, qui semble point vers le centre comme une boussole.",contexte_mj:"La prison change de configuration pour dsorienter les prisonniers. Rgle MJ : Le retour en arrire est impossible. Chaque porte franchie est dfinitive.",objectif:"Ne pas perdre le nord magique."},mecaniques:{defis:["Intelligence (DD 14) : Comprendre que la structure suit le mouvement du cristal."],indices:["Le sol vibre diffremment  mesure qu'on approche du centre."],recompenses:"null"},transitions:{success:"Le groupe arrive  la zone d'extraction.",fail:"Errance : le groupe arrive fatigu (malus de -2 en Initiative pour la scne suivante)."}},{title:"Scne 2 : Les Forats de Pierre",type:"Combat",image:"./images/scenes/goules_mineurs.jpg",locationId:"spirale_premier_cercle",npcIds:["marionnettes_de_la_spirale"],description:{resume:"Les restes de la dernire fuite.",visuel:"Des corps de nains, momifis par l'air sec, sont incrusts dans les murs ou le plafond. Certains s'agitent mcaniquement.",audio:"Le bruit sec d'os qui s'entrechoquent.",odeur:"Poussire et cuir sch.",lumiere:"Lumire violette s'chappant de leurs bouches ouvertes."},narration:{declencheur:"Entre dans une grande salle de stockage.",texte_a_lire:"Vous trouvez des mineurs, mais pas ceux de votre poque. Ces cadavres portent des outils vieux de plusieurs sicles.",contexte_mj:"Ce sont des 'coquilles' vides. Ils n'ont aucune volont propre, ils sont des extensions du systme de dfense.",objectif:"liminer les obstacles physiques."},mecaniques:{defis:["Combat : 4 Marionnettes de la Spirale (Stats de Zombies, mais vitesse normale).","Savoir (Plans) (DD 13) : Comprendre qu'ils sont aliments par la Gode proche."],indices:["Une lumire violette relie les cratures au couloir suivant."],recompenses:"Une cl naine ancienne (objet de collection, 100 po)."},transitions:{success:"Accs au cur de la prison.",fail:"Le combat s'ternise, les PJ perdent des ressources (potions/sorts)."}},{title:"Scne 3 : La Gode de Confinement",type:"Objectif",image:"./images/scenes/geode_chantante.jpg",locationId:"spirale_coeur_geode",npcIds:["geode_avatar"],description:{resume:"Le gnrateur d'nergie.",visuel:"Un cristal titanesque, haut de dix mtres, suspendu au-dessus d'un gouffre. Des clairs violets frappent les parois rgulirement.",audio:"Un bourdonnement si grave qu'il fait vibrer la cage thoracique.",odeur:"Ozone satur (piquant le nez).",lumiere:"Flashs violets aveuglants."},narration:{declencheur:"Arrive dans la salle centrale.",texte_a_lire:"C'est ici. La source de tout. Un cristal massif qui semble pomper l'nergie du vide pour maintenir la prison. C'est ce signal que les mineurs entendaient. Votre cristal de Thade devient presque blanc de chaleur. Pour calmer la mine en haut, il faut drainer ce surplus d'nergie... ou briser le cristal.",contexte_mj:"Le 'Boss' n'est pas une crature, mais le cristal lui-mme qui se dfend par des dcharges lectriques et un Avatar de cristal.",objectif:"Charger le cristal de Thade au maximum."},mecaniques:{defis:["Combat : L'Avatar Cristallin (Construct de taille G).","Utilisation d'objet (DD 16) : Placer le cristal de Thade dans le flux d'nergie sans tre projet.","Vigueur (DD 14) : Rsister  la pression atmosphrique du lieu."],indices:["Le cristal de Thade change de forme, se polissant sous l'effet de l'nergie."],recompenses:"Le Cristal de Thade est 'Satur'."},transitions:{success:"L'nergie est absorbe. La lumire baisse. Le calme revient.",fail:"La gode explose partiellement : les PJ sont projets (2d6 dgts)."}},{title:"Scne 4 : Le Protocole de Purge",type:"Fuite",image:"./images/scenes/cube_nettoyeur.jpg",locationId:"spirale_premier_cercle",npcIds:["cube_nettoyeur"],description:{resume:"Maintenance force.",visuel:"Une masse translucide et visqueuse remplit tout le couloir derrire vous, dissolvant le mtal et la pierre sur son passage.",audio:"Un sifflement acide et une succion lourde.",odeur:"Vinaigre et produits chimiques.",lumiere:"La masse met une faible lueur verdtre."},narration:{declencheur:"Dbut du retour aprs l'objectif.",texte_a_lire:"Le drainage de l'nergie a dclench une alerte. La prison tente de se 'nettoyer'. Une masse de maintenance arrive pour dissoudre tout ce qui ne devrait pas tre ici : vous y compris. Il n'y a pas de discussion possible avec cette chose. Courez.",contexte_mj:"C'est une course-poursuite. Si la masse rattrape un PJ, il subit des dgts d'acide massifs.",objectif:"Atteindre la sortie avant d'tre rattrap."},mecaniques:{defis:["Course (Skill Challenge) : 3 succs avant 3 checs (Athltisme, Acrobaties, Perception).","Dgts d'environnement : Les dbris qui tombent."],indices:["La masse ralentit quand elle doit dissoudre des obstacles plus gros."],recompenses:"Survie."},transitions:{success:"Le groupe voit la fissure de sortie.",fail:"Un PJ est bless ou mort."}},{title:"Scne 5 : L'Expulsion",type:"pilogue",image:"./images/scenes/fissure_rejet.jpg",locationId:"spirale_premier_cercle",npcIds:[],description:{resume:"Le retour au monde rel.",visuel:"La faille violette vers la mine. De l'autre ct, la pierre grise familire et la poussire.",audio:"Le silence soudain aprs le chaos.",odeur:"L'odeur de la terre et de l'humidit de la mine.",lumiere:"La lumire faible des lanternes restes de l'autre ct."},narration:{declencheur:"Traverse de la fissure dans le sens inverse.",texte_a_lire:"Vous plongez  travers la dchirure. La sensation d'apesanteur s'arrte net. Vous vous crasez sur le sol dur du niveau -8. Derrire vous, la faille se rtracte et devient une simple ligne sombre sur le mur. Le calme est revenu dans la mine. Le cristal de Thade brille maintenant d'une lueur constante, froide et terrifiante.",contexte_mj:"Les PJ ont russi. Ils sont de nouveau dans la ralit physique. La menace immdiate est passe, mais ils portent maintenant une source d'nergie instable.",objectif:"Reprendre ses esprits."},mecaniques:{defis:["Vigueur (DD 12) : Ne pas s'vanouir sous le choc thermique."],indices:["Le cristal de Thade pse beaucoup plus lourd qu'avant."],recompenses:"Fin de l'Acte 4. Gain d'XP."},transitions:{success:"Vers l'Acte 5 : La Remonte.",fail:"Vers l'Acte 5, mais avec un PJ inconscient."}}]},{title:"ACTE 5 : LE PRIX DU SILENCE",stake:"Survivre au sabotage et confronter Thade Coren.",location:"Remonte vers la surface.",scenes:[{title:"Scne 1 : La Trappe de l'Ascenseur",type:"Rpit",image:"./images/scenes/mine_calme.jpg",locationId:"mine_argent",npcIds:["contremaitre_nain_mine"],description:{resume:"Une sortie trop calme.",visuel:"Le niveau -1 est plong dans le noir. Grelm est prostr prs du levier d'appel de la cage d'ascenseur.",audio:"Le silence est revenu, mais on entend des bruits de pas lourds dans les tages suprieurs.",odeur:"Huile de lanterne et sueur froide.",lumiere:"Une seule lanterne pose au sol."},narration:{declencheur:"Retour au point de jonction de l'ascenseur.",texte_a_lire:"Vous mergez des profondeurs. Le chant a cess, mais l'ambiance est plus lourde qu' votre dpart. Grelm vous attend, livide. Il murmure : 'Des hommes sont descendus. Ils ne ressemblaient pas  des mineurs. Ils ont pris le contrle de la salle des machines au-dessus.'",contexte_mj:"Grelm a peur. Les mercenaires de Thade ont t envoys pour s'assurer que personne ne remonte avec des questions ou le cristal.",objectif:"Prparer la remonte."},mecaniques:{defis:["Sens de la Magie (DD 12) : Sentir que le cristal de Thade met une chaleur intense, presque radioactive.","Diplomatie (DD 10) : Convaincre Grelm de vous aider  dbloquer l'ascenseur."],indices:["Des cbles de communication ont t sectionns."],recompenses:"Information sur la position des mercenaires."},transitions:{success:"Le groupe active l'ascenseur en restant discret.",fail:"L'ascenseur grince bruyamment, alertant l'tage suprieur."}},{title:"Scne 2 : Les Agents de Nettoyage",type:"Combat",image:"./images/scenes/mercenaires_thade.jpg",locationId:"mine_argent",npcIds:[],description:{resume:"limination des tmoins.",visuel:"Trois hommes en cuir sombre barrent l'accs  la sortie. Ils portent des arbaltes charges.",audio:"Le cliquetis des mcanismes de tir.",odeur:"Mtal froid.",lumiere:"Lumire grise venant du puits de jour."},narration:{declencheur:"Arrive  la plateforme intermdiaire.",texte_a_lire:"La cage d'ascenseur s'arrte. Un homme masqu s'avance sur la passerelle. 'Donnez-nous l'artefact et on vous laisse une chance de fuir par les tunnels de service.' Son ton est plat, professionnel. Il n'est pas l pour discuter, mais pour rcuprer la batterie de son matre.",contexte_mj:"Ce sont des professionnels, pas des brutes. Ils visent les mains ou les jambes pour immobiliser, sauf si les PJ ripostent mortellement.",objectif:"Passer de force ou par la ruse."},mecaniques:{defis:["Combat : 3 Mercenaires (Stats de Roublards/Guerriers niv 4).","Intimidation (DD 18) : Les faire douter de leur contrat."],indices:["Ils portent le blason de la famille Coren dissimul sous leurs manteaux."],recompenses:"Leurs ordres crits : 'Rcuprer le cristal, condamner le puits.'"},transitions:{success:"Accs au dernier niveau avant la surface.",fail:"Le combat s'ternise alors que des bruits d'explosions retentissent."}},{title:"Scne 3 : La Mine s'croule",type:"Action / Catastrophe",image:"./images/scenes/effondrement_mine.jpg",locationId:"mine_argent",npcIds:[],description:{resume:"Le plan B de Thade.",visuel:"La poussire tombe du plafond. Des charges de poudre noire explosent sur les piliers de soutien.",audio:"Un grondement qui couvre tous les cris.",odeur:"Soufre et roche broye.",lumiere:"La lumire du jour vacille  travers les dcombres."},narration:{declencheur:"Mort du chef mercenaire ou tentative de fuite.",texte_a_lire:"Thade n'a pas seulement envoy des hommes, il a pig la mine. Des dtonations sourdes font trembler les murs. Il veut enterrer la brche, le cristal et vous avec. Les piliers cdent les uns aprs les autres. Le puits principal est votre seule chance.",contexte_mj:"C'est une preuve de vitesse pure. La mine devient un pige mortel.",objectif:"Sortir avant d'tre enterr vivant."},mecaniques:{defis:["Rflexes (DD 15) : viter les chutes de pierres (2d6 dgts).","Athltisme (DD 14) : Grimper les dernires chelles alors que l'ascenseur lche."],indices:["La sortie est presque obstrue par la poussire."],recompenses:"Survie."},transitions:{success:"Les PJ jaillissent  l'air libre, couverts de poussire.",fail:"Les PJ sortent blesss et perdent une partie de leur inventaire."}},{title:"Scne 4 : La Place du Conseil",type:"Social / Confrontation",image:"./images/scenes/confrontation_surface.jpg",locationId:"quartier_des_mineurs_place",npcIds:["durnik_chef_mineur","thade_coren"],description:{resume:"Le choc des rcits.",visuel:"Une foule de mineurs et de gardes de la ville entourent le puits fumant. Thade est l, l'air faussement accabl.",audio:"Le brouhaha d'une foule en colre et inquite.",odeur:"L'air frais de la surface, ml  la fume.",lumiere:"Le soleil couchant, rouge et bas."},narration:{declencheur:"Sortie du puits devant la foule.",texte_a_lire:"La poussire retombe. Thade est l, entour de gardes. Il tend simplement la main, le visage ferm.  Le dispositif. Donnez-le moi. C'est une proprit de l'Universit, et vu les dgts que vous avez causs, c'est la seule chose qui vous vitera la prison. ",contexte_mj:"Thade joue la comdie devant les tmoins. Si les PJ l'accusent sans preuves (ordres crits), il les fera passer pour des traumatiss dlirants. Durnik observe la scne, prt  intervenir.",objectif:"Rvler la vrit ou ngocier sa survie."},mecaniques:{defis:["Bluff (DD 15) : Cacher le fait que le cristal est charg.","Diplomatie (DD 17) : Convaincre Durnik et la foule que Thade a provoqu l'explosion."],indices:["Thade a les mains qui tremblent lgrement : il a peur que vous parliez."],recompenses:"Soutien des mineurs (Rputation +2)."},transitions:{success:"Thade est forc de battre en retraite, discrdit.",fail:"Thade rcupre le cristal et les PJ passent pour des parias."}},{title:"Scne 5 : Lendemain d'Explosion",type:"pilogue",image:"./images/scenes/epilogue_mine.jpg",locationId:"quartier_des_mineurs_place",npcIds:[],description:{resume:"Un calme amer.",visuel:"Le puits de la mine est un tas de gravats. Les mineurs se dispersent en silence.",audio:"Le sifflement du vent dans les structures abandonnes.",odeur:"Poussire et dfaite.",lumiere:"La nuit tombe sur Val-d'Ombre."},narration:{declencheur:"Dpart de la place.",texte_a_lire:"La mine d'argent est ferme pour de bon. Thade est parti, mais son ombre plane toujours sur l'Universit. Vous avez empch le chant de rendre la ville folle, mais  quel prix ? Le cristal, s'il est toujours en votre possession, pulse doucement dans le noir. Ce n'tait que le dbut.",contexte_mj:"La mine est scelle, mais la Spirale n'est pas dtruite. Thade a besoin de cette nergie pour une tape ultrieure. Les PJ sont maintenant des cibles ou des allis dangereux.",objectif:"Bilan des gains et prparation de la suite."},mecaniques:{defis:[],indices:["Le cristal semble attirer d'autres nergies planaires."],recompenses:"Gain de niveau (Passage au niveau 5 ou 6)."},transitions:{success:"Fin du Scnario 2. Vers le Scnario 3.",fail:"Fin du Scnario 2. Vers le Scnario 3."}}]}]},HS={id:3,title:"SCNARIO 3 : LA CHUTE DE VAL-D'OMBRE",level:"Niveaux 7-9",system:"D&D 3.5",synopsis:"Thade Coren orchestre un coup d'tat sanglant : l'assassinat du Grand Prtre nain dclenche une purge ethnique et la transformation de Val-d'Ombre en ncropole. Les PJ, tmoins et accuss, doivent survivre  la Nuit des Longs Couteaux, organiser la rsistance, et finalement fuir dans les profondeurs de la Spirale alors que la ville s'effondre autour d'eux.",acts:[{title:"ACTE 1 : LE PIGE SE REFERME",stake:"Survivre  l'assassinat du Grand Prtre et chapper  l'accusation.",location:"Htel de Ville de Val-d'Ombre.",scenes:[{title:"Scne 1 : Le Sommet de la Rconciliation",type:"Social / Tension",image:"./images/scenes/conseil_sanglant.jpg",locationId:"hotel_de_ville_conseil",npcIds:["bourgmestre_valdombre","grand_pretre_nain","thade_coren","secretaire_bourgmestre"],description:{resume:"Sommet de rconciliation tendu entre nains et humains",visuel:"La grande salle du conseil de l'Htel de Ville. Une table ronde en chne massif. D'un ct, le Bourgmestre Aldric Vorn et Thade Coren, impeccable dans sa robe violette. De l'autre, le Grand Prtre nain Thorin Martelforge, entour de ses gardes du corps. Les PJ sont prsents comme tmoins neutres, invits pour leur rle dans la rsolution de la crise de la mine.",audio:"Murmures tendus. Le craquement des chaises. Dehors, on entend une foule hostile scander des slogans anti-nains.",odeur:"Encens de crmonie, sueur nerveuse, et un parfum subtil de lavande (signature de Thade).",lumiere:"Lumire dore des lustres de cristal. Les ombres des participants s'allongent sur les murs tendus de tapisseries."},narration:{declencheur:"Les PJ sont convoqus comme tmoins d'honneur pour un sommet de rconciliation entre la ville et la communaut naine.",texte_a_lire:"Le Bourgmestre Vorn tente de parler de paix, mais sa voix tremble. Thorin Martelforge ne l'coute mme pas, il fixe Thade.  Mes frres sont morts pour tes expriences, Coren.  Thade ne lve mme pas les yeux de ses parchemins.  Si vous avez une plainte formelle, dposez-la au greffe, Grand Prtre. Nous ne sommes pas ici pour couter des rumeurs de taverne.  L'air dans la salle devient soudainement lectrique, charg d'ozone.",contexte_mj:"Thade a orchestr ce sommet comme un pige. Il va assassiner le Grand Prtre et faire accuser les PJ ou les nains. Les PJ peuvent sentir la tension, mais ne savent pas encore ce qui va se passer. Thade est calme, trop calme. Il a dj gagn.",objectif:"Survivre  ce qui va suivre et comprendre qu'ils sont tombs dans un pige."},mecaniques:{defis:["Psychologie (DD 18) : Raliser que Thade manipule la situation. Il veut que le Grand Prtre l'accuse publiquement.","Perception (DD 20) : Remarquer un apprenti mage dans un coin, les yeux vitreux, murmurant une incantation. Il est sous charme.","Dtection de la magie (DD 16) : Sentir une aura ncromantique puissante qui se concentre dans la salle.","Diplomatie (DD 22) : Tenter de dsamorcer la tension (trs difficile, Thade sabote activement)."],indices:["Thade ne prend aucune note. Il observe, comme un prdateur.","Le Bourgmestre semble nerveux, comme s'il savait quelque chose.","Les gardes nains ont la main sur leurs armes. Ils s'attendent  une trahison.","L'apprenti mage dans le coin est l'un des tudiants de Thade. Il ne devrait pas tre l."],recompenses:"Aucune. C'est une scne de mise en place du drame."},transitions:{success:"Les PJ dtectent le danger une fraction de seconde avant qu'il ne se produise.",fail:"L'assassinat les prend totalement par surprise."}},{title:"Scne 2 : Le Meurtre du Grand Prtre",type:"vnement / Horreur",image:"./images/scenes/mort_grand_pretre.jpg",locationId:"hotel_de_ville_valdombre",npcIds:["grand_pretre_nain","thade_coren","apprenti_charme"],description:{resume:"Assassinat du Grand Prtre par un apprenti charm",visuel:"Le Grand Prtre Thorin se lve pour rpondre  Thade. Soudain, l'apprenti mage dans le coin lve les mains. Un rayon d'nergie noire jaillit, frappant Thorin en pleine poitrine. Le nain s'effondre, du sang noir coulant de sa bouche. Ses gardes hurlent. Thade recule, feignant la surprise parfaite.",audio:"Le cri du sort ncromantique, un sifflement aigu. Le choc du corps de Thorin heurtant le sol. Les hurlements des gardes nains. Le chaos.",odeur:"Ozone brl, sang et chair carbonise.",lumiere:"Le rayon noir laisse des tranes d'ombre dans l'air. Les lustres vacillent."},narration:{declencheur:"L'apprenti sous charme lance le sort mortel.",texte_a_lire:"Pas de discours. Pas d'avertissement. L'apprenti dans le coin lve la main. Un clair noir. Thorin s'effondre, la poitrine ouverte, mort avant de toucher le sol. Les gardes nains hurlent. L'apprenti ouvre la bouche pour parler, mais ses yeux se rvulsent et il tombe raide mort, le cerveau liqufi par un sort de scurit. Thade se lve calmement :  Scurisez la salle. Ces nains sont dangereux. ",contexte_mj:"Thade a orchestr cet assassinat  la perfection. L'apprenti tait sous charme et programm pour se suicider aprs l'acte. Les preuves mnent  l'Universit Arcanique, mais Thade a prpar des boucs missaires. Les PJ sont tmoins, ce qui les rend dangereux pour Thade. Il va les liminer ou les discrditer.",objectif:"Comprendre qu'ils sont dans un pige et que Thade va les accuser."},mecaniques:{defis:["Rflexes (DD 18) : Tenter d'intercepter le rayon (impossible, mais permet de se positionner prs du corps).","Premiers secours (DD 25) : Tenter de sauver Thorin (impossible, il est dj mort, mais permet de constater la magie noire).","Dtection de la magie (DD 14) : L'apprenti porte une marque de charme puissante. Quelqu'un l'a contrl.","Fouille rapide (DD 16) : Trouver sur l'apprenti un mdaillon avec le sceau de Thade (preuve, mais Thade dira qu'il a t vol)."],indices:["L'apprenti tait sous contrle mental. Ce n'tait qu'un outil.","Thade ne semble pas surpris. Son jeu d'acteur est parfait, mais trop parfait.","Le Bourgmestre est en tat de choc. Il ne s'attendait pas  a (ou fait-il semblant ?).","Les gardes nains accusent immdiatement Thade et l'Universit."],recompenses:"Preuve du charme (mdaillon). Mais cette preuve sera retourne contre les PJ."},transitions:{success:"Les PJ rcuprent des preuves avant que la situation n'explose.",fail:"Le chaos clate immdiatement sans qu'ils aient le temps de ragir."}},{title:"Scne 3 : Le Chaos du Conseil",type:"Combat / Chaos",image:"./images/scenes/bataille_conseil.jpg",locationId:"hotel_de_ville_valdombre",npcIds:["gardes_nains","gardes_ville","thade_coren"],description:{resume:"Bataille range dans la salle du conseil",visuel:"La salle du conseil explose en violence. Les gardes nains, fous de rage, dgainent leurs haches et chargent vers Thade. Les gardes de la ville rpondent, pes tires. Le Bourgmestre hurle des ordres que personne n'coute. Tables renverses, tapisseries dchires, sang sur le marbre.",audio:"Fracas d'acier, cris de rage, ordres contradictoires. Le bruit d'une meute qui commence.",odeur:"Sueur, sang, fume (quelqu'un a renvers une lampe).",lumiere:"Chaos de lumires vacillantes. Des ombres dansent sur les murs."},narration:{declencheur:"La mort du Grand Prtre dclenche une bataille range.",texte_a_lire:"C'est le chaos. Les nains chargent. Thade claque des doigts et disparat dans un pli dimensionnel, vous laissant seuls au milieu du massacre. Les gardes de la ville, croyant  un coup d'tat, dgainent leurs pes contre vous.",contexte_mj:"Combat chaotique. Les PJ doivent survivre et protger le Bourgmestre (ou le laisser mourir, ce qui aggrave la situation). Thade s'chappe facilement. Les PJ ralisent qu'ils sont pigs : tmoins d'un assassinat, ils seront accuss de complicit ou d'incomptence.",objectif:"Survivre au chaos et protger le Bourgmestre (optionnel)."},mecaniques:{defis:["Combat : 4 Gardes nains (Guerrier 4) vs 6 Gardes de la ville (Guerrier 3). Les PJ sont au milieu.","Diplomatie (DD 25) : Tenter de calmer la situation (presque impossible dans le chaos).","Acrobaties (DD 14) : Se frayer un chemin vers le Bourgmestre sans tre bless.","Dtection de la magie (DD 16) : Raliser que Thade a lanc plusieurs sorts de prparation avant de partir (il savait)."],indices:["Thade s'chappe sans combattre. Il avait tout prvu.","Le Bourgmestre est en danger. Si les PJ le sauvent, il pourra tmoigner en leur faveur plus tard.","Des renforts arrivent. Les PJ doivent fuir rapidement."],recompenses:"Si le Bourgmestre survit : alli potentiel. Si mort : situation encore pire."},transitions:{success:"Les PJ s'chappent de la salle du conseil avant l'arrive des renforts.",fail:"Les PJ sont blesss ou capturs temporairement."}},{title:"Scne 4 : L'vacuation en Flammes",type:"Fuite / Action",image:"./images/scenes/evacuation_toits.jpg",locationId:"hotel_de_ville_valdombre",npcIds:[],description:{resume:"Fuite de l'Htel de Ville en flammes",visuel:"L'Htel de Ville est en feu. Des flammes magiques (violettes, signature de Thade) dvorent les couloirs. La fume est paisse, toxique. Les escaliers s'effondrent. La seule issue : les toits.",audio:"Craquements du bois qui brle, explosions de fentres, cris de panique des autres occupants.",odeur:"Fume cre, bois brl, chair carbonise.",lumiere:"Lueur orange et violette des flammes. Ombres dansantes."},narration:{declencheur:"Le btiment prend feu (sabotage de Thade).",texte_a_lire:"Des flammes violettes surgissent des murs. Ce n'est pas un incendie normal : c'est de la magie. Thade a pig le btiment. Les escaliers s'effondrent derrire vous. La fume vous brle les poumons. Vous entendez des cris : d'autres personnes sont piges. Devant vous, une fentre donne sur les toits. C'est votre seule chance. Dehors, vous entendez des cloches sonner l'alarme et une voix amplifie magiquement : 'Citoyens de Val-d'Ombre ! Le Grand Prtre nain a t assassin par des agents nains infiltrs ! La loi martiale est dcrte ! Tous les nains doivent se rendre immdiatement !'",contexte_mj:"Scne d'action pure. Les PJ doivent fuir le btiment en feu tout en entendant la propagande de Thade qui retourne la ville contre les nains. Ils ralisent que Val-d'Ombre est en train de basculer dans la folie.",objectif:"S'chapper de l'Htel de Ville en feu."},mecaniques:{defis:["Acrobaties (DD 15) : Sauter par la fentre et atterrir sur le toit adjacent.","Vigueur (DD 14) : Rsister  la fume toxique (chec = 1d6 dgts de poison et tat 'Nauseux').","Escalade (DD 12) : Descendre du toit vers une ruelle.","Choix moral : Sauver des civils pigs (ralentit la fuite mais gagne des allis) ou fuir directement."],indices:["La voix amplifie est celle de Thade. Il contrle dj la narration publique.","Des patrouilles se forment dans les rues. La chasse aux nains a commenc.","Les PJ sont recherchs : 'Tmoins du meurtre, considrs comme complices'."],recompenses:"Si les PJ sauvent des civils : reconnaissance et cachettes potentielles. Sinon : progression plus rapide."},transitions:{success:"Les PJ atteignent les toits et peuvent observer la ville qui bascule dans le chaos.",fail:"Les PJ sont blesss par les flammes ou la chute."}},{title:"Scne 5 : La Ville en Flammes",type:"Observation / Horreur",image:"./images/scenes/loi_martiale.jpg",locationId:"toits_valdombre",npcIds:[],description:{resume:"Val-d'Ombre bascule dans la purge ethnique",visuel:"Depuis les toits, les PJ ont une vue panoramique de Val-d'Ombre. Des incendies clatent dans le quartier nain. Des patrouilles de gardes et d'automates de la Guilde ratissent les rues. Des nains sont trans hors de leurs maisons. Au loin, la Tour Arcanique brille d'une lueur violette malsaine.",audio:"Cloches d'alarme, cris lointains, ordres hurls, le bruit sourd des portes enfonces.",odeur:"Fume porte par le vent, odeur de peur.",lumiere:"Crpuscule. La ville est claire par les incendies et les torches des patrouilles."},narration:{declencheur:"Les PJ atteignent un point d'observation.",texte_a_lire:"Depuis les toits, vous voyez Val-d'Ombre se transformer en enfer. Le quartier des mineurs brle. Des patrouilles de gardes, accompagnes d'automates de combat de la Guilde, enfoncent les portes des maisons naines. Vous voyez des familles entires tranes dans les rues, enchanes. Des affiches sont placardes partout : 'RECHERCHS - Complices de l'assassinat du Grand Prtre. Rcompense : 1000 po.' Vos visages sont dessins dessus. Thade a travaill vite. Au loin, vous voyez la Tour Arcanique briller d'une lueur violette. Quelque chose de terrible se prpare. Une voix magiquement amplifie rsonne : 'Couvre-feu immdiat. Toute personne dans les rues sera considre comme complice. La Guilde des Mages assure votre scurit.' C'est la voix de Thade.",contexte_mj:"Moment de ralisation. Les PJ comprennent l'ampleur du plan de Thade : il a dclench une purge ethnique et pris le contrle de la ville. Ils sont recherchs et ne peuvent plus compter sur les autorits. Leur seul espoir : rejoindre la rsistance naine ou fuir. Mais Thade ne les laissera pas partir vivants.",objectif:"Comprendre la situation et dcider d'un plan d'action."},mecaniques:{defis:["Perception (DD 12) : Reprer des patrouilles qui se dirigent vers leur position.","Connaissance (Locale) (DD 14) : Se souvenir de cachettes ou d'allis potentiels dans la ville.","Survie (DD 16) : Trouver un chemin sr  travers les toits pour rejoindre le quartier nain."],indices:["Le Temple-Forgeron (temple de Moradin) semble encore libre. Des lumires y brillent.","Des groupes de nains se battent dans les rues, tentant de protger leurs familles.","La Tour Arcanique pulse d'nergie. Thade y prpare quelque chose de grand."],recompenses:"Informations sur la situation. Choix de direction pour l'Acte 2."},transitions:{success:"Les PJ dcident de rejoindre la rsistance naine au Temple-Forgeron.",fail:"Les PJ sont reprs et doivent fuir immdiatement, sans plan clair."}}]},{title:"ACTE 2 : LA NUIT DES LONGS COUTEAUX",stake:"Traverser une ville en guerre civile et rejoindre la rsistance naine.",location:"Rues de Val-d'Ombre (Nuit).",scenes:[{title:"Scne 1 : La Traverse du Quartier Artisan",type:"Infiltration / Discrtion",image:"./images/scenes/rafle_artisan.jpg",locationId:"quartier_artisan_patrouille",npcIds:["patrouilles_mixtes","automates_guilde"],description:{resume:"Infiltration du quartier artisan patrouill",visuel:"Le quartier artisan est mconnaissable. Les ateliers sont scells, les portes marques du sceau de la Guilde. Des patrouilles mixtes (gardes humains et automates de combat) ratissent les rues. Des affiches avec les visages des PJ sont placardes partout. Des civils terrifis se cachent derrire leurs volets.",audio:"Pas lourds des patrouilles, cliquetis mcaniques des automates, ordres aboys, pleurs touffs.",odeur:"Fume de bois brl, huile des automates, peur.",lumiere:"Nuit noire. Seules les torches des patrouilles et les yeux lumineux des automates percent l'obscurit."},narration:{declencheur:"Les PJ descendent des toits et doivent traverser le quartier artisan pour rejoindre le Temple-Forgeron.",texte_a_lire:"Vous descendez dans les ruelles du quartier artisan. Chaque ombre pourrait cacher une patrouille. Devant vous, un groupe de gardes accompagns de deux automates de combat de la Guilde patrouille mthodiquement. Les automates scannent les faades avec leurs yeux de cristal rouge. L'un d'eux s'arrte, pivote vers votre position. A-t-il dtect quelque chose ? Vous retenez votre souffle. Aprs un moment qui semble durer une ternit, il reprend sa marche. Vous devez traverser trois rues principales pour atteindre le quartier nain. Chacune est patrouille.",contexte_mj:"Scne d'infiltration tendue. Les PJ doivent viter les patrouilles ou les neutraliser discrtement. Les automates sont difficiles  tromper (Perception +10). Si l'alarme est donne, des renforts arrivent rapidement. Les PJ peuvent utiliser la magie, la discrtion, ou trouver des passages alternatifs.",objectif:"Traverser le quartier artisan sans tre dtects."},mecaniques:{defis:["Discrtion (DD 16) : Se dplacer sans tre vu par les patrouilles.","Dplacement silencieux (DD 14) : Ne pas faire de bruit sur les pavs.","Connaissance (Ingnierie) (DD 15) : Comprendre les patterns de dtection des automates et les viter.","Bluff (DD 18) : Si reprs, se faire passer pour des citoyens loyaux (trs difficile avec les affiches).","Option magique : Invisibilit, Silence, Forme gazeuse facilitent grandement la traverse."],indices:["Les automates dtectent le mouvement et la chaleur. Rester immobile fonctionne.","Des gouts offrent un passage alternatif, mais ils sont surveills aussi.","Un contact dans une maison pourrait offrir un refuge temporaire."],recompenses:"Traverse russie. Si discrets : aucune alerte. Si dtects : poursuite dans la scne suivante."},transitions:{success:"Les PJ atteignent la limite du quartier nain sans tre dtects.",fail:"Les PJ sont reprs. Des renforts sont appels et les poursuivent."}},{title:"Scne 2 : L'Horreur de la Place des Excutions",type:"Horreur / Rvlation",image:"./images/scenes/necropole_brume.jpg",locationId:"place_executions_valdombre",npcIds:["capitaine_garde_urbaine","executeur_masque"],description:{resume:"Thade transforme les nains excuts en zombies",visuel:"La place centrale du quartier nain. Une scne d'horreur : des dizaines de nains enchans,  genoux. Des gardes en armure noire les excutent un par un. Mais ce qui glace le sang, c'est ce qui suit : les corps ne restent pas morts. Une brume violette s'chappe de la Tour Arcanique au loin et enveloppe les cadavres. Ils se relvent, transforms en zombies, et sont enchans pour former une arme mort-vivante.",audio:"Cris des condamns, choc des lames, puis le silence de mort. Le grognement des zombies qui se lvent. Une incantation ncromantique murmure par un mage masqu.",odeur:"Sang, chair en dcomposition acclre, ozone ncromantique.",lumiere:"Torches et la lueur violette malsaine de la brume ncromantique."},narration:{declencheur:"Les PJ arrivent  la place et assistent  l'excution et  la rsurrection.",texte_a_lire:"Vous arrivez  la limite de la place et ce que vous voyez vous glace le sang. Des dizaines de nains, hommes, femmes, mme des enfants, sont aligns, enchans. Un capitaine de la garde lit une proclamation : 'Par ordre de la Guilde des Mages, vous tes reconnus coupables de conspiration contre Val-d'Ombre. Sentence : mort.' Les excutions commencent. Mais ce n'est pas le pire une brume violette s'infiltre dans les cadavres. Ils se relvent, les yeux vides. Un mage masqu les enchane magiquement avant de noter des rsultats sur un carnet. Vous ralisez avec horreur : Thade ne se contente pas de tuer les nains. Il les transforme en arme mort-vivante.",contexte_mj:"Rvlation majeure : le plan de Thade est de transformer Val-d'Ombre en ncropole et les nains en arme de zombies. La brume ncromantique vient de la Tour Arcanique o Thade effectue un rituel de masse. Les PJ doivent dcider : intervenir (risqu, sauver quelques nains) ou continuer discrtement (pragmatique, mais moralement difficile).",objectif:"Comprendre le plan de Thade et dcider d'intervenir ou non."},mecaniques:{defis:["Volont (DD 16) : Rsister  l'horreur de la scne (chec = tat 'Secou' pendant 1 heure).","Connaissance (Religion/Arcanes) (DD 17) : Comprendre que c'est un rituel de masse. Thade canalise l'nergie de la Spirale pour crer des morts-vivants.","Choix moral : Intervenir (combat difficile, sauver 2d6 nains) ou continuer (pas de combat, mais poids moral).","Si intervention : Combat contre 1 Ncromancien (Ensorceleur 6) + 8 Zombies + 4 Gardes."],indices:["La brume vient directement de la Tour Arcanique. Thade y effectue le rituel.","Les zombies sont contrls magiquement. Dtruire le ncromancien les libre (mais ils restent hostiles).","Des survivants peuvent rvler que Durnik et Thorgar organisent la rsistance au Temple-Forgeron."],recompenses:"Si intervention : 2d6 nains sauvs (allis futurs). Informations sur le rituel. Si non : progression rapide mais culpabilit."},transitions:{success:"Les PJ s'chappent de la place, avec ou sans avoir agi.",fail:"Les PJ sont reprs et doivent fuir sous le feu ennemi."}},{title:"Scne 3 : L'Embuscade du Lieutenant",type:"Combat / Boss mineur",image:"./images/scenes/embuscade_nuit.jpg",locationId:"ruelle_sombre_valdombre",npcIds:["kael_ombrelame","squelettes_geants"],description:{resume:"Embuscade de Kael Ombrelame dans la ruelle",visuel:"Une ruelle troite, seul passage vers le Temple-Forgeron. Soudain, les ombres bougent. Un homme en robe noire merge, flanqu de squelettes gants. Kael Ombrelame, lieutenant de Thade, ncromancien de talent. Il sourit : 'Le Matre savait que vous viendriez ici. Il m'a demand de vous... accueillir.'",audio:"Cliquetis d'os, rire froid de Kael, incantations ncromantiques.",odeur:"Mort et magie noire.",lumiere:"Tnbres magiques. Seuls les yeux verts des squelettes et l'aura noire de Kael brillent."},narration:{declencheur:"Les PJ entrent dans la ruelle pige.",texte_a_lire:"Les ombres se solidifient. Kael Ombrelame barre la route. Il ne se prsente pas. Il pointe simplement son bton vers vous et murmure  ses squelettes :  Cibles prioritaires. limination. ",contexte_mj:"Boss fight mineur. Kael est un ncromancien niveau 8, dangereux mais pas imbattable. Il utilise des sorts de contrle et de dgts ncromantiques. Les squelettes gants sont des tanks. Kael fuit si rduit  moins de 20% PV, jurant de revenir. Les PJ peuvent l'interroger s'ils le capturent.",objectif:"Vaincre ou faire fuir Kael Ombrelame."},mecaniques:{defis:["Combat : Kael Ombrelame (Ncromancien 8) + 4 Squelettes Gants (FP 4 chacun).","Kael utilise : Rayon d'affaiblissement, Toucher glacial, Animation des morts, clair.","Tactique : Kael reste en arrire, les squelettes protgent. Il fuit via Porte dimensionnelle si en danger.","Si captur : Intimidation (DD 20) pour le faire parler. Rvle que Thade prpare 'l'Ascension'  la Tour."],indices:["Kael porte un mdaillon avec le sceau de Thade. Preuve de la connexion.","Il mentionne 'l'Ascension' si interrog. Thade veut devenir un liche ou pire.","Les squelettes portent des armures de la garde de Val-d'Ombre. Ce sont d'anciens soldats."],recompenses:"XP du combat. Mdaillon de Kael (preuve). Informations sur le plan de Thade. Bton de Kael (+2 aux jets de Ncromancie)."},transitions:{success:"Kael est vaincu ou fuit. La voie vers le Temple est libre.",fail:"Les PJ sont blesss et doivent se replier, cherchant un autre chemin."}},{title:"Scne 4 : Le Dilemme de la Forge",type:"Choix moral / Action",image:"./images/scenes/forge_thorgar.jpg",locationId:"forge_annexe_thorgar",npcIds:["thorgar_pretre_nain","refugies_nains"],description:{resume:"Dilemme entre sauver les rfugis ou les explosifs",visuel:"L'annexe de la forge de Thorgar, prtre de Moradin. Le btiment est encercl par des gardes et des zombies.  l'intrieur, Thorgar et une vingtaine de rfugis nains (femmes, enfants, vieillards) sont pigs. Dans la cour, des caisses d'explosifs de mine et d'armes. Les deux sont prcieux, mais les PJ ne peuvent pas tout sauver.",audio:"Cris des rfugis, ordres des gardes, grondement des zombies.",odeur:"Poudre  canon, sueur, peur.",lumiere:"Feux des torches des assigeants. L'intrieur de la forge est sombre."},narration:{declencheur:"Les PJ arrivent prs de la forge et constatent la situation.",texte_a_lire:"Vous apercevez la forge de Thorgar. Elle est encercle. Une vingtaine de gardes et autant de zombies bloquent les issues.  l'intrieur, vous voyez des silhouettes : Thorgar et des rfugis. Ils sont pigs. Mais ce n'est pas tout : dans la cour, vous voyez des caisses marques 'EXPLOSIFS - MINE'. Des armes aussi. Durnik avait stock du matriel ici pour la rsistance. Vous ralisez : vous ne pouvez pas tout sauver. Soit vous crez une diversion pour vacuer les rfugis (mais les gardes dtruiront les explosifs), soit vous scurisez les explosifs d'abord (mais les rfugis risquent de mourir). Thorgar vous voit par une fentre. Il vous fait signe : 'Sauvez-les ! Les vies avant le matriel !' Mais sans explosifs, le Temple-Forgeron ne tiendra pas longtemps.",contexte_mj:"Dilemme moral classique. Les PJ doivent choisir entre sauver des vies (rfugis) ou scuriser des ressources (explosifs). Les deux options ont des consquences. Sauver les rfugis gagne la loyaut de Thorgar mais affaiblit la dfense future. Scuriser les explosifs permet de mieux dfendre le Temple mais cote des vies innocentes.",objectif:"Choisir entre sauver les rfugis ou scuriser les explosifs."},mecaniques:{defis:["OPTION A - Sauver les rfugis : Crer une diversion (Bluff DD 16, ou sort de distraction). Combat contre 10 gardes pendant l'vacuation. Les rfugis s'chappent, mais les explosifs sont dtruits.","OPTION B - Scuriser les explosifs : Infiltration (Discrtion DD 18) pour voler les caisses. Les rfugis sont massacrs. Thorgar survit mais est bris moralement.","OPTION C - Tenter les deux : Trs difficile. Ncessite un plan labor et des jets russis. Possible mais risqu."],indices:["Thorgar est un prtre puissant. Si sauv, il sera un alli majeur.","Les explosifs permettront de tenir le Temple plus longtemps et de crer des piges.","Les rfugis incluent des artisans qui peuvent aider  fortifier le Temple."],recompenses:"OPTION A : Thorgar loyal + 20 rfugis sauvs. OPTION B : Explosifs (avantage tactique) mais Thorgar distant. OPTION C : Tout, mais trs difficile."},transitions:{success:"Les PJ accomplissent leur choix et fuient vers le Temple-Forgeron.",fail:"Les PJ chouent et perdent les deux (rfugis morts, explosifs dtruits)."}},{title:"Scne 5 : Le Dernier Bastion",type:"Arrive / Regroupement",image:"./images/scenes/temple_forteresse.jpg",locationId:"temple_forgeron_moradin",npcIds:["thorgar_pretre_nain","durnik_chef_mineur","refugies_nains"],description:{resume:"Arrive au Temple-Forgeron et regroupement",visuel:"Le Temple-Forgeron de Moradin, dieu nain de la forge et de la cration. Une forteresse de pierre massive, barricade. Des nains arms patrouillent les remparts.  l'intrieur, des centaines de rfugis : familles, guerriers blesss, artisans. Durnik, le chef mineur, organise la dfense. Thorgar (s'il a survcu) prie devant l'autel.",audio:"Prires naines, bruits de fortification, pleurs d'enfants, ordres tactiques.",odeur:"Encens de temple, sueur, mtal forg.",lumiere:"Torches et brasiers. L'autel de Moradin brille d'une lueur dore rassurante."},narration:{declencheur:"Les PJ arrivent au Temple-Forgeron.",texte_a_lire:"Vous franchissez les portes massives du Temple-Forgeron.  l'intrieur, c'est le chaos organis. Des centaines de nains s'entassent : familles terrorises, guerriers prparant leurs armes, prtres soignant les blesss. Durnik vous voit et se prcipite : 'Par la barbe de Moradin, vous tes vivants ! On vous croyait morts  l'Htel de Ville.' Il vous serre dans ses bras. 'Bienvenue au dernier bastion libre de Val-d'Ombre. Nous sommes encercls, mais nous tiendrons.' Thorgar (si prsent) s'approche : 'Vous avez fait ce que vous pouviez. Maintenant, nous devons nous prparer. Thade va venir. Et quand il viendra, ce sera avec toute son arme de morts.' Au loin, vous entendez le grondement d'une horde qui approche. Le sige va commencer.",contexte_mj:"Point de regroupement. Les PJ retrouvent des allis (Durnik, Thorgar, rfugis sauvs). C'est le moment de faire le point, de se reposer brivement, et de prparer la dfense. L'Acte 3 sera le sige du Temple. Les choix des PJ dans l'Acte 2 influencent les ressources disponibles.",objectif:"Se regrouper, partager les informations, et prparer la dfense."},mecaniques:{defis:["Aucun dfi immdiat. Scne de roleplay et de prparation.","Les PJ peuvent partager ce qu'ils ont appris (rituel de Thade, zombies, plan de ncropole).","Inventaire des ressources : Combien de combattants ? D'explosifs ? De nourriture ? D'issues de secours ?"],indices:["Durnik rvle qu'il y a un passage secret sous le Temple, menant aux gouts et au cimetire.","Thorgar peut bnir les armes des PJ (+1 contre les morts-vivants pour 24h).","Un claireur rapporte : 'Une arme de zombies approche. Des centaines. Peut-tre des milliers. Ils seront l  l'aube.'"],recompenses:"Repos court. Bndictions de Thorgar. Informations tactiques. Prparation pour l'Acte 3."},transitions:{success:"Les PJ sont prts pour le sige. L'Acte 3 commence avec l'aube.",fail:"Les PJ sont puiss et mal prpars. Le sige sera plus difficile."}}]},{title:"ACTE 3 : LE SIGE DU TEMPLE",stake:"Tenir le Temple-Forgeron contre l'arme des morts.",location:"Temple-Forgeron de Moradin.",scenes:[{title:"Scne 1 : L'Aube du Sige",type:"Prparation",image:"./images/scenes/fortification_temple.jpg",locationId:"temple_moradin_enceinte",npcIds:["thorgar_pretre_nain","durnik_chef_mineur"],description:{resume:"Prparation stratgique avant le sige",visuel:"L'aube se lve sur le Temple. Une arme de morts-vivants l'entoure.",audio:"Prires, fortifications, ordres tactiques.",odeur:"Encens, mtal, sueur.",lumiere:"Aube grise sous la brume ncromantique."},narration:{declencheur:"L'aube aprs l'arrive.",texte_a_lire:"Durnik : 'Nous avons 200 combattants. Contre a...' Il dsigne l'arme de morts. 'Dites-moi comment nous survivons.'",contexte_mj:"Planification stratgique. Les choix influencent les scnes suivantes.",objectif:"Organiser la dfense."},mecaniques:{defis:["Connaissance (Guerre) DD 14","Tactique DD 16","Placer piges si explosifs"],indices:["Feu efficace","Thorgar peut canaliser nergie","gouts = issue secours"],recompenses:"Bonus tactiques selon plan."},transitions:{success:"Dfenses prtes.",fail:"Dfenses mal organises."}},{title:"Scne 2 : La Premire Vague",type:"Combat",image:"./images/scenes/assaut_zombies.jpg",locationId:"temple_moradin_remparts",npcIds:["hordes_zombies"],description:{resume:"Premire vague de zombies attaque les remparts",visuel:"Centaines de zombies chargent les murs.",audio:"Grondement, cris, chocs.",odeur:"Dcomposition, fume.",lumiere:"Jour sombre, brume."},narration:{declencheur:"L'assaut commence.",texte_a_lire:"Une vague de zombies dferle. Durnik : 'Tenez les remparts !'",contexte_mj:"3 vagues de 10-15 zombies. Systme simplifi.",objectif:"Repousser la premire vague."},mecaniques:{defis:["Combat : 3 vagues zombies","Explosifs : Timing DD 14","Canalisation Thorgar"],indices:["Attaques zone efficaces","Deuxime vague sera pire"],recompenses:"Survie, moral maintenu."},transitions:{success:"Vague repousse.",fail:"Zombies percent dfenses."}},{title:"Scne 3 : Le Tratre",type:"Intrigue",image:"./images/scenes/traitre_temple.jpg",locationId:"temple_forgeron_interieur",npcIds:["galen_traitre"],description:{resume:"Galen sabote les dfenses pour Thade",visuel:"Explosion. Glyphes s'teignent. Galen sabote.",audio:"Explosion, alarme.",odeur:"Ozone, trahison.",lumiere:"Glyphes s'teignent."},narration:{declencheur:"Sabotage entre vagues.",texte_a_lire:"Galen : 'Thade m'a promis la vie ternelle.' Il invoque des spectres.",contexte_mj:"Combat contre tratre (Clerc 5) + 3 Spectres.",objectif:"Neutraliser Galen."},mecaniques:{defis:["Combat Galen + Spectres","Religion DD 14 : ractiver glyphes"],indices:["Mdaillon Thade","Cristal noir affaiblit morts-vivants"],recompenses:"Glyphes restaurs, cristal, infos."},transitions:{success:"Galen vaincu.",fail:"Glyphes dtruits."}},{title:"Scne 4 : L'Assaut des Ombres",type:"Boss",image:"./images/scenes/assaut_final.jpg",locationId:"temple_moradin_parvis",npcIds:["wraiths","beliers_osseux"],description:{resume:"Wraiths et bliers osseux attaquent le Temple",visuel:"Wraiths traversent murs. Bliers osseux gants frappent portes.",audio:"Hurlements, fracas.",odeur:"Froid, mort.",lumiere:"Tnbres surnaturelles."},narration:{declencheur:"Assaut final.",texte_a_lire:"Wraiths et bliers osseux attaquent. Thorgar : 'Nous tiendrons !'",contexte_mj:"Boss multiple : 3 Bliers + 4 Wraiths.",objectif:"Dtruire bliers, repousser wraiths."},mecaniques:{defis:["Combat Bliers FP6 + Wraiths FP5","Explosifs dtruisent blier","Canalisation x2 dgts"],indices:["Crne = point faible","Wraiths drainent Force"],recompenses:"Victoire, respect nains."},transitions:{success:"Temple tient.",fail:"Portes tombent, vacuation."}},{title:"Scne 5 : Le Dme",type:"Rvlation",image:"./images/scenes/dome_violet.jpg",locationId:"temple_forgeron_remparts",npcIds:["thade_coren_projection"],description:{resume:"Thade enferme Val-d'Ombre sous un dme violet",visuel:"Dme violet enferme la ville. Projection Thade.",audio:"Bourdonnement, voix Thade.",odeur:"Ozone, ncromancie.",lumiere:"Lueur violette."},narration:{declencheur:"Aprs victoire.",texte_a_lire:"Thade : 'Bravo. Mais vous tes pigs. Val-d'Ombre est ma ncropole.'",contexte_mj:"Dme impntrable. Seule issue : Spirale.",objectif:"Comprendre qu'ils doivent fuir."},mecaniques:{defis:["Arcanes DD 18 : analyser dme","Volont DD 14 : pas dsespoir"],indices:["Durnik : passage sous Temple","Spirale = seul espoir"],recompenses:"Connaissance passage secret."},transitions:{success:"Dcident contre-attaque Tour.",fail:"Fuient immdiatement."}}]},{title:"ACTE 4 : LE DERNIER ESPOIR",stake:"Tenter de stopper le rituel de Thade avant de fuir.",location:"Tour Arcanique et Hauteurs de Val-d'Ombre.",scenes:[{title:"Scne 1 : La Ville Morte",type:"Exploration",image:"./images/scenes/ville_necropole.jpg",locationId:"rues_valdombre_necropole",npcIds:[],description:{resume:"Traverse de la ville transforme en ncropole",visuel:"Brume violette, cadavres se relevant, btiments s'effondrant.",audio:"Silence de mort, grognements, effondrements.",odeur:"Dcomposition, brume acide.",lumiere:"Crpuscule ternel sous dme violet."},narration:{declencheur:"Dpart vers la Tour.",texte_a_lire:"Val-d'Ombre agonise. Durnik : 'Si nous stoppons le rituel, le dme tombera peut-tre.'",contexte_mj:"Traverse atmosphrique. Skill challenge pour atteindre la Tour.",objectif:"Atteindre la Tour Arcanique."},mecaniques:{defis:["Skill Challenge : 5 succs avant 3 checs","Acrobaties, Athltisme, Discrtion, Survie"],indices:["Brume dense prs Tour","Survivants supplient aide","Tour garde"],recompenses:"Arrive Tour selon tat."},transitions:{success:"Arrivent en bon tat.",fail:"Arrivent puiss."}},{title:"Scne 2 : L'Ascension",type:"Infiltration",image:"./images/scenes/tour_arcanique_interieur.jpg",locationId:"tour_arcanique_escaliers",npcIds:["gardes_morts_vivants"],description:{resume:"Ascension de la Tour remplie de morts-vivants",visuel:"Couloirs dserts, cadavres mages, escaliers spirale.",audio:"Incantations lointaines, bourdonnement.",odeur:"Sang, ozone, mort.",lumiere:"Lueur violette pulsante."},narration:{declencheur:"Entre Tour.",texte_a_lire:"Thade a tu ses collgues. Sa voix : 'L'Ascension est proche.'",contexte_mj:"Monte avec combats et piges. Horloge tension : 10 rounds.",objectif:"Atteindre sommet avant fin rituel."},mecaniques:{defis:["Combats vagues gardes","Piges glyphes DD 16","Horloge 10 rounds"],indices:["Objets sur cadavres","Ascenseur pig","Rituel presque fini"],recompenses:"Arrive sommet, objets magiques."},transitions:{success:" temps.",fail:"Trop tard, Thade transform."}},{title:"Scne 3 : Le Gardien",type:"Boss",image:"./images/scenes/golem_chair.jpg",locationId:"tour_arcanique_sommet",npcIds:["golem_chair_geant"],description:{resume:"Combat contre le Golem de Chair gant",visuel:"Plateforme circulaire, pylne nergie, Golem Chair 4m.",audio:"Grondement, craquements, bourdonnement.",odeur:"Dcomposition, ncromancie.",lumiere:"clairs violets."},narration:{declencheur:"Arrive sommet.",texte_a_lire:"Golem de Chair gant bloque pylne. 'Le... Matre... protger...'",contexte_mj:"Boss FP 9. Rgnration, dangers environnementaux.",objectif:"Vaincre Golem."},mecaniques:{defis:["Combat Golem FP9","Rgnration 5/round","clairs alatoires DD 16"],indices:["Feu ralentit rgnration","Li au pylne","Thade derrire"],recompenses:"Victoire, accs Thade."},transitions:{success:"Golem vaincu.",fail:"Doivent fuir."}},{title:"Scne 4 : Face  Thade",type:"Boss impossible",image:"./images/scenes/confrontation_thade.jpg",locationId:"tour_arcanique_sommet",npcIds:["thade_coren"],description:{resume:"Confrontation impossible contre Thade devenu liche",visuel:"Thade devant pylne, aura violette, transcende.",audio:"Incantation, bourdonnement, vent.",odeur:"Pouvoir brut, ozone.",lumiere:"Thade brille violet."},narration:{declencheur:"Aprs Golem.",texte_a_lire:"Thade flotte devant le pylne. Il ne vous regarde mme pas.  Le processus est irrversible. Votre prsence est... inefficace. ",contexte_mj:"Combat impossible. Thade Liche FP12+. Doivent fuir ou dtruire pylne.",objectif:"Survivre."},mecaniques:{defis:["Thade FP12 imbattable","Option A : Dtruire pylne DD20, 3 rounds","Option B : Fuir"],indices:["Trop puissant","Pylne = faiblesse dme","Durnik : Fuyez !"],recompenses:"Survie. Si pylne dtruit : 6d6 tous."},transitions:{success:"Fuient ou dtruisent pylne.",fail:"Morts ou capturs."}},{title:"Scne 5 : La Retraite",type:"Fuite",image:"./images/scenes/retraite_temple.jpg",locationId:"rues_valdombre_effondrement",npcIds:["thade_coren_poursuite"],description:{resume:"Fuite perdue vers le Temple sous les ruines",visuel:"Tour s'effondre, ville s'croule, fuite vers Temple.",audio:"Explosions, effondrements, rire Thade.",odeur:"Fume, poussire.",lumiere:"Chaos."},narration:{declencheur:"Fuite Tour.",texte_a_lire:"Thade : 'Fuyez vers la Spirale ! C'est l que je vous voulais !'",contexte_mj:"Course-poursuite. Skill challenge vers Temple.",objectif:"Atteindre Temple."},mecaniques:{defis:["Skill Challenge 4/3","Athltisme, Acrobaties, Rflexes"],indices:["Temple en vue","Thade ne poursuit pas physiquement","Spirale = pige"],recompenses:"Arrive Temple."},transitions:{success:"Atteignent Temple.",fail:"Rattraps, combat survie."}}]},{title:"ACTE 5 : LA DESCENTE DANS L'ABME",stake:"Fuir Val-d'Ombre en plongeant dans la Spirale.",location:"gouts, Cimetire, Entre Spirale.",scenes:[{title:"Scne 1 : Le Passage Secret",type:"Urgence",image:"./images/scenes/egouts_temple.jpg",locationId:"egouts_sous_temple",npcIds:["durnik_chef_mineur","thorgar_pretre_nain"],description:{resume:"Guidage des survivants dans les gouts instables",visuel:"gouts anciens, eau monte, structure s'effondre.",audio:"Eau, effondrements, pleurs.",odeur:"gouts, humidit, peur.",lumiere:"Torches vacillantes."},narration:{declencheur:"Descente gouts.",texte_a_lire:"Durnik : 'Passage vers cimetire, puis Spirale.' 50 nains survivants.",contexte_mj:"Skill challenge. Choix difficiles, rfugis perdus si checs.",objectif:"Guider survivants au cimetire."},mecaniques:{defis:["Skill Challenge 5/3","Athltisme, Connaissance Souterrains, Diplomatie"],indices:["gouts instables","Zombies errent","Cimetire proche"],recompenses:"Survivants selon succs."},transitions:{success:"Majorit survit.",fail:"Lourdes pertes."}},{title:"Scne 2 : Le Cimetire",type:"Combat",image:"./images/scenes/cimetiere_maudit.jpg",locationId:"cimetiere_valdombre",npcIds:["morts_vivants_anciens"],description:{resume:"Perce dans le cimetire infest de morts-vivants",visuel:"Brume paisse, tombes brises, hordes morts-vivants.",audio:"Grognements, cliquetis, vent.",odeur:"Terre, dcomposition.",lumiere:"Lune rouge  travers dme."},narration:{declencheur:"Sortie gouts.",texte_a_lire:"Cimetire rveill. Durnik : 'Mausole l-bas.' Centaines morts-vivants.",contexte_mj:"Combat horde infinie. Doivent percer et courir vers Mausole.",objectif:"Atteindre Mausole."},mecaniques:{defis:["Horde infinie","Percer lignes","Canalisation Thorgar cre passage"],indices:["100m jusqu'au Mausole","Certains rfugis submergs","Ne pas s'arrter"],recompenses:"Survie, arrive Mausole."},transitions:{success:"Atteignent Mausole.",fail:"Lourdes pertes."}},{title:"Scne 3 : Le Sacrifice de Durnik",type:"Sacrifice",image:"./images/scenes/sacrifice_durnik.jpg",locationId:"mausolee_entree",npcIds:["durnik_chef_mineur","gargouille_gardienne"],description:{resume:"Durnik se sacrifie pour sceller le passage",visuel:"Porte scelle, gargouille gante, horde approche.",audio:"Rugissement, grondement.",odeur:"Pierre, mort.",lumiere:"Torches contre obscurit."},narration:{declencheur:"Arrive Mausole.",texte_a_lire:"Durnik : 'Entrez ! Je vais la retenir !' Il sort explosifs. 'On se reverra dans les Halls de Moradin.'",contexte_mj:"Sacrifice hroque. Durnik meurt, scelle passage, tue gargouille.",objectif:"Accepter sacrifice."},mecaniques:{defis:["Option A : Accepter","Option B : Sauver DD22 (trs difficile)"],indices:["Durnik dtermin","Son sacrifice donne temps","Hros  honorer"],recompenses:"Passage scell, temps gagn."},transitions:{success:"Durnik meurt en hros.",fail:"Sauv bless ou mort sans sacrifice."}},{title:"Scne 4 : Les Gardiens",type:"Boss",image:"./images/scenes/chevaliers_mort.jpg",locationId:"mausolee_interieur",npcIds:["chevaliers_de_la_mort"],description:{resume:"Combat contre les Chevaliers de la Mort",visuel:"Salle circulaire, puits central, 4 Chevaliers armure noire.",audio:"Cliquetis, voix spectrales.",odeur:"Mtal rouill, mort.",lumiere:"Lueur spectrale."},narration:{declencheur:"Entre Mausole.",texte_a_lire:"Chevaliers : 'Nul ne passe.' Thorgar : 'Laissez-nous !' 'Si vous vaincez, vous tes dignes.'",contexte_mj:"4 Chevaliers FP6. Test de valeur. Si victoire, s'inclinent.",objectif:"Vaincre Chevaliers."},mecaniques:{defis:["4 Chevaliers FP6","Immunit critiques","Aura peur DD16"],indices:["Combattent avec honneur","Pas malveillants","Puits attend"],recompenses:"Victoire, respect, accs puits."},transitions:{success:"Chevaliers s'inclinent.",fail:"Jugs indignes."}},{title:"Scne 5 : Le Saut",type:"Conclusion",image:"./images/scenes/chute_spirale.jpg",locationId:"puits_spirale",npcIds:["thade_coren_apparition","thorgar_pretre_nain"],description:{resume:"Saut dans le puits menant  la Spirale",visuel:"Puits noir insondable, escaliers spirale, tnbres.",audio:"cho infini, murmures Spirale.",odeur:"Vide, nant.",lumiere:"Obscurit totale."},narration:{declencheur:"Aprs Chevaliers.",texte_a_lire:"Thade : 'Parfait. Fuyez dans la Spirale. Explorez-la pour moi. Vous tes mes claireurs.' Thorgar : 'Ensemble ?' Vous sautez.",contexte_mj:"Fin Scnario 3. Plonge Spirale. Thade a gagn, contrle ville, force PJ explorer.",objectif:"Sauter dans puits."},mecaniques:{defis:["Aucun jet","Volont DD12 : surmonter peur"],indices:["Pas d'autre choix","Thade les manipule","Spirale = moyen vaincre"],recompenses:"Transition Scnario 4."},transitions:{success:"Plongent dans Spirale.",fail:"N/A - choix narratif."}}]}]},kS={id:4,title:"SCNARIO 4 : LE LABYRINTHE VIVANT",level:"Niveaux 10-12",system:"D&D 3.5",synopsis:"Plongs dans les profondeurs de la Spirale aprs la chute de Val-d'Ombre, les PJ doivent survivre dans un labyrinthe vivant aux lois physiques impossibles. Ils dcouvrent le laboratoire secret de Thade, comprennent le secret de son immortalit, et tentent de pirater le systme de tlportation pour remonter  la surface et l'affronter une dernire fois.",acts:[{title:"ACTE 1 : LA CHUTE DANS L'IMPOSSIBLE",stake:"Survivre  la chute et s'adapter aux lois aberrantes de la Spirale.",location:"Zone des Dchets et Priphrie de la Spirale.",scenes:[{title:"Scne 1 : La Chute Infinie",type:"Cinmatique / Action",image:"./images/scenes/chute_spirale_infinie.jpg",locationId:"spirale_puits_entree",npcIds:["thorgar_pretre_nain","refugies_nains"],description:{resume:"Chute dans la Spirale avec inversion de gravit",visuel:"Vous tombez dans le puits noir. Mais aprs quelques secondes, la gravit s'inverse brutalement. Vous tombez maintenant vers le haut, vers une vote de pierre vivante qui pulse comme un cur. Les rfugis nains hurlent. Thorgar prie.",audio:"Vent hurlant, cris, puis silence soudain quand la gravit s'inverse.",odeur:"Ozone, pierre humide, quelque chose d'organique.",lumiere:"Obscurit puis lueur violette pulsante de la vote."},narration:{declencheur:"Saut dans le puits  la fin du Scnario 3.",texte_a_lire:"Vous tombez. L'obscurit vous engloutit. Le vent hurle dans vos oreilles. Puis, soudain, votre estomac se retourne. La gravit s'inverse. Vous tombez maintenant vers le haut, vers une vote de pierre qui pulse d'une lueur violette malsaine. Thorgar crie : 'Prparez-vous  l'impact !' Vous frappez la vote... mais au lieu de vous craser, vous la traversez comme si elle tait liquide. De l'autre ct, la gravit change encore. Vous tombez latralement, puis en spirale. La Spirale joue avec vous. Finalement, vous atterrissez brutalement sur une surface dure.",contexte_mj:"Scne d'introduction spectaculaire. Les PJ subissent 4d6 dgts de chute (Rflexes DD 15 pour moiti). Test Vigueur DD 14 ou tat Nauseux 1d4 rounds. C'est le premier contact avec les lois impossibles de la Spirale.",objectif:"Survivre  la chute et se relever."},mecaniques:{defis:["Rflexes DD 15 : Rduire dgts chute de moiti (4d6  2d6)","Vigueur DD 14 : viter Nauseux 1d4 rounds","Perception DD 12 : Remarquer que certains rfugis n'ont pas survcu"],indices:["La gravit change constamment","La pierre est vivante, organique","Vous tes dans un espace impossible"],recompenses:"Survie. Premire adaptation aux lois de la Spirale."},transitions:{success:"Les PJ se relvent et valuent la situation.",fail:"Les PJ sont blesss et dsorients."}},{title:"Scne 2 : Les Charognards",type:"Combat / Horreur",image:"./images/scenes/charognards_ether.jpg",locationId:"spirale_zone_dechets",npcIds:["destrachans"],description:{resume:"Combat contre les Destrachans chassant au son",visuel:"Vous tes dans une zone de dbris flottants : pierres, ossements, objets tordus. Des cratures mergent : des Destrachans, prdateurs aveugles qui chassent au son. Ils sont attirs par les cris des blesss.",audio:"Cliquetis des dbris, cris harmoniques des Destrachans.",odeur:"Pourriture, ozone.",lumiere:"Lueur violette diffuse. Ombres mouvantes."},narration:{declencheur:"Les cris des blesss attirent les prdateurs.",texte_a_lire:"Vous vous relevez pniblement. Autour de vous, une zone de dbris flottants. Certains rfugis sont blesss, d'autres... ne bougeront plus. Soudain, Thorgar lve la main : 'Silence !' Trop tard. Des formes mergent de l'obscurit : des cratures sans yeux, peau translucide, gueules bantes. Des Destrachans. Ils chassent au son. Et ils ont entendu vos cris.",contexte_mj:"Premier combat dans la Spirale. 3 Destrachans (FP 8). Terrain difficile : dbris flottants, gravit instable. Les Destrachans utilisent leur cri destructeur. Le silence est une tactique viable.",objectif:"Vaincre ou fuir les Destrachans."},mecaniques:{defis:["Combat : 3 Destrachans FP 8","Terrain : Dbris flottants (Acrobaties DD 12 pour se dplacer)","Destrachans : Cri destructeur (cne 9m, 6d6 son, Vigueur DD 16 moiti)","Tactique : Sort Silence trs efficace (les aveugle compltement)"],indices:["Aveugles, chassent au son","Vulnrables au silence","Terrain instable peut tre utilis"],recompenses:"XP. Comprhension des dangers de la Spirale."},transitions:{success:"Destrachans vaincus ou fuis.",fail:"PJ blesss, doivent fuir."}},{title:"Scne 3 : Les les Flottantes",type:"Exploration / Survie",image:"./images/scenes/iles_flottantes.jpg",locationId:"spirale_zone_dechets",npcIds:["thorgar_pretre_nain"],description:{resume:"Repos prcaire sur des les qui se dsagrgent",visuel:"Vous progressez sur des les de pierre flottant dans le vide. Brume violette en dessous. Chaque le est instable, se dsagrgeant lentement. Thorgar compte les survivants : 30 nains sur 50.",audio:"Craquements de pierre, murmures de la brume.",odeur:"Pierre humide, quelque chose de sucr et curant.",lumiere:"Lueur violette de la brume, ombres dansantes."},narration:{declencheur:"Aprs le combat, progression force.",texte_a_lire:"Vous avancez prudemment sur des les de pierre flottant dans le vide. En dessous, une brume violette insondable. Thorgar fait le dcompte : 30 nains survivants. Il vous regarde, puis : 'Nous devons nous reposer. Mais...' Il dsigne une le. Vous voyez qu'elle se dsagrge lentement, des morceaux tombant dans la brume. 'Rien n'est stable ici. Si nous dormons trop longtemps...' Il n'a pas besoin de finir sa phrase.",contexte_mj:"Dilemme de survie. Les PJ doivent se reposer (rcuprer sorts, PV) mais les les se dsagrgent. Rgle : Aprs 4 heures, l'le commence  s'effondrer. Les PJ doivent trouver une solution (tours de garde, sorts de lvitation, trouver une le stable).",objectif:"Trouver un moyen de se reposer en scurit."},mecaniques:{defis:["Survie DD 16 : Trouver une le plus stable","Perception DD 14 : Dtecter signes de dsagrgation","Connaissance (Plans) DD 18 : Comprendre que la Spirale rejette ce qui est inerte","Solution : Rester veill, tours de garde, sorts de lvitation"],indices:["Les les se dsagrgent si on reste trop longtemps","La Spirale rejette l'immobilit","Il faut bouger constamment ou trouver une zone stable"],recompenses:"Repos russi = rcupration. chec = pas de repos, fatigue."},transitions:{success:"Repos russi, PJ rcuprs.",fail:"le s'effondre, fuite prcipite, pas de repos."}},{title:"Scne 4 : Le Bivouac Oubli",type:"Dcouverte / Lore",image:"./images/scenes/bivouac_squelette.jpg",locationId:"spirale_zone_dechets",npcIds:[],description:{resume:"Dcouverte du bivouac d'une ancienne expdition",visuel:"Sur une le plus grande, vous trouvez un bivouac ancien. Un squelette nain en armure, assis contre un rocher.  ses pieds, des objets : une bouteille de cristal, un journal, des armes rouilles.",audio:"Silence. Juste le vent lointain.",odeur:"Poussire ancienne, mtal oxyd.",lumiere:"Lueur violette attnue. L'le semble plus stable."},narration:{declencheur:"Dcouverte d'une le stable.",texte_a_lire:"Vous trouvez une le plus grande, plus stable. Et l, un bivouac ancien. Un squelette nain, en armure de la garde de Val-d'Ombre, assis contre un rocher. Mort depuis des annes. Thorgar s'agenouille : 'Frre Durin. Il faisait partie de la premire expdition, il y a 20 ans.' Il ferme les yeux du squelette. Vous fouillez le camp. Un journal, une bouteille de cristal trange, des armes. Le journal dit : 'Jour 47. La tour bouge. La gographie change. Nous sommes perdus. Que Moradin nous pardonne.'",contexte_mj:"Moment de lore. Les PJ dcouvrent que d'autres sont venus avant eux et sont morts. Le journal rvle que la Spirale est un labyrinthe changeant. La bouteille est un objet magique : Bouteille d'Air Infini (permet de respirer dans n'importe quel environnement).",objectif:"Rcuprer informations et objets."},mecaniques:{defis:["Fouille DD 12 : Trouver tous les objets","Dchiffrement DD 10 : Lire le journal (nain ancien)","Connaissance (Histoire) DD 16 : Reconnatre l'armure (premire expdition)"],indices:["D'autres sont venus avant","La gographie change","La Spirale est un labyrinthe vivant"],recompenses:"Bouteille d'Air Infini, Journal (infos), Armes +1 rouilles (rparables)."},transitions:{success:"PJ quips et informs.",fail:"Ratent certains objets."}},{title:"Scne 5 : Le Shift Gographique",type:"Rvlation / Twist",image:"./images/scenes/shift_geographie.jpg",locationId:"spirale_transition",npcIds:["thorgar_pretre_nain"],description:{resume:"La gographie change pendant le sommeil",visuel:"Aprs un repos dans une grotte, vous vous rveillez. La sortie de la grotte ne donne plus sur les les flottantes, mais sur un couloir de marbre blanc, parfaitement gomtrique. La gographie a chang pendant votre sommeil.",audio:"Silence absolu. Puis un bourdonnement lointain.",odeur:"Pierre froide, ozone.",lumiere:"Lumire blanche artificielle, sans source visible."},narration:{declencheur:"Rveil aprs repos.",texte_a_lire:"Vous vous rveillez. Thorgar est dj debout, fixant la sortie de la grotte. 'Quelque chose ne va pas.' Vous vous approchez. La sortie ne donne plus sur les les flottantes et la brume violette.  la place, un couloir de marbre blanc, parfaitement lisse, s'tend devant vous. Des runes brillent sur les murs. Ce n'tait pas l hier. Thorgar murmure : 'Le journal disait vrai. La tour bouge. La Spirale se rorganise.' Vous ralisez : vous tes dans un labyrinthe vivant qui change constamment. Il n'y a pas de carte. Pas de retour en arrire possible.",contexte_mj:"Twist majeur. Les PJ comprennent que la Spirale est un espace non-euclidien qui se rorganise. Cela explique pourquoi personne n'en est jamais revenu : impossible de retrouver son chemin. La seule option : avancer et trouver un moyen de contrler la Spirale ou de la quitter.",objectif:"Accepter la ralit et avancer."},mecaniques:{defis:["Volont DD 14 : Ne pas paniquer face  l'impossible","Connaissance (Plans) DD 20 : Comprendre la nature non-euclidienne","Aucun jet ne permet de retrouver le chemin. C'est impossible."],indices:["La Spirale se rorganise","Pas de retour possible","Seule option : avancer","Les runes sur les murs sont un langage inconnu"],recompenses:"Comprhension de la nature de la Spirale. Motivation pour trouver une sortie."},transitions:{success:"PJ acceptent et entrent dans le couloir.",fail:"PJ paniquent mais n'ont pas le choix."}}]},{title:"ACTE 2 : L'COSYSTME ABERRANT",stake:"S'adapter aux lois impossibles et progresser vers les profondeurs.",location:"Couloirs de Chair et Zones Organiques.",scenes:[{title:"Scne 1 : La Salle de Gravit Variable",type:"Combat / Environnement",image:"./images/scenes/salle_gravite.jpg",locationId:"spirale_couloirs_chair",npcIds:["gargouilles_cristal"],description:{resume:"Combat avec gravit changeante contre gargouilles",visuel:"Grande salle cubique, murs de cristal. La gravit change chaque round : sol, plafond, murs latraux. Des Gargouilles de cristal volent, immunises  ces changements.",audio:"Bourdonnement quand gravit change, cris gargouilles.",odeur:"Ozone, cristal.",lumiere:"Reflets kalidoscopiques."},narration:{declencheur:"Entre dans couloir marbre.",texte_a_lire:"Vous entrez dans une salle cubique aux murs de cristal. Soudain, la gravit bascule. Vous tombez vers le plafond. Puis vers un mur. Chaque round, la direction change. Des Gargouilles de cristal vous attaquent, parfaitement adaptes.",contexte_mj:"Combat avec gravit changeante. Chaque round, jet 1d6 : 1-2 sol, 3-4 plafond, 5 mur gauche, 6 mur droit. Acrobaties DD 14 pour ne pas tomber. Gargouilles immunises.",objectif:"Vaincre gargouilles et traverser."},mecaniques:{defis:["Combat : 4 Gargouilles Cristal FP 7","Gravit change chaque round","Acrobaties DD 14 : rester stable","Sorts vol/lvitation trs utiles"],indices:["Gargouilles immunises gravit","Cristaux murs = points d'ancrage","Sortie en face"],recompenses:"XP, adaptation gravit variable."},transitions:{success:"Traverse russie.",fail:"PJ blesss par chutes."}},{title:"Scne 2 : Le Marchand de l'Impossible",type:"Rencontre / RP",image:"./images/scenes/marchand_souvenirs.jpg",locationId:"spirale_carrefour_mercane",npcIds:["xareth_mercane"],description:{resume:"Rencontre avec Xareth le marchand Mercane",visuel:"Carrefour de couloirs. Un tre trange : Xareth, Mercane exil. choppe flottante avec objets impossibles. Il sourit : 'Bienvenue, voyageurs. Tout se vend ici.'",audio:"Tintement objets magiques, voix mlodieuse Xareth.",odeur:"Encens exotique, magie.",lumiere:"Lueur dore choppe."},narration:{declencheur:"Arrive carrefour.",texte_a_lire:"Au milieu du nant, un tre  la peau bleue, vtu de soie, trie des fioles. Ilse tiens dans ce qui ressemble a une choppe.  L'or n'a pas de cours ici. Je prends ce qui est rel. Un souvenir d'enfance, la matrise d'une langue, un an de votre esprance de vie. Choisissez vite, la ralit va bientt changer de forme. ",contexte_mj:"Rencontre unique. Xareth vend objets magiques puissants contre souvenirs (perte comptence), PV max permanents, ou annes vie. Donne info : laboratoire Thade plus bas. Peut tre alli si bien trait.",objectif:"Ngocier, obtenir infos."},mecaniques:{defis:["Diplomatie DD 16 : ngocier","Psychologie DD 18 : comprendre motivations","Choix : acheter objets ? Prix lev"],indices:["Labo Thade niveau -12","Xareth exil, hait Thade","Peut devenir alli"],recompenses:"Infos, objets magiques (si achat)."},transitions:{success:"Alliance ou commerce.",fail:"Xareth indiffrent."}},{title:"Scne 3 : Les Couloirs Vivants",type:"Horreur / Combat",image:"./images/scenes/couloirs_chair.jpg",locationId:"spirale_couloirs_chair",npcIds:["gibbering_mouther_colossal"],description:{resume:"Couloirs de chair vivante et Gibbering Mouther",visuel:"Couloirs de chair pulsante. Yeux partout. Bouches murmurent. Au bout, une masse : Gibbering Mouther colossal, fusion de victimes.",audio:"Murmures incessants, gargouillements.",odeur:"Chair, bile.",lumiere:"Lueur organique malsaine."},narration:{declencheur:"Progression force.",texte_a_lire:"Les couloirs changent. Marbre devient chair. Murs pulsent. Yeux vous fixent. Bouches murmurent vos peurs. Au bout, une abomination : masse de chair avec dizaines bouches et yeux. Gibbering Mouther colossal.",contexte_mj:"Combat horreur. Mouther FP 10. Murmures = confusion (Volont DD 16). Terrain difficile (chair glissante). Feu efficace.",objectif:"Vaincre ou fuir Mouther."},mecaniques:{defis:["Combat : Gibbering Mouther Colossal FP 10","Murmures : Volont DD 16 ou Confusion 1 round","Terrain glissant : Acrobaties DD 12","Feu : dgts x1.5"],indices:["Vulnrable feu","Murmures = attaque mentale","Yeux murs observent"],recompenses:"XP, traverse zone organique."},transitions:{success:"Mouther vaincu.",fail:"Fuite, contournement."}},{title:"Scne 4 : Le Miroir des Regrets",type:"Puzzle / Psychologique",image:"./images/scenes/miroir_regret.jpg",locationId:"spirale_salle_miroirs",npcIds:[],description:{resume:"Miroirs exigent d'avouer ses faiblesses",visuel:"Salle miroirs. Reflets ne bougent pas, vous fixent. Pour passer, porte demande : 'Donnez ce que vous cachez.'",audio:"Silence oppressant, chos penses.",odeur:"Rien, vide.",lumiere:"Reflets argents."},narration:{declencheur:"Salle bloque passage.",texte_a_lire:"Vos reflets ne bougent pas en mme temps que vous. Ils vous regardent avec mpris. Vous sentez une pression psychique intense, comme si votre propre esprit essayait de vous expulser. Pour briser la boucle, il faut lcher du lest : un secret, une honte, quelque chose de lourd.",contexte_mj:"Puzzle psychologique. Chaque PJ doit avouer une faiblesse/regret  voix haute. Roleplay important. Si refus, reflet attaque (clone hostile). Si aveu sincre, porte s'ouvre.",objectif:"Avouer faiblesse ou combattre reflet."},mecaniques:{defis:["Roleplay : avouer faiblesse/regret","Si refus : combat clone (stats identiques)","Psychologie DD 14 : comprendre test","Bluff DD 20 : mentir (difficile, reflet sait)"],indices:["Test sincrit","Reflets = vous","Spirale teste valeur"],recompenses:"Passage, dveloppement perso."},transitions:{success:"Aveux, porte ouvre.",fail:"Combat reflets."}},{title:"Scne 5 : La Vis Descendante",type:"Action / Transition",image:"./images/scenes/vis_geante.jpg",locationId:"spirale_puits_vis",npcIds:[],description:{resume:"Descente sur la vis gante tournante",visuel:"Puits immense. Vis gante tourne lentement, descendant. Seul moyen progresser : sauter dessus et descendre avec elle.",audio:"Grincement mcanique, cho profond.",odeur:"Mtal, huile.",lumiere:"Obscurit en bas, lueur en haut."},narration:{declencheur:"Fin couloirs organiques.",texte_a_lire:"Vous arrivez  un puits. Une vis gante, large de 10m, tourne lentement, descendant dans l'obscurit. Thorgar : 'C'est le seul chemin.' Vous devez sauter dessus et descendre.",contexte_mj:"Skill challenge. Acrobaties DD 14 pour sauter sur vis. Puis descente 10 minutes. Dangers : cratures volantes, piges mcaniques. Arrive niveau laboratoire.",objectif:"Descendre sur vis."},mecaniques:{defis:["Acrobaties DD 14 : sauter sur vis","quilibre DD 12 : rester stable pendant descente","Perception DD 16 : dtecter dangers","Combat possible : Mephits vapeur"],indices:["Vis mne laboratoire","Descente longue","Dangers en route"],recompenses:"Arrive niveau -12, laboratoire."},transitions:{success:"Descente russie.",fail:"Chute partielle, dgts."}}]},{title:"ACTE 3 : LE LABORATOIRE INTERDIT",stake:"Dcouvrir le secret de l'immortalit de Thade.",location:"Laboratoire Secret de Thade (Niveau -12).",scenes:[{title:"Scne 1 : Le Sas Fortifi",type:"Infiltration / Combat",image:"./images/scenes/sas_labo.jpg",locationId:"spirale_labo_secret",npcIds:["golems_fer"],description:{resume:"Infiltration du laboratoire fortifi de Thade",visuel:"Base fortifie incruste dans paroi Spirale. Porte technomagique, runes complexes. 2 Golems de Fer gardent.",audio:"Bourdonnement magique, pas lourds golems.",odeur:"Mtal, magie.",lumiere:"Runes bleues pulsantes."},narration:{declencheur:"Arrive niveau -12.",texte_a_lire:"Vous trouvez une base fortifie. Porte massive, runes complexes. Deux Golems de Fer gardent. C'est le laboratoire de Thade.",contexte_mj:"Infiltration ou combat. Porte : Dsamorage DD 22 ou mot de passe (trouvable journal Durin). Golems FP 9. Si alarme, renfort.",objectif:"Entrer dans laboratoire."},mecaniques:{defis:["Dsamorage DD 22 : ouvrir porte","Combat : 2 Golems Fer FP 9","Discrtion DD 18 : viter alarme","Mot passe dans journal Durin"],indices:["Runes = serrure magique","Golems immuniss magie","Alarme si chec"],recompenses:"Accs laboratoire."},transitions:{success:"Entre discrte.",fail:"Combat, alarme dclenche."}},{title:"Scne 2 : La Bibliothque des mes",type:"Lore / Horreur",image:"./images/scenes/bibliotheque_ames.jpg",locationId:"spirale_bibliotheque_ames",npcIds:[],description:{resume:"Dcouverte du secret d'immortalit de Thade",visuel:"Salle circulaire. tagres avec bocaux de cristal contenant mes lumineuses. Journal de Thade sur pupitre central.",audio:"Murmures mes, silence oppressant.",odeur:"Ozone, quelque chose de brl.",lumiere:"Lueur des mes prisonnires."},narration:{declencheur:"Premire salle labo.",texte_a_lire:"C'est froid, clinique. Des bocaux d'mes tiquets comme des spcimens de laboratoire. Le journal de Thade est ouvert :'Jour 847. Succs. J'ai remplac mon cur par un clat de la Spirale. Je suis immortel. Tant que la Spirale existe, j'existe.'",contexte_mj:"Rvlation majeure : Thade a fusionn avec la Spirale. Son cur est un clat. Pour le tuer, il faut dtruire l'clat OU la Spirale elle-mme. Les mes sont ses expriences.",objectif:"Lire journal, comprendre immortalit."},mecaniques:{defis:["Lecture journal : infos compltes","Connaissance Arcanes DD 18 : comprendre processus","Choix : librer mes ? (bon acte mais alarme)"],indices:["Cur = clat Spirale","Immortel tant que Spirale existe","mes = expriences rates"],recompenses:"Secret immortalit Thade."},transitions:{success:"Infos obtenues.",fail:"Infos partielles."}},{title:"Scne 3 : L'Usine  Horreurs",type:"Horreur / Sabotage",image:"./images/scenes/usine_soldats.jpg",locationId:"spirale_usine_clonage",npcIds:[],description:{resume:"Usine de production d'arme mort-vivante",visuel:"Chane montage macabre. Corps rassembls, mes implantes. Zombies amliors, golems chair. Production masse.",audio:"Machines, gargouillements, cris touffs.",odeur:"Chair, produits chimiques, mort.",lumiere:"Lueur verte malsaine."},narration:{declencheur:"Salle suivante.",texte_a_lire:"Une usine. Thade cre son arme ici. Corps assembls, mes forces dedans. Des centaines. Vous pouvez saboter.",contexte_mj:"Choix moral. Sabotage (Ingnierie DD 18) dtruit usine, ralentit arme Thade. Mais dclenche alarme et combat. Ou passer discrtement.",objectif:"Saboter ou passer."},mecaniques:{defis:["Ingnierie DD 18 : sabotage","Si sabotage : alarme, combat prototypes","Discrtion DD 16 : passer sans tre vu"],indices:["Usine cre arme","Sabotage = avantage futur","Alarme si sabotage"],recompenses:"Si sabotage : arme Thade affaiblie."},transitions:{success:"Sabotage ou passage.",fail:"Dtects, combat."}},{title:"Scne 4 : Le Sujet Zro",type:"Boss",image:"./images/scenes/sujet_zero.jpg",locationId:"spirale_salle_test",npcIds:["sujet_zero"],description:{resume:"Combat contre le Sujet Zro hybride",visuel:"Salle test. Crature enchane : fusion Troll/Dmon. Sujet Zro, prototype parfait de Thade. Vous entrez, chanes se brisent.",audio:"Rugissement, chanes brises.",odeur:"Soufre, chair.",lumiere:"Rougeoyante, infernale."},narration:{declencheur:"Salle gardien.",texte_a_lire:"Une crature massive. Troll/Dmon fusionn. Sujet Zro. Les chanes se brisent. Il charge.",contexte_mj:"Boss FP 11. Rgnration 10/round (feu/acide stop). Rsistance magie 20. Attaques puissantes. Difficile.",objectif:"Vaincre Sujet Zro."},mecaniques:{defis:["Combat : Sujet Zro FP 11","Rgnration 10/round","RM 20","Feu/acide stop rgnration"],indices:["Vulnrable feu/acide","Trs rsistant","Prototype Thade"],recompenses:"XP, accs armurerie."},transitions:{success:"Sujet Zro vaincu.",fail:"Fuite, contournement."}},{title:"Scne 5 : L'Armurerie Interdite",type:"Rcompense / Dcouverte",image:"./images/scenes/armurerie_secrete.jpg",locationId:"spirale_armurerie",npcIds:[],description:{resume:"Rcupration du Cube Runique et armes puissantes",visuel:"Armurerie. Armes exprimentales, objets magiques dangereux. Au centre : Cube Runique, cl contrle Spirale.",audio:"Bourdonnement magique.",odeur:"Ozone, mtal.",lumiere:"Lueur objets magiques."},narration:{declencheur:"Aprs Sujet Zro.",texte_a_lire:"Armurerie de Thade. Armes puissantes. Au centre : Cube Runique. Xareth vous avait parl de a. C'est la cl pour contrler les mcanismes de la Spirale.",contexte_mj:"Loot majeur. Cube Runique = cl Acte 4. Armes +2/+3, objets magiques. Les PJ peuvent s'quiper pour final.",objectif:"Rcuprer Cube et quipement."},mecaniques:{defis:["Fouille : trouver meilleurs objets","Connaissance Arcanes DD 16 : identifier Cube","Choix : quels objets prendre ?"],indices:["Cube = cl contrle","Armes puissantes","quipement pour final"],recompenses:"Cube Runique, armes +2/+3, objets magiques."},transitions:{success:"PJ quips, ont Cube.",fail:"Objets partiels."}}]},{title:"ACTE 4 : LE CUR MCANIQUE",stake:"Pirater le systme de tlportation pour remonter.",location:"Salle des Engrenages Planaires.",scenes:[{title:"Scne 1 : Les Engrenages Infinis",type:"Environnement",image:"./images/scenes/engrenages_geants.jpg",locationId:"spirale_engrenages",npcIds:[],description:{resume:"Traverse des engrenages planaires gants",visuel:"Salle immense. Engrenages gants tournent dans vide, connectant plans. Bruit assourdissant. Passerelles troites.",audio:"Fracas mcanique assourdissant.",odeur:"Huile, mtal chaud.",lumiere:"clairs nergie planaire."},narration:{declencheur:"Sortie laboratoire.",texte_a_lire:"Vous entrez dans le cur de la Spirale. Des engrenages gants, larges de 50m, tournent dans le vide. C'est le mcanisme qui connecte les plans. Le bruit est assourdissant.",contexte_mj:"Zone dangereuse. Bruit : malus -10 Perception auditive, concentration sorts DD +5. Chutes mortelles. Traverse ncessaire.",objectif:"Traverser vers salle contrle."},mecaniques:{defis:["Acrobaties DD 16 : traverser passerelles","Malus bruit : -10 Perception, +5 DD sorts","Chute = mort (vide infini)"],indices:["Engrenages = connexions planaires","Salle contrle au bout","Danger mortel"],recompenses:"Traverse russie."},transitions:{success:"Atteignent salle contrle.",fail:"Chutes, dgts."}},{title:"Scne 2 : Le Contrematre",type:"Rencontre / Combat",image:"./images/scenes/inevitable.jpg",locationId:"spirale_salle_controle",npcIds:["kolyarut_inevitable"],description:{resume:"Ngociation ou combat contre le Kolyarut",visuel:"Salle contrle. Console complexe. Gardien : Kolyarut, Inevitable (construct Loi). Il bloque accs.",audio:"Voix mtallique, bourdonnement.",odeur:"Ozone, mtal.",lumiere:"Lueur console."},narration:{declencheur:"Arrive salle contrle.",texte_a_lire:"Le construct barre le passage. Sa voix est un bourdonnement monotone :  Violation de protocole dtecte. Entits biologiques non autorises. limination. ",contexte_mj:"Choix : combat (FP 12, difficile) OU ngociation (Diplomatie DD 20). Argument : Thade menace quilibre planaire. Si convaincu, Inevitable aide.",objectif:"Passer Inevitable."},mecaniques:{defis:["Combat : Kolyarut FP 12 (difficile)","Diplomatie DD 20 : convaincre","Argument : Thade = menace Loi"],indices:["Inevitable = Loi","Thade viole quilibre","Ngociation possible"],recompenses:"Accs console, alli potentiel."},transitions:{success:"Inevitable convaincu ou vaincu.",fail:"Combat difficile."}},{title:"Scne 3 : Sabotage du Flux",type:"Action / Sabotage",image:"./images/scenes/console_controle.jpg",locationId:"spirale_salle_controle",npcIds:[],description:{resume:"Sabotage du flux d'nergie alimentant Thade",visuel:"Console contrle flux nergie Spirale  Surface. Vous pouvez couper, affaiblissant Thade.",audio:"Bourdonnement console.",odeur:"Ozone.",lumiere:"crans runiques."},narration:{declencheur:"Accs console.",texte_a_lire:"Console contrle flux nergie. Thade pompe nergie Spirale vers surface. Vous pouvez couper, l'affaiblissant pour combat final.",contexte_mj:"Choix stratgique. Sabotage (Ingnierie DD 18 ou Cube Runique auto-succs) coupe flux. Thade affaibli combat final (-2 niveaux sorts). Mais alarme.",objectif:"Saboter flux."},mecaniques:{defis:["Ingnierie DD 18 : sabotage","Cube Runique : auto-succs","Sabotage = Thade affaibli final"],indices:["Flux = pouvoir Thade","Sabotage = avantage","Alarme dclenche"],recompenses:"Thade affaibli combat final."},transitions:{success:"Flux coup.",fail:"chec, Thade pleine puissance."}},{title:"Scne 4 : Piratage du Portail",type:"Puzzle / Hacking",image:"./images/scenes/portail_teleport.jpg",locationId:"spirale_salle_portail",npcIds:[],description:{resume:"Inverser la destination.",visuel:"Plateforme tlportation. Destination actuelle : profondeurs. Vous devez inverser vers 'Tour des Mages, Val-d'Ombre'.",audio:"Bourdonnement portail.",odeur:"Ozone.",lumiere:"Lueur portail."},narration:{declencheur:"Aprs sabotage.",texte_a_lire:"Plateforme tlportation. Cube Runique permet reprogrammer. Destination : Tour des Mages. Vous allez remonter directement dans QG Thade.",contexte_mj:"Puzzle. Cube Runique facilite (DD 14 au lieu 22). Reprogrammation russie = tlportation vers surface. chec = destination alatoire (danger).",objectif:"Reprogrammer portail."},mecaniques:{defis:["Utilisation Objets Magiques DD 14 (avec Cube) ou DD 22 (sans)","Connaissance Arcanes DD 16 : comprendre systme"],indices:["Cube = cl","Destination : Tour Mages","chec = alatoire"],recompenses:"Portail reprogramm."},transitions:{success:"Portail prt.",fail:"Destination alatoire."}},{title:"Scne 5 : Activation",type:"Transition",image:"./images/scenes/activation_portail.jpg",locationId:"spirale_salle_portail",npcIds:["thorgar_pretre_nain"],description:{resume:"mergence surprise dans la Tour des Mages",visuel:"Thorgar et survivants nains vous rejoignent. Vous activez portail. Lumire aveuglante. Tlportation commence.",audio:"Bourdonnement croissant.",odeur:"Ozone intense.",lumiere:"Lumire blanche."},narration:{declencheur:"Activation portail.",texte_a_lire:"Thorgar : 'C'est le moment. Retournons finir ce que nous avons commenc.' Vous activez le portail. La lumire vous engloutit.",contexte_mj:"Transition vers Acte 5. Tlportation spectaculaire. PJ remontent vers surface.",objectif:"Tlportation."},mecaniques:{defis:["Aucun"],indices:["Retour surface","Combat final approche"],recompenses:"Tlportation russie."},transitions:{success:"Acte 5 commence.",fail:"N/A."}}]},{title:"ACTE 5 : L'ASCENSION FINALE",stake:"Remonter  la surface et affronter Thade.",location:"Tunnel de Tlportation et Tour des Mages.",scenes:[{title:"Scne 1 : Les Gardiens du Passage",type:"Combat",image:"./images/scenes/demons_ombres.jpg",locationId:"spirale_tunnel_teleport",npcIds:["demons_ombres"],description:{resume:"La dernire dfense.",visuel:"Tunnel tlportation. 2 Dmons Ombres bloquent. Chrono : 5 rounds avant purge tunnel.",audio:"Sifflements dmons, alarme.",odeur:"Soufre.",lumiere:"Tnbres, clairs."},narration:{declencheur:"Dans tunnel.",texte_a_lire:"Deux Dmons des Ombres vous attaquent. Alarme rsonne : 'Purge tunnel dans 5 rounds.' Vous devez les vaincre vite.",contexte_mj:"Combat chrono. 5 rounds pour vaincre dmons (FP 11 chacun). Si chec, purge = 10d6 tous. Combat intense.",objectif:"Vaincre dmons en 5 rounds."},mecaniques:{defis:["Combat : 2 Dmons Ombres FP 11","Chrono : 5 rounds","Si chec : purge 10d6"],indices:["Vulnrables lumire","Chrono serr","Victoire rapide ncessaire"],recompenses:"Passage libre."},transitions:{success:"Dmons vaincus.",fail:"Purge, dgts."}},{title:"Scne 2 : La Remonte",type:"Cinmatique",image:"./images/scenes/teleportation_lumiere.jpg",locationId:"spirale_tunnel_teleport",npcIds:[],description:{resume:"Activation de la tlportation vers la surface",visuel:"Vous remontez  vitesse impossible. Aperus niveaux Spirale dfilent. Visions horreurs, merveilles.",audio:"Sifflement tlportation.",odeur:"Ozone.",lumiere:"Lumire stroboscopique."},narration:{declencheur:"Aprs dmons.",texte_a_lire:"Vous remontez. Les niveaux de la Spirale dfilent : zones organiques, mcaniques, impossibles. Vous voyez tout.",contexte_mj:"Scne cinmatique. Les PJ voient structure complte Spirale. Moment pique.",objectif:"Remonter."},mecaniques:{defis:["Aucun"],indices:["Spirale = immense","Niveaux infinis","Presque surface"],recompenses:"Comprhension Spirale."},transitions:{success:"Continuent remonte.",fail:"N/A."}},{title:"Scne 3 : Le Blocage de Thade",type:"Duel Mental",image:"./images/scenes/duel_volonte.jpg",locationId:"spirale_tunnel_teleport",npcIds:["thade_coren"],description:{resume:"Le dernier obstacle.",visuel:"Projection Thade apparat dans tunnel : 'Vous n'irez nulle part.' Il tente bloquer tlportation.",audio:"Voix Thade amplifie.",odeur:"Ozone.",lumiere:"Projection violette."},narration:{declencheur:"Presque surface.",texte_a_lire:"L'image de Thade scintille devant vous.  Tentative d'extraction non autorise. Verrouillage du primtre.  Il ne vous parle pas, il donne un ordre au systme.",contexte_mj:"Duel mental. Volont oppose. PJ vs Thade (+15). Si PJ gagnent, passent. Si perdent, ralentis (dgts 3d6 psychiques).",objectif:"Rsister  Thade."},mecaniques:{defis:["Volont oppose vs Thade +15","Si chec : 3d6 psychiques","Si sabotage flux : Thade +13 au lieu +15"],indices:["Thade affaibli si sabotage","Duel mental","Rsistance ncessaire"],recompenses:"Passage russi."},transitions:{success:"Thade repouss.",fail:"Dgts, ralentis."}},{title:"Scne 4 : Vision de Val-d'Ombre",type:"Rvlation",image:"./images/scenes/valdombre_ruines.jpg",locationId:"spirale_tunnel_teleport",npcIds:[],description:{resume:"Ce qui reste.",visuel:"Vision : Val-d'Ombre en ruines. Dme violet. Ncropole. Mais aussi : survivants rsistent encore.",audio:"chos lointains.",odeur:"Rien.",lumiere:"Vision spectrale."},narration:{declencheur:"Approche surface.",texte_a_lire:"Vous voyez Val-d'Ombre. Ruines. Mais des survivants luttent encore. Vous n'tes pas seuls. Motivation renouvele.",contexte_mj:"Moment inspiration. Bonus moral +2 jets 1 heure. Les PJ voient que leur lutte a du sens.",objectif:"Voir vrit."},mecaniques:{defis:["Aucun"],indices:["Survivants existent","Espoir reste","Combat final proche"],recompenses:"Bonus moral +2."},transitions:{success:"Motivs.",fail:"N/A."}},{title:"Scne 5 : Irruption dans la Tour",type:"Cliffhanger",image:"./images/scenes/irruption_tour.jpg",locationId:"valdombre_tour_mages_sommet",npcIds:["thade_coren","lieutenants_thade"],description:{resume:"Au cur de l'ennemi.",visuel:"Explosion. Vous mergez du sol de la Tour des Mages. Thade vous attend, entour de ses lieutenants. Combat final commence.",audio:"Explosion, cris alarme.",odeur:"Fume, magie.",lumiere:"Chaos."},narration:{declencheur:"Arrive surface.",texte_a_lire:"Explosion. Vous jaillissez du sol. Tour des Mages. Thade sourit : 'Bienvenue. J'attendais ce moment.' Ses lieutenants vous encerclent. C'est l'heure.",contexte_mj:"Fin Scnario 4. Cliffhanger. Scnario 5 = combat final contre Thade. Les PJ sont dans son QG, entours. Mais ils ont sabotage, quipement, allis.",objectif:"Transition Scnario 5."},mecaniques:{defis:["Aucun"],indices:["Combat final proche","Thade attend","Scnario 5 commence"],recompenses:"Transition."},transitions:{success:"Scnario 5 commence.",fail:"N/A."}}]}]},JS={id:5,title:"SCNARIO 5 : L'AUBE DE SANG",level:"Niveaux 13-16",system:"D&D 3.5",synopsis:"Aprs avoir survcu  la Spirale et dcouvert le secret de Thade, les PJ remontent  la surface. Un mois s'est coul. Val-d'Ombre est devenue une ncropole sous le rgne de Thade, dsormais liche immortelle. Les PJ doivent rallier les derniers survivants, briser le sige du Temple-Forgeron, infiltrer la Tour des Mages, et affronter Thade dans un combat final pique sur les toits de la ville mourante. C'est l'aube de sang qui dcidera du destin de Val-d'Ombre.",acts:[{title:"ACTE 1 : LE RETOUR DES HROS",stake:"tablir une tte de pont et rallier les survivants.",location:"Tour des Mages, Ruines de Val-d'Ombre, gouts.",scenes:[{title:"Scne 1 : L'Irruption",type:"Combat / Surprise",image:"./images/scenes/irruption_tour.jpg",locationId:"tour_des_mages_sommet",npcIds:["lieutenants_thade"],description:{resume:"Attaque surprise des lieutenants de Thade",visuel:"Vous mergez du sol de la Tour. 3 lieutenants ncromanciens (niveau 11) vous font face, stupfaits. Vous avez 1 round de surprise complte.",audio:"Explosion, cris alarme, incantations interrompues.",odeur:"Fume, ozone, sang.",lumiere:"Chaos, clairs magiques."},narration:{declencheur:"Fin Scnario 4.",texte_a_lire:"Explosion. Vous jaillissez du sol. Trois ncromanciens vous fixent, bouche be. Vous avez l'avantage. Frappez vite.",contexte_mj:"Combat surprise. PJ ont 1 round complet avant initiative. 3 Ncromanciens niveau 11. limination rapide recommande. Thade arrive round 4.",objectif:"liminer lieutenants avant arrive Thade."},mecaniques:{defis:["1 round surprise complet","Combat : 3 Ncromanciens niveau 11","Round 4 : Thade arrive","Objectif : tuer avant round 4"],indices:["Surprise totale","Thade arrive vite","Fuir aprs combat"],recompenses:"XP, limination lieutenants."},transitions:{success:"Lieutenants limins avant Thade.",fail:"Thade arrive, combat difficile."}},{title:"Scne 2 : La Colre de Thade",type:"Fuite / Action",image:"./images/scenes/colere_thade.jpg",locationId:"tour_des_mages_sommet",npcIds:["thade_coren"],description:{resume:"Fuite face  la colre de Thade",visuel:"Thade apparat, furieux : 'VOUS !' Il lve les mains. Le plafond explose. Vous devez fuir. Fentre = seule issue.",audio:"Rugissement Thade, explosions, effondrement.",odeur:"Poussire, magie destructrice.",lumiere:"clairs rouges, chaos."},narration:{declencheur:"Aprs combat lieutenants.",texte_a_lire:"Thade apparat. Il vous regarde avec un dgot profond.  Encore vous. C'est une perte de temps.  Il lve la main, et le plafond commence  s'effondrer.",contexte_mj:"Fuite spectaculaire. Thade lance Mtores (20d6 zone). PJ doivent sauter par fentre (30m chute). Sorts vol/lvitation/plume utiles. Thade ne poursuit pas (veut qu'ils viennent  lui).",objectif:"Fuir Tour avant Mtores."},mecaniques:{defis:["Rflexes DD 18 : viter dbris","Chute 30m : 10d6 (sorts plume/vol annulent)","Thade lance Mtores round 2","Fuite urgente"],indices:["Thade trop puissant maintenant","Fentre = issue","Sorts vol essentiels"],recompenses:"Survie, fuite russie."},transitions:{success:"PJ s'chappent Tour.",fail:"Dgts Mtores + chute."}},{title:"Scne 3 : La Ncropole",type:"Exploration / Horreur",image:"./images/scenes/necropole_valdombre.jpg",locationId:"rues_valdombre_necropole",npcIds:[],description:{resume:"Dcouverte de Val-d'Ombre transforme en ncropole",visuel:"Val-d'Ombre mconnaissable. Cendres partout. Squelettes dans rues. Silence absolu. Dme violet au-dessus. 1 mois a pass dans Spirale, mais ici...",audio:"Silence de mort, vent dans ruines.",odeur:"Cendres, mort, dsolation.",lumiere:"Gris, crpusculaire sous dme."},narration:{declencheur:"Aprs fuite Tour.",texte_a_lire:"Vous atterrissez dans ruines. Val-d'Ombre n'existe plus. Cendres. Squelettes. Silence. Thorgar tombe  genoux : 'Un mois... Qu'a-t-il fait en un mois ?' Vous ralisez : temps diffrent dans Spirale. Ici, 1 mois. L-bas, quelques jours.",contexte_mj:"Moment choc. PJ dcouvrent ampleur destruction. 1 mois surface = quelques jours Spirale. Val-d'Ombre ncropole. Population morte ou zombifie. Seuls survivants : rsistance Temple.",objectif:"Comprendre situation, trouver survivants."},mecaniques:{defis:["Volont DD 14 : ne pas dsesprer","Perception DD 12 : voir Temple au loin (lumires)","Survie DD 16 : trouver chemin sr"],indices:["Temple brille encore","Survivants possibles","Zombies patrouillent"],recompenses:"Comprhension situation."},transitions:{success:"Voient Temple, espoir.",fail:"Dsespoir, mais continuent."}},{title:"Scne 4 : La Rsistance Souterraine",type:"Rencontre / Infiltration",image:"./images/scenes/resistance_egouts.jpg",locationId:"egouts_valdombre",npcIds:["guerilleros_nains"],description:{resume:"Rencontre avec la rsistance naine dans les gouts",visuel:"gouts. Gurilla naine. 50 combattants, familles caches. Ils vous reconnaissent : 'Les hros ! Vous tes revenus !' Chef : 'Thorgar tient Temple. Assig depuis 3 semaines.'",audio:"Murmures espoir, armes prpares.",odeur:"gouts, sueur, dtermination.",lumiere:"Torches faibles, ombres."},narration:{declencheur:"Descente gouts.",texte_a_lire:"gouts. Des nains arms surgissent, puis vous reconnaissent : 'Par Moradin ! Les hros !' Chef gurilla : 'Thorgar tient Temple. Assig. Milliers zombies. On fait raids, mais... on perd.' Il vous regarde : 'Vous pouvez changer a ?'",contexte_mj:"Rencontre rsistance. 50 combattants nains + familles. Thorgar au Temple, assig par arme zombies. Rsistance fait raids mais insuffisant. PJ = espoir. Peuvent rallier pour assaut final.",objectif:"Rencontrer rsistance, obtenir infos."},mecaniques:{defis:["Diplomatie DD 12 : rallier rsistance","Renseignements DD 14 : infos sige Temple","Tactique DD 16 : valuer forces"],indices:["Temple assig 3 semaines","Thorgar tient mais faiblit","Arme zombies immense","Rsistance prte suivre PJ"],recompenses:"Allis (50 guerriers), infos tactiques."},transitions:{success:"Rsistance rallie.",fail:"Rsistance sceptique mais suit."}},{title:"Scne 5 : Le Conseil de Guerre",type:"Planification / RP",image:"./images/scenes/conseil_guerre.jpg",locationId:"egouts_valdombre",npcIds:["chef_resistance","thorgar_pretre_nain_absent"],description:{resume:"Planification de l'assaut final contre Thade",visuel:"Carte Val-d'Ombre tale. Temple encercl. Tour au centre. Chef : 'Plan ?' Vous devez dcider : briser sige, crer diversion, infiltrer Tour.",audio:"Discussions tactiques, armes afftes.",odeur:"Carte poussireuse, dtermination.",lumiere:"Torche sur carte."},narration:{declencheur:"Aprs ralliement.",texte_a_lire:"Carte tale. Chef : 'Temple encercl. Milliers zombies. Thade  Tour. Impossible.' Vous regardez carte. Plan : briser sige Temple, rallier Thorgar, assaut Tour ensemble. Risqu. Mais seule chance.",contexte_mj:"Planification. PJ dcident stratgie : 1) Briser sige Temple (combat masse), 2) Rallier Thorgar (moral), 3) Assaut Tour (final). Rsistance suit plan PJ. Choix influencent Acte 2.",objectif:"tablir plan bataille."},mecaniques:{defis:["Tactique DD 16 : plan optimal","Diplomatie DD 14 : convaincre rsistance","Connaissance Locale DD 12 : passages secrets"],indices:["Briser sige = diversion","Thorgar = alli puissant","Tour = objectif final"],recompenses:"Plan tabli, moral +2."},transitions:{success:"Plan accept, prparation.",fail:"Plan hasardeux mais accept."}}]},{title:"ACTE 2 : LA BATAILLE DU TEMPLE",stake:"Briser le sige et rallier Thorgar pour l'assaut final.",location:"Parvis du Temple-Forgeron.",scenes:[{title:"Scne 1 : L'Arme des Morts",type:"Observation / Horreur",image:"./images/scenes/armee_morts.jpg",locationId:"temple_forgeron_exterieur",npcIds:[],description:{resume:"Observation de l'arme de zombies assigeant le Temple",visuel:"Temple encercl. Milliers zombies. Catapultes os. Wraiths volent. Impossible. Mais vous devez.",audio:"Grondement horde, catapultes.",odeur:"Mort, dcomposition.",lumiere:"Crpuscule malsain."},narration:{declencheur:"Arrive Temple.",texte_a_lire:"Vous voyez Temple. Encercl par milliers zombies. Catapultes os bombardent. Thorgar tient, mais combien temps ? Chef rsistance : 'Impossible percer.' Vous : 'On va crer miracle.'",contexte_mj:"Observation arme. Milliers zombies (traiter masse), catapultes, wraiths. Impossible victoire frontale. PJ doivent plan intelligent : attaque arrire, sabotage artillerie, diversion.",objectif:"valuer situation, planifier attaque."},mecaniques:{defis:["Perception DD 14 : identifier faiblesses","Tactique DD 18 : plan attaque optimal","Connaissance Religion DD 16 : wraiths vulnrables nergie positive"],indices:["Artillerie = priorit","Attaque arrire possible","Thorgar peut aider si signal"],recompenses:"Plan tactique."},transitions:{success:"Plan tabli.",fail:"Attaque hasardeuse."}},{title:"Scne 2 : L'Assaut Hroque",type:"Combat pique",image:"./images/scenes/assaut_heroique.jpg",locationId:"temple_forgeron_siege",npcIds:["resistance_naine"],description:{resume:"Assaut hroque contre l'arrire de l'arme",visuel:"Vous et rsistance chargez arrire arme. Sorts zone dvastent rangs. Catapultes explosent. Zombies confus.",audio:"Cris guerre, explosions, chaos.",odeur:"Feu, chair brle.",lumiere:"clairs sorts, feu."},narration:{declencheur:"Lancement attaque.",texte_a_lire:"Vous chargez. Sorts zone ravagent zombies. Rsistance dtruit catapultes. Chaos. Signal Thorgar : Temple ouvre portes. Nains sortent. Vous avez perc.",contexte_mj:"Combat masse simplifi. PJ + 50 rsistance vs arrire arme. Objectif : dtruire artillerie, crer brche. Sorts zone trs efficaces. Si succs, Thorgar sort Temple avec 200 nains. Victoire tactique.",objectif:"Dtruire artillerie, crer brche."},mecaniques:{defis:["Combat masse : PJ ciblent catapultes","Sorts zone : Boule Feu, clair, etc.","Sabotage DD 16 : dtruire catapultes","Signal Thorgar : sorts lumire/son"],indices:["Catapultes vulnrables","Zombies lents ragir","Thorgar attend signal"],recompenses:"Artillerie dtruite, brche cre."},transitions:{success:"Thorgar sort, ralliement.",fail:"Combat difficile, pertes."}},{title:"Scne 3 : Le Retour de Thorgar",type:"Ralliement / pique",image:"./images/scenes/retour_thorgar.jpg",locationId:"temple_forgeron_parvis",npcIds:["thorgar_pretre_nain"],description:{resume:"Thorgar et ses nains sortent du Temple",visuel:"Portes Temple s'ouvrent. Thorgar merge, marteau lev : 'POUR MORADIN ! POUR VAL-D'OMBRE !' 200 nains chargent. Moral explose.",audio:"Cri guerre nain, fracas armes.",odeur:"Sueur, dtermination.",lumiere:"Lueur dore Thorgar."},narration:{declencheur:"Aprs brche.",texte_a_lire:"Thorgar sort : 'Vous tes revenus ! Moradin soit lou !' Il vous serre. 'Finissons-en.' 200 nains derrire lui. Arme zombies recule. Vous avez chang bataille.",contexte_mj:"Moment pique. Thorgar + 200 nains rallis. Moral +4 tous allis. Arme zombies dsorganise. Victoire tactique. Mais Thade  Tour. Objectif final : Tour.",objectif:"Rallier Thorgar, moral."},mecaniques:{defis:["Diplomatie DD 12 : rallier (auto-succs)","Discours DD 20 : inspirer (bonus moral +2 supplmentaire)"],indices:["Thorgar alli puissant","200 nains + 50 rsistance = 250 guerriers","Peuvent tenir Temple pendant assaut Tour"],recompenses:"Thorgar alli, 250 guerriers, moral +4."},transitions:{success:"Arme rallie.",fail:"Ralliement partiel."}},{title:"Scne 4 : L'Armurerie Sacre",type:"quipement / Prparation",image:"./images/scenes/armurerie_sacree.jpg",locationId:"temple_forgeron_armurerie",npcIds:["thorgar_pretre_nain"],description:{resume:"quipement avec les armes sacres de Moradin",visuel:"Thorgar ouvre armurerie sacre. Armes lgendaires : Marteau Tueur-Mages, Armure Moradin, Potions ultimes. 'Prenez. Vous en aurez besoin.'",audio:"Cliquetis armes sacres.",odeur:"Mtal bni, encens.",lumiere:"Lueur divine."},narration:{declencheur:"Avant assaut Tour.",texte_a_lire:"Thorgar : 'Armurerie sacre. Armes lgendaires. Contre Thade, vous aurez besoin.' Marteau +3 Tueur-Mages, Armure +3, Potions Hrosme, Rsistance sorts. quipez-vous.",contexte_mj:"Loot majeur final. Armes +3 spcialises anti-mages, Armures +3, Potions puissantes (Hrosme, Rsistance Sorts, Soins Critiques). Bndictions Thorgar (+2 jets vs morts-vivants 24h). Prparation combat final.",objectif:"S'quiper pour final."},mecaniques:{defis:["Choix quipement optimal","Bndictions Thorgar : +2 vs morts-vivants"],indices:["Marteau Tueur-Mages : +2d6 vs lanceurs sorts","Potions essentielles","Bndictions cumulatives"],recompenses:"Armes +3, Armures +3, Potions, Bndictions."},transitions:{success:"quips optimalement.",fail:"quipement partiel."}},{title:"Scne 5 : La Charge Finale",type:"Transition pique",image:"./images/scenes/charge_finale.jpg",locationId:"temple_vers_tour",npcIds:["thorgar_pretre_nain","armee_naine"],description:{resume:"Charge finale vers la Tour des Mages",visuel:"Vous et lite (PJ + Thorgar + 20 meilleurs) chargez vers Tour. 230 nains tiennent Temple, repoussent zombies. Voie dgage. C'est l'heure.",audio:"Cri guerre, course.",odeur:"Sueur, dtermination.",lumiere:"Aube sanglante."},narration:{declencheur:"Dpart vers Tour.",texte_a_lire:"Thorgar : 'Nous tenons Temple. Vous, tuez Thade.' Vous et lite chargez. Tour devant. Thade attend. C'est l'heure vrit.",contexte_mj:"Transition. PJ + Thorgar + 20 lite nains chargent Tour. 230 nains tiennent Temple (diversion). Voie dgage. Acte 3 = infiltration Tour. Combat final approche.",objectif:"Atteindre Tour."},mecaniques:{defis:["Aucun combat majeur (voie dgage)","Course hroque"],indices:["Tour proche","Thade attend","Combat final imminent"],recompenses:"Arrive Tour."},transitions:{success:"Atteignent Tour.",fail:"N/A."}}]},{title:"ACTE 3 : L'ASCENSION SANGLANTE",stake:"Infiltrer la Tour et atteindre Thade.",location:"Tour des Mages (Intrieur).",scenes:[{title:"Scne 1 : Le Hall des Illusions",type:"Pige / Puzzle",image:"./images/scenes/hall_illusions.jpg",locationId:"tour_mages_hall",npcIds:[],description:{resume:"Traverse du hall piag d'illusions",visuel:"Hall entre. Mirages arcaniques. Fausses portes, vrais piges. Symboles Mort cachs. Vision Lucide rvle vrit.",audio:"chos trompeurs.",odeur:"Ozone.",lumiere:"Illusions kalidoscopiques."},narration:{declencheur:"Entre Tour.",texte_a_lire:"Hall pig. Illusions partout. Thorgar : 'Mfiez-vous.' Symboles Mort cachs. Vision Lucide ou Dtection Magie ncessaires.",contexte_mj:"Pige illusions + Symboles Mort. Volont DD 20 rsister illusions. Symboles Mort (Vigueur DD 22 ou mort). Vision Lucide/Dtection rvlent. Passage rapide recommand.",objectif:"Traverser sans mourir."},mecaniques:{defis:["Volont DD 20 : rsister illusions","Perception DD 22 : dtecter Symboles","Vision Lucide : rvle tout","Dtection Magie DD 18 : trouve piges"],indices:["Illusions cachent piges","Vision Lucide = cl","Passage rapide"],recompenses:"Traverse russie."},transitions:{success:"Passent sans dgts.",fail:"Symboles dclenchs, dgts."}},{title:"Scne 2 : La Mnagerie",type:"Combat",image:"./images/scenes/menagerie_tour.jpg",locationId:"tour_mages_escaliers",npcIds:["bebilith","golem_mithral"],description:{resume:"Combat contre le gardien de l'escalier",visuel:"Escaliers colimaon. Bbilith (araigne dmoniaque) OU Golem Mithral garde. Combat vertical difficile.",audio:"Cliquetis pattes/mtal.",odeur:"Soufre/mtal.",lumiere:"Torches vacillantes."},narration:{declencheur:"Monte escaliers.",texte_a_lire:"Escaliers. Gardien : Bbilith ou Golem Mithral. Combat vertical. Difficile.",contexte_mj:"Boss mineur. Bbilith FP 13 (toiles, poison) OU Golem Mithral FP 14 (immunits, DR). Terrain vertical = malus. Combat intense.",objectif:"Vaincre gardien."},mecaniques:{defis:["Combat : Bbilith FP 13 OU Golem Mithral FP 14","Terrain vertical : Acrobaties DD 14","Bbilith : toiles, poison","Golem : DR 15/adamantine"],indices:["Bbilith vulnrable feu","Golem immunis magie","Terrain difficile"],recompenses:"XP, passage."},transitions:{success:"Gardien vaincu.",fail:"Combat difficile, pertes."}},{title:"Scne 3 : La Salle des Portails",type:"Puzzle",image:"./images/scenes/salle_portails.jpg",locationId:"tour_mages_portails",npcIds:[],description:{resume:"Puzzle des 12 portails pour trouver le bon",visuel:"Salle 12 portails. Seul 1 mne haut. Autres = piges/boucles. Indice : suivre flux violet (nergie Spirale).",audio:"Bourdonnement portails.",odeur:"Ozone.",lumiere:"Lueurs portails."},narration:{declencheur:"Aprs gardien.",texte_a_lire:"Salle portails. 12 portes. 1 bonne, 11 piges. Indice : flux violet.",contexte_mj:"Puzzle. Dtection Magie DD 16 rvle flux violet. Bon portail = celui avec flux le plus fort. Mauvais = tlportation alatoire/dgts/retour dbut.",objectif:"Trouver bon portail."},mecaniques:{defis:["Dtection Magie DD 16 : voir flux","Connaissance Arcanes DD 18 : comprendre systme","Essai-erreur : risqu"],indices:["Flux violet = Spirale","Portail flux fort = bon","Mauvais = danger"],recompenses:"Passage tage suprieur."},transitions:{success:"Bon portail trouv.",fail:"Tlportation alatoire, retard."}},{title:"Scne 4 : Les Damns",type:"Dilemme Moral",image:"./images/scenes/damnes_conscients.jpg",locationId:"tour_mages_cachots",npcIds:["anciens_conseil_zombifies"],description:{resume:"Dilemme moral face aux conseillers zombifis",visuel:"Cachots. Anciens Conseil zombifis mais conscients. Prisonniers corps morts. Supplient mort : 'Tuez-nous... piti...'",audio:"Gmissements, supplications.",odeur:"Mort, dsespoir.",lumiere:"Tnbres, torches faibles."},narration:{declencheur:"Passage cachots.",texte_a_lire:"Cachots. Anciens Conseil. Zombifis mais conscients. Horreur ultime. Supplient mort. Choix : les librer (temps) ou continuer (rapide mais cruel).",contexte_mj:"Dilemme moral. Librer = bon acte, prend 10 minutes, risque alarme. Ignorer = rapide mais poids moral. Pas de bonne rponse.",objectif:"Choisir."},mecaniques:{defis:["Choix moral","Si libration : 10 minutes, Discrtion DD 18 viter alarme","Si ignorent : malus moral -1 (culpabilit)"],indices:["Pas de bonne rponse","Temps vs morale","Choix personnel"],recompenses:"Si libration : paix conscience. Si ignorent : temps gagn."},transitions:{success:"Choix fait.",fail:"N/A."}},{title:"Scne 5 : Kaelen le Damn",type:"Boss Mineur",image:"./images/scenes/kaelen_vampire.jpg",locationId:"tour_mages_antichambre",npcIds:["kaelen_vampire"],description:{resume:"Combat contre Kaelen devenu vampire",visuel:"Antichambre toit. Kaelen, ancien apprenti Thade. Vampire niveau 12. Garde accs toit. 'Matre m'attend. Vous ne passerez pas.'",audio:"Sifflement vampire.",odeur:"Sang.",lumiere:"Tnbres."},narration:{declencheur:"Avant toit.",texte_a_lire:"Kaelen bloque : 'Matre m'a transform. Je suis immortel.' Vampire niveau 12. Combat final avant Thade.",contexte_mj:"Boss mineur. Kaelen Vampire Ensorceleur 12. Rgnration 5, DR 10/argent+magique, sorts niveau 6. Difficile. Dernier obstacle avant Thade.",objectif:"Vaincre Kaelen."},mecaniques:{defis:["Combat : Kaelen Vampire Ensorceleur 12","Rgnration 5/round","DR 10/argent+magique","Sorts niveau 6","Domination (Volont DD 20)"],indices:["Vulnrable lumire du jour","Rgnration stop si 0 PV","Sorts puissants"],recompenses:"XP, accs toit."},transitions:{success:"Kaelen vaincu, toit accessible.",fail:"Combat difficile, ressources puises."}}]},{title:"ACTE 4 : LE SANCTUAIRE DU TYRAN",stake:"Dernire prparation avant l'affrontement final.",location:"Appartements Privs de Thade.",scenes:[{title:"Scne 1 : Le Sanctuaire Maudit",type:"Exploration / Horreur",image:"./images/scenes/sanctuaire_thade.jpg",locationId:"appartements_thade",npcIds:[],description:{resume:"Exploration des appartements maudits de Thade",visuel:"Appartements Thade. Bibliothque peau humaine. Artefacts maudits. Vue panoramique Val-d'Ombre en ruines. Horreur.",audio:"Silence oppressant.",odeur:"Sang sch, magie noire.",lumiere:"Crpuscule malsain."},narration:{declencheur:"Aprs Kaelen.",texte_a_lire:"Appartements Thade. Bibliothque peau humaine. Artefacts horribles. Vue sur ville morte. C'est ici qu'il a tout planifi.",contexte_mj:"Exploration sanctuaire. Rvle ampleur folie Thade. Bibliothque contient secrets (phylactre = Spirale confirm). Moment calme avant tempte.",objectif:"Explorer, comprendre."},mecaniques:{defis:["Fouille DD 14 : trouver objets utiles","Connaissance Arcanes DD 18 : comprendre artefacts","Volont DD 16 : rsister horreur"],indices:["Phylactre = Spirale (confirm)","Thade immortel tant que Spirale existe","Tuer corps = bannissement temporaire"],recompenses:"Confirmation phylactre, objets mineurs."},transitions:{success:"Infos obtenues.",fail:"Infos partielles."}},{title:"Scne 2 : Le Festin des Champions",type:"Prparation",image:"./images/scenes/festin_champions.jpg",locationId:"appartements_thade",npcIds:["thorgar_pretre_nain"],description:{resume:"Buffs finaux avec les potions de Thade",visuel:"Rserve potions ultimes Thade. Vous les prenez. Buffs longue dure. Thorgar bnit. Prparation finale.",audio:"Prires Thorgar.",odeur:"Potions, encens.",lumiere:"Lueur divine."},narration:{declencheur:"Prparation finale.",texte_a_lire:"Rserve potions Thade. Vous prenez tout. Hrosme, Force Taureau, Rsistance Sorts, Soins. Thorgar bnit : 'Moradin avec vous.' Prts.",contexte_mj:"Buffs finaux. Potions +4 caractristiques, Rsistance Sorts 20, Soins Critiques x3. Bndictions Thorgar (+4 tous jets 1 heure). Prparation optimale combat final.",objectif:"Buffs maximaux."},mecaniques:{defis:["Utilisation Objets Magiques : identifier potions","Choix buffs optimaux"],indices:["Potions +4 stats","Rsistance Sorts essentielle","Bndictions Thorgar puissantes"],recompenses:"Buffs complets : +4 stats, RS 20, Soins, Bndictions +4."},transitions:{success:"Buffs optimaux.",fail:"Buffs partiels."}},{title:"Scne 3 : La Tentation",type:"RP / Test Volont",image:"./images/scenes/tentation_thade.jpg",locationId:"appartements_thade",npcIds:["thade_coren_projection"],description:{resume:"Thade tente de corrompre les PJ",visuel:"Projection Thade apparat : 'Rejoignez-moi. Ensemble, nous contrlerons Spirale. Immortalit. Pouvoir. Refusez, mourez.'",audio:"Voix Thade sduisante.",odeur:"Rien.",lumiere:"Projection spectrale."},narration:{declencheur:"Avant escalier toit.",texte_a_lire:"Thade apparat (projection) : 'Dernire chance. Rejoignez-moi. Immortalit. Pouvoir. Ou mort.' Test Volont DD 24. Refusez.",contexte_mj:"Test final volont. Thade tente corrompre PJ. Volont DD 24. chec = Charm 1 round (attaque allis). Succs = rsistent, Thade furieux. Moment RP important.",objectif:"Rsister tentation."},mecaniques:{defis:["Volont DD 24 : rsister Charme","Si chec : Charm 1 round","RP : rponse PJ  Thade"],indices:["Thade dsespr","Offre = pige","Rsistance = force"],recompenses:"Si rsistent : moral +2, Thade affaibli (doute)."},transitions:{success:"Rsistent, Thade furieux.",fail:"Charms brivement, se librent."}},{title:"Scne 4 : L'Escalier de Lumire",type:"Transition pique",image:"./images/scenes/escalier_lumiere.jpg",locationId:"appartements_thade",npcIds:["thorgar_pretre_nain"],description:{resume:"Monte vers le toit pour le combat final",visuel:"chelle lumire mne toit. Orage magique dehors. Thorgar : 'C'est l'heure. Pour Val-d'Ombre.' Vous montez.",audio:"Tonnerre, vent.",odeur:"Ozone, pluie.",lumiere:"clairs, chaos."},narration:{declencheur:"Monte vers toit.",texte_a_lire:"chelle lumire. Toit au-dessus. Orage. Thorgar : 'Finissons-en.' Vous montez. Combat final attend.",contexte_mj:"Transition finale. Monte vers toit. Orage magique (Thade prpare rituel). Acte 5 = boss fight multi-phases. Moment pique.",objectif:"Monter vers toit."},mecaniques:{defis:["Aucun"],indices:["Toit = combat final","Thade attend","Orage = rituel en cours"],recompenses:"Arrive toit."},transitions:{success:"Atteignent toit.",fail:"N/A."}},{title:"Scne 5 : Le Calme Avant",type:"Moment Silence",image:"./images/scenes/calme_avant.jpg",locationId:"escalier_toit",npcIds:["thorgar_pretre_nain","allies"],description:{resume:"Un instant d'ternit.",visuel:"Sommet escalier. Porte toit devant. Thorgar et vous. Regard chang. Tout mne ici. Respirez. Ouvrez porte.",audio:"Silence. Curs battent.",odeur:"Rien.",lumiere:"Lueur porte."},narration:{declencheur:"Avant porte finale.",texte_a_lire:"Porte toit. Thorgar vous regarde : 'Quoi qu'il arrive, vous tes hros.' Vous hochez tte. Ouvrez porte. Thade attend.",contexte_mj:"Moment silence. Dernier instant paix avant tempte. RP libre. Puis porte s'ouvre. Acte 5 commence. Boss final.",objectif:"Ouvrir porte."},mecaniques:{defis:["Aucun"],indices:["Combat final imminent","Pas de retour","Tout ou rien"],recompenses:"Prparation mentale."},transitions:{success:"Porte ouvre. Acte 5.",fail:"N/A."}}]},{title:"ACTE 5 : LE CRPUSCULE DES DIEUX",stake:"Vaincre Thade Coren et librer Val-d'Ombre.",location:"Toit de la Tour des Mages.",scenes:[{title:"Phase 1 : Le Liche-Sorcier",type:"Boss - Phase 1",image:"./images/scenes/boss_phase1.jpg",locationId:"tour_toit",npcIds:["thade_coren_liche"],description:{resume:"Phase 1 : Dtruire les pylnes protgeant Thade",visuel:"Toit. Orage. Thade au centre, 4 pylnes nergie autour. Bouclier Force protge. 'Bienvenue  votre mort.'",audio:"Tonnerre, incantations.",odeur:"Ozone, mort.",lumiere:"clairs violets."},narration:{declencheur:"Ouverture porte.",texte_a_lire:"Thade vous observe depuis le centre du toit. En concentration absolue alors que les quatre pylnes d'nergie autour de lui s'activent dans un bourdonnement assourdissant.",contexte_mj:"Thade ne perd pas de temps  parler. Il vous considre comme des insectes  craser. Le combat commence immdiatement. Phase 1 : Bouclier de Force actif.",objectif:"Dtruire 4 pylnes."},mecaniques:{defis:["4 Pylnes : 100 PV, DR 10/adamantine chacun","Thade invulnrable tant que pylnes actifs","Thade lance : Dsintgration, clair Multiple, Boule Feu Retarde","Terrain : toit glissant (pluie), bords dangereux"],indices:["Pylnes = priorit","Thade bombardement distance","Travail quipe essentiel"],recompenses:"Phase 1 termine quand 4 pylnes dtruits."},transitions:{success:"4 pylnes dtruits, bouclier tombe.",fail:"PJ puiss, pylnes restent."}},{title:"Phase 2 : La Transformation",type:"Boss - Phase 2",image:"./images/scenes/boss_phase2.jpg",locationId:"tour_toit",npcIds:["thade_coren_transforme"],description:{resume:"Phase 2 : Combat contre Thade transform",visuel:"Bouclier tombe. Thade hurle, absorbe nergie pylnes. Corps mute : pierre noire, yeux rouges, griffes. Monstre. 'VOUS ALLEZ SOUFFRIR !'",audio:"Rugissement inhumain.",odeur:"Soufre, corruption.",lumiere:"Aura noire."},narration:{declencheur:"Pylnes dtruits.",texte_a_lire:"Les pylnes explosent. Thade pousse un hurlement de douleur alors que l'nergie brute le dforme. Sa peau se change en obsidienne.",contexte_mj:"Phase 2. Thade transform : 50% PV restants, mais forme physique puissante. Attaques corps--corps (3/round, +25, 2d8+10 chacune), rgnration 15/round, DR 15/bien+argent. Moins sorts, plus brutal. Combat intense.",objectif:"Rduire Thade  0 PV."},mecaniques:{defis:["Thade Transform : 50% PV, 3 attaques/round","Rgnration 15/round","DR 15/bien+argent","Attaques puissantes : +25, 2d8+10","Sorts rduits mais Souffle Tnbres (cne 18m, 12d6)"],indices:["Armes sacres efficaces","Rgnration = problme","Dgts massifs ncessaires"],recompenses:"Phase 2 termine  0 PV Thade."},transitions:{success:"Thade rduit 0 PV.",fail:"PJ vaincus."}},{title:"Phase 3 : L'Intervention",type:"Boss - Phase 3 / Twist",image:"./images/scenes/boss_phase3.jpg",locationId:"tour_toit",npcIds:["thade_coren","spirale_tentacules"],description:{resume:"Phase 3 : La Spirale intervient et attaque tous",visuel:"Thade  0 PV. Soudain, Spirale ragit. Brche s'ouvre. Tentacules jaillissent, attaquent TOUT LE MONDE. Thade : 'NON ! PAS MAINTENANT !' Chaos.",audio:"Rugissements Spirale, cris.",odeur:"Corruption planaire.",lumiere:"Brche violette."},narration:{declencheur:"Thade 0 PV.",texte_a_lire:"Thade s'effondre. Soudain, la ralit se dchire. Des tentacules d'nergie pure jaillissent. Thade regarde ses mains qui se dissolvent :  Quoi ? Non... le flux s'inverse... ",contexte_mj:"Phase 3 twist. Spirale intervient (veut reprendre clat dans cur Thade). 4 Tentacules attaquent tous (PJ + Thade + Thorgar). Thade rgnre lentement (10 PV/round). PJ doivent : 1) Survivre tentacules, 2) Finir Thade dfinitivement (arracher cur/clat). Chaos total.",objectif:"Survivre tentacules, tuer Thade dfinitivement."},mecaniques:{defis:["4 Tentacules Spirale : attaquent tous, +20, 3d6+8","Thade rgnre 10 PV/round","Objectif : arracher cur Thade (coup grce ou action spciale)","Chaos : initiative change chaque round"],indices:["Tentacules = danger pour tous","Thade vulnrable maintenant","Cur = cible finale"],recompenses:"Phase 3 termine si cur arrach."},transitions:{success:"Cur Thade arrach.",fail:"Tentacules tuent tous."}},{title:"Scne 4 : La Chute du Tyran",type:"Cinmatique Finale",image:"./images/scenes/chute_tyran.jpg",locationId:"tour_toit",npcIds:["thade_coren","spirale"],description:{resume:"Thade est aspir par la Spirale",visuel:"Cur arrach. Thade hurle. Spirale l'aspire dans brche. 'NON ! JE SUIS IMMORTEL ! NON !' Disparat. Brche ferme. Silence.",audio:"Cri Thade, puis silence.",odeur:"Ozone dissip.",lumiere:"Brche ferme, aube arrive."},narration:{declencheur:"Cur arrach.",texte_a_lire:"Thade aspir par Spirale. Cris s'vanouissent. Brche ferme. Silence. Thorgar : 'C'est... fini ?' Vous regardez horizon. Aube se lve.",contexte_mj:"Cinmatique victoire. Thade vaincu, aspir par Spirale (digr/dtruit). Dme violet s'effondre. Ville libre. Mais dtruite. Victoire amre. pilogue suit.",objectif:"Victoire."},mecaniques:{defis:["Aucun"],indices:["Thade mort","Spirale reprend clat","Ville libre"],recompenses:"Victoire finale."},transitions:{success:"pilogue.",fail:"N/A."}},{title:"Scne 5 : L'Aube Nouvelle",type:"pilogue",image:"./images/scenes/epilogue_aube.jpg",locationId:"tour_toit",npcIds:["thorgar_pretre_nain","survivants"],description:{resume:"L'aube se lve sur Val-d'Ombre libre",visuel:"Aube sur ruines Val-d'Ombre. Dme disparu. Survivants sortent cachettes. 500 nains vivants. Ville dtruite mais libre. Thorgar : 'Nous reconstruirons.' Vous regardez soleil. Victoire.",audio:"Silence, puis cris joie lointains.",odeur:"Air frais, espoir.",lumiere:"Soleil levant."},narration:{declencheur:"Aprs victoire.",texte_a_lire:"Soleil se lve. Val-d'Ombre libre. 500 survivants. Ville en ruines. Mais vivante. Thorgar : 'Grce  vous.' Vous avez gagn. Campagne termine.",contexte_mj:"pilogue. PJ hros. Val-d'Ombre libre mais dtruite. 500 survivants (nains + humains). Reconstruction longue. Spirale toujours l, mais dormante. Thade mort. Victoire amre mais victoire. FIN CAMPAGNE.",objectif:"Savourer victoire."},mecaniques:{defis:["Aucun"],indices:["Campagne termine","Victoire","Reconstruction commence"],recompenses:"Gloire ternelle, ville sauve."},transitions:{success:"FIN.",fail:"N/A."}}]}]},yi=[BS,GS,HS,kS,JS],FS=["size","type","alignment","fp","cr","environment","environnement","organisation","organization","ini","initiative","sens","senses","ca","ac","pv","hp","dv","hd","js","saves","rm","sr","rd","dr","vit","speed","abb","bab","grp","grapple","attaque","attack","att_complete","fullAttack","espace","space","allonge","reach","att_sp","specialAttacks","qual_sp","specialQualities","carac","abilities","comptences","competences","skills","dons","feats","tactiques","tactics","butin","loot","est_ennemi","isEnemy","role","description","tactical","buffs","spells_prepared","spellbook","ogas"],YS={vig:"+0",ref:"+0",vol:"+0"},QS={for:10,dex:10,con:10,int:10,sag:10,cha:10},KS={total:10,contact:10,pris_au_depourvu:10},ga=n=>Array.isArray(n)?n.map(ga):n&&typeof n=="object"?{...n}:n,XS=n=>{if(typeof n=="object")return{total:n.total,contact:n.touch||n.contact,pris_au_depourvu:n.flatFooted||n.pris_au_depourvu};const i=String(n).match(/^(\d+).*contact\s+(\d+).*d[e]pourvu\s+(\d+)/i);if(i)return{total:parseInt(i[1]),contact:parseInt(i[2]),pris_au_depourvu:parseInt(i[3])};const r=String(n).match(/^(\d+)/),o=r?parseInt(r[1]):10;return{total:o,contact:10,pris_au_depourvu:o}};function hg(n={}){const i={...n};FS.forEach(o=>{o in i&&delete i[o]});const r={id:n.id??"",name:n.name??"",class:n.class??"",lvl:n.lvl??n.level_value??null,size:n.size??"Moyen",type:n.type??"Humanode (Humain)",alignment:n.alignment??"N",fp:n.fp??n.cr??1,environnement:n.environment??n.environnement??"",organisation:n.organisation??n.organization??"Solitaire",ini:n.ini??n.initiative??"+0",sens:n.sens??n.senses??"",ca:XS(n.ca??n.ac??KS),pv:n.pv??n.hp??1,dv:n.dv??n.hd??"1d8",js:ga(n.js??n.saves??YS),rm:n.rm??n.sr??null,rd:n.rd??n.dr??null,vit:n.vit??n.speed??"9 m",abb:n.abb??n.bab??"+0",grp:n.grp??n.grapple??"+0",attaque:n.attaque??n.attack??"",att_complete:n.att_complete??n.fullAttack??"",espace:n.espace??n.space??"1,5 m",allonge:n.allonge??n.reach??"1,5 m",att_sp:ga(n.att_sp??n.specialAttacks??[]),qual_sp:ga(n.qual_sp??n.specialQualities??[]),carac:ga(n.carac??n.abilities??QS),comptences:n.comptences??n.competences??n.skills??"",dons:n.dons??n.feats??"",tactiques:n.tactiques??n.tactics??"",butin:n.butin??n.loot??"",est_ennemi:n.est_ennemi??n.isEnemy??!1,role:n.role??n.description??"",tactical:ga(n.tactical??null),buffs:ga(n.buffs??[]),spells_prepared:ga(n.spells_prepared??n.spellbook??{}),ogas:ga(n.ogas??{occupation:"",goal:"",attitude:"",stake:""})};return{...i,...r}}const ZS=[{id:"thade_coren",name:"Thade Coren",class:"Magicien",lvl:10,size:"Moyen",type:"Humanode (humain)",alignment:"LN",fp:10,environment:"Val-d'Ombre (Universit, Conclave) puis Spirale",organization:"Solitaire (manipulateur)",initiative:"+2",senses:"Perception +8",ac:{total:20,touch:13,flatFooted:18},hp:68,hd:"10d4+30",saves:{fort:"+7",ref:"+6",will:"+11"},speed:"9 m",attack:"bton ferr +7 (1d6+1 contondant)",fullAttack:"bton ferr +7 (1d6+1) ou rayon affaiblissant +9  distance",space:"1,5 m",reach:"1,5 m",specialAttacks:["Sorts de magicien/ensorceleur (NLS 10) : contrle, ncromancie, entrave","Rayon affaiblissant 4/jour"],specialQualities:["Prparation : +2 DD pour les sorts de contrle lancs sur cibles affaiblies","Rsistance mentale (contre Charme) +2"],abilities:{str:10,dex:14,con:14,int:20,wis:12,cha:16},skills:"Concentration +15, Diplomatie +12, Intimidation +11, Connaissance (arcane) +17, Connaissance (plans) +12, Psychologie +10",feats:"Volont de fer, Science de l'initiative, Incantation silencieuse, Incantation rflexe, Robustesse",tactics:"Commence par entraver (corde anime, immobilisation), place des rayons affaiblissants, puis ngocie si avantage. En fuite, utilise brume de dissimulation et dimensions mineures.",loot:"Bton ferr, notes ncromantiques, cristal mouchard, anneau de protection +1",isEnemy:!1,antagonist:!0,role:"Antagoniste principal, double jeu : mcne puis manipulateur.",details:["Motivation : Fusionner avec la Spirale pour atteindre l'immortalit.","Masque : Froid, acadmique, se prsente comme un alli rationnel.","Spoiler : Manipule les PJ ds les premiers scnarios en orientant leurs enqutes.","Combat : Dans le final, utilise la Tour comme catalyseur d'nergie ncromantique."],tactical:{bookReference:"Bestiaire : Dossier 'Thade Coren' (Chap. Manipulations & Spirale)",scenarioContext:"Acte 2-3 : infiltration au Conclave, ensuite confrontation finale dans la Spirale (cercle des miroirs). Focus sur les sorts de contrle pour dstabiliser les PJ avant de ngocier.",spells:[{name:"Rayon affaiblissant",details:"+9 / DD 16 Str, -2 Str/Con pendant 1 tour, 4/j. Permet de fragiliser la cible principale avant l'assaut."},{name:"Corde anime",details:"Prpare un pige pour restreindre un seul PJ : +12 toucher, DD 15 Force, idal pour neutraliser un tank temporairement."},{name:"Brume de dissimulation",details:"Prpare sa retraite ou se repositionner derrire un masque magique ; dclenche aprs avoir lanc rayon ou immobilisation."}],tacticFeats:[{name:"Science de l'initiative",details:"Donne une fentre pour activer un sort ds le tour 1 et imposer son plan tactique."},{name:"Incantation rflexe",details:"Permet de lancer un sort de raction (rayon ou tlportation mineure) quand un PJ s'approche trop."}],tacticSummary:"Dmarre par des contrles (corde anime, immobilisation), enchane avec rayon affaiblissant, puis se met en retrait pour converser/ngocier. Garde une brume active pour fuir vers les tages suprieurs si mis en difficult."},ogas:{occupation:"Dirige ses recherches sur la Spirale depuis son laboratoire secret",goal:"Fusionner avec la Spirale pour atteindre l'immortalit arcanique",attitude:"Froid et acadmique, se prsente comme un alli rationnel mais manipule subtilement",stake:"Risque de perdre son accs  la Spirale et ses annes de recherches ; peut gagner le pouvoir ultime"}},{id:"thorgar_pretre_nain",name:"Thorgar",class:"Prtre",lvl:6,size:"Moyen",type:"Humanode (nain)",alignment:"LB",fp:6,environment:"Quartier du Savoir / Temple-Forgeron",organization:"Solitaire ou avec 1-2 acolytes",initiative:"-1",senses:"Vision dans le noir 18 m, Perception +8",ac:{total:19,touch:9,flatFooted:19},hp:52,hd:"6d8+24",saves:{fort:"+9",ref:"+1",will:"+8"},speed:"6 m (armure)",attack:"marteau de guerre +9 (1d8+3 contondant)",fullAttack:"marteau de guerre +9 (1d8+3)",space:"1,5 m",reach:"1,5 m",specialAttacks:["Canalisation d'nergie 5/jour (2d6 positif)","Spcialit : bndiction contre morts-vivants (+1 JS et jets d'attaque contre morts-vivants)"],specialQualities:["Rsistance naine (+2 JS poison, sorts, effets magiques)","Dtection des passages secrets pierreux"],abilities:{str:14,dex:8,con:18,int:12,wis:16,cha:12},skills:"Connaissance (religion) +10, Premiers secours +9, Diplomatie +6, Intimidation +6",feats:"Robustesse, Science de l'initiative (sacr), Incantation statique",tactics:"Ouvre avec bndiction/armes magiques, se place en premire ligne, canalise pour soutenir. Refuse de fuir tant que des reliques sont menaces.",loot:"Marteau de guerre grav, reliques bnites, anneau d'acier runique (+1 CA naturelle)",isEnemy:!1,role:"Alli, prtre du Temple, protecteur du Savoir",details:["Motivation : Protger la mmoire des morts, empcher l'ouverture de la Spirale et sauver les civils.","Attitude : Grave, inflexible sur les questions sacres, mais reconnaissant envers les PJ.","Usage : Point d'ancrage moral, soins, informations secrtes. Dclenche le 'Dilemme de Thorgar'.","Lien : Premier  parler de la 'maladie' de la montagne."],tactical:{bookReference:"Bestiaire : Portrait 'Thorgar, prtre du Temple-Forgeron'",scenarioContext:"Acte 1-2 : support de la ligne de front dans le Temple. Utilise ses bndictions pour renforcer les gardes et ses pouvoirs contre morts-vivants dans les catacombes.",spells:[{name:"Bndiction",details:"+1 d'attaque et de sauvegardes pour les allis proches (3/j). Lance ds l'engagement pour couvrir les gardes."},{name:"Canalisation d'nergie (positif)",details:"5/j, 2d6 PV; priorise les gardes blesss puis lui-mme si menac par mort-vivant."}],tacticFeats:[{name:"Robustesse",details:"Permet de rester au contact et d'absorber les dgts lors des charges ennemies."}],tacticSummary:"Se place en premire ligne pour canaliser/ soigner les allis. S'il est menac par morts-vivants, utilise canalisation pour les affaiblir ; refuse de fuir tant que reliques sont protges."},ogas:{occupation:"Protge le Temple-Forgeron et ses reliques sacres",goal:"Empcher l'ouverture de la Spirale et protger la mmoire des morts",attitude:"Grave et inflexible sur les questions sacres, mais reconnaissant envers ceux qui aident",stake:"Risque la profanation des reliques et la perte de son temple ; peut sauver Val-d'Ombre de la corruption"}},{id:"aubergiste_pic_brise",name:"Brand, aubergiste du Pic Bris",class:"Expert",lvl:3,size:"Moyen",type:"Humanode (Humain)",alignment:"NB",fp:3,environment:"Vieille Ville  Auberge du Pic Bris",organization:"Solitaire (avec personnel 1-2)",initiative:"+1",senses:"Dtection +5",ac:{total:14,touch:11,flatFooted:13},hp:18,hd:"3d8+3",saves:{fort:"+3",ref:"+2",will:"+2"},speed:"9 m",attack:"Matraque +4 (1d6+1 non ltal)",fullAttack:"Matraque +4 (1d6+1 non ltal)",space:"1,5 m",reach:"1,5 m",specialAttacks:[],specialQualities:["Contacts tendus en ville (+4 Estimation/Collecte d'infos sur rumeurs locales)"],abilities:{str:13,dex:12,con:12,int:10,wis:11,cha:12},skills:"Diplomatie +6, Psychologie +5, Dtection +5, Estimation +6",feats:"Arme de Prdilection (matraque), Vigilance",tactics:"Tente dapaiser, ne se bat quen lgitime dfense ; connat les issues de lauberge.",loot:"Cls des chambres, petite caisse de pices, liste de clients.",isEnemy:!1,role:"Hte bien inform qui entend toutes les conversations.",details:["Motivation : Protger sa rputation et viter les ennuis avec la garde.","Attitude : Jovial en public, prudent en priv ; observe beaucoup.","Usage : Source de rumeurs, point de contact pour guider les PJ vers leurs premires pistes."],ogas:{occupation:"Gre son auberge et coute les conversations des clients",goal:"Protger sa rputation et son commerce tout en restant inform",attitude:"Jovial et accueillant en public, mais prudent et observateur en priv",stake:"Risque des ennuis avec la garde ou des factions ; peut devenir une source d'informations prcieuse"}},{id:"etudiant_universite",name:"Althis, apprenti archiviste",class:"Expert",lvl:2,size:"Moyen",type:"Humanode (humain)",alignment:"NB",fp:2,environment:"Universit de Magie de Val-d'Ombre  Cour centrale",organization:"Solitaire (parfois avec 1-2 condisciples)",initiative:"+1",senses:"Perception +4",ac:{total:12,touch:11,flatFooted:11},hp:9,hd:"2d8",saves:{fort:"+1",ref:"+1",will:"+3"},speed:"9 m",attack:"bton runique +1 (1d6 non ltal)",fullAttack:"bton runique +1 (1d6 non ltal)",space:"1,5 m",reach:"1,5 m",specialAttacks:[],specialQualities:["Mmoire prodigieuse (+2 Collecte d'infos sur l'Universit)","Badge discret de la Fraternit Nyx (permet d'accder aux couloirs tudiants la nuit)"],abilities:{str:10,dex:12,con:12,int:14,wis:12,cha:11},skills:"Diplomatie +6, Collecte d'infos +7, Connaissance (arcane) +9, Psychologie +4",feats:"Science de l'initiative, Don de ngociateur",tactics:"vite toute violence. Prfre parlementer, partager des rumeurs ou accompagner les PJ jusqu'au bureau de Thade si convaincu.",loot:"Cl de dortoir en argent, carnet de rumeurs griffonnes, badge de Nyx (preuve implicante).",isEnemy:!1,role:"tudiant inquiet qui sert de premier point de contact avec l'Universit.",tactical:{bookReference:"Scnario 1  Acte 2, Scne 1 : La Fraternit Dissoute",scenarioContext:"Althis craint encore la Fraternit Nyx mais sait que Thade cache des secrets. Il accepte d'aider les PJ si ceux-ci restent discrets.",spells:[],specialActions:[{name:"Guide improvis",details:"Peut accorder un bonus circonstanciel de +2 aux tests de Diplomatie ou de Collecte d'infos  l'Universit s'il accompagne les PJ."},{name:"Rumeurs touffes",details:"Sur un test de Diplomatie DD 15 russi par les PJ, Althis partage des rumeurs ciblant directement Thade Coren."}],tacticFeats:[{name:"Science de l'initiative",details:"Toujours le premier  parler pour viter que la garde universitaire ne s'en mle."}],tacticSummary:"Tente de calmer toute tension et oriente les PJ vers le bureau de Thade aprs les avoir mis en garde contre la surveillance du Conseil."},ogas:{occupation:"Archive les documents de l'Universit et surveille les activits de la Fraternit Nyx",goal:"Aider les PJ  dcouvrir la vrit sur Thade sans se mettre en danger",attitude:"Nerveux mais coopratif, veut bien faire mais craint les reprsailles",stake:"Risque l'expulsion de l'Universit ou pire ; peut devenir un alli prcieux dans l'investigation"}},{id:"durnik_chef_mineur",name:"Durnik, chef de la Guilde des Mineurs",class:"Expert",lvl:5,size:"Moyen",type:"Humanode (humain)",alignment:"NB",fp:5,environment:"Quartier des Mineurs, tunnels suprieurs",organization:"Avec 2-4 gardes de mine",initiative:"+1",senses:"Perception +5",ac:{total:17,touch:11,flatFooted:16},hp:42,hd:"5d10+15",saves:{fort:"+8",ref:"+2",will:"+4"},speed:"9 m",attack:"hache de mine +8 (1d10+4 tranchant)",fullAttack:"hache de mine +8/+3 (1d10+4)",space:"1,5 m",reach:"1,5 m",specialAttacks:["Cri d'alarme 1/j (Intimidation de masse, test VS Volont DD 14 : secou 1d4 rd)"],specialQualities:["Rsistance  la fatigue (tests Con pour marches forces +4)"],abilities:{str:16,dex:12,con:16,int:10,wis:12,cha:12},skills:"Escalade +9, Survie +7, Intimidation +8, Artisanat (mines) +9",feats:"Attaque en puissance, Science de l'initiative, Robustesse",tactics:"Se place en avant dans les tunnels mins, fait reculer les PJ s'ils menacent les mineurs ; accepte de ngocier si preuve de complot.",loot:"Hache lourde runique, carnet de codes des tunnels, pierre de tonnerre",isEnemy:!1,role:"Chef de guilde, ouvre ou ferme l'accs aux mines.",details:["Motivation : Protger les mineurs de la 'pierre malade' et des dcisions du Conseil.","Attitude : Bourru mais honnte. Respecte les PJ qui prennent des risques pour les siens.","Utilisation : Donneur de qutes pour les scnarios lis  la Mine et  la Spirale.","Test social : Difficile  convaincre si les PJ sont trop proches des Mages ou du Conseil.","Au Pont Secret : Rsolu  mourir pour gagner du temps lors de l'vacuation (sacrifice hroque)."],tactical:{bookReference:"Bestiaire : Dossier 'Durnik, chef des mineurs' (Actes 2-3)",scenarioContext:"Acte 2 : surveille les accs aux tunnels suprieurs. Utilise son terrain pour crer des goulots d'tranglement et protger les mineurs.",spells:[],specialActions:[{name:"Cri d'alarme",details:"1/j, effectue un test de Volont DD 14 pour retirer les PJ du support moral (-1 moral, secou 1d4 tours)."}],tacticFeats:[{name:"Attaque en puissance",details:"Maximise les dgts avec sa hache pour punir les intrus."},{name:"Robustesse",details:"Reste au contact mme quand les tunnels s'effondrent."}],tacticSummary:"Se place devant les berges mines, frappe en premire ligne, puis recule derrire des arcs de pierres. Fait reculer les PJ quand deux gardes tombent."},ogas:{occupation:"Dirige la Guilde des Mineurs et protge les tunnels suprieurs",goal:"Protger ses mineurs de la 'pierre malade' et des dcisions dangereuses du Conseil",attitude:"Bourru mais honnte, respecte ceux qui prennent des risques pour les siens",stake:"Risque la vie de ses mineurs et la fermeture des mines ; peut sauver ses hommes par l'vacuation"}},{id:"capitaine_garde_temple",name:"Capitaine de la garde du Temple",class:"Guerrier",lvl:5,size:"Moyen",type:"Humanode (humain)",alignment:"LN",fp:4,environment:"Temple-Forgeron et environs",organization:"Escouade (capitaine + 3-6 gardes)",initiative:"+1",senses:"Perception +6",ac:{total:18,touch:11,flatFooted:17},hp:40,hd:"5d10+10",saves:{fort:"+6",ref:"+3",will:"+2"},speed:"6 m (armure)",attack:"pe longue +8 (1d8+3 tranchant)",fullAttack:"pe longue +8/+3 (1d8+3)",space:"1,5 m",reach:"1,5 m",specialAttacks:["Ordre de tir (les gardes allis gagnent +1 attaquer pour 1 tour)"],specialQualities:["Bonus de commandement (+1 moral aux gardes  9 m)"],abilities:{str:15,dex:12,con:14,int:10,wis:12,cha:12},skills:"Perception +6, Intimidation +7, Profession (soldat) +8",feats:"Science de l'initiative, Robustesse, Arme de prdilection (pe longue)",tactics:"Forme les gardes en ligne, couvre la retraite des civils, ngocie si l'autorit du Temple est invoque.",loot:"pe longue grave, plastron bleu nuit, sceau du Temple",isEnemy:!1,role:"Officier pragmatique, pivot entre temple et civils.",details:["Motivation : Maintenir l'ordre et viter une guerre civile ouverte.","Attitude : Suspicion envers les PJ impliqus dans trop d'incidents.","Combat : Peut devenir un ennemi direct si les PJ se rangent ouvertement contre le Conseil.","Spoiler : Manipul par des ordres falsifis provenant de la faction de Thade."],tactical:{bookReference:"Bestiaire : 'Capitaine de la garde du Temple' (Quartier du Savoir)",scenarioContext:"Acte 1 : dfend l'accs au Temple-Forgeron. Coordonne les gardes et use de ses ordres pour encadrer les civils.",spells:[],specialActions:[{name:"Ordre de tir",details:"+1 aux jets dattaque des gardes  9 m pendant 1 tour (1/j)."}],tacticFeats:[{name:"Science de l'initiative",details:"Initie les charges coordonnes avant que les PJ ne s'organisent."},{name:"Robustesse",details:"Absorbe les attaques pendant qu'il protge un passage."}],tacticSummary:"Reste en formation serre, couvre la retraite des civils et force les PJ  passer par les gardes. Plie si l'autorit du Temple l'exige."},ogas:{occupation:"Commande l'escouade de gardes du Temple-Forgeron",goal:"Maintenir l'ordre et viter une guerre civile ouverte",attitude:"Suspicieux envers les PJ impliqus dans trop d'incidents, mais pragmatique",stake:"Risque de perdre le contrle de la situation et de voir le chaos s'installer ; peut restaurer l'ordre"}},{id:"marchand_fou_mercane",name:"Le Marchand Fou (Mercane exil)",class:"Magicien",lvl:9,size:"Moyen",type:"Extrieur (loyal)",alignment:"LN",fp:6,environment:"Spirale  Couloirs de Chair",organization:"Solitaire",initiative:"+2",senses:"Vision dans le noir 18 m, Perception +10",ac:{total:19,touch:12,flatFooted:17},hp:52,hd:"7d8+21",saves:{fort:"+6",ref:"+5",will:"+9"},speed:"9 m",attack:"dague +8 (1d4+2)",fullAttack:"dague +8/+3 (1d4+2)",space:"1,5 m",reach:"1,5 m",specialAttacks:["Sorts inns (NLS 7) : porte dimensionnelle 1/j, invisibilit 2/j, dtection de la magie  volont"],specialQualities:["Rsistance  la magie 18","Immunit au poison","Sens marchand (+4 Estimation)"],abilities:{str:10,dex:14,con:16,int:18,wis:12,cha:16},skills:"Estimation +14, Bluff +12, Diplomatie +12, Psychologie +10, Connaissance (plans) +11",feats:"Science de l'initiative, Ngociateur, Volont de fer",tactics:"Ngocie d'abord, se rend invisible si menac, tente la fuite dimensionnelle. Vend information contre vitalit.",loot:"Trousse de marchandises exotiques, anneau de discrtion mineure",isEnemy:!1,role:"Marchand opportuniste, prte  des marchs tranges.",tactical:{bookReference:"Bestiaire : 'Marchand Fou' (Spirale  Couloirs de Chair)",scenarioContext:"Acte 4 : apparait en ngociateur instable dans les couloirs de la Spirale, prt  sacrifier des objets contre des informations.",spells:[{name:"Porte dimensionnelle (inn)",details:"1/j pour s'chapper ou faire traverser un alli, dclench aprs avoir vendu un objet."},{name:"Invisibilit (inn)",details:"2/j pour s'clipser aprs une transaction ou un chec tactique."}],specialActions:[{name:"Dtection de la magie",details:"Continu, repre les PJ essayant de mentir ou de dissimuler un objet prcieux."}],tacticFeats:[{name:"Science de l'initiative",details:"Avance les ngociations avant que la troupe ne se concentre."},{name:"Volont de fer",details:"Rsiste aux menaces mentales ou aux tentatives de lui faire abandonner un march."}],tacticSummary:"Ngocie, propose des deals, puis se rend invisible ou franchit une porte dimensionnelle si la situation tourne au combat."},ogas:{occupation:"Erre dans les Couloirs de Chair de la Spirale en cherchant une sortie",goal:"chapper  la Spirale et retrouver la libert, quitte  faire des marchs tranges",attitude:"Opportuniste et instable, prt  ngocier mais mfiant",stake:"Risque de rester pig ternellement dans la Spirale ; peut obtenir sa libert par un march"}},{id:"lysa_exploratrice_perdue",name:"Lysa, exploratrice perdue",class:"Rdeur",lvl:4,size:"Moyen",type:"Humanode (humain)",alignment:"NB",fp:4,environment:"Spirale  Premier cercle",organization:"Solitaire (survivante)",initiative:"+3",senses:"Perception +7",ac:{total:17,touch:13,flatFooted:14},hp:28,hd:"4d8+8",saves:{fort:"+4",ref:"+6",will:"+2"},speed:"9 m",attack:"pe courte +7 (1d6+2)",fullAttack:"pe courte +7 (1d6+2)",space:"1,5 m",reach:"1,5 m",specialAttacks:["Attaque sournoise +2d6"],specialQualities:["vasion","Esquive instinctive"],abilities:{str:12,dex:16,con:14,int:12,wis:10,cha:10},skills:"Discrtion +10, Perception +7, Survie +7, Acrobatie +9",feats:"Arme de prdilection (pe courte), Tir de prcision, Esquive",tactics:"Observe avant d'agir ; coopre si on partage eau/soins. vite le combat direct, cherche les issues.",loot:"Carte dforme de la Spirale, rations maigres",isEnemy:!1,role:"Guide de circonstance, possible allie ou romance survie.",tactical:{bookReference:"Bestiaire : 'Lysa, exploratrice perdue' (Spirale  Premier cercle)",scenarioContext:"Acte 3 : guide les PJ puis doit se dfendre contre des chasseurs. Prfre viter le combat direct.",spells:[],specialActions:[{name:"Attaque sournoise",details:"+2d6 quand elle frappe depuis la cachette ou aprs une vasion."}],tacticFeats:[{name:"Tir de prcision",details:"Finit les cratures blesses  distance."},{name:"Esquive",details:"Reste hors de porte avec des dplacements prcis."}],tacticSummary:"Observe d'abord, coopre quand on partage ressources, puis frappe en retrait en visant les ouvertures ; fuit si la situation dgnre."},ogas:{occupation:"Survit dans le Premier cercle de la Spirale en cherchant une sortie",goal:"chapper  la Spirale et retrouver la surface",attitude:"Mfiante mais prte  cooprer si on partage ressources et informations",stake:"Risque de mourir de faim ou d'tre tue par les cratures ; peut s'chapper avec l'aide des PJ"}},{id:"inevitable_contremetre",name:"Invitable Contremtre",class:"Constructe",lvl:7,size:"Moyen",type:"Extrieur (Loi, Artfact)",alignment:"LN",fp:6,environment:"Spirale  Salle des Engrenages",organization:"Solitaire ou patrouille (1-2)",initiative:"+1",senses:"Vision dans le noir 18 m, Perception Aveugle 6 m",ac:{total:22,touch:11,flatFooted:21},hp:68,hd:"9d8+27",saves:{fort:"+8",ref:"+4",will:"+9"},speed:"6 m ; vol stationnaire 3 m (manoeuvre parfaite)",attack:"Marteau de Gravit +12 (1d8+4 contondant, Rf. DD 17 annule Ralentissement)",fullAttack:"Marteau de Gravit +12 (1d8+4 contondant) et Rayon de Stase +9 (1d6 froid, Vol. DD 17 annule Ralentissement)",space:"1,5 m",reach:"1,5 m",specialAttacks:["Rayon de Stase (Ralentissement 1 tour, Volont DD 17 annule)"],specialQualities:["Champ Anti-magie Localis (rayon 1,5 m, 3 tours/jour)","RD 5/chaotique","Immunit (Artfact) : poison, sommeil, maladie","Conviction de Loi (+2 JS contre enchantements)"],abilities:{str:18,dex:12,con:16,int:12,wis:14,cha:12},skills:"Dtection +14, Psychologie +12, Connaissance (ingnierie) +10",feats:"Robustesse, Science de l'Initiative, Vigilance",tactics:"Neutralise les lanceurs, ngocie si preuve de l'anomalie de Thade ; peut basculer d'alli  ennemi.",loot:"Cl de recalibrage, noyau d'nergie rgul.",isEnemy:!1,role:"Gardien neutre des mcanismes de la Spirale, potentiel alli si convaincu.",tactical:{bookReference:"Bestiaire : 'Invitable Contremtre' (Spirale  Salle des Engrenages)",scenarioContext:"Acte 4 : surveille l'accs mcanique de la Spirale. Alterne sabots et rayon de stase pour neutraliser les lanceurs de sorts.",spells:[],specialActions:[{name:"Rayon de Stase",details:"+9, inflige 1d6 froid + ralentissement (Vol DD 17 pour annuler) ; priorise les lanceurs de sorts."}],tacticFeats:[{name:"Robustesse",details:"Supporte les attaques magiques lorsque son champ anti-magie est actif."},{name:"Science de l'initiative",details:"Agit avant les cantrips ennemis."}],tacticSummary:"Bloque les couloirs avec son marteau de gravit, dclenche son champ anti-magie localis, puis vise les lanceurs avec le rayon de stase ; peut ngocier si l'anomalie de Thade est clairement dmontre."},ogas:{occupation:"Surveille et maintient les mcanismes de la Salle des Engrenages",goal:"Prserver l'ordre et l'quilibre de la Spirale selon les lois cosmiques",attitude:"Neutre et mthodique, peut devenir alli si on prouve que Thade viole les lois",stake:"Risque de voir la Spirale corrompue par le chaos ; peut restaurer l'quilibre cosmique"}},{id:"gardien_cimetiere",name:"Gardien du Cimetire",class:"Prtre",lvl:4,size:"Moyen",type:"Humanode (Humain)",alignment:"NB",fp:4,environment:"Cimetire en terrasse",organization:"Solitaire",initiative:"+1",senses:"Dtection +7",ac:{total:16,touch:11,flatFooted:15},hp:32,hd:"4d8+12",saves:{fort:"+6",ref:"+2",will:"+2"},speed:"9 m",attack:"Bton Ferr +6 (1d6+2 non ltal)",fullAttack:"Bton Ferr +6 (1d6+2 non ltal)",space:"1,5 m",reach:"1,5 m",specialAttacks:["Bannissement Mineur des Morts-Vivants (1/j, NLS 4, comme Dissipation cible)"],specialQualities:["Bonus +2 JS contre la peur dans le cimetire","Dtection des Perturbations du Sol Sacr"],abilities:{str:14,dex:12,con:16,int:10,wis:12,cha:10},skills:"Survie +8, Dtection +7, Connaissance (religion) +6",feats:"Robustesse, Vigilance, Arme de Prdilection (bton)",tactics:"Avertit avant dattaquer, soutient les PJ contre profanateurs ; se replie dans le mausole si submerg.",loot:"Cls du mausole, amulette bnie (+1 JS contre peur).",isEnemy:!1,role:"Protecteur bienveillant du cimetire, ressource pour informations ou bndictions.",tactical:{bookReference:"Bestiaire : 'Gardien du Cimetire' (Terrasse du Cimetire)",scenarioContext:"Acte 2 : protge les spultures contre les profanateurs et les morts-vivants ; sert d'alli mais peut repousser les PJ si la peur s'installe.",spells:[],specialActions:[{name:"Bannissement Mineur des Morts-Vivants",details:"1/j, NLS 4, agit comme une dissipation cible pour repousser les morts-vivants autour de lui."}],tacticFeats:[{name:"Robustesse",details:"Soutient la ligne quand les morts-vivants attaquent en masse."},{name:"Vigilance",details:"Maintient les PJ en scurit avec une perception accrue de la peur et de la trahison."}],tacticSummary:"Privilgie la prvention : avertit avant d'attaquer, soutient les PJ contre les profanations, puis se replie dans le mausole si submerg."},ogas:{occupation:"Protge le cimetire en terrasse contre les profanateurs et morts-vivants",goal:"Prserver la saintet des spultures et empcher toute profanation",attitude:"Bienveillant et protecteur, avertit avant d'attaquer",stake:"Risque la profanation des tombes et l'invasion de morts-vivants ; peut sanctifier le cimetire"}},{id:"archimage_defecteur",name:"Archimage Dfecteur",class:"Magicien",lvl:9,size:"Moyen",type:"Humanode (Humain)",alignment:"N",fp:9,environment:"Quartier du Savoir  Tour des Mages (cachette)",organization:"Solitaire",initiative:"+2",senses:"Vision dans le noir (sort), Dtection +10",ac:{total:18,touch:12,flatFooted:16},hp:45,hd:"9d4+18",saves:{fort:"+5",ref:"+5",will:"+9"},speed:"9 m",attack:"Bton de force +5 (1d6+1)",fullAttack:"Bton de force +5 (1d6+1)",space:"1,5 m",reach:"1,5 m",specialAttacks:["Sorts de Magicien NLS 9"],specialQualities:["Contre-mesures anti-ncromancie","Portails Rapides"],abilities:{str:8,dex:14,con:14,int:19,wis:14,cha:10},skills:"Art de la magie +16, Connaissances (arcanes) +16, Connaissances (plans) +14, Dcryptage +12",feats:"Ecole Renforce (Abjuration), Extension d'effet, Magie de Guerre",tactics:"Reste invisible, observe, et n'intervient que pour saboter un rituel ou fuir via un portail.",loot:"Parchemin de Dissipation Suprme, Cl de contournement des protections de la Tour.",isEnemy:!1,role:"Ancien matre du Conseil, tente de saboter Thade de l'intrieur.",details:["Motivation : Stopper Thade avant la fusion avec la Spirale.","Attitude : Paranoaque, exige des preuves de loyaut.","Pouvoir : Portails rapides, contre-mesures anti-ncromancie.","Usage : Peut fournir des cls de contournement dans la Tour."],ogas:{occupation:"Se cache dans la Tour des Mages et observe les agissements de Thade",goal:"Stopper Thade avant qu'il ne fusionne avec la Spirale",attitude:"Paranoaque et mfiant, exige des preuves de loyaut avant d'aider",stake:"Risque d'tre dcouvert et limin par Thade ; peut empcher la catastrophe finale"}},{id:"tenancier_taverne",name:"Mara, des Fumes Rouges",class:"Expert",lvl:4,size:"Moyen",type:"Humanode (humain)",alignment:"NB",fp:3,environment:"Quartier des Mineurs  Taverne des Fumes Rouges",organization:"Solitaire (avec personnel)",initiative:"+0",senses:"Psychologie +8",ac:{total:12,touch:10,flatFooted:12},hp:22,hd:"4d8+4",saves:{fort:"+2",ref:"+1",will:"+5"},speed:"9 m",attack:"Gourdin +4 (1d6+1)",fullAttack:"Gourdin +4 (1d6+1)",space:"1,5 m",reach:"1,5 m",specialAttacks:[],specialQualities:["Rseau des mineurs (+4 Collecte d'infos dans le quartier)"],abilities:{str:12,dex:10,con:12,int:12,wis:14,cha:14},skills:"Psychologie +8, Diplomatie +9, Profession (aubergiste) +10, Intimidation +6",feats:"Volont de fer, Ngociateur",tactics:"Utilise sa rputation pour calmer les bagarres. Sort son gourdin 'Brise-Crne' si ncessaire.",loot:"Caisse de la taverne, cl du puits secondaire.",isEnemy:!1,role:"Tenancire respecte, point d'info central du quartier minier.",details:["Motivation : Protger 'ses' mineurs et garder son tablissement debout.","Attitude : Maternelle mais ferme. Ne s'en laisse pas compter par les mages.","Lien : Possde les cls d'accs aux puits secondaires (Scnario 2)."],ogas:{occupation:"Gre la Taverne des Fumes Rouges et coute les conversations des mineurs",goal:"Protger 'ses' mineurs et maintenir son tablissement debout",attitude:"Maternelle mais ferme, ne se laisse pas intimider par les mages",stake:"Risque de perdre son tablissement et de voir ses mineurs en danger ; peut devenir une allie cl"}}],$S=ZS.map(n=>hg(n)),WS=[{id:"sujet_zero",name:"Sujet Zro",class:"Aberration guerrire",lvl:8,size:"Grand",type:"Crature artificielle (aberration)",alignment:"CN",fp:8,environment:"Spirale  Laboratoire secret de Thade",organization:"Solitaire",initiative:"+1",senses:"Vision dans le noir 18 m, odorat",ac:{total:18,touch:9,flatFooted:17},hp:102,hd:"12d10+36",saves:{fort:"+9",ref:"+5",will:"+6"},sr:"16",dr:"5/Magie",speed:"9 m",attack:"griffe +14 (1d8+6)",fullAttack:"2 griffes +14 (1d8+6) et morsure +12 (2d6+3)",space:"3 m",reach:"3 m",specialAttacks:["Rage contrle (+2 dgts, 5 tours)","Prise puissante (+4 sur lutte)"],specialQualities:["Rgnration 3 (supprime par dgts radieux ou soniques)"],abilities:{str:22,dex:12,con:20,int:6,wis:12,cha:6},skills:"Perception +10, Intimidation +8",feats:"Robustesse, Science du critique (griffe), Attaque en puissance, Combat en aveugle",tactics:"S'acharne sur la cible la plus bruyante ; si rgnration stoppe, tente d'abattre rapidement puis fuit vers Thade.",loot:"Implants exprimentaux, chantillon d'clat de Spirale",isEnemy:!0,role:"Garde du laboratoire, tragdie contrle par Thade.",tactical:{bookReference:"Bestiaire : 'Sujet Zro' (Annexe Spirale - laboratoire)",scenarioContext:"Acte 4 : combat d'anantissement dans les laboratoires. Se concentre sur des attaques brutes et sa rgnration, avec des pics de rage pour punir les soins.",spells:[],specialActions:[{name:"Rage contrle",details:"+2 dgts pendant 5 tours, dclenche quand il perd >30% PV avant de changer de cible."},{name:"Prise puissante",details:"+4 sur lutte, cherche  immobiliser le lanceur de sorts ou le gurisseur."}],tacticFeats:[{name:"Science du critique",details:"Optimise les attaques de griffe en concentration sur le lanceur de sorts le plus vulnrable."},{name:"Attaque en puissance",details:"Souhaite des frappes maximales sur les tanks blesss."}],tacticSummary:"Fonce sur la cible la plus bruyante, utilise sa rgnration pour rester au contact ; si la rgnration est stoppe, tente de fuir vers Thade."},ogas:{occupation:"Garde le laboratoire secret de Thade dans la Spirale",goal:"Protger le laboratoire et obir aux ordres de Thade",attitude:"Agressif et instinctif, attaque sans ngociation",stake:"Risque d'tre dtruit si sa rgnration est stoppe ; peut liminer les intrus"}},{id:"assassin_masque",name:"Assassin",class:"Roublard",lvl:6,size:"Moyen",type:"Humanode (Humain)",alignment:"NM",fp:5,environment:"Ruelles de Val-d'Ombre, toits",organization:"Solitaire ou duo",initiative:"+6",senses:"Dtection +8",ac:"18 (+4 Dex, +4 Armure) ; contact 14, pris au dpourvu 14",hp:45,dv:"6d8+18",js:{vig:"+5",ref:"+9",vol:"+3"},vit:"9 m, escalade 6 m",abb:"+4",grp:"+6",attaque:"Dague +8 (1d4+2, x2) ou Arbalte Lgre +8 (1d8, 19-20/x2)",att_complete:"Dague +8/+3 (1d4+2, x2) ou Arbalte Lgre +8 (1d8, 19-20/x2)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Attaque Sournoise +3d6","Poison Enduit (Vig. DD 15)"],qual_sp:["Esquive Instinctive","Bonus Discrtion +4 en milieu urbain"],carac:{for:12,dex:18,con:14,int:12,sag:10,cha:10},comptences:"Discrtion +14, Acrobaties +12, Dtection +8, Escalade +10",dons:"Science de l'Initiative, Tir de Prcision, Arme de Prdilection (dague)",tactiques:"Frappe depuis les ombres, s'acharne sur les cibles isoles ; peut ngocier un contrat si pris de vitesse.",butin:"Lettre scelle, fiole de poison, masque rituel",est_ennemi:!0,role:"Tueur  gages li aux complots urbains.",details:["Motivation : L'argent et le frisson du danger.","Attitude : Ne parle presque jamais, communique par gestes.","Combat : Spcialiste des attaques surprise et des chutes mortelles.","Spoiler : Peut tre li  une faction que les PJ croyaient allie."],tactical:{bookReference:"Bestiaire urbain",scenarioContext:"Acte 1-3 : embuscade dans les toits. Prfre frapper isolment avant que les gardes se regroupent.",spells:[],specialActions:[{name:"Attaque sournoise",details:"+3d6 ds qu'il frappe un ennemi en dehors du combat."},{name:"Poison enduit",details:"Application sur dague (Vig DD 15), utilis sur ses premires attaques pour maximiser la victime engage."}],tacticFeats:[{name:"Tir de prcision",details:"Ouverture sur la cible isole (dague ou arbalte)."},{name:"Science de l'initiative",details:"Permet d'agir avant la majorit de la troupe et de choisir sa cible."}],tacticSummary:"Frappe depuis les ombres, vise les cibles isoles, peut ngocier ou s'enfuir si surpris."},ogas:{occupation:"Traque ses cibles dans les ruelles et sur les toits de Val-d'Ombre",goal:"Accomplir son contrat d'assassinat pour l'argent et le frisson",attitude:"Silencieux et professionnel, communique par gestes, peut ngocier si pris de vitesse",stake:"Risque sa vie et sa rputation ; peut gagner une grosse somme et sa rputation"}},{id:"etudiant_renvoye",name:"Jaren",class:"Magicien",lvl:1,size:"Moyen",type:"Humanode (Humain)",alignment:"Neutre Mauvais",fp:1,environment:"Cimetire des Terrasses, Universit de Magie",organization:"Solitaire (accompagn de 3 brutes)",initiative:"+6",senses:"Dtection +2",ac:"12 (+2 Dex) ; contact 12, pris au dpourvu 10",hp:5,dv:"1d4+1",js:{vig:"+1",ref:"+2",vol:"+2"},vit:"9 m",abb:"+0",grp:"+1",attaque:"Dague +1 (1d4+1) ou Bton +1 (1d6+1)",att_complete:"Dague +1 (1d4+1) ou Bton +1 (1d6+1)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Sort mineur  volont (Rayon de givre +3 toucher  distance, 1d3 froid)","Couverture : +4 CA contre les attaques  distance derrire une stle (terrain)"],qual_sp:["Science acadmique (+2 en Connaissances : arcanes)","Vu de Silence (Inconscient) : si interrog sur le Matre, dclenchement de censure (lment de scnario)"],carac:{for:12,dex:14,con:12,int:15,sag:10,cha:8},comptences:"Connaissances (arcanes) +9, Art de la magie +6, Discrtion +6, Dtection +2",dons:"Science de l'Initiative, criture de parchemins",tactiques:"Reste derrire les brutes. Tour 1 : lance Armure de mage si menac (CA 16 ensuite). Sinon, Projectile magique sur la cible la plus blesse. Utilise Rayon de givre pour harceler et reculer. Cherche  fuir ds quune brute tombe.",buffs:[{name:"Armure de mage",effect:"+4 CA darmure (CA passe  16)",duration:"1 heure"}],spells_prepared:{niveau0:["Rayon de givre","Dtection de la magie","Lumire"],niveau1:["Armure de mage","Projectile magique"]},butin:"Broche en argent (fraternit Nyx), Outils chirurgicaux (Universit), Liste de 'Sujets' (Nains), 1 parchemin de Rayon affaiblissant",est_ennemi:!0,role:"tudiant dsespr et manipul, pivot de l'enqute entre le Cimetire et l'Universit.",tactical:{bookReference:"Scnario 1  Acte 1, Scne 3 : L'Interrogatoire interrompu",scenarioContext:"Membre junior de la Fraternit Nyx. Terrifi par Thade Coren, mais obsd par ses recherches.",spells:[{name:"Rayon de givre",details:"+3 toucher  distance, 1d3 froid."},{name:"Projectile magique",details:"1 projectile (1d4+1), pas de JS."},{name:"Armure de mage",details:"+4 CA darmure, dure 1 heure."}],specialActions:[{name:"Appel  l'aide",details:"Si Jaren tombe  3 PV ou moins, il tente de se rendre/fuir et marchande sa vie."}],tacticSummary:"Terrain + brutes = cran. Jaren nest pas un duelliste : il pique, recule, puis tente la fuite."},ogas:{occupation:"Mne des expriences ncromantiques au cimetire avec ses brutes",goal:"Prouver sa valeur  Thade Coren et regagner sa place  l'Universit",attitude:"Terrifi et dsespr, prt  se rendre si sa vie est menace",stake:"Risque l'emprisonnement ou la mort ; peut retrouver sa place  l'Universit"}},{id:"contremaitre_humain",name:"Varrus, contrematre humain",class:"Expert",lvl:5,size:"Moyen",type:"Humanode (Humain)",alignment:"LE",fp:5,environment:"Quartier des Mineurs  Place Centrale",organization:"Solitaire (avec 2 gardes)",initiative:"+1",senses:"Perception +5",ac:{total:16,touch:11,flatFooted:15},hp:38,hd:"5d8+10",saves:{fort:"+4",ref:"+2",will:"+4"},speed:"9 m",attack:"Fouet +6 (1d3 non ltal ou ltal)",fullAttack:"Fouet +6 (1d3)",space:"1,5 m",reach:"4,5 m (fouet)",specialAttacks:["Dsarmement (Amlior)"],specialQualities:["Autorit Tyranique (+2 Intimidation sur les mineurs)"],abilities:{str:14,dex:12,con:14,int:12,sag:10,cha:14},skills:"Intimidation +10, Psychologie +6, Profession (contrematre) +8",feats:"Maniement du fouet, Expertise du combat",tactics:"Reste derrire ses gardes, utilise son fouet pour dsarmer ou faire trbucher les meneurs.",loot:"Fouet de matre, liste noire des mineurs, lettre scelle (ordre de Thade).",isEnemy:!0,role:"Intermdiaire entre le Conseil et les mineurs.",details:["Motivation : Maintenir la production cote que cote pour conserver ses privilges.","Attitude : Mprisant envers les Nains, agressif envers les PJ qui remettent en cause l'autorit.","Combat : Peut devenir un antagoniste lors d'une meute ou d'un piquet de grve qui dgnre.","Indice : Reoit des ordres indirectement lis  Thade via des lettres scelles."],ogas:{occupation:"Supervise les mineurs sur la Place Centrale avec ses gardes",goal:"Maintenir la production cote que cote pour conserver ses privilges",attitude:"Mprisant envers les Nains, agressif envers ceux qui remettent en cause l'autorit",stake:"Risque de perdre sa position et ses privilges ; peut maintenir le contrle de la mine"}},{id:"patrouille_mixte_conseil",name:"Patrouille Mixte du Conseil",class:"Guerrier",lvl:4,size:"Moyen",type:"Humanode (Humain/Nain)",alignment:"LN",fp:4,environment:"Quartier des Mineurs  Alle des Artisans",organization:"Escouade (4 gardes)",initiative:"+0",senses:"Perception +4",ac:{total:17,touch:10,flatFooted:17},hp:30,hd:"4d10+8",saves:{fort:"+6",ref:"+1",will:"+1"},speed:"6 m",attack:"Hallebarde +6 (1d10+2)",fullAttack:"Hallebarde +6 (1d10+2)",space:"1,5 m",reach:"3 m",specialAttacks:["Formation de mur (Couverture +4 si adjacents)"],specialQualities:[],abilities:{str:15,dex:10,con:14,int:10,wis:10,cha:10},skills:"Dtection +5, Intimidation +6",feats:"Robustesse, Arme de prdilection (hallebarde)",tactics:"Barricadent les ruelles, utilisent l'allonge des hallebardes pour tenir la foule  distance.",loot:"Uniforme du Conseil, ordre d'arrestation vierge, cristal relais.",isEnemy:!0,role:"Escouade composite charge de briser la rsistance artisanale.",details:["Motivation : Appliquer les ordres de Thade sous couvert du Conseil.","Tactiques : Barricader les ruelles, utiliser des immobilisations magiques.","Indice : Le chef porte un cristal relais identique  celui de Thade."],ogas:{occupation:"Patrouille dans l'Alle des Artisans pour maintenir l'ordre",goal:"Appliquer les ordres du Conseil et briser la rsistance artisanale",attitude:"Disciplins et mthodiques, suivent les ordres sans question",stake:"Risque d'tre dbords par la foule ; peut rtablir l'ordre par la force"}},{id:"garde_portail_mine",name:"Escouade de Gardes du Portail",class:"Guerrier",lvl:3,size:"Moyen",type:"Humanode (Humain)",alignment:"N",fp:3,environment:"Quartier des Mineurs  Entre de la Mine",organization:"Groupe (3-5)",initiative:"+1",senses:"Perception +5",ac:{total:16,touch:11,flatFooted:15},hp:26,hd:"3d10+6",saves:{fort:"+5",ref:"+2",will:"+1"},speed:"9 m",attack:"pe courte +5 (1d6+2)",fullAttack:"pe courte +5 (1d6+2)",space:"1,5 m",reach:"1,5 m",specialAttacks:[],specialQualities:[],abilities:{str:14,dex:12,con:14,int:10,wis:10,cha:10},skills:"Psychologie +4, Dtection +5",feats:"Vigilance, Arme de prdilection",tactics:"Dfensive stricte. Ne frappent que si on force le passage ou si une arme est tire.",loot:"Cls du treuil, lanterne, sceau falsifi.",isEnemy:!0,role:"Soldats puiss chargs de verrouiller l'accs.",details:["Motivation : Obir aux ordres contradictoires du Conseil tout en vitant un massacre.","Attitude : Nerveuse, souponne les PJ d'espionnage.","Usage : Obstacles physiques ou ngociation sous pression.","Indice : Portent des sceaux falsifis lis aux lettres de Thade."],ogas:{occupation:"Garde l'entre de la mine et contrle les accs",goal:"Obir aux ordres du Conseil tout en vitant un massacre",attitude:"Nerveux et souponneux, craignent l'espionnage",stake:"Risque un massacre s'ils ouvrent le feu ; peuvent maintenir la paix par la ngociation"}},{id:"magi_tuteur_loyal",name:"Matre Arcaniste Loyaliste",class:"Magicien",lvl:9,size:"Moyen",type:"Humanode (Humain)",alignment:"LN",fp:9,environment:"Quartier du Savoir  Tour des Mages",organization:"Solitaire (avec golems ou lmentaires)",initiative:"+2",senses:"Dtection de la magie, Vision dans le noir",ac:{total:18,touch:12,flatFooted:16},hp:45,hd:"9d4+18",saves:{fort:"+6",ref:"+5",will:"+8"},speed:"9 m",attack:"Rayon Arcanique +6 (4d6 force)",fullAttack:"Rayon Arcanique +6 (4d6 force)",space:"1,5 m",reach:"1,5 m",specialAttacks:["Sorts de Magicien NLS 9 (vocation/Abjuration)"],specialQualities:["Glyphes de Renvoi (1/tour, renvoie un sort de niveau 3 ou moins)"],abilities:{str:10,dex:14,con:14,int:18,wis:12,cha:12},skills:"Art de la magie +15, Connaissances (arcanes) +15, Intimidation +10",feats:"Ecole Renforce (vocation), vigilance",tactics:"Dclenche ses glyphes sans sommation, reste  distance derrire des champs de force.",loot:"Bton de dfense, parchemins de Dissipation.",isEnemy:!0,role:"Professeur rest fidle  la Guilde, mais pas  Thade.",details:["Motivation : Protger la Tour contre toute intrusion, PJ compris.","Attitude : Arrogant, dclenche des runes de dfense sans sommation.","Pouvoir : Champs de force, glyphes de renvoi, serviteurs lmentaires.","Usage : Mini-boss ou ngociateur si convaincu que Thade trahit la Guilde."],ogas:{occupation:"Dfend la Tour des Mages contre toute intrusion",goal:"Protger la Tour et la Guilde des Mages contre les intrus",attitude:"Arrogant et mfiant, dclenche ses dfenses sans sommation",stake:"Risque de voir la Tour compromise ; peut devenir alli si convaincu que Thade trahit la Guilde"}}],e_=WS.map(n=>hg(n)),t_=[{id:"rat_geat_spirale",name:"Rat Gant de la Spirale",size:"Petit",type:"Animal",alignment:"N",fp:"1/8",role:"Nuisible agressif corrompu par la magie.",details:["Attaque  vue.","Porteur de maladies.","Yeux luisants d'une lueur violette."],tactical:{bookReference:"Manuel des Monstres : Rat",scenarioContext:"Rencontre alatoire gouts.",spells:[],specialActions:["Maladie"],tacticFeats:["Attaque en finesse"],tacticSummary:"Submerge par le nombre, vise les cibles au sol."},environnement:"gouts, Zones de dchets",organisation:"Horde (10-20)",ini:"+3",sens:"Vision nocturne, Odorat",ca:{total:15,contact:14,pris_au_depourvu:12},pv:5,dv:"1d8+1",js:{vig:"+3",ref:"+5",vol:"+1"},vit:"12 m, escalade 6 m",abb:"+0",grp:"-4",attaque:"Morsure +4 (1d4 plus maladie)",att_complete:"Morsure +4 (1d4 plus maladie)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Maladie (Fivre des gouts, Vig DD 12)"],qual_sp:["Vision nocturne"],carac:{for:10,dex:17,con:12,int:2,sag:12,cha:4},comptences:"Discrtion +8, Escalade +10, Dtection +4",dons:"Attaque en finesse",tactiques:"Attaque en masse, fuit le feu.",butin:"Aucun",est_ennemi:!0},{id:"mendiant_hante",name:"Mendiant Hant",size:"Moyen",type:"Mort-vivant",alignment:"CN",fp:"1/6",role:"Victime collatrale de la Spirale.",details:["Marmonne des prophties incohrentes.","Inoffensif sauf si accul.","Peut donner des indices cryptiques."],tactical:{bookReference:"Guide du Matre : PNJ",scenarioContext:"Ambiance rue.",spells:[],specialActions:[],tacticFeats:["Endurance"],tacticSummary:"Fuit ou s'agrippe aux PJ pour les ralentir."},environnement:"Vieille Ville",organisation:"Solitaire ou foule (4-8)",ini:"+0",sens:"Dtection +0",ca:{total:10,contact:10,pris_au_depourvu:10},pv:4,dv:"1d8",js:{vig:"+0",ref:"+0",vol:"-1"},vit:"9 m",abb:"+0",grp:"+0",attaque:"Coup dsespr +0 (1d3 non ltal)",att_complete:"Coup dsespr +0 (1d3 non ltal)",espace:"1,5 m",allonge:"1,5 m",att_sp:[],qual_sp:["Folie (Immunis  la terreur)"],carac:{for:10,dex:10,con:10,int:9,sag:8,cha:8},comptences:"Discrtion +2",dons:"Endurance",tactiques:"S'accroche aux PJ, hurle, n'attaque que si provoqu ou contrl.",butin:"Guenilles, 1d6 pc",est_ennemi:!1},{id:"kobold_mineur",name:"Kobold Mineur",size:"Petit",type:"Humanode (Reptilien)",alignment:"LM",fp:"1/4",role:"Ouvrier esclave ou serviteur zl.",details:["Dteste les gnomes.","Adore les piges.","Craint la lumire."],tactical:{bookReference:"Manuel des Monstres : Kobold",scenarioContext:"Mines profondes.",spells:[],specialActions:[],tacticFeats:["Vigilance"],tacticSummary:"Attire les PJ dans les zones piges avant d'attaquer."},environnement:"Mines profondes",organisation:"quipe (4-8)",ini:"+1",sens:"Vision dans le noir 18 m",ca:{total:15,contact:12,pris_au_depourvu:14},pv:4,dv:"1d8",js:{vig:"+0",ref:"+1",vol:"+2"},vit:"9 m",abb:"+1",grp:"-3",attaque:"Pic de mineur +2 (1d4-1)",att_complete:"Pic de mineur +2 (1d4-1)",espace:"1,5 m",allonge:"1,5 m",att_sp:[],qual_sp:["Sensibilit  la lumire"],carac:{for:9,dex:13,con:10,int:10,sag:10,cha:8},comptences:"Artisanat (piges) +4, Dtection +2, Fouille +4",dons:"Vigilance",tactiques:"Attire les ennemis vers des piges, lance des cailloux.",butin:"Outils de mineur, ppites de cuivre",est_ennemi:!0},{id:"brutes_cimetiere",name:"Homme d'arme du cimetire",class:"Homme d'armes",lvl:"1",size:"Moyen",type:"Humanode (Humain)",alignment:"N",role:"Garde de bas tage.",details:["Superstitieux.","Mal pay.","Craint les morts-vivants qu'il garde."],tactical:{bookReference:"Manuel des Monstres : Homme d'armes",scenarioContext:"Cimetire.",spells:[],specialActions:[],tacticFeats:["Vigueur surhumaine"],tacticSummary:"Reste group et protge l'entre."},environnement:"cimetiere_terrasse",organisation:"Patrouille (3-6) ou Garde (1-2)",ini:"+0",sens:"Dtection +1",ca:{total:13,contact:10,pris_au_depourvu:13},pv:6,dv:"1d8+1",js:{vig:"+3",ref:"+0",vol:"+0"},vit:"9 m",abb:"+1",grp:"+2",attaque:"Gourdin +2 (1d6+1)",att_complete:"Gourdin +2 (1d6+1)",espace:"1,5 m",allonge:"1,5 m",att_sp:[],qual_sp:[],carac:{for:13,dex:11,con:12,int:9,sag:10,cha:8},comptences:"Intimidation +2, Dtection +1",dons:"Vigueur surhumaine",tactiques:"Obit aux ordres ; reste en formation ; fuit si son chef meurt.",butin:"Gourdin, armure de cuir clout, bouclier, 1d4 pa",est_ennemi:!0},{id:"gobelin_ferrailleur",name:"Gobelin Ferrailleur",size:"Petit",type:"Humanode (Gobelinode)",alignment:"NM",fp:"1/3",role:"Pillard opportuniste.",details:["Collectionne les dchets brillants.","Lche.","Vit dans les ruines."],tactical:{bookReference:"Manuel des Monstres : Gobelin",scenarioContext:"Ruines et dcharges.",spells:[],specialActions:[],tacticFeats:["Esquive"],tacticSummary:"Attaque  distance puis fuit pour se cacher."},environnement:"Dcharges, Ruines",organisation:"Bande (4-9)",ini:"+2",sens:"Vision dans le noir 18 m",ca:{total:15,contact:13,pris_au_depourvu:13},pv:5,dv:"1d8+1",js:{vig:"+3",ref:"+2",vol:"-1"},vit:"9 m",abb:"+1",grp:"-3",attaque:"Couteau rouill +3 (1d3)",att_complete:"Couteau rouill +3 (1d3)",espace:"1,5 m",allonge:"1,5 m",att_sp:[],qual_sp:["Dplacement silencieux +4"],carac:{for:11,dex:15,con:12,int:10,sag:9,cha:6},comptences:"Discrtion +6, Dtection +2, Escamotage +4",dons:"Esquive",tactiques:"Vole des objets et s'enfuit, tend des embuscades lches.",butin:"Objets vols htroclites, ferraille",est_ennemi:!0},{id:"zombie_mineur",name:"Zombie Putrfi",size:"Moyen",type:"Mort-vivant",alignment:"NM",fp:"1/2",role:"Cadavre anim sans volont.",details:["Ancien mineur.","Odeur pestilentielle.","Ne ressent pas la douleur."],tactical:{bookReference:"Manuel des Monstres : Zombie",scenarioContext:"Zones corrompues.",spells:[],specialActions:[],tacticFeats:["Robustesse"],tacticSummary:"Charge la cible la plus proche sans rflchir."},environnement:"Cimetire, gouts",organisation:"Horde (6-12)",ini:"-1",sens:"Vision dans le noir 18 m",ca:{total:11,contact:9,pris_au_depourvu:11},pv:12,dv:"2d12+3",js:{vig:"+0",ref:"-1",vol:"+3"},vit:"9 m (ne court pas)",abb:"+1",grp:"+2",attaque:"Coup +2 (1d6+1)",att_complete:"Coup +2 (1d6+1)",espace:"1,5 m",allonge:"1,5 m",att_sp:[],qual_sp:["Rduction des dgts 5/Tranchant","Immunits des morts-vivants"],carac:{for:13,dex:8,con:"-",int:"-",sag:10,cha:1},comptences:"",dons:"Robustesse",tactiques:"Avance implacablement, ne fuit jamais.",butin:"Aucun",est_ennemi:!0},{id:"milicien_valdombre",name:"Milicien de Val-d'Ombre",class:"Guerrier",lvl:"1",size:"Moyen",type:"Humanode (Humain)",alignment:"LN",role:"Dfenseur citoyen.",details:["Brassard de la ville.","Connat les rues.","Peut appeler de l'aide."],tactical:{bookReference:"Guide du Matre : Guerrier",scenarioContext:"Patrouille urbaine.",spells:[],specialActions:[],tacticFeats:["Vigilance"],tacticSummary:"Dfense coordonne, utilise le sifflet d'alarme."},environnement:"Ville",organisation:"Patrouille (2-4)",ini:"+1",sens:"Dtection +2",ca:{total:16,contact:11,pris_au_depourvu:15},pv:9,dv:"1d10+1",js:{vig:"+3",ref:"+1",vol:"+0"},vit:"6 m",abb:"+1",grp:"+2",attaque:"pe longue +2 (1d8+1)",att_complete:"pe longue +2 (1d8+1)",espace:"1,5 m",allonge:"1,5 m",att_sp:[],qual_sp:[],carac:{for:13,dex:12,con:12,int:10,sag:10,cha:10},comptences:"Intimidation +4, Dtection +2, Psychologie +2",dons:"Arme de prdilection (pe longue), Vigilance",tactiques:"Coordonne ses attaques, appelle la garde d'lite si dbord.",butin:"pe longue, broigne, sifflet",est_ennemi:!1},{id:"acolyte_cabale",name:"Acolyte de la Cabale",class:"Adepte",lvl:"1",size:"Moyen",type:"Humanode (Humain)",alignment:"NM",role:"Apprenti mage ambitieux.",details:["Robe sombre.","Tatouages arcaniques.","Regard fanatique."],tactical:{bookReference:"Manuel des Joueurs : Magicien",scenarioContext:"Tour des mages.",spells:[{name:"Projectile magique",details:"1d4+1 dgts"}],specialActions:[],tacticFeats:["Magie de guerre"],tacticSummary:"Vide ses sorts  distance puis tente de fuir."},environnement:"Tour des mages",organisation:"Solitaire ou Duo",ini:"+2",sens:"Dtection +1",ca:{total:12,contact:12,pris_au_depourvu:10},pv:7,dv:"2d4+2",js:{vig:"+1",ref:"+2",vol:"+4"},vit:"9 m",abb:"+1",grp:"+0",attaque:"Dague +1 (1d4-1)",att_complete:"Dague +1 (1d4-1)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Sorts (Niveau 1: Projectile magique, Armure de mage)"],qual_sp:[],carac:{for:8,dex:14,con:12,int:15,sag:12,cha:10},comptences:"Concentration +5, Art de la magie +6",dons:"cole renforce (vocation), Magie de guerre",tactiques:"Reste  distance, lance ses sorts puis fuit.",butin:"Parchemin niveau 1, composantes de sort",est_ennemi:!0},{id:"squelettes_nains_gardiens",name:"Squelette Nain Gardien",size:"Moyen",type:"Mort-vivant",alignment:"NM",fp:1,role:"Gardien ternel.",details:["Anciens guerriers du clan.","Os gravs de runes.","Yeux luisants violets (magie de Thade)."],tactical:{bookReference:"Manuel des Monstres : Squelette",scenarioContext:"Gardiens de la porte du manoir.",spells:[],specialActions:[],tacticFeats:["Science de l'initiative"],tacticSummary:"Reste en position dfensive devant la porte."},environnement:"Souterrains, Cryptes",organisation:"Binme",ini:"+5",sens:"Vision dans le noir 18 m",ca:{total:16,contact:11,pris_au_depourvu:15},pv:13,dv:"2d12",js:{vig:"+0",ref:"+1",vol:"+3"},vit:"9 m",abb:"+1",grp:"+2",attaque:"Hache de guerre naine +3 (1d10+1, x3)",att_complete:"Hache de guerre naine +3 (1d10+1, x3)",espace:"1,5 m",allonge:"1,5 m",att_sp:[],qual_sp:["Rduction des dgts 5/Contondant","Immunit au froid","Traits des morts-vivants"],carac:{for:13,dex:13,con:"-",int:"-",sag:10,cha:1},comptences:"",dons:"Science de l'initiative",tactiques:"Attaque sans peur, bloque le passage.",butin:"Hache de guerre naine, restes d'armure.",est_ennemi:!0},{id:"squelette_Instable",name:"Squelette Instable",size:"Moyen",type:"Mort-vivant",alignment:"NM",fp:"1/10",role:"Chair  canon sans esprit.",details:["Os blanchis et craquels.","Aucune lueur d'intelligence.","S'anime par magie instable."],tactical:{bookReference:"Manuel des Monstres : Squelette",scenarioContext:"Invocation accidentelle.",spells:[],specialActions:[],tacticFeats:["Science de l'initiative"],tacticSummary:"Attaque la cible la plus proche."},environnement:"N'importe quel",organisation:"Horde (4-12)",ini:"+5",sens:"Vision dans le noir 18 m",ca:{total:13,contact:11,pris_au_depourvu:12},pv:3,dv:"1/2 d12",js:{vig:"+0",ref:"+1",vol:"+1"},vit:"9 m",abb:"+0",grp:"+1",attaque:"Griffe +1 (1d4+1)",att_complete:"2 Griffes +1 (1d4+1)",espace:"1,5 m",allonge:"1,5 m",att_sp:[],qual_sp:["Rduction des dgts 5/Contondant","Immunit au froid","Traits des morts-vivants"],carac:{for:13,dex:13,con:"-",int:"-",sag:10,cha:1},comptences:"",dons:"Science de l'initiative",tactiques:"Attaque aveuglment la crature la plus proche (ami ou ennemi).",butin:"Aucun",est_ennemi:!1},{id:"sniv_kobold",name:"Sniv",size:"Petite",type:"Humanode (Reptilien)",alignment:"Neutre Mauvais",fp:"1/4",role:"Tmoin cl et guide rticent.",details:["Ignore la mort de Jaren (pense qu'il se cache).","Pense que ses frres 'chantent' dans la spirale.","Terrifi par Kaela (la femme aux yeux fous)."],tactical:{bookReference:"Manuel des Monstres : Kobold (Variante)",scenarioContext:"gouts sous le manoir.",spells:[],specialActions:["Rvlation de passage drob","Dsamorage de pige"],tacticFeats:["Alerte"],tacticSummary:"Se recroqueville en boule et donne des informations en change de nourriture ou de scurit."},environnement:"gouts, Sous-sols",organisation:"Solitaire (Traumatis)",ini:"+1",sens:"Vision dans le noir 18 m, Sensibilit  la lumire",ca:{total:13,contact:12,pris_au_depourvu:12},pv:4,dv:"1d8",js:{vig:"+2",ref:"+1",vol:"+0"},vit:"9 m",abb:"+1",grp:"-4",attaque:"Griffes +1 (1d3-1)",att_complete:"2 Griffes +1 (1d3-1)",espace:"1,5 m",allonge:"1,5 m",att_sp:[],qual_sp:["Connaissance des gouts (+4 aux jets de Survie dans ce lieu)"],carac:{for:8,dex:13,con:10,int:10,sag:10,cha:8},comptences:"Discrtion +8, Artisanat (piges) +4, Fouille +2, Survie +4",dons:"Alerte",tactiques:"Ne combat jamais. Se cache dans les conduits et supplie pour sa vie.",butin:"Un morceau de fromage rance, une cl en laiton ternie, des babioles sans valeur.",est_ennemi:!1},{id:"marionnettes_de_la_spirale",name:"Goule Mineure (Ancien Mineur)",size:"Moyen",type:"Mort-vivant",alignment:"CM",fp:1,role:"Mineurs transforms en goules par la corruption de la Spirale.",details:["Portent encore leurs casques de mineurs cabosss.","Odeur de terre humide et de putrfaction.","Gmissent sourdement en grattant les parois."],tactical:{bookReference:"Inspir du Manuel des Monstres (Goule)",scenarioContext:"Mines profondes et Premier cercle de la Spirale.",spells:[],specialActions:["Paralysie"],tacticFeats:["Attaques multiples"],tacticSummary:"Utilise sa mobilit pour encercler. Cherche  paralyser le maximum de cibles pour faciliter le festin de la meute."},environnement:"Mines profondes, Spirale",organisation:"Meute (4-8)",ini:"+2",sens:"Vision dans le noir 18 m",ca:{total:14,contact:12,pris_au_depourvu:12},pv:13,dv:"2d12",js:{vig:"+0",ref:"+2",vol:"+5"},vit:"9 m",abb:"+1",grp:"+2",attaque:"Morsure +2 (1d6+1 plus paralysie)",att_complete:"Morsure +2 (1d6+1) et 2 griffes +0 (1d3 plus paralysie)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Paralysie (Vigueur DD 12, 1d4+1 minutes ; les elfes y sont immuniss)"],qual_sp:["Traits des morts-vivants","Rsistance au renvoi (+2)"],carac:{for:13,dex:15,con:null,int:13,sag:14,cha:12},comptences:"Discrtion +7, Dtection +7, Escalade +6, Saut +6",dons:"Attaques multiples",tactiques:"Attaque en meute, privilgie les cibles en armure lgre pour garantir la paralysie.",butin:"Casques de mineurs abms, outils rouills (pics, pelles), parfois quelques ppites de minerai brut.",est_ennemi:!0}],a_=[{id:"charognard_errant",name:"Charognard Errant",size:"Moyen",type:"Extrieur (Chaos)",alignment:"CN",fp:2,role:"Prdateur opportuniste attir par la chair frache.",details:["Utilise les effondrements  son avantage.","Fuit si bless ou si la gravit se retourne.","Prsage des dangers naturels de la Spirale."],tactical:{bookReference:"Manuel des Monstres",scenarioContext:"Dsolation de la Spirale.",spells:[],specialActions:["Charge Instable"],tacticFeats:["Attaque en Puissance"],tacticSummary:"Charge les cibles isoles pour les renverser."},environnement:"Spirale  Zone de Dchets",organisation:"Solitaire ou meute (2-4)",ini:"+1",sens:"Vision dans le noir 18 m, Odorat",ca:{total:15,contact:11,pris_au_depourvu:14},pv:22,dv:"3d8+9",js:{vig:"+5",ref:"+4",vol:"+2"},vit:"9 m (6 c.) ; escalade 6 m",abb:"+3",grp:"+6",attaque:"Morsure +6 (1d6+3)",att_complete:"Morsure +6 (1d6+3) et 2 griffes +1 (1d4+1)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Charge Instable (Vig. DD 15 ou renvers sur terrain bris)"],qual_sp:["Camouflage d'boulis (+4 Discrtion dans les gravats)"],carac:{for:16,dex:12,con:16,int:4,sag:12,cha:6},comptences:"Dtection +6, Discrtion +6, Survie +4",dons:"Vigilance, Attaque en Puissance",tactiques:"Charge les isols, profite des effondrements pour sparer le groupe ; fuit  < 30% PV.",butin:"clats cristallins souills (alchimie mineure), chair instable.",est_ennemi:!0},{id:"cultiste_spirale",name:"Initi du Culte de la Spirale",class:"Adepte",lvl:"2",size:"Moyen",type:"Humanode (Humain)",alignment:"CM",role:"Fanatique sacrifiable.",details:["Symbole cach.","Dvouement aveugle.","Dangereux en groupe."],tactical:{bookReference:"Manuel des Joueurs : Adepte",scenarioContext:"Culte secret.",spells:[{name:"Frayeur",details:"DD 13"}],specialActions:[],tacticFeats:["Incantation de combat"],tacticSummary:"Lance des sorts de peur avant de charger."},environnement:"Sous-sols, Lieux abandonns",organisation:"Cellule (3-6)",ini:"+1",sens:"Dtection +3",ca:{total:14,contact:11,pris_au_depourvu:13},pv:13,dv:"2d8+4",js:{vig:"+4",ref:"+1",vol:"+4"},vit:"9 m",abb:"+1",grp:"+2",attaque:"Faucille +3 (1d6+1)",att_complete:"Faucille +3 (1d6+1)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Sorts (Niv 1: Frayeur, Blessure lgre, Bndiction)"],qual_sp:["Dvotion fanatique (+2 JS Volont contre charme/terreur)"],carac:{for:12,dex:12,con:14,int:10,sag:15,cha:8},comptences:"Concentration +7, Connaissance (religion) +5",dons:"Arme de prdilection (Faucille), Incantation de combat",tactiques:"Combat jusqu' la mort, lance Frayeur en premier.",butin:"Symbole de la spirale en fer noir, parchemins impies.",est_ennemi:!0},{id:"garde_temple",name:"Garde du Temple",class:"Guerrier",lvl:2,size:"Moyen",type:"Humanode (Nain)",alignment:"LN",fp:2,role:"Soldat disciplin, extension de la volont de Korgan.",environnement:"Temple-Forgeron",organisation:"Binme ou Escouade (2-4)",ini:"+0",sens:"Vision dans le noir 18 m, Dtection +2 (+4 pierre)",ca:{total:18,contact:10,pris_au_depourvu:18},pv:24,dv:"2d10+9",js:{vig:"+6",ref:"+0",vol:"+1"},vit:"6 m",abb:"+2",grp:"+4",attaque:"Hache de guerre naine +5 (1d10+2/x3)",att_complete:"Hache de guerre naine +5 (1d10+2/x3)",espace:"1,5 m",allonge:"1,5 m",att_sp:[],qual_sp:["Traits des Nains","Stabilit","Connaissance de la pierre"],carac:{for:15,dex:10,con:16,int:10,sag:12,cha:8},comptences:"Dtection +2, Intimidation +3, Artisanat (pierre) +2",dons:"Arme de prdilection (Hache de guerre naine), Robustesse, Attaque en puissance",tactiques:"Forme un mur de boucliers autour de Korgan ou des prtres. Utilise l'action 'Aider un autre' pour augmenter la CA des allis adjacents.",butin:"Hache de guerre naine, Clibanion, Bouclier lourd en acier, Sceau mineur du Temple.",est_ennemi:!1},{id:"loup_mutant",name:"Loup des Dchets",size:"Moyen",type:"Animal (Crature magique)",alignment:"N",fp:2,role:"Bte mutante.",details:["Fourrure mite.","Yeux multiples.","Agressif."],tactical:{bookReference:"Manuel des Monstres : Loup",scenarioContext:"Extrieur.",spells:[],specialActions:["Croc-en-jambe"],tacticFeats:["Pistage"],tacticSummary:"Attaque en meute et tente de renverser les cibles."},environnement:"Zones de dchets, Priphrie",organisation:"Meute (2-5)",ini:"+2",sens:"Vision dans le noir 18 m, Odorat, Vision nocturne",ca:{total:14,contact:12,pris_au_depourvu:12},pv:19,dv:"3d8+6",js:{vig:"+5",ref:"+5",vol:"+2"},vit:"15 m",abb:"+2",grp:"+4",attaque:"Morsure +5 (1d6+3 plus Croc-en-jambe)",att_complete:"Morsure +5 (1d6+3 plus Croc-en-jambe)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Croc-en-jambe (Action libre si morsure touche)"],qual_sp:["Pelage Camlon (+4 Discrtion dans les dchets)"],carac:{for:15,dex:15,con:15,int:2,sag:12,cha:6},comptences:"Discrtion +6, Dtection +4, Survie +2",dons:"Arme de prdilection (Morsure), Pistage",tactiques:"Encercle la proie, vise les jambes pour renverser.",butin:"Peau malade (sans valeur), dents acres.",est_ennemi:!0},{id:"garde_tour_mages",name:"Garde Arcanique",class:"Guerrier",lvl:"2",size:"Moyen",type:"Humanode (Humain)",alignment:"LN",role:"Sentinelle magique.",details:["Armure grave de runes.","Silencieux.","Discipline de fer."],tactical:{bookReference:"Manuel des Monstres : Guerrier",scenarioContext:"Tour des Mages.",spells:[],specialActions:[],tacticFeats:["Robustesse"],tacticSummary:"Bloque le passage et utilise son allonge."},environnement:"Quartier du Savoir, Tour des Mages",organisation:"Binme",ini:"+1",sens:"Dtection +2",ca:{total:16,contact:11,pris_au_depourvu:15},pv:16,dv:"2d10+2",js:{vig:"+4",ref:"+1",vol:"+1"},vit:"9 m",abb:"+2",grp:"+4",attaque:"Hallebarde +5 (1d10+3, x3)",att_complete:"Hallebarde +5 (1d10+3, x3)",espace:"1,5 m",allonge:"3 m (Hallebarde)",att_sp:[],qual_sp:["Rsistance  la magie mineure (+1 JS contre sorts)"],carac:{for:16,dex:12,con:13,int:10,sag:12,cha:10},comptences:"Intimidation +5, Dtection +2, Connaissance (arcane) +2",dons:"Arme de prdilection (Hallebarde), Robustesse",tactiques:"Tient la ligne, frappe fort avec la hallebarde.",butin:"Hallebarde, chemise de mailles, sifflet d'alarme.",est_ennemi:!1}],s_=[{id:"cube_nettoyeur",name:"Cube Nettoyeur de Mine",size:"Grand",type:"Amoebode",alignment:"N",fp:3,environnement:"Mines et tunnels abandonns",organisation:"Solitaire",ini:"-5",sens:"Vision dans le noir 18 m",ca:{total:12,contact:4,pris_au_depourvu:12},pv:39,dv:"6d10+6",js:{vig:"+3",ref:"-3",vol:"-2"},vit:"3 m (2 c.)",abb:"+4",grp:"+12",attaque:"Coup +8 (1d6+4 plus Absorption)",att_complete:"Coup +8 (1d6+4 plus Absorption)",espace:"3 m",allonge:"3 m",att_sp:["Absorption (Paralysie 1d3 tours, 1d6 acide/tour, Rf. DD 14 annule)"],qual_sp:["Immunit aux coups critiques","Vulnrable : lectricit/Tonnerre (dgts +50%)"],carac:{for:18,dex:1,con:12,int:0,sag:10,cha:1},comptences:"",dons:"",tactiques:"Avance lentement vers les sources de chaleur/odeur ; pige dans les couloirs troits.",butin:"Fragments mtalliques propres, huile de maintenance concentre.",est_ennemi:!0},{id:"contremaitre_nain_mine",name:"Contrematre Nain des Mines",class:"Expert",lvl:"3",size:"Moyen",type:"Humanode (Nain)",alignment:"LB",role:"Nain pragmatique charg de la scurit des galeries.",details:["Motivation : Renvoyer tout le monde vivant  la surface.","Attitude : Bourru, se mfie des aventuriers trop tmraires.","Info : Connat les zones dj 'maudites' de la mine.","Usage : Guide officieux pour les premires explorations."],environnement:"Profondeurs de la mine",organisation:"Escouade (1 contrematre + 3-6 mineurs)",ini:"0",sens:"Vision dans le noir 18 m, Dtection +7",ca:{total:17,contact:10,pris_au_depourvu:17},pv:34,dv:"4d10+12",js:{vig:"+7",ref:"+1",vol:"+2"},vit:"6 m (Armure)",abb:"+4",grp:"+7",attaque:"Pioche Lourde +8 (1d8+4, x3)",att_complete:"Pioche Lourde +8 (1d8+4, x3)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Cri dAlarme (+2 moral aux mineurs  9 m 1 tour)"],qual_sp:["Rsistance Naine (+2 JS poison/sorts)","Connaissance des Souterrains (+2 Survie/Dtection (pierre))"],carac:{for:16,dex:10,con:16,int:10,sag:12,cha:10},comptences:"Artisanat (mines) +9, Dtection +7, Survie +6",dons:"Robustesse, Arme de Prdilection (pioche lourde)",tactiques:"Tient la ligne pour protger les mineurs, utilise le cri dalarme pour regrouper.",butin:"Pioche lourde, plan des galeries, lampe  huile robuste.",est_ennemi:!1},{id:"horreur_chitineuse",name:"Horreur Chitineuse",size:"Moyen",type:"Aberration",alignment:"NM",fp:3,environnement:"Profondeurs de la Spirale",organisation:"Solitaire ou Nid (2-4)",ini:"+3",sens:"Vision dans le noir 18 m, Tremorsense 9 m",ca:{total:18,contact:13,pris_au_depourvu:15},pv:26,dv:"4d8+8",js:{vig:"+3",ref:"+4",vol:"+5"},vit:"12 m, Escalade 9 m",abb:"+3",grp:"+6",attaque:"Griffe +6 (1d6+3)",att_complete:"2 Griffes +6 (1d6+3) et Morsure +1 (1d4+1 plus venin)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Venin (Vig DD 14, 1d2 Con / 1d2 Con)"],qual_sp:["Rsistance  l'acide 5"],carac:{for:16,dex:17,con:14,int:5,sag:12,cha:8},comptences:"Discrtion +10, Escalade +12, Saut +10",dons:"Attaque en finesse, Attaques multiples",tactiques:"Tombe du plafond sur sa proie, tente de mordre pour affaiblir.",butin:"Carapace dure (artisanat), Glande  venin.",est_ennemi:!0},{id:"disciple_vide",name:"Disciple du Vide",class:"Adepte",lvl:"3",size:"Moyen",type:"Humanode (Humain)",alignment:"NM",environnement:"Temples secrets",organisation:"Groupe (1 disciple + 2-4 initis)",ini:"+2",sens:"Dtection +3",ca:{total:15,contact:12,pris_au_depourvu:13},pv:22,dv:"4d6+8",js:{vig:"+3",ref:"+3",vol:"+6"},vit:"9 m",abb:"+2",grp:"+2",attaque:"Dague empoisonne +4 (1d4, 19-20/x2)",att_complete:"Dague empoisonne +4 (1d4, 19-20/x2)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Sorts (Niv 2: Tnbres, Immobilisation de personne, Ccit)","Regard angoissant (Vol DD 13 ou Secou)"],qual_sp:["Rsistance mentale (+2 JS contre charme)"],carac:{for:10,dex:14,con:14,int:12,sag:16,cha:13},comptences:"Concentration +9, Savoir (Arcane) +8, Psychologie +8",dons:"Incantation de combat, Volont de fer",tactiques:"Lance Tnbres pour dsorienter, vise les lanceurs de sorts.",butin:"Parchemin de Tnbres, Dague de matre, Symbole impie.",est_ennemi:!0},{id:"assassin_guilde",name:"Couteau de l'Ombre",class:"Assassin",lvl:"3",size:"Moyen",type:"Humanode (Humain)",alignment:"NM",environnement:"Ville, Toits",organisation:"Solitaire ou Binme",ini:"+7",sens:"Dtection +6",ca:{total:16,contact:13,pris_au_depourvu:13},pv:19,dv:"3d6+6",js:{vig:"+3",ref:"+6",vol:"+1"},vit:"9 m",abb:"+2",grp:"+3",attaque:"pe courte +6 (1d6+1, 19-20/x2)",att_complete:"pe courte +6 (1d6+1, 19-20/x2)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Attaque sournoise +2d6"],qual_sp:["Esquive instinctive"],carac:{for:12,dex:17,con:14,int:13,sag:10,cha:8},comptences:"Discrtion +9, Dplacement silencieux +9, Acrobatie +9, Escalade +7",dons:"Science de l'initiative, Arme de prdilection (pe courte)",tactiques:"Attaque depuis les ombres, vise les cibles isoles, fuit si repr.",butin:"pe courte de matre, poison (2 doses), cape sombre.",est_ennemi:!0},{id:"elementaire_terre_corrompu",name:"lmentaire de Terre Corrompu",size:"Moyen",type:"lmentaire (Terre, Extraplanaire)",alignment:"N",fp:3,role:"Gardien involontaire, tortur par la Spirale.",details:["Veines violettes pulsantes.","Hurle silencieusement quand il frappe.","Attir par la magie."],tactical:{bookReference:"Manuel des Monstres : lmentaire de Terre",scenarioContext:"Gardiens de la brche (Scnario 2).",spells:[],specialActions:["Glissement terrestre"],tacticFeats:["Attaque en puissance"],tacticSummary:"Utilise le dcor pour se dplacer et flanquer."},environnement:"Souterrains, Spirale",organisation:"Solitaire ou Groupe (2-4)",ini:"-1",sens:"Vision dans le noir 18 m, Perception des vibrations 18 m",ca:{total:17,contact:9,pris_au_depourvu:17},pv:30,dv:"4d8+12",js:{vig:"+7",ref:"+0",vol:"+1"},vit:"6 m (Terre), 6 m (Creusement)",abb:"+3",grp:"+7",attaque:"Coup +7 (1d8+6)",att_complete:"Coup +7 (1d8+6)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Matrise de la Terre (+1 attaque/dgts si cible au sol)","Pousse (Bousculade sans attaque d'opportunit)"],qual_sp:["Traits des lmentaires","Glissement terrestre","Cur de Cristal (Faiblesse : Critique possible sur 19-20 si vis spcifiquement)"],carac:{for:19,dex:8,con:17,int:4,sag:11,cha:11},comptences:"Dtection +2, Perception auditive +3",dons:"Attaque en puissance, Enchanement",tactiques:"Surgit du sol pour surprendre, frappe violemment. Ne fuit pas.",butin:"clat de cristal violet (50 po), poussire de gemme.",est_ennemi:!0},{id:"jaren_corrompu",name:"Jaren, le Sujet J-01",size:"Moyen",type:"Mort-vivant (Humain)",alignment:"Neutre Mauvais",fp:3,role:"Cobaye sacrifi, preuve de la cruaut de Thade.",details:["Le corps de Jaren est boursoufl, marqu par les sceaux magiques de Thade qui brillent d'un bleu maladif.","Il ne cherche pas  tuer par malice, mais par rflexe de douleur.","De la glace se forme sur le sol  chacun de ses pas."],tactical:{bookReference:"Manuel des Monstres : Zombie / Blme (adapt)",scenarioContext:"Boss de fin de l'Acte 4. Il se relve aprs la dfaite d'Ilse.",spells:[{name:"Fuite magique (Passif)",details:"Toute personne terminant son tour  moins de 3m subit 1d4 dgts de froid."}],specialActions:["Dcharge d'agonie :  0 PV, le corps explose en clats de glace. Jet de Rflexes (DD 13) ou 2d6 dgts de froid dans un rayon de 6m."],tacticFeats:["Dur  cuire"],tacticSummary:"Se dplace lentement vers le groupe. Utilise son aura pour affaiblir les PJ. S'il est encercl, il tente de frapper le personnage le plus affaibli."},environnement:"Laboratoire de Thade",organisation:"Solitaire (Exprience dlaisse)",ini:"+2",sens:"Vision dans le noir 18 m, Perception +4",ca:{total:14,contact:12,pris_au_depourvu:12},pv:22,dv:"3d12+3",js:{vig:"+1",ref:"+3",vol:"+4"},vit:"6 m (mouvements saccads)",attaque:"Toucher glacial +3 contact (1d6 dgts de froid)",att_complete:"Toucher glacial +3 contact (1d6 dgts de froid)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Aura de Froid instable (3m, 1d4 dgts)","Dcharge d'agonie (Explosion finale)"],qual_sp:["Traits des Morts-vivants","Rduction des dgts 5/Tranchant","Esprit bris (Immunit aux charmes)"],carac:{for:14,dex:14,con:0,int:6,sag:10,cha:8},comptences:"Perception +4, Escalade +6",dons:["Attaque en finesse","Dur  cuire"],tactiques:"Jaren n'a plus de stratgie. Il avance vers la source de vie la plus proche. Son corps met une aura de froid constant qui blesse ceux qui l'approchent.",butin:"Bague de focalisation brise (valeur 10 po), Lambeaux d'uniforme de l'Universit, une dent en or.",est_ennemi:!0,antagoniste:!1},{id:"monstre_rouilleur",name:"Monstre Rouilleur (Rust Monster)",size:"Moyen",type:"Aberration",alignment:"N",fp:3,role:"Prdateur de mtal, danger pour l'quipement.",details:["Carapace brune-rouille.","Antennes tremblantes.","Attir irrsistiblement par le mtal."],tactical:{bookReference:"Manuel des Monstres : Rust Monster",scenarioContext:"Galeries silencieuses, Scnario 2.",spells:[],specialActions:["Rouille"],tacticFeats:["Attaque en finesse"],tacticSummary:"Vise les armes et armures mtalliques pour les dtruire."},environnement:"Mines, Souterrains",organisation:"Solitaire ou Couple (2)",ini:"+3",sens:"Vision dans le noir 18 m, Odorat",ca:{total:18,contact:13,pris_au_depourvu:15},pv:27,dv:"5d8+5",js:{vig:"+2",ref:"+7",vol:"+2"},vit:"12 m",abb:"+3",grp:"+3",attaque:"Antenne +7 contact (Rouille)",att_complete:"Antenne +7 contact (Rouille) et Morsure +2 (1d3)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Rouille (Dtruit mtal non-magique instantanment, mtal magique Rf DD 14)"],qual_sp:["Odorat du mtal (Dtecte mtal  27 m)"],carac:{for:10,dex:17,con:13,int:2,sag:13,cha:8},comptences:"Dtection +11, Discrtion +9",dons:"Attaque en finesse, Vigilance",tactiques:"Cherche le mtal, touche les armes et armures avec ses antennes pour les dtruire.",butin:"Aucun (mange le mtal)",est_ennemi:!0},{id:"ombre_morte_vivante",name:"Ombre",size:"Moyen",type:"Mort-vivant (Incorporel)",alignment:"CM",fp:3,role:"Prdateur d'ombres, cr par la mort violente.",details:["Silhouette sombre et ondulante.","Pas de traits visibles.","Glisse silencieusement."],tactical:{bookReference:"Manuel des Monstres : Ombre",scenarioContext:"Zones sombres de la Spirale.",spells:[],specialActions:["Drain de Force"],tacticFeats:["Esquive"],tacticSummary:"Attaque depuis les ombres pour drainer la Force des vivants."},environnement:"Souterrains, Lieux sombres",organisation:"Solitaire, Bande (2-5) ou Nue (6-11)",ini:"+2",sens:"Vision dans le noir 18 m",ca:{total:13,contact:13,pris_au_depourvu:11},pv:19,dv:"3d12",js:{vig:"+1",ref:"+3",vol:"+4"},vit:"Vol 12 m (bonne)",abb:"+1",grp:"",attaque:"Contact incorporel +3 (1d6 Force)",att_complete:"Contact incorporel +3 (1d6 Force)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Drain de Force (1d6, pas de JS)"],qual_sp:["Incorporel","Cration de rejetons","+2 Renvoi des morts-vivants"],carac:{for:"",dex:14,con:"",int:6,sag:12,cha:13},comptences:"Dtection +7, Discrtion +8",dons:"Esquive, Vigilance",tactiques:"Se cache dans les ombres, attaque par surprise pour drainer la Force.",butin:"Aucun",est_ennemi:!0},{id:"ankheg_corrompu",name:"Ankheg Corrompu",size:"Grand",type:"Crature magique",alignment:"N",fp:3,role:"Prdateur souterrain corrompu par la Spirale.",details:["Carapace avec veines violettes.","Mandibules dgoulinantes d'acide.","Creuse rapidement."],tactical:{bookReference:"Manuel des Monstres : Ankheg",scenarioContext:"Galeries silencieuses, Scnario 2.",spells:[],specialActions:["Crachat d'acide"],tacticFeats:["Vigilance"],tacticSummary:"Surgit du sol et crache de l'acide avant de mordre."},environnement:"Souterrains, Mines",organisation:"Solitaire ou Groupe (2-4)",ini:"+0",sens:"Vision dans le noir 18 m, Perception des vibrations 18 m",ca:{total:18,contact:9,pris_au_depourvu:18},pv:28,dv:"3d10+9",js:{vig:"+8",ref:"+1",vol:"+2"},vit:"9 m, Creusement 6 m",abb:"+5",grp:"+13",attaque:"Morsure +8 (2d6+7 plus 1d4 acide)",att_complete:"Morsure +8 (2d6+7 plus 1d4 acide)",espace:"3 m",allonge:"1,5 m",att_sp:["Crachat d'acide (ligne 9 m, 4d4 acide, Rf DD 14 demi, 1/j)"],qual_sp:["Carapace violette (Corruption de la Spirale)"],carac:{for:21,dex:10,con:17,int:1,sag:13,cha:6},comptences:"Escalade +8, Dtection +6",dons:"Vigilance",tactiques:"Surgit du sol pour surprendre, crache de l'acide  distance.",butin:"Carapace (valeur 500 po), glande  acide",est_ennemi:!0}],n_=[{id:"geometre_fou",name:"Gomtre Fou",class:"Expert",lvl:4,size:"Moyen",type:"Humanode (Humain)",alignment:"CM",fp:3,role:"Source d'indices post-mortem (ou vivant, selon le timing).",details:["Motivation : Cartographier l'impossible.","Indice : Journal dcrivant des galeries qui s'allongent quand on ne les regarde pas.","Usage : Point de bascule vers la comprhension de l'architecture vivante de la Spirale.","Loot : Plans dforms mais prcieux pour naviguer dans les profondeurs."],ogas:{occupation:"Cartographie obsessionnellement les quartiers obscurs de Val-d'Ombre",goal:"Cartographier l'impossible et comprendre l'architecture vivante de la Spirale",attitude:"Obsd et paranoaque, panique si on dtruit ses cartes",stake:"Risque la folie complte ; peut rvler des secrets sur la navigation dans la Spirale"},environnement:"Val-d'Ombre, quartiers obscurs",organisation:"Solitaire",ini:"+2",sens:"Dtection +6",ca:{total:17,contact:12,pris_au_depourvu:15},pv:34,dv:"5d8+10",js:{vig:"+4",ref:"+3",vol:"+6"},rm:null,rd:null,vit:"9 m",abb:"+3",grp:"+5",attaque:"Pique  Dessin Modifie +6 (1d8+2 perforant)",att_complete:"Pique  Dessin Modifie +6 (1d8+2)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Glyphes de Dsorientation (1/j, zone 3 m, Rf. DD 15 : tourdi 1 tour)"],qual_sp:["Esprit Fractal (+2 JS contre illusions)","Cartographie Tordue (+4 Connaissance (architecture et ingnierie))"],carac:{for:12,dex:14,con:14,int:16,sag:10,cha:8},comptences:"Connaissance (architecture et ingnierie) +12, Dtection +6, Artisanat (plans) +10, Psychologie +4",dons:"Volont de Fer, Science de l'Initiative, Pointage Prcis",tactiques:"Pose un glyphe pour couper une poursuite, frappe puis se replie. Panique si on dtruit ses cartes.",butin:"Plans dforms de Val-d'Ombre, craies runiques.",est_ennemi:!0},{id:"traqueur_dimensionnel",name:"Traqueur Dimensionnel",size:"Moyen",type:"Extrieur (Chaos)",alignment:"CM",fp:4,environnement:"Zones de faille, Spirale",organisation:"Solitaire ou Meute (2)",ini:"+8",sens:"Vision dans le noir 18 m, Vision lucide",ca:{total:19,contact:14,pris_au_depourvu:15},pv:32,dv:"5d8+10",js:{vig:"+6",ref:"+8",vol:"+5"},rm:"15",rd:"5/Magie",vit:"12 m",abb:"+5",grp:"+7",attaque:"Griffes phasiques +9 (1d6+2 plus dessiccation)",att_complete:"2 Griffes phasiques +9 (1d6+2 plus dessiccation)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Dessiccation (Vig DD 14 ou 1d4 dgts temporaires For/Dex)","Saut Dimensionnel (Action mouv, 18m)"],qual_sp:["Flou (20% rat permanent)","Rsistance magie 15"],carac:{for:14,dex:19,con:14,int:7,sag:13,cha:10},comptences:"Discrtion +12, Dtection +9, Acrobatie +12",dons:"Science de l'initiative, Attaque en finesse, Arme de prdilection (Griffes)",tactiques:"Se tlporte derrire les cibles faibles (mages/soigneurs), attaque et disparat.",butin:"Essence de chaos (alchimie), griffes cristallines.",est_ennemi:!0},{id:"golem_dechets",name:"Golem de Rebuts",size:"Grand",type:"Crature artificielle",alignment:"N",fp:4,environnement:"Dcharges, Ruines industrielles",organisation:"Solitaire",ini:"-1",sens:"Vision dans le noir 18 m, Vision nocturne",ca:{total:18,contact:8,pris_au_depourvu:18},pv:53,dv:"6d10+20",js:{vig:"+2",ref:"+1",vol:"+2"},vit:"6 m",abb:"+4",grp:"+13",attaque:"Chelem +8 (2d8+5)",att_complete:"2 Chelems +8 (2d8+5)",espace:"3 m",allonge:"3 m",att_sp:["Nuage de Ttanos (Si touch, Vig DD 15 ou maladie)"],qual_sp:["Immunits des cratures artificielles","Rduction dgts 5/Adamantine"],carac:{for:21,dex:9,con:"-",int:"-",sag:11,cha:1},comptences:"",dons:"",tactiques:"Avance et crase. Ne s'arrte que si dtruit.",butin:"Mtaux rares (valeur 50-100 po) dans les dbris.",est_ennemi:!0},{id:"chevalier_conseil",name:"Chevalier du Conseil",class:"Guerrier",lvl:"4",size:"Moyen",type:"Humanode (Humain)",alignment:"LN",ogas:{occupation:"Protge le Palais et excute les ordres du Conseil",goal:"Maintenir l'honneur et servir le Conseil avec loyaut",attitude:"Honorable et inflexible, refuse le dshonneur",stake:"Risque sa vie pour l'honneur ; peut gagner gloire et reconnaissance"},environnement:"Haute Ville, Palais",organisation:"Solitaire ou Escorte (1 + 2 gardes)",ini:"+0",sens:"Dtection +3",ca:{total:20,contact:10,pris_au_depourvu:20},pv:47,dv:"6d10+12",js:{vig:"+7",ref:"+2",vol:"+4"},vit:"6 m (Harnois)",abb:"+6",grp:"+9",attaque:"pe btarde de matre +10 (1d10+3, 19-20/x2)",att_complete:"pe btarde +10/+5 (1d10+3, 19-20/x2)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Dfi (+2 dgts contre 1 cible)"],qual_sp:["Aura de courage (+4 JS peur aux allis)"],carac:{for:17,dex:10,con:14,int:10,sag:14,cha:14},comptences:"Diplomatie +8, quitation +6, Intimidation +8",dons:"Arme de prdilection (pe btarde), Spcialisation martiale, Enchanement",tactiques:"Lance un dfi au combattant le plus fort, refuse le dshonneur.",butin:"Harnois, pe btarde de matre, Sceau du conseil.",est_ennemi:!0},{id:"gargouille_cristal",name:"Gargouille de Cristal",size:"Moyen",type:"Crature magique (Terre)",alignment:"CM",fp:4,role:"Gardien volant de la Spirale.",details:["Corps de cristal violet.","Yeux lumineux.","Ailes de verre tranchant."],tactical:{bookReference:"Manuel des Monstres : Gargouille (Variante)",scenarioContext:"Couloirs de Chair, Scnario 4.",spells:[],specialActions:["clat de cristal"],tacticFeats:["Attaques multiples"],tacticSummary:"Se fait passer pour une statue puis attaque en vol."},environnement:"Spirale - Couloirs de Chair",organisation:"Solitaire ou Aile (2-4)",ini:"+2",sens:"Vision dans le noir 18 m",ca:{total:16,contact:12,pris_au_depourvu:14},pv:42,dv:"5d8+20",js:{vig:"+8",ref:"+6",vol:"+4"},vit:"12 m, Vol 18 m (moyenne)",abb:"+5",grp:"+7",attaque:"Griffe +7 (1d4+2)",att_complete:"2 Griffes +7 (1d4+2), Morsure +5 (1d6+1), Corne +5 (1d4+1)",espace:"1,5 m",allonge:"1,5 m",att_sp:["clat de cristal (cne 4,5 m, 3d6 perforant, Rf DD 14 demi, 1/j)"],qual_sp:["RD 10/magie","Immobilit (Ressemble  une statue quand immobile)"],carac:{for:15,dex:14,con:18,int:6,sag:11,cha:7},comptences:"Dtection +4, Discrtion +7, Vol +6",dons:"Attaques multiples, Vigilance",tactiques:"Reste immobile jusqu' ce que les PJ passent, puis attaque en piqu.",butin:"Fragments de cristal violet (valeur 200 po)",est_ennemi:!0}],i_=[{id:"spectre_ancien_heros",name:"Spectre d'un Ancien Hros Nain",size:"Moyen",type:"Mort-vivant (Incorporel)",alignment:"LB",fp:5,role:"Gardien spectral du Seuil.",details:["Motivation : Empcher quiconque de rouvrir le passage vers la Spirale.","Attitude : Hostile par dfaut, mais peut tre apais par des preuves de ncessit.","Combat : Combat redoutable, mais peut tre vit par des rites appropris.","Spoiler : Rvle des fragments de la vritable histoire de la premire rencontre avec la Spirale."],environnement:"Seuil / mausole secret",organisation:"Solitaire",ini:"+6",sens:"Vision dans le noir 18 m, Dtection +10",ca:{total:17,contact:17,pris_au_depourvu:11},pv:45,dv:"7d12",js:{vig:"+2",ref:"+6",vol:"+7"},vit:"Vol 12 m (parfaite)",abb:"+3",grp:"",attaque:"Contact Incorporel +8 (1d8 nergie ngative)",att_complete:"Contact Incorporel +8 (1d8 nergie ngative)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Drain de Force (1d6, Vig. DD 15 demi)","Hurlement Antique (1/j, Vol. DD 16 : Secou 1d4 tours)"],qual_sp:["Incorporel","Canalisation Vulnrable","Repos Li au Mausole (disparat si relique restaure)"],carac:{for:"",dex:22,con:"",int:12,sag:14,cha:16},comptences:"Dtection +10, Discrtion +12, Connaissance (histoire) +8",dons:"Science de l'Initiative, Volont de Fer, Esquive",tactiques:"Teste les intrus par le hurlement, frappe puis se replie dans les murs ; disparat si on honore correctement la relique.",butin:"Reliques hroques, fragments darmes naines.",est_ennemi:!0},{id:"mage_corrompu_spirale",name:"Mage Corrompu par la Spirale",class:"Magicien",lvl:"5",size:"Moyen",type:"Humanode (Humain)",alignment:"CM",environnement:"Tour des Mages, Laboratoires secrets",organisation:"Solitaire (avec sbires)",ini:"+6",sens:"Dtection +5",ca:{total:16,contact:12,pris_au_depourvu:14},pv:38,dv:"7d4+14",js:{vig:"+4",ref:"+4",vol:"+7"},vit:"9 m",abb:"+3",grp:"+3",attaque:"Dague +1 +4 (1d4+1)",att_complete:"Dague +1 +4 (1d4+1)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Sorts (Niv 3 (2/j): Boule de feu, clair ; Niv 2: Image miroir, Flche acide ; Niv 1: Projectile magique x4, Bouclier)"],qual_sp:["Aura de perturbation (Malus -1 aux JS des ennemis  3m)"],carac:{for:10,dex:14,con:14,int:17,sag:10,cha:12},comptences:"Art de la magie +13, Connaissance (arcane) +13, Concentration +12",dons:"Science de l'initiative, cole renforce (vocation), Magie de guerre",tactiques:"Se protge avec Image miroir/Bouclier, pilonne avec Boule de feu.",butin:"Baguette de projectiles magiques (10 charges), Dague +1, Livre de sorts.",est_ennemi:!0},{id:"bete_fosse",name:"Bte de la Fosse",size:"Grand",type:"Aberration",alignment:"N",fp:5,environnement:"Profondeurs de la mine, Spirale",organisation:"Solitaire",ini:"+1",sens:"Vision dans le noir 18 m, Perception des vibrations",ca:{total:19,contact:10,pris_au_depourvu:18},pv:59,dv:"7d8+28",js:{vig:"+8",ref:"+3",vol:"+5"},vit:"12 m",abb:"+5",grp:"+14",attaque:"Tentacule +9 (1d6+5 plus treinte)",att_complete:"2 Tentacules +9 (1d6+5) et Morsure +4 (1d8+2)",espace:"3 m",allonge:"3 m",att_sp:["treinte (Action libre si tentacule touche)","Constriction (1d6+7)"],qual_sp:["Gurison acclre 2","Allonge suprieure"],carac:{for:20,dex:12,con:18,int:2,sag:10,cha:4},comptences:"Escalade +14, Dtection +6",dons:"Attaque en puissance, Vigueur surhumaine",tactiques:"Attrape les cibles proches et les broie, mord ceux qui s'approchent.",butin:"Organes alchimiques, gemmes non digres.",est_ennemi:!0},{id:"wraith",name:"Wraith",size:"Moyen",type:"Mort-vivant (Incorporel)",alignment:"LM",fp:5,role:"Mort-vivant puissant cr par la haine.",details:["Silhouette spectrale noire.","Yeux rouges brillants.","Aura de terreur."],tactical:{bookReference:"Manuel des Monstres : Wraith",scenarioContext:"Sige du Temple, Scnario 3.",spells:[],specialActions:["Drain de Constitution","Cration de rejetons"],tacticFeats:["Science de l'initiative"],tacticSummary:"Draine la Constitution des vivants pour crer des rejetons."},environnement:"Lieux maudits, Champs de bataille",organisation:"Solitaire, Bande (2-5) ou Meute (6-11)",ini:"+7",sens:"Vision dans le noir 18 m",ca:{total:15,contact:15,pris_au_depourvu:12},pv:32,dv:"5d12",js:{vig:"+1",ref:"+4",vol:"+6"},vit:"Vol 18 m (bonne)",abb:"+2",grp:"",attaque:"Contact incorporel +5 (1d4 plus 1d6 Constitution)",att_complete:"Contact incorporel +5 (1d4 plus 1d6 Constitution)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Drain de Constitution (1d6, pas de JS)","Cration de rejetons"],qual_sp:["Incorporel","Lumire du jour (Impuissant)","+2 Renvoi des morts-vivants"],carac:{for:"",dex:16,con:"",int:14,sag:14,cha:15},comptences:"Dtection +10, Discrtion +11, Intimidation +10, Fouille +10",dons:"Vigilance, Esquive, Science de l'initiative",tactiques:"Attaque les vivants pour drainer leur Constitution, cre des rejetons.",butin:"Aucun",est_ennemi:!0},{id:"gibbering_mouther",name:"Gibbering Mouther",size:"Moyen",type:"Aberration",alignment:"N",fp:5,role:"Aberration chaotique de la Spirale.",details:["Masse de chair avec des yeux et bouches.","Babillage constant.","Sol qui devient mou autour d'elle."],tactical:{bookReference:"Manuel des Monstres : Gibbering Mouther",scenarioContext:"Couloirs de Chair, Scnario 4.",spells:[],specialActions:["Babillage","Sol engloutissant"],tacticFeats:["Arme de prdilection"],tacticSummary:"Confond les ennemis avec son babillage et les engloutit dans le sol."},environnement:"Souterrains, Spirale",organisation:"Solitaire",ini:"+1",sens:"Vision  360, Vision dans le noir 18 m",ca:{total:19,contact:11,pris_au_depourvu:18},pv:49,dv:"4d8+28",js:{vig:"+11",ref:"+4",vol:"+4"},vit:"3 m, Nage 6 m",abb:"+3",grp:"+4",attaque:"Morsure +4 (1)",att_complete:"6 Morsures +4 (1)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Babillage (Vol DD 13 ou Confus 1 round)","Crachat de sang (ligne 9 m, 1d6 acide, Rf DD 15 demi)","Sol engloutissant"],qual_sp:["Amorphe","Immunit aux coups critiques"],carac:{for:12,dex:13,con:24,int:4,sag:10,cha:13},comptences:"Dtection +7, Nage +9",dons:"Arme de prdilection (morsure)",tactiques:"Babille pour confondre, engloutit le sol sous les PJ, mord avec ses multiples bouches.",butin:"Aucun (chair instable)",est_ennemi:!0}],r_=[{id:"sentinelle_reliee",name:"Sentinelle Relie",size:"Moyen",type:"Artfact",alignment:"N",fp:6,role:"Golem poreux aux veines de cristal, surveille les intrusions.",details:["Motivation : Contenir la propagation de la Gode chantante.","Attitude : Attaque si le cristal de Thade rsonne, sinon observe.","Indice : Ragit faiblement aux symboles nains de confinement.","Usage : Garde mobile pouvant tre vite par ruse ou ngociation arcano-tech."],environnement:"Spirale  Premier cercle",organisation:"Solitaire",ini:"+1",sens:"Vision dans le noir 18 m, Perception Aveugle 6 m",ca:{total:19,contact:11,pris_au_depourvu:18},pv:72,dv:"9d10+20",js:{vig:"+3",ref:"+4",vol:"+5"},rm:null,rd:"5/Adamantium",vit:"6 m",abb:"+9",grp:"+15",attaque:"Poing Cristallin +12 (1d8+6 contondant + 1d4 force)",att_complete:"2 poings cristallins +12 (1d8+6 + 1d4 force)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Dcharge Rsonante (3/j, 3d6 force, Rf. DD 16 demi)"],qual_sp:["Immunit (Artfact) + Rsistance Sonique 10","Lien de Rsonance : dsoriente si Symbole Nain de Confinement (2 Attaque/CA/JS 1d4 tours)"],carac:{for:22,dex:12,con:"",int:6,sag:12,cha:8},comptences:"Dtection +8, Intimidation +6",dons:"Robustesse, Attaque en Puissance, Science du Critique (poing)",tactiques:"Engage frontalement ; si lien de rsonance perturb, passe en mode dfensif ou se replie en suivant les ordres du cur de la Spirale.",butin:"Fragment cristallin rsonant, schmas runiques rods.",est_ennemi:!0},{id:"inevitable_contremetre",name:"Invitable Contremtre",size:"Moyen",type:"Construit (Extraplanaire, Loi)",alignment:"LN",fp:6,role:"Rgulateur mcanique de la Spirale, juge de la cohrence structurelle.",tactical:{bookReference:"Manuel des Monstres (3.5) : Sous-type Invitable",scenarioContext:"Gardien de la Salle des Engrenages. Il ne peut tre corrompu, mais il peut tre convaincu par la logique.",specialActions:[{name:"Champ Anti-magie",details:"Action libre. Cre une zone de 1,5m o aucun sort ne fonctionne. Idal pour neutraliser un mage au contact."}],tacticFeats:[{name:"Attaque en puissance",details:"change sa prcision contre de la force brute s'il frappe une cible ralentie."}],tacticSummary:"Utilise son Rayon de Stase pour diviser par deux la vitesse des PJ, puis se place au contact du lanceur de sorts le plus puissant pour activer son Champ Anti-magie."},environnement:"Spirale  Salle des Engrenages",organisation:"Solitaire ou patrouille (1-2)",ini:"+5",sens:"Vision dans le noir 18 m, Vision nocturne, Perception aveugle 6 m, Dtection +12",ca:{total:22,contact:11,pris_au_depourvu:21},pv:68,dv:"9d10+20",js:{vig:"+3",ref:"+4",vol:"+5"},rm:"17",rd:"5/Chaotique",vit:"6 m (ne peut pas courir) ; vol stationnaire 3 m (parfaite)",attaque:"Marteau de Gravit +13 (1d8+6 contondant, critique x3)",att_complete:"Marteau de Gravit +13/+8 (1d8+6 contondant) et Rayon de Stase +10 contact  distance (1d6 froid + Ralentissement)",espace:"1,5 m",allonge:"1,5 m",att_sp:["Rayon de Stase (Contact  distance, Volont DD 15 annule le Ralentissement)","Frappe de la Loi (Ses attaques sont considres comme Loyales pour passer la RD)"],qual_sp:["Traits des Construits (Immunit poison, sommeil, paralysie, maladie, effets mentaux, coups critiques)","Champ Anti-magie Localis (rayon 1,5 m, 3 tours/jour)","Rparation automatique (Gurison acclre 2)"],carac:{for:18,dex:12,con:0,int:12,sag:14,cha:12},comptences:"Dtection +12, Perception auditive +12, Psychologie +10, Connaissance (architecture et ingnierie) +10",dons:"Science de l'initiative, Vigilance, Attaque en puissance, Enchanement",tactiques:"Analyse les flux magiques. Si une anomalie de Loi est dtecte (comme les actes de Thade), il peut suspendre les hostilits pour enquter.",butin:"Cl de recalibrage (Objet merveilleux, +5 aux tests d'ingnierie), noyau d'nergie rgul (diamant de 500 po).",est_ennemi:!1}],l_=[{id:"geode_avatar",name:"Avatar de la Gode",size:"Grand",type:"Extrieur (Terre, Chaos)",alignment:"CN",fp:7,role:"Manifestation semi-consciente de la Spirale.",details:["Motivation : Protger la source et tendre la rsonance.","Attitude : Communique par vibrations, peut ngocier via empathie magique.","Pouvoir : Dforme la gomtrie, projette des ondes soniques.","Faiblesse : Perturbe par les runes naines de confinement."],environnement:"Spirale  Cur de la Gode Chantante",organisation:"Solitaire (gardien)",ini:"+2",sens:"Vision dans le noir 18 m, Perception Aveugle 9 m",ca:{total:20,contact:11,pris_au_depourvu:18},pv:95,dv:"10d8+50",js:{vig:"+12",ref:"+9",vol:"+9"},rm:"18",rd:"10/Magie",vit:"6 m (4 c.) ; vol 3 m (manoeuvre limite)",abb:"+10",grp:"+20",attaque:"Fouet Cristallin +15 (2d6+6 soniques)",att_complete:"Fouet Cristallin +15 (2d6+6 soniques) et Onde Sonique (voir SpA)",espace:"3 m",allonge:"3 m (6 m avec fouet)",att_sp:["Onde Sonique (cne 6 m, 4d6 soniques, Rf. DD 18 demi)","Plissement Spatial (zone 6 m devient terrain difficile 1 tour, Vol. DD 18)"],qual_sp:["Rsistance Sonique 10","Faiblesse : Runes Naines de Confinement (2 CA/2 JS)"],carac:{for:22,dex:14,con:20,int:10,sag:16,cha:16},comptences:"Dtection +15, Connaissance (plans) +8, Intimidation +10",dons:"Science de l'Initiative, Attaque en Puissance, Robustesse, Volont de Fer",tactiques:"Alterne onde de zone et verrouillage d'une cible menaante ; dfend la gode principale.",butin:"clat de gode chantante, essence de rsonance.",est_ennemi:!0}],o_=[{id:"destrachan",name:"Destrachan",size:"Grand",type:"Aberration",alignment:"CM",fp:8,role:"Prdateur sonique de la Spirale.",details:["Crature aveugle qui 'voit' par le son.","Oreilles normes et sensibles.","Cris dvastateurs qui brisent la pierre."],tactical:{bookReference:"Manuel des Monstres : Destrachan",scenarioContext:"Couloirs de l'ther, Scnario 4.",spells:[],specialActions:["Cri destructeur","Cri harmonique","Cri de douleur"],tacticFeats:["Science de l'initiative"],tacticSummary:"Utilise ses diffrents cris pour dtruire, tourdir et blesser les ennemis."},environnement:"Spirale - Couloirs de l'ther",organisation:"Solitaire ou Couple (2)",ini:"+5",sens:"Vision aveugle 30 m",ca:{total:18,contact:10,pris_au_depourvu:17},pv:68,dv:"8d8+32",js:{vig:"+6",ref:"+7",vol:"+7"},rm:"19",rd:"10/Magie",vit:"9 m",abb:"+6",grp:"+14",attaque:"Griffe +9 (1d6+4)",att_complete:"2 Griffes +9 (1d6+4)",espace:"3 m",allonge:"1,5 m",att_sp:["Cri destructeur (cne 24 m, 4d6 sonique, Vig DD 18 demi)","Cri harmonique (cne 24 m, dtruit objets, Vig DD 18)","Cri de douleur (cne 24 m, Vig DD 18 ou tourdi 1 round)"],qual_sp:["Vision aveugle 30 m","Vulnrabilit au silence"],carac:{for:18,dex:12,con:18,int:5,sag:12,cha:12},comptences:"Dtection +14, Dplacement silencieux +12",dons:"Esquive, Science de l'initiative, Vigilance",tactiques:"Utilise ses cris soniques pour dtruire les objets et tourdir les ennemis.",butin:"Organes soniques (alchimie, valeur 300 po)",est_ennemi:!0}],gg=[{name:"Le Conseil (Politique)",type:"Administration",desc:"Le Bourgmestre est un humain honnte mais dpass. Il est obsd par le maintien de la paix entre Nains et Mages pour que le commerce tourne.",icon:Yr,color:"text-blue-400 border-blue-900 bg-blue-950/30",hierarchy:[{role:"Bourgmestre",npcId:"bourgmestre",notes:"Autorit civile, cherche l'quilibre."},{role:"Capitaine de la Garde urbaine",npcId:"capitaine_garde_urbaine",notes:"Scurit, couvre-feu, sige."},{role:"Gelier du Conseil",npcId:"geolier_principal",notes:"Prisons politiques, interrogatoires."}],npcIds:["bourgmestre","capitaine_garde_urbaine","geolier_principal"],objectifs:{court_terme:"Maintenir l'ordre public et viter l'escalade entre Nains et Mages",long_terme:"Prserver la prosprit conomique de Val-d'Ombre et son statut de carrefour commercial"},alliances:[{faction:"Faction Nains",type:"alliance",desc:"Alliance fragile, tensions croissantes"},{faction:"La Guilde des Mages",type:"alliance",desc:"Dpendance conomique, influence politique forte"}],forces_militaires:{effectifs:"150 gardes urbains",capacites:["Patrouilles urbaines","Maintien de l'ordre","Arrestations"],faiblesses:["Sous-quips face  la magie","Loyaut divise","Dpasss par les vnements"]},quetes_associees:[{scenarioId:1,acte:1,sceneIndex:0,sceneLabel:"Scne 1",role:"Employeur indirect via Thorgar"},{scenarioId:3,acte:1,sceneIndex:0,sceneLabel:"Scne 1",role:"Sommet de rconciliation"}]},{name:"Faction Nains",type:"Foi & Mineurs",desc:"Le bloc nain runit les mineurs et le Temple-Forgeron : gardiens du savoir ancestral, protecteurs des galeries et des reliques sacres.",icon:al,color:"text-amber-400 border-amber-900 bg-amber-950/30",hierarchy:[{role:"Chef de la Guilde des Mineurs",npcId:"durnik_chef_mineur",notes:"Voix des mineurs, meneur de grve."},{role:"Haut Clerc / Prtre du Temple-Forgeron",npcId:"thorgar_pretre_nain",notes:"Avertit sur la Spirale, soutien moral."},{role:"Contrematre scurit mine",npcId:"contremaitre_nain_mine",notes:"Logistique, scurit des galeries."},{role:"Capitaine de la Garde du Temple",npcId:"capitaine_garde_temple",notes:"Organise la dfense et les patrouilles sacres."},{role:"Gardien du Cimetire",npcId:"gardien_cimetiere",notes:"Veille sur les spultures et dtecte les profanations."}],npcIds:["durnik_chef_mineur","thorgar_pretre_nain","contremaitre_nain_mine","capitaine_garde_temple","gardien_cimetiere"],objectifs:{court_terme:"Protger les tombes ancestrales et scuriser les mines face aux anomalies",long_terme:"Prserver l'hritage nain et contenir la menace de la Spirale"},alliances:[{faction:"Le Conseil (Politique)",type:"alliance",desc:"Alliance fragile, tensions sur les profanations"},{faction:"La Guilde des Mages",type:"rivalite",desc:"Mfiance envers la magie, conflit ouvert aprs l'assassinat"}],forces_militaires:{effectifs:"200 guerriers nains + 300 mineurs arms",capacites:["Combat au corps--corps","Dfense de forteresse","Connaissance des tunnels","Rsistance magique naturelle"],faiblesses:["Vulnrables  la magie ncromantique","Manque de mobilit","Isols dans le Temple-Forgeron"]},quetes_associees:[{scenarioId:1,acte:1,sceneIndex:0,sceneLabel:"Scne 1",role:"Employeur principal (Thorgar)"},{scenarioId:1,acte:1,sceneIndex:1,sceneLabel:"Scne 2",role:"Gardien du cimetire"},{scenarioId:2,acte:1,sceneIndex:0,sceneLabel:"Scne 1",role:"Crise de la mine (Durnik)"},{scenarioId:3,acte:2,sceneIndex:3,sceneLabel:"Scne 4",role:"Rfugis  sauver"},{scenarioId:3,acte:3,sceneIndex:0,sceneLabel:"Scne 1",role:"Dfense du Temple-Forgeron"},{scenarioId:5,acte:2,sceneIndex:2,sceneLabel:"Scne 3",role:"Ralliement de Thorgar"}]},{name:"La Guilde des Mages",type:"Les Ambitieux",desc:"Prestige intellectuel et force militaire. Officiellement contre la ncromancie et gardienne de l'orthodoxie magique. Thade Coren a infiltr le Cercle Intrieur pour manipuler la Guilde de l'intrieur.",icon:fy,color:"text-purple-400 border-purple-900 bg-purple-950/30",hierarchy:[{role:"Cercle Intrieur",npcId:"thade_coren",notes:"Antagoniste, contrle la Tour."},{role:"Archimage dfecteur",npcId:"archimage_defecteur",notes:"Sabote Thade de l'intrieur."},{role:"Matre loyaliste",npcId:"magi_tuteur_loyal",notes:"Dfend la Tour contre tous."},{role:"Apprenti favori",npcId:"kaelen_vampire",notes:"Garde du toit, bras droit vampirique."}],npcIds:["thade_coren","archimage_defecteur","magi_tuteur_loyal","kaelen_vampire","bibliothecaire_interdits"],objectifs:{court_terme:"Maintenir le prestige de la Guilde et contrler l'accs  la connaissance magique",long_terme:"Prserver l'ordre magique et empcher les abus de la ncromancie (objectif officiel, compromis par Thade)"},alliances:[{faction:"Le Conseil (Politique)",type:"alliance",desc:"Influence politique dominante"},{faction:"Faction Nains",type:"rivalite",desc:"Tensions sur la magie vs tradition, conflit aprs l'assassinat"},{faction:"Fraternit Nyx",type:"conflit",desc:"Lutte contre la ncromancie clandestine (officiellement)"}],forces_militaires:{effectifs:"50 mages de combat + 100 apprentis + automates de guerre",capacites:["Magie destructrice","vocation","Abjuration","Automates de combat","Barrires magiques"],faiblesses:["Division interne (infiltration de Thade)","Arrogance","Isols dans leur Tour","Vulnrables aux attaques surprises"]},quetes_associees:[{scenarioId:1,acte:2,sceneIndex:0,sceneLabel:"Scne 1",role:"Enqute sur la Fraternit Nyx"},{scenarioId:1,acte:2,sceneIndex:1,sceneLabel:"Scne 2",role:"Rencontre avec Thade"},{scenarioId:2,acte:1,sceneIndex:0,sceneLabel:"Scne 1",role:"Thade offre le cristal"},{scenarioId:3,acte:1,sceneIndex:1,sceneLabel:"Scne 2",role:"Assassinat du Grand Prtre"},{scenarioId:3,acte:4,sceneIndex:3,sceneLabel:"Scne 4",role:"Confrontation avec Thade"},{scenarioId:5,acte:5,sceneLabel:"Toutes",role:"Combat final contre Thade"}]},{name:"Rseau des Ombres",type:"Assassins & Informateurs",desc:"Intermdiaires discrets, chasseurs de primes et opportunistes qui profitent du chaos pour tirer les ficelles dans l'ombre.",icon:Wx,color:"text-emerald-300 border-emerald-900 bg-emerald-950/30",hierarchy:[{role:"Courtier invisible",npcId:"marchand_fou_mercane",notes:"Marchand d'informations et d'artefacts."},{role:"Assassin Masqu",npcId:"assassin_masque",notes:"Tueur  gages li aux complots urbains."},{role:"claireuse perdue",npcId:"lysa_exploratrice_perdue",notes:"Guide occasionnelle pour qui paye ou sauve sa peau."}],npcIds:["marchand_fou_mercane","assassin_masque","lysa_exploratrice_perdue"],objectifs:{court_terme:"Profiter du chaos pour accumuler richesses et informations",long_terme:"Survivre et maintenir leur rseau d'influence quel que soit le vainqueur"},alliances:[{faction:"Le Conseil (Politique)",type:"neutre",desc:"Contrats ponctuels, pas de loyaut"},{faction:"Faction Nains",type:"neutre",desc:"Commerce d'informations"},{faction:"La Guilde des Mages",type:"neutre",desc:"Mercenaires occasionnels pour Thade"}],forces_militaires:{effectifs:"30-50 agents indpendants",capacites:["Assassinat","Espionnage","Infiltration","Commerce d'artefacts","Rseau d'informateurs"],faiblesses:["Pas d'arme organise","Loyaut limite","Vulnrables si exposs"]},quetes_associees:[{scenarioId:2,acte:5,sceneIndex:1,sceneLabel:"Scne 2",role:"Mercenaires de Thade"},{scenarioId:3,acte:2,sceneIndex:2,sceneLabel:"Scne 3",role:"Embuscade de Kael Ombrelame"},{scenarioId:4,acte:2,sceneIndex:1,sceneLabel:"Scne 2",role:"Xareth le Mercane"}]},{name:"Fraternit Nyx",type:"Ncromanciens Clandestins",desc:"Socit secrte de ncromanciens dissous officiellement par la Guilde des Mages. Thade Coren en tait membre et l'a ractive pour ses expriences sur la Spirale. Opre dans l'ombre avec des tudiants radicaliss.",icon:Fr,color:"text-violet-400 border-violet-900 bg-violet-950/30",hierarchy:[{role:"Matre Secret",npcId:"thade_coren",notes:"Fondateur et manipulateur, utilise la Fraternit pour ses plans"},{role:"Apprentie Fanatique",npcId:"ilse_nyx",notes:"Disciple zle, tente de complter le rituel de Jaren"},{role:"Cobaye Rat",npcId:"etudiant_renvoye",notes:"Jaren, tudiant instable utilis pour les expriences"},{role:"Lieutenant Corrompu",npcId:"kael_ombrelame",notes:"Ncromancien devenu vampire, bras arm de Thade"}],npcIds:["thade_coren","ilse_nyx","etudiant_renvoye","kael_ombrelame","apprenti_charme"],objectifs:{court_terme:"Mener des expriences ncromantiques sur la Spirale et crer des morts-vivants",long_terme:"Atteindre l'immortalit via la fusion avec la Spirale (agenda de Thade)"},alliances:[{faction:"La Guilde des Mages",type:"conflit",desc:"Ennemis officiels, mais Thade infiltre la Guilde"},{faction:"Faction Nains",type:"conflit",desc:"Profanation des tombes, guerre totale"},{faction:"Le Conseil (Politique)",type:"conflit",desc:"Hors-la-loi, recherchs"},{faction:"Rseau des Ombres",type:"neutre",desc:"Recrutement de mercenaires pour missions sales"}],forces_militaires:{effectifs:"10-15 ncromanciens actifs + arme mort-vivante (milliers aprs Scnario 3)",capacites:["Ncromancie de masse","Animation de morts-vivants","Magie noire","Contrle de la Spirale","Rituels interdits","Transformation en liches/vampires"],faiblesses:["Petit nombre de membres vivants","Dpendance totale  Thade","Vulnrables aux armes sacres","Instabilit des morts-vivants","Isols socialement"]},quetes_associees:[{scenarioId:1,acte:1,sceneIndex:2,sceneLabel:"Scne 3",role:"Pilleurs de tombes (Jaren)"},{scenarioId:1,acte:2,sceneIndex:0,sceneLabel:"Scne 1",role:"Enqute sur la Fraternit dissoute"},{scenarioId:1,acte:4,sceneIndex:0,sceneLabel:"Scne 1",role:"Ilse tente de stabiliser le rituel"},{scenarioId:2,acte:2,sceneIndex:1,sceneLabel:"Scne 2",role:"Laboratoire secret de Thade"},{scenarioId:3,acte:1,sceneIndex:1,sceneLabel:"Scne 2",role:"Assassinat via apprenti charm"},{scenarioId:3,acte:2,sceneIndex:1,sceneLabel:"Scne 2",role:"Transformation des nains en zombies"},{scenarioId:3,acte:3,sceneLabel:"Toutes",role:"Arme mort-vivante assige le Temple"},{scenarioId:4,acte:3,sceneIndex:2,sceneLabel:"Scne 3",role:"Usine de production de morts-vivants"},{scenarioId:5,acte:5,sceneLabel:"Toutes",role:"Combat final contre Thade-Liche"}]}],u_=[...t_,...a_,...s_,...n_,...i_,...r_,...l_,...o_];function Bu(n,i){return n.category?n.category:i==="bestiary"?"monstres":i==="ennemis"||n.est_ennemi?"ennemis":"allies"}function Gu(n){switch(n){case"allies":return"text-blue-400";case"ennemis":return"text-red-400";case"monstres":return"text-purple-400";case"neutres":return"text-yellow-400";default:return"text-gray-400"}}function c_(){const n=[];return($S||[]).forEach(i=>{const r=Bu(i,"principaux");n.push({...i,category:r,source:"principaux",color:Gu(r)})}),(e_||[]).forEach(i=>{const r=Bu(i,"ennemis");n.push({...i,category:r,source:"ennemis",color:Gu(r)})}),(u_||[]).forEach(i=>{const r=Bu(i,"bestiary");n.push({...i,category:r,source:"bestiary",isMonster:!0,color:Gu(r)})}),n}function d_(n){const i=new Map;return n.forEach(r=>{r.id&&!i.has(r.id)&&i.set(r.id,r)}),i}function m_(n){const i=new Map;return n.forEach(r=>{if(r.name){const o=r.name.toLowerCase();i.has(o)||i.set(o,r)}}),i}const va=c_(),vg=d_(va);m_(va);const Sh=va;function xc(n){return vg.get(n)||null}function p_(n){return n==="all"?va:va.filter(i=>i.category===n)}const f_={all:va.length,allies:va.filter(n=>n.category==="allies").length,ennemis:va.filter(n=>n.category==="ennemis").length,monstres:va.filter(n=>n.category==="monstres").length},h_=["all","allies","ennemis","monstres"];function g_(n){return Array.isArray(n)?n.map(i=>vg.get(i)).filter(Boolean):[]}function sc({zoneId:n,locId:i,npcId:r}){const o=new URLSearchParams;n&&o.set("zone",n),i&&o.set("loc",i),r&&o.set("pnj",r);const c=o.toString();return c?`/univers?${c}`:"/univers"}function nc(n){const i=xc(n);if(!i)return null;for(const r of xs.zones||[])for(const o of r.locations||[])if((o.npcIds||[]).includes(n))return{npc:i,loc:o,zone:r,source:i.source};return{npc:i,loc:null,zone:null,source:i.source}}function bg(n){const i=[];for(const r of yi||[])for(const[o,c]of(r.acts||[]).entries())for(const[d,p]of(c.scenes||[]).entries())Array.isArray(p.npcIds)&&p.npcIds.includes(n)&&i.push({scenarioId:r.id,scenarioTitle:r.title,actTitle:c.title,actNumber:o+1,sceneNumber:d+1,sceneTitle:p.title});return i}function v_(n){const i=new Map;for(const r of yi||[])for(const[o,c]of(r.acts||[]).entries())for(const[d,p]of(c.scenes||[]).entries())p.locationId&&String(p.locationId)===String(n)&&(p.npcIds||[]).forEach(h=>{const v=i.get(h)||{npcId:h,occurrences:[]};v.occurrences.push({scenarioId:r.id,scenarioTitle:r.title,actTitle:c.title,actNumber:o+1,sceneNumber:d+1,sceneTitle:p.title}),i.set(h,v)});return Array.from(i.values())}function b_(n){for(const i of xs.zones||[]){const r=(i.locations||[]).find(o=>o.id===n);if(r)return{loc:r,zone:i}}return null}function xg(n){const i=[],r=new Set;return g_(n.npcIds||[]).forEach(c=>{r.has(c.id)||(i.push(c),r.add(c.id))}),(n.npcs||[]).forEach(c=>{c?.id&&!r.has(c.id)&&(i.push(c),r.add(c.id))}),i}const x_=()=>{const n=[];return xs.zones?.forEach(i=>{n.push({type:"Zone",title:i.name,description:i.details,path:`/univers?zone=${i.id}`}),i.locations?.forEach(r=>{n.push({type:"Lieu",title:r.name,description:r.summary,path:`/univers?zone=${i.id}&loc=${r.id}`}),r.npcs?.forEach(o=>{n.push({type:"PNJ",title:o.name,description:o.role,path:`/univers?zone=${i.id}&loc=${r.id}&pnj=${o.id}`})})})}),yi?.forEach(i=>{n.push({type:"Scnario",title:i.title,description:i.synopsis,path:`/scenarios/${i.id}`})}),gg?.forEach(i=>{n.push({type:"Faction",title:i.name,description:i.desc,path:"/factions"})}),n};function y_(){const[n,i]=A.useState(""),r=A.useMemo(()=>{const c=x_(),d=new pn(c,{threshold:.3,keys:["title","description","type"]});return{entries:c,fuse:d}},[]),o=A.useMemo(()=>n.trim()?r.fuse.search(n).map(c=>c.item):[],[n,r]);return{term:n,setTerm:i,results:o,clear:()=>i("")}}function Ka(n,i){const[r,o]=A.useState(()=>{try{const c=localStorage.getItem(n);return c?JSON.parse(c):i}catch{return i}});return A.useEffect(()=>{try{localStorage.setItem(n,JSON.stringify(r))}catch(c){console.error(`Failed to save ${n} to localStorage`,c)}},[n,r]),[r,o]}const S_=[{to:"/univers",label:"Univers",icon:kh},{to:"/factions",label:"Factions",icon:al},{to:"/antagoniste",label:"Antagoniste",icon:Fr},{to:"/scenarios",label:"Scnarios",icon:ly}];function __(){const{term:n,setTerm:i,results:r,clear:o}=y_(),c=Kt(),d=el(),[p,h]=Ka("last-route",null);return A.useEffect(()=>{c.pathname!=="/"&&h(c.pathname+c.search)},[c]),A.useEffect(()=>{c.pathname==="/"&&p&&p!=="/"&&d(p,{replace:!0})},[c.pathname,p,d]),m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-surface via-surface-raised to-surface text-content",children:[m.jsx("header",{className:"border-b border-surface-border bg-surface/95 backdrop-blur-md sticky top-0 z-50",children:m.jsxs("div",{className:"mx-auto max-w-6xl px-6 py-4 flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 rounded-md bg-accent-surface border border-accent-muted text-accent",children:m.jsx(Gh,{size:20})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-widest text-content-subtle",children:"Wiki de campagne"}),m.jsx("h1",{className:"text-xl font-serif text-accent-light",children:"L'Ombre de la Spirale"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative w-64",children:[m.jsx(vc,{value:n,onChange:i,placeholder:"Rechercher (PNJ, lieux, scnarios...)"}),n.trim().length>=2&&r.length>0&&m.jsx("div",{className:"absolute mt-2 w-full bg-surface border border-surface-border rounded-md shadow-xl z-20 max-h-72 overflow-auto animate-slide-down",children:m.jsx("ul",{className:"divide-y divide-surface-border",children:r.map((v,g)=>m.jsx("li",{children:m.jsxs(ya,{to:v.path,onClick:o,className:"flex flex-col gap-1 px-3 py-2 hover:bg-surface-raised transition-colors",children:[m.jsx("span",{className:"text-xs uppercase tracking-widest text-accent",children:v.type}),m.jsx("span",{className:"text-sm text-content",children:v.title}),v.description&&m.jsx("span",{className:"text-xs text-content-muted line-clamp-2",children:v.description})]})},`${v.type}-${g}`))})})]}),m.jsx("nav",{className:"flex items-center gap-2",children:S_.map(({to:v,label:g,icon:y})=>{const b=y;return m.jsxs(wh,{to:v,className:({isActive:T})=>Ge("flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 border","border-surface-border bg-surface-raised/60 hover:border-accent-muted hover:text-accent-light",T&&"text-accent-light border-accent-dark bg-surface-raised shadow-glow"),children:[m.jsx(b,{size:16}),g]},v)})})]})]})}),m.jsx("main",{className:"mx-auto max-w-6xl px-6 py-10",children:m.jsx(ux,{})})]})}function fn({title:n,icon:i,subtitle:r,className:o}){return m.jsxs("div",{className:Ge("mb-8 border-b border-surface-border pb-4",o),children:[m.jsxs("h2",{className:"text-3xl font-serif text-content flex items-center gap-3",children:[i&&m.jsx(i,{className:"text-accent",size:28,"aria-hidden":"true"}),m.jsx("span",{children:n})]}),r&&m.jsx("p",{className:"text-content-muted mt-2 font-serif italic",children:r})]})}fn.propTypes={title:O.string.isRequired,icon:O.elementType,subtitle:O.string,className:O.string};fn.defaultProps={icon:null,subtitle:"",className:""};function Za({children:n,className:i,title:r,subtitle:o,icon:c,variant:d="default",hoverEffect:p=!0,...h}){const v={default:"bg-surface-raised border-surface-border shadow-xl hover:shadow-glow",simple:"bg-surface border-surface-border",flat:"bg-surface/50 border-surface-border"};return m.jsxs("div",{className:Ge("border rounded-lg p-4 relative overflow-hidden transition-all duration-200",v[d]||v.default,p&&"hover:border-accent-muted",i),...h,children:[(r||c)&&m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c&&m.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-surface-raised border border-surface-border",children:c}),r&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-serif text-content",children:r}),o&&m.jsx("p",{className:"text-[11px] uppercase tracking-widest text-content-subtle",children:o})]})]}),n]})}Za.propTypes={children:O.node,className:O.string,title:O.string,subtitle:O.string,icon:O.element,variant:O.oneOf(["default","simple","flat"]),hoverEffect:O.bool};Za.defaultProps={children:null,className:"",variant:"default",hoverEffect:!0};function yc({zones:n,selectedZoneId:i,onSelect:r}){return m.jsxs(Za,{children:[m.jsx("h3",{className:"text-sm font-mono tracking-widest text-content-muted uppercase border-b border-surface-border pb-2 mb-4",children:"Zones de Val-d'Ombre"}),m.jsx("div",{className:"space-y-2 mb-4",children:n.map(o=>m.jsx("button",{onClick:()=>r(o.id),className:Ge("w-full text-left px-3 py-2 rounded border text-sm font-serif transition-colors",i===o.id?"bg-accent-surface border-accent-dark text-accent-light":"bg-surface/50 border-surface-border text-content-secondary hover:border-surface-border"),children:o.name},o.id))})]})}yc.propTypes={zones:O.array.isRequired,selectedZoneId:O.oneOfType([O.string,O.number]),onSelect:O.func.isRequired};yc.defaultProps={selectedZoneId:null};function Sc({locations:n,selectedLocationId:i,onSelectLocation:r}){const o=n.find(b=>b.id===i)||n[0]||null,c=b=>`/antagoniste?pnj=${encodeURIComponent(b)}`,d=o?xg(o):[],p=d.map(b=>({...b,occurrences:bg(b.id)})),h=o?v_(o.id):[],v=new Set(d.map(b=>b.id)),g=h.filter(b=>!v.has(b.npcId)).map(b=>{const C=nc(b.npcId)?.npc;return{id:b.npcId,name:C?.name||b.npcId,role:C?.role||"",isEnemy:C?.isEnemy??C?.est_ennemi??!1,occurrences:b.occurrences||[]}}),y=({npc:b,isResident:T})=>m.jsxs("div",{className:"bg-surface/50 border border-surface-border rounded px-3 py-2 space-y-2",children:[m.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-semibold text-accent-light",children:b.name}),b.isEnemy&&m.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-red-700 text-red-300 bg-red-900/20 uppercase tracking-wide",children:"Ennemi"})]}),b.role&&m.jsx("p",{className:"text-xs text-content-muted",children:b.role})]}),b.id&&m.jsx(ya,{to:c(b.id),className:"text-[10px] px-2 py-1 rounded border border-accent-muted text-accent-light bg-accent-surface hover:border-accent transition-colors",children:"Fiche"})]}),T&&b.details&&b.details.length>0&&m.jsx("ul",{className:"space-y-1 mt-2",children:b.details.map((C,L)=>m.jsxs("li",{className:"flex gap-2 text-xs text-content-secondary",children:[m.jsx("span",{className:"mt-1 w-1 h-1 rounded-full bg-surface-border block flex-shrink-0"}),m.jsx("span",{children:C})]},L))}),b.occurrences&&b.occurrences.length>0&&m.jsxs("div",{className:"pt-1",children:[m.jsx("p",{className:"text-[10px] uppercase tracking-widest text-content-muted mb-1.5",children:"Apparitions dans les scnarios"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:b.occurrences.map((C,L)=>m.jsxs(ya,{to:`/scenarios?scenario=${C.scenarioId}&scene=${encodeURIComponent(C.sceneTitle)}`,className:"px-2 py-1 rounded border border-accent-muted text-accent-light bg-accent-surface hover:bg-accent-surface/80 text-[10px] uppercase tracking-wide transition-colors",title:`${C.scenarioTitle}  ${C.actTitle}  ${C.sceneTitle}`,children:[C.scenarioId,".",C.actNumber,".",C.sceneNumber]},`${b.id}-${L}-${C.sceneTitle}`))})]})]});return m.jsxs("div",{className:"space-y-6",children:[m.jsxs(Za,{children:[m.jsx("h3",{className:"text-sm font-mono tracking-widest text-content-muted uppercase border-b border-surface-border pb-2 mb-4",children:"Lieux marquants"}),n.length>0?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"space-y-2 mb-4",children:n.map(b=>m.jsxs("button",{onClick:()=>r(b.id),className:Ge("w-full text-left px-3 py-2 rounded border text-sm font-serif transition-colors",o&&o.id===b.id?"bg-surface-raised border-accent-dark text-accent-light":"bg-surface/50 border-surface-border text-content-secondary hover:border-surface-border"),children:[m.jsx("div",{className:"font-semibold",children:b.name}),m.jsx("div",{className:"text-xs text-content-muted line-clamp-1",children:b.summary})]},b.id))}),o&&m.jsx("div",{className:"space-y-4 text-sm text-content-secondary",children:m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"font-serif text-accent",children:o.name}),m.jsx("p",{className:"text-content-muted text-xs mb-1",children:"Dtails du lieu"}),m.jsx("ul",{className:"space-y-1.5",children:o.details?.map((b,T)=>m.jsxs("li",{className:"flex gap-2",children:[m.jsx("span",{className:"mt-1 w-1 h-1 rounded-full bg-surface-border block flex-shrink-0"}),m.jsx("span",{children:b})]},T))})]})})]}):m.jsx("p",{className:"text-sm text-content-subtle",children:"Aucun lieu dfini pour cette zone."})]}),m.jsx(Za,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-mono tracking-widest text-content-muted uppercase border-b border-surface-border pb-2 mb-4 flex items-center justify-between",children:m.jsx("span",{children:"PNJ rsidents"})}),o?p.length>0?m.jsx("div",{className:"space-y-3",children:p.map(b=>m.jsx(y,{npc:b,isResident:!0},b.id))}):m.jsx("p",{className:"text-sm text-content-subtle",children:"Aucun rsident rpertori."}):m.jsx("p",{className:"text-sm text-content-subtle",children:"Slectionnez un lieu."})]}),g.length>0&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-mono tracking-widest text-content-muted uppercase border-b border-surface-border pb-2 mb-4",children:"PNJ visiteurs"}),m.jsx("div",{className:"space-y-3",children:g.map(b=>m.jsx(y,{npc:b,isResident:!1},b.id))})]})]})})]})}Sc.propTypes={locations:O.array.isRequired,selectedLocationId:O.oneOfType([O.string,O.number]),onSelectLocation:O.func.isRequired};Sc.defaultProps={selectedLocationId:null};function q_(){const n=xs.zones||[],[i,r]=Ka("universe-zone",n[0]?.id||null),[o,c]=Ka("universe-loc",null),[d,p]=Ka("universe-pnj",null),[h]=fc(),g=(n.find(C=>C.id===i)||n[0]||null)?.locations||[];A.useEffect(()=>{const C=h.get("zone"),L=h.get("loc"),z=h.get("pnj");if(C){const V=n.find(B=>String(B.id)===C);if(V)if(r(V.id),L){const B=V.locations?.find(G=>String(G.id)===L);if(c(B?B.id:null),B&&z){const J=xg(B).find($=>String($.id)===z);p(J?J.id:null)}else p(null)}else c(null),p(null)}},[h,n]);const y=C=>{r(C),c(null),p(null)},b=C=>{c(C),p(null)},T=C=>{p(L=>L===C?null:C)};return m.jsxs("div",{className:"space-y-8 animate-fadeIn text-content-secondary",children:[m.jsx(fn,{title:xs.title,icon:kh,subtitle:xs.intro}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsx("div",{className:"lg:col-span-3 grid grid-cols-1 lg:grid-cols-2 gap-6",children:xs.sections.map((C,L)=>m.jsxs(Za,{children:[m.jsx("h3",{className:"text-xl font-serif text-accent mb-4 border-l-2 border-accent-dark pl-3",children:C.title}),m.jsx("ul",{className:"space-y-2",children:C.content.map((z,V)=>m.jsxs("li",{className:"flex gap-2 text-lg text-content-secondary",children:[m.jsx("span",{className:"text-accent-dark mt-1.5 w-1.5 h-1.5 rounded-full bg-accent-dark block flex-shrink-0"}),m.jsx("span",{children:z})]},V))})]},L))}),m.jsx(yc,{zones:n,selectedZoneId:i,onSelect:y}),m.jsx("div",{className:"lg:col-span-2",children:m.jsx(Sc,{locations:g,selectedLocationId:o,onSelectLocation:b,selectedNpcId:d,onSelectNpc:T})})]})]})}function yg({items:n,renderItem:i,className:r,listClassName:o,emptyMessage:c="Aucun lment  afficher",bordered:d=!0,divided:p=!0}){return!n||n.length===0?m.jsx("div",{className:Ge("text-center py-4 text-content-secondary",r),children:c}):m.jsx("ul",{className:Ge("space-y-2",d&&"border border-surface-border rounded-md p-2",p&&"divide-y divide-surface-border",o),children:n.map((h,v)=>m.jsx("li",{className:Ge(d&&"px-3 py-2",p&&"py-2"),children:i(h,v)},v))})}yg.propTypes={items:O.array,renderItem:O.func.isRequired,className:O.string,listClassName:O.string,emptyMessage:O.string,bordered:O.bool,divided:O.bool};function T_(n,i,r){const o=yi.find(p=>p.id===n||p.id===String(n));if(!o)return null;const c=o.acts[i-1];return!c||!c.scenes?null:c.scenes[r]?.title||null}function C_(){const{t:n}=ig();return m.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[m.jsx(fn,{title:n("factions.title"),icon:al,subtitle:n("factions.subtitle")}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:gg.map(i=>m.jsxs(Za,{className:i.color,title:i.name,subtitle:i.type,icon:i.icon&&m.jsx(i.icon,{size:20,className:i.color.split(" ")[0]}),variant:"simple",children:[m.jsx("p",{className:"text-sm text-content-secondary leading-relaxed",children:i.desc}),i.objectifs&&m.jsxs("div",{className:"mt-4 space-y-2",children:[m.jsxs("h4",{className:"text-xs uppercase tracking-wide text-content-muted flex items-center gap-1.5",children:[m.jsx(xy,{size:14}),"Objectifs"]}),m.jsxs("div",{className:"space-y-1.5 text-xs",children:[m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold text-accent-light",children:"Court terme : "}),m.jsx("span",{className:"text-content-secondary",children:i.objectifs.court_terme})]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold text-accent-light",children:"Long terme : "}),m.jsx("span",{className:"text-content-secondary",children:i.objectifs.long_terme})]})]})]}),i.alliances?.length>0&&m.jsxs("div",{className:"mt-4 space-y-2",children:[m.jsxs("h4",{className:"text-xs uppercase tracking-wide text-content-muted flex items-center gap-1.5",children:[m.jsx(hc,{size:14}),"Relations"]}),m.jsx("div",{className:"space-y-1",children:i.alliances.map((r,o)=>m.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[m.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-semibold uppercase ${r.type==="alliance"?"bg-green-900/40 text-green-300":r.type==="rivalite"?"bg-orange-900/40 text-orange-300":r.type==="conflit"?"bg-red-900/40 text-red-300":"bg-gray-900/40 text-gray-300"}`,children:r.type}),m.jsxs("div",{className:"flex-1",children:[m.jsx("span",{className:"font-semibold text-accent-light",children:r.faction}),m.jsxs("span",{className:"text-content-muted",children:["  ",r.desc]})]})]},o))})]}),i.forces_militaires&&m.jsxs("div",{className:"mt-4 space-y-2",children:[m.jsxs("h4",{className:"text-xs uppercase tracking-wide text-content-muted flex items-center gap-1.5",children:[m.jsx(Yr,{size:14}),"Forces Militaires"]}),m.jsxs("div",{className:"space-y-1.5 text-xs",children:[m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold text-accent-light",children:"Effectifs : "}),m.jsx("span",{className:"text-content-secondary",children:i.forces_militaires.effectifs})]}),i.forces_militaires.capacites?.length>0&&m.jsxs("div",{children:[m.jsx("span",{className:"font-semibold text-green-400",children:"Capacits : "}),m.jsx("span",{className:"text-content-muted",children:i.forces_militaires.capacites.join(", ")})]}),i.forces_militaires.faiblesses?.length>0&&m.jsxs("div",{children:[m.jsx("span",{className:"font-semibold text-red-400",children:"Faiblesses : "}),m.jsx("span",{className:"text-content-muted",children:i.forces_militaires.faiblesses.join(", ")})]})]})]}),i.hierarchy?.length>0&&m.jsxs("div",{className:"mt-4 space-y-2",children:[m.jsx("h4",{className:"text-xs uppercase tracking-wide text-content-muted",children:n("factions.hierarchy")}),m.jsx(yg,{items:i.hierarchy,renderItem:r=>m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:"font-semibold text-accent-light",children:r.role}),r.npcId&&(()=>{const o=nc(r.npcId),c=o?.npc?.name||r.npcId,d=o&&o.zone&&o.loc?sc({zoneId:o.zone.id,locId:o.loc.id,npcId:r.npcId}):null;return d?m.jsx("a",{href:d,title:r.npcId,className:"text-sm text-content underline decoration-accent/60 decoration-dotted underline-offset-4 hover:text-accent-light transition-colors",children:c}):m.jsx("span",{className:"text-sm text-content",title:r.npcId,children:c})})()]})})]}),i.npcIds?.length>0&&m.jsxs("div",{className:"mt-3",children:[m.jsx("h4",{className:"text-xs uppercase tracking-wide text-content-muted",children:n("factions.npcs")}),m.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1",children:i.npcIds.map(r=>{const o=nc(r),c=o?.npc?.name||r,d=o&&o.zone&&o.loc?sc({zoneId:o.zone.id,locId:o.loc.id,npcId:r}):null;return d?m.jsx("a",{href:d,title:r,className:"text-[11px] text-accent-light bg-accent-surface border border-accent-muted/40 rounded px-2 py-1 tracking-wide hover:border-accent transition-colors",children:c},r):m.jsx("span",{title:r,className:"text-[11px] text-accent-light bg-accent-surface border border-accent-muted/40 rounded px-2 py-1 tracking-wide",children:c},r)})})]}),i.quetes_associees?.length>0&&m.jsxs("div",{className:"mt-4 space-y-2",children:[m.jsxs("h4",{className:"text-xs uppercase tracking-wide text-content-muted flex items-center gap-1.5",children:[m.jsx(uy,{size:14}),"Qutes Associes"]}),m.jsx("div",{className:"space-y-1",children:i.quetes_associees.map((r,o)=>{const c=r.sceneIndex!==void 0?T_(r.scenarioId,r.acte,r.sceneIndex):null,d=c?`/scenarios/${r.scenarioId}?scene=${encodeURIComponent(c)}`:`/scenarios/${r.scenarioId}`;return m.jsxs("div",{className:"text-xs text-content-muted",children:[m.jsxs(ya,{to:d,className:"font-semibold text-accent-light hover:text-accent underline decoration-accent/40 decoration-dotted underline-offset-2 hover:decoration-solid transition-colors",children:["Scnario ",r.scenarioId,"  Acte ",r.acte,r.sceneLabel&&m.jsxs(m.Fragment,{children:[", ",r.sceneLabel]})]}),m.jsxs("span",{className:"italic",children:[" : ",r.role]})]},o)})})]})]},i.name))})]})}function j_(n){const i=Xa(n);return i>=10?"Boss":i>=7?"Combat":i>=4?"Tension":"Social"}function Xa(n){if(n==null)return 0;if(typeof n=="number")return n;const i=String(n).trim();if(i.includes("/")){const o=i.split("/");if(o.length===2)return parseFloat(o[0])/parseFloat(o[1])}const r=i.match(/\d+/g);return r&&r.length>0?r.reduce((o,c)=>o+parseInt(c,10),0):parseFloat(i)||0}function ic(n){switch(n){case"monstres":return{label:"Monstre",className:"bg-purple-900/20 text-purple-300 border-purple-800/30"};case"ennemis":return{label:"Ennemi",className:"bg-red-900/20 text-red-300 border-red-800/30"};case"allies":return{label:"Alli",className:"bg-blue-900/20 text-blue-300 border-blue-800/30"};default:return null}}function A_({npc:n,onClick:i}){const[r,o]=A.useState(!1),c=n.lvl??n.level_value,d=c!=null&&c!==0&&c!=="0",p=d?Xa(c):n.fp??n.cr,h=d?`Niv. ${p}`:`FP ${p}`,g=n.category==="allies"?"blue":n.category==="ennemis"?"red":n.category==="monstres"?n.est_ennemi===!1?"blue":"red":"default",y=n.ini||n.initiative||"+0",b=n.ca||n.ac,T=typeof b=="object"?b.total:b?String(b).match(/^(\d+)/)?.[1]:"10",C=typeof b=="object"?b.contact:"10",L=typeof b=="object"?b.pris_au_depourvu:T,z=n.js||n.saves||{},V=z.vig||z.fort||"+0",B=z.ref||"+0",G=z.vol||z.will||"+0",J=n.attaque||n.attack||"";return m.jsx(Za,{className:Ge("cursor-pointer transition-all duration-200 relative overflow-hidden flex flex-col bg-surface","border-2 border-surface-border hover:border-accent-light/40",r&&"scale-[1.01] shadow-2xl"),onClick:i,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:m.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[m.jsx("div",{className:"pt-4 px-4 pb-2",children:m.jsx("h3",{className:"text-xl font-serif text-accent-light font-bold text-center tracking-wide leading-tight",children:n.name})}),m.jsx("div",{children:m.jsxs("div",{className:"flex items-center justify-between pt-4",children:[m.jsxs("div",{className:"flex items-center gap-2 text-content-subtle font-bold text-sm",children:[m.jsx(Fh,{size:15,className:"text-accent-light"}),m.jsxs("span",{children:[y," Init"]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[ic(n.category)&&m.jsx("span",{className:Ge("px-3 py-1 text-xs font-bold rounded-full border uppercase tracking-wider shadow-sm",g==="blue"&&"bg-blue-900/40 border-blue-500/50 text-blue-200",g==="red"&&"bg-red-900/40 border-red-500/50 text-red-200",g==="default"&&"bg-slate-800 border-slate-500 text-slate-200"),children:ic(n.category).label}),m.jsx("span",{className:Ge("px-3 py-1 text-xs font-bold rounded-full border uppercase tracking-wider shadow-sm",g==="blue"&&"bg-blue-900/40 border-blue-500/50 text-blue-200",g==="red"&&"bg-red-900/40 border-red-500/50 text-red-200",g==="default"&&"bg-slate-800 border-slate-500 text-slate-200"),children:h})]})]})}),m.jsxs("div",{className:"p-5 pt-3 space-y-5",children:[m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsx(on,{label:"CA",value:T}),m.jsx(on,{label:"Contact",value:C}),m.jsx(on,{label:"Dpourvu",value:L}),m.jsx(on,{label:"Vig",value:V}),m.jsx(on,{label:"Rf",value:B}),m.jsx(on,{label:"Vol",value:G})]}),J&&m.jsxs("div",{className:"px-3 py-2.5 rounded-lg border border-surface-border/40 bg-black/10",children:[m.jsxs("div",{className:"flex items-center gap-2 text-[10px] uppercase font-bold text-content-subtle mb-1.5 opacity-80",children:[m.jsx(hc,{size:14}),m.jsx("span",{children:"Attaque"})]}),m.jsx("div",{className:"text-sm font-medium text-content leading-snug",children:J})]}),m.jsxs("div",{className:"flex items-center justify-between pt-4",children:[m.jsx("div",{className:"flex items-center gap-2",children:n.pv&&m.jsxs(m.Fragment,{children:[m.jsx(Hh,{size:18,className:"text-red-500 fill-red-500/10"}),m.jsxs("span",{className:"font-bold text-base text-content",children:[n.pv," ",m.jsx("span",{className:"text-xs text-content-subtle font-normal",children:"PV"})]})]})}),n.class&&m.jsx("div",{className:"text-sm font-medium text-content leading-snug",children:n.class})]})]})]})})}const on=({label:n,value:i})=>m.jsxs("div",{className:"flex flex-col items-center py-2 rounded-lg border border-surface-border/40 bg-black/10",children:[m.jsx("div",{className:"text-[10px] uppercase font-bold text-content-subtle mb-1 tracking-wider opacity-80",children:n}),m.jsx("div",{className:"text-base font-black text-content leading-none",children:i})]});function _c({isOpen:n,onClose:i,title:r,subtitle:o,badge:c,children:d,maxWidth:p="max-w-4xl"}){const h=A.useRef();return A.useEffect(()=>{if(!n)return;const v=y=>{h.current&&!h.current.contains(y.target)&&i()},g=y=>{y.key==="Escape"&&i()};return document.addEventListener("mousedown",v),document.addEventListener("keydown",g),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousedown",v),document.removeEventListener("keydown",g),document.body.style.overflow=""}},[n,i]),n?m.jsxs("div",{className:"fixed inset-0 z-[100] overflow-y-auto",children:[m.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm transition-opacity",onClick:i}),m.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:m.jsxs("div",{ref:h,className:Ge("relative bg-surface-raised rounded-xl shadow-2xl w-full max-h-[90vh] overflow-hidden border border-surface-border",p),children:[r&&m.jsxs("div",{className:"relative bg-gradient-to-r from-accent-light/20 to-accent-light/5 p-6 border-b border-surface-border",children:[m.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-2 rounded-lg bg-surface/80 hover:bg-surface border border-surface-border transition-colors",children:m.jsx(_y,{size:20,className:"text-content"})}),m.jsx("div",{className:"flex items-start justify-between pr-12",children:m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("h1",{className:"text-2xl font-serif text-accent-light font-bold",children:r}),c]}),o&&m.jsx("p",{className:"text-lg text-content-secondary italic",children:o})]})})]}),m.jsx("div",{className:Ge("p-6 overflow-y-auto",r?"max-h-[calc(90vh-200px)]":"max-h-[90vh]"),children:d})]})})]}):null}_c.propTypes={isOpen:O.bool.isRequired,onClose:O.func.isRequired,title:O.string,subtitle:O.string,badge:O.node,children:O.node,maxWidth:O.string};const D_={Combat:"bg-red-500/15 text-red-300 border-red-600",Social:"bg-blue-500/15 text-blue-300 border-blue-500",Exploration:"bg-emerald-500/15 text-emerald-300 border-emerald-500",Investigation:"bg-emerald-500/15 text-emerald-300 border-emerald-500",Ambiance:"bg-stone-500/15 text-stone-300 border-stone-500",Indice:"bg-amber-500/15 text-amber-300 border-amber-500",Boss:"bg-red-600/25 text-red-200 border-red-500 font-bold animate-pulse-slow",Tension:"bg-orange-500/15 text-orange-300 border-orange-500",Magie:"bg-purple-500/15 text-purple-300 border-purple-400",Twist:"bg-pink-500/15 text-pink-300 border-pink-400",Prparation:"bg-cyan-500/15 text-cyan-300 border-cyan-400",Action:"bg-orange-600/15 text-orange-200 border-orange-500",Rencontre:"bg-sky-500/15 text-sky-300 border-sky-400",Objectif:"bg-green-600/15 text-green-300 border-green-500",Observation:"bg-slate-500/15 text-slate-300 border-slate-400",Logistique:"bg-yellow-700/15 text-yellow-300 border-yellow-600",pique:"bg-violet-600/15 text-violet-200 border-violet-500 font-bold",Pige:"bg-red-800/15 text-red-300 border-red-700",Puzzle:"bg-indigo-500/15 text-indigo-300 border-indigo-400",Dilemme:"bg-fuchsia-500/15 text-fuchsia-300 border-fuchsia-400","Mini-Boss":"bg-red-700/20 text-red-200 border-red-500 font-bold",Dcor:"bg-gray-600/15 text-gray-300 border-gray-500",Rvlation:"bg-purple-400/15 text-purple-200 border-purple-400",Transition:"bg-slate-600/15 text-slate-200 border-slate-500",Cinmatique:"bg-gray-900/20 text-yellow-300 border-yellow-700/50",Conclusion:"bg-amber-200/20 text-amber-100 border-amber-300/50",Dcouverte:"bg-teal-500/15 text-teal-300 border-teal-400",Horreur:"bg-purple-800/15 text-purple-300 border-purple-700"},L_="bg-stone-500/15 text-stone-300 border-stone-500";function nl({type:n,variant:i,children:r,className:o}){const c=D_[i||n]||L_;return m.jsx("span",{className:Ge("text-xs px-2 py-1 rounded border uppercase tracking-wider font-semibold",c,o),children:r||i||n})}nl.propTypes={type:O.string,variant:O.string,children:O.node,className:O.string};nl.defaultProps={type:"",variant:"",children:null,className:""};function Sg({title:n,icon:i,children:r,className:o=""}){return m.jsxs("div",{className:`mb-6 ${o}`,children:[m.jsxs("h3",{className:"text-lg font-serif text-accent-light font-bold mb-3 flex items-center gap-2",children:[i&&m.jsx(i,{size:18}),n]}),m.jsx("div",{className:"bg-surface/30 rounded-lg p-4 border border-surface-border",children:r})]})}Sg.propTypes={title:O.string.isRequired,icon:O.elementType,children:O.node.isRequired,className:O.string};function _g({npc:n}){const i=typeof n.ca=="object"?n.ca?.total:n.ca||n.ac?.total||n.ac,r=n.pv??n.hp,o=n.fp??n.cr,c=n.ini||n.initiative;return m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[m.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 text-center border border-surface-border",children:[m.jsx(al,{className:"w-6 h-6 mx-auto mb-2 text-accent-light"}),m.jsx("div",{className:"font-bold text-accent-light text-lg",children:"CA"}),m.jsx("div",{className:"text-xl",children:i??""})]}),m.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 text-center border border-surface-border",children:[m.jsx(Hh,{className:"w-6 h-6 mx-auto mb-2 text-red-400"}),m.jsx("div",{className:"font-bold text-accent-light text-lg",children:"PV"}),m.jsx("div",{className:"text-xl",children:r??""})]}),m.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 text-center border border-surface-border",children:[m.jsx(Fh,{className:"w-6 h-6 mx-auto mb-2 text-yellow-400"}),m.jsx("div",{className:"font-bold text-accent-light text-lg",children:"Init"}),m.jsx("div",{className:"text-xl",children:c??""})]}),m.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 text-center border border-surface-border",children:[m.jsx(Zx,{className:"w-6 h-6 mx-auto mb-2 text-purple-400"}),m.jsx("div",{className:"font-bold text-accent-light text-lg",children:n.lvl?"Niv":"FP"}),m.jsx("div",{className:"text-xl",children:n.lvl?Xa(n.lvl):o??""})]})]})}_g.propTypes={npc:O.object.isRequired};function qg({npc:n}){const i=n.taille||n.size,r=n.type,o=n.alignment||n.alignement,c=n.dv||n.hd,d=n.vit||n.speed,p=n.sens||n.senses;return m.jsxs("div",{className:"bg-surface/30 rounded-lg p-4 mb-6 border border-surface-border",children:[m.jsxs("p",{className:"text-accent-light uppercase tracking-wider text-sm font-bold mb-2",children:[i&&m.jsxs("span",{children:[i," "]}),r&&m.jsx("span",{children:r}),n.class&&m.jsxs("span",{children:[", ",n.class]}),o&&m.jsxs("span",{className:"text-content-muted normal-case",children:[" (",o,")"]})]}),m.jsxs("div",{className:"flex gap-6 text-sm text-content-secondary",children:[m.jsxs("span",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"DV :"})," ",c??""]}),m.jsxs("span",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Vit :"})," ",d??""]}),m.jsxs("span",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Sens :"})," ",p??""]})]})]})}qg.propTypes={npc:O.object.isRequired};function Tg({npc:n}){const i=n.attaque||n.attack,r=n.fullAttack||n.att_complete,o=n.abb||n.bab,c=n.grp||n.grapple,d=n.espace||n.space,p=n.allonge||n.reach;return m.jsx(Sg,{title:"Combat",icon:gy,children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Attaque :"}),m.jsx("span",{className:"font-medium",children:i??""})]}),r&&m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Att. complte :"}),m.jsx("span",{className:"font-medium",children:r})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"ABB :"})," ",o??""]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Lutte :"})," ",c??""]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Espace :"})," ",d??""]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Allonge :"})," ",p??""]})]})]})})}Tg.propTypes={npc:O.object.isRequired};function Cg({npc:n}){const i=n.qual_sp||n.qualites||n.specialQualities||n.special_qualites||[],r=n.att_sp||n.specialAttacks||n.attacks_speciales||[],o=Array.isArray(r)&&r.length>0,c=Array.isArray(i)&&i.length>0;return!o&&!c?null:m.jsxs(m.Fragment,{children:[o&&m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-serif text-accent-light font-bold mb-3",children:"Attaques spciales"}),m.jsx("div",{className:"bg-surface/30 rounded-lg p-4 border border-surface-border",children:m.jsx("div",{className:"flex flex-wrap gap-2",children:r.map((d,p)=>m.jsx("span",{className:"px-3 py-1 bg-red-900/20 text-red-300 text-sm rounded border border-red-800/30",children:d},p))})})]}),c&&m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-serif text-accent-light font-bold mb-3",children:"Qualits spciales"}),m.jsx("div",{className:"bg-surface/30 rounded-lg p-4 border border-surface-border",children:m.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((d,p)=>m.jsx("span",{className:"px-3 py-1 bg-blue-900/20 text-blue-300 text-sm rounded border border-blue-800/30",children:d},p))})})]})]})}Cg.propTypes={npc:O.object.isRequired};function jg({npc:n}){const i=n.js||n.saves;return i?m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-serif text-accent-light font-bold mb-3",children:"Jets de sauvegarde"}),m.jsx("div",{className:"bg-surface/30 rounded-lg p-4 border border-surface-border",children:typeof i=="string"?i:m.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-content-muted font-medium",children:"Vig"}),m.jsx("div",{className:"text-lg font-bold",children:i.vig||i.fort||""})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-content-muted font-medium",children:"Rf"}),m.jsx("div",{className:"text-lg font-bold",children:(i.rf??i.ref)||""})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-content-muted font-medium",children:"Vol"}),m.jsx("div",{className:"text-lg font-bold",children:i.vol||i.will||""})]})]})})]}):null}jg.propTypes={npc:O.object.isRequired};function Ag({npc:n}){const i=n.carac||n.abilities;return i?m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-serif text-accent-light font-bold mb-3",children:"Caractristiques"}),m.jsx("div",{className:"bg-surface/30 rounded-lg p-4 border border-surface-border",children:m.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-4 text-center",children:[m.jsxs("div",{children:[m.jsx("div",{className:"font-bold text-accent-light text-lg",children:"FOR"}),m.jsx("div",{className:"text-lg",children:typeof i.for=="number"?i.for:i.str||""})]}),m.jsxs("div",{children:[m.jsx("div",{className:"font-bold text-accent-light text-lg",children:"DEX"}),m.jsx("div",{className:"text-lg",children:typeof i.dex=="number"?i.dex:i.dex||""})]}),m.jsxs("div",{children:[m.jsx("div",{className:"font-bold text-accent-light text-lg",children:"CON"}),m.jsx("div",{className:"text-lg",children:typeof i.con=="number"?i.con:i.con||""})]}),m.jsxs("div",{children:[m.jsx("div",{className:"font-bold text-accent-light text-lg",children:"INT"}),m.jsx("div",{className:"text-lg",children:typeof i.int=="number"?i.int:i.int||""})]}),m.jsxs("div",{children:[m.jsx("div",{className:"font-bold text-accent-light text-lg",children:"SAG"}),m.jsx("div",{className:"text-lg",children:typeof i.sag=="number"?i.sag:i.wis||""})]}),m.jsxs("div",{children:[m.jsx("div",{className:"font-bold text-accent-light text-lg",children:"CHA"}),m.jsx("div",{className:"text-lg",children:typeof i.cha=="number"?i.cha:i.cha||""})]})]})})]}):null}Ag.propTypes={npc:O.object.isRequired};function Dg({npc:n}){const i=n.comptences||n.competences||n.skills,r=n.dons||n.feats;return!i&&!r?null:m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-serif text-accent-light font-bold mb-3",children:"Formation"}),m.jsxs("div",{className:"bg-surface/30 rounded-lg p-4 border border-surface-border space-y-3",children:[i&&m.jsxs("div",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Comptences :"}),m.jsx("p",{className:"mt-1",children:i})]}),r&&m.jsxs("div",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Dons :"}),m.jsx("p",{className:"mt-1",children:r})]})]})]})}Dg.propTypes={npc:O.object.isRequired};function Lg({npc:n}){const i=n.environnement||n.environment,r=n.organisation||n.organization,o=n.tactiques||n.tactics,c=n.butin||n.loot,d=n.fp??n.cr;return m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-serif text-accent-light font-bold mb-3",children:"Informations"}),m.jsxs("div",{className:"bg-surface/30 rounded-lg p-4 border border-surface-border space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Environnement :"})," ",i??""]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Organisation :"})," ",r??""]}),m.jsxs("div",{children:[m.jsxs("span",{className:"text-content-muted font-medium",children:[n.lvl?"Niveau":"FP"," :"]})," ",n.lvl??d??""]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Butin :"})," ",c??""]})]}),o&&m.jsxs("div",{children:[m.jsx("span",{className:"text-content-muted font-medium",children:"Tactiques :"}),m.jsx("p",{className:"mt-1",children:o})]})]})]})}Lg.propTypes={npc:O.object.isRequired};function Ng({occurrences:n}){return!n||n.length===0?null:m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-serif text-accent-light font-bold mb-3",children:"Apparitions dans les scnarios"}),m.jsx("div",{className:"bg-surface/30 rounded-lg p-4 border border-surface-border",children:m.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((i,r)=>m.jsxs(ya,{to:`/scenarios?scenario=${i.scenarioId}&scene=${encodeURIComponent(i.sceneTitle)}`,className:"px-3 py-1.5 rounded border border-accent-muted/30 text-accent-light bg-accent-surface/20 hover:bg-accent-surface/40 text-sm transition-colors flex items-center gap-2",title:`${i.scenarioTitle}  ${i.actTitle}  ${i.sceneTitle}`,children:[m.jsxs("span",{className:"font-mono font-bold text-accent-light/70",children:[i.scenarioId,".",i.actNumber,".",i.sceneNumber]}),m.jsx("span",{className:"text-xs truncate max-w-[200px]",children:i.sceneTitle})]},r))})})]})}Ng.propTypes={occurrences:O.arrayOf(O.shape({scenarioId:O.oneOfType([O.string,O.number]),scenarioTitle:O.string,actTitle:O.string,actNumber:O.number,sceneNumber:O.number,sceneTitle:O.string}))};function Mg({details:n}){return!n||n.length===0?null:m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-serif text-accent-light font-bold mb-3",children:"Caractristiques"}),m.jsx("div",{className:"bg-surface/30 rounded-lg p-4 border border-surface-border",children:m.jsx("ul",{className:"space-y-3",children:n.map((i,r)=>m.jsxs("li",{className:"flex gap-3",children:[m.jsx("span",{className:"mt-2 w-2 h-2 rounded-full bg-accent-light block flex-shrink-0"}),m.jsx("span",{className:"text-content-secondary",children:i})]},r))})})]})}Mg.propTypes={details:O.arrayOf(O.string)};function N_({npc:n,isOpen:i,onClose:r}){if(!n)return null;const o=n.fp??n.cr,c=bg(n.id),d=ic(n.category),p=m.jsxs(m.Fragment,{children:[d&&m.jsx("div",{className:Ge("px-3 py-1 text-sm rounded-full border",d.className),children:d.label}),(n.lvl||o)&&m.jsx(nl,{variant:j_(n.lvl||o),className:"text-lg font-bold ml-auto",children:n.lvl?`Niv ${Xa(n.lvl)}`:`FP ${o}`})]});return m.jsxs(_c,{isOpen:i,onClose:r,title:n.name,subtitle:n.role||n.description,badge:p,children:[m.jsx(_g,{npc:n}),m.jsx(qg,{npc:n}),m.jsx(Tg,{npc:n}),m.jsx(Cg,{npc:n}),m.jsx(jg,{npc:n}),m.jsx(Ag,{npc:n}),m.jsx(Dg,{npc:n}),m.jsx(Lg,{npc:n}),m.jsx(Ng,{occurrences:c}),m.jsx(Mg,{details:n.details})]})}function M_(){return{npcs:Sh,counts:f_,getNpcById:xc,getNpcsByCategory:p_,getNpcsByFp:(i,r=Sh)=>i==="all"?r:r.filter(o=>{const c=o.lvl||o.level_value||o.fp||o.cr,d=Xa(c);switch(i){case"lt1":return d<1;case"1-2":return d>=1&&d<=2;case"3-4":return d>=3&&d<=4;case"5-6":return d>=5&&d<=6;case"7-9":return d>=7&&d<=9;case"10+":return d>=10;default:return!0}}),categories:h_,fpFilters:["all","lt1","1-2","3-4","5-6","7-9","10+"]}}function E_(){const[n,i]=A.useState(null),[r,o]=A.useState(!1),[c,d]=A.useState("all"),[p,h]=A.useState("all"),[v,g]=A.useState(""),[y,b]=A.useState(""),[T]=fc(),{npcs:C,getNpcsByCategory:L,categories:z}=M_();A.useEffect(()=>{const Y=T.get("pnj");if(Y){const H=C.find(te=>te.id===Y);H&&(i(H),o(!0),H.category&&d(H.category))}},[T,C]);const V=Ch.useMemo(()=>{let Y=L(c);if(v.trim()){const H=Xa(v);!isNaN(H)&&H>0?Y=Y.filter(te=>{const Q=te.lvl||te.level_value||te.fp||te.cr,ee=Xa(Q);return Math.abs(ee-H)<.01}):Y=Y.filter(te=>String(te.lvl||te.level_value||te.fp||te.cr)===v.trim())}else p!=="all"&&(Y=Y.filter(H=>{const te=H.lvl||H.level_value||H.fp||H.cr,Q=Xa(te);switch(p){case"lt1":return Q<1;case"1-2":return Q>=1&&Q<=2;case"3-4":return Q>=3&&Q<=4;case"5-6":return Q>=5&&Q<=6;case"7-9":return Q>=7&&Q<=9;case"10+":return Q>=10;default:return!0}}));if(y.trim()){const H=y.toLowerCase();Y=Y.filter(te=>te.name?.toLowerCase().includes(H)||te.role?.toLowerCase().includes(H)||te.type?.toLowerCase().includes(H)||te.environment?.toLowerCase().includes(H)||te.organization?.toLowerCase().includes(H))}return Y},[c,p,y,L]),B={all:{icon:Yr,label:"Tous",color:"bg-gray-600"},allies:{icon:Yr,label:"Allis",color:"bg-blue-600"},ennemis:{icon:hc,label:"Ennemis",color:"bg-red-600"},monstres:{icon:sy,label:"Monstres",color:"bg-purple-600"}},G={all:{label:"Tous",color:"bg-gray-500"},lt1:{label:"< 1",color:"bg-green-600"},"1-2":{label:"1-2",color:"bg-green-500"},"3-4":{label:"3-4",color:"bg-yellow-600"},"5-6":{label:"5-6",color:"bg-yellow-500"},"7-9":{label:"7-9",color:"bg-orange-500"},"10+":{label:"10+",color:"bg-red-600"}},J=["all","lt1","1-2","3-4","5-6","7-9","10+"],$=Y=>{i(Y),o(!0)},ie=()=>{o(!1),i(null)};return m.jsxs("div",{className:"space-y-8",children:[m.jsx(fn,{icon:Fr,title:"Antagonistes & PNJ",children:m.jsx("div",{className:"flex items-center gap-4",children:m.jsxs("div",{className:"text-sm text-content-subtle",children:[V.length," / ",C.length," PNJ"]})})}),m.jsxs("div",{className:"bg-surface-raised/50 rounded-xl p-6 border border-surface-border/50 shadow-lg",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx(ty,{size:20,className:"text-accent-light"}),m.jsx("h3",{className:"text-lg font-serif text-accent-light",children:"Filtres"})]}),m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"relative",children:[m.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-content-subtle",size:18}),m.jsx("input",{type:"text",placeholder:"Rechercher un PNJ, un type, un lieu...",value:y,onChange:Y=>b(Y.target.value),className:"w-full pl-10 pr-4 py-3 bg-surface border border-surface-border rounded-lg text-content placeholder:text-content-subtle focus:outline-none focus:ring-2 focus:ring-accent-light/50 focus:border-accent-light"})]})}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:"text-sm font-medium text-content mb-3",children:"Catgorie"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(Y=>{const H=B[Y],te=H.icon,Q=c===Y;return m.jsxs("button",{onClick:()=>d(Y),className:Ge("flex items-center gap-2 px-4 py-2 rounded-lg border transition-all duration-200",Q?`${H.color} text-white border-transparent shadow-lg transform scale-105`:"bg-surface border-surface-border text-content hover:border-accent-light/50 hover:shadow-md"),children:[m.jsx(te,{size:16}),m.jsx("span",{className:"font-medium",children:H.label}),Y!=="all"&&m.jsxs("span",{className:"ml-1 text-xs opacity-75",children:["(",C.filter(ee=>ee.category===Y).length,")"]})]},Y)})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h4",{className:"text-sm font-medium text-content",children:"Puissance (FP)"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs text-content-subtle",children:"FP Exact :"}),m.jsx("input",{type:"text",placeholder:"ex: 1/4",value:v,onChange:Y=>{g(Y.target.value),Y.target.value&&h("all")},className:"w-16 px-2 py-1 text-sm bg-surface border border-surface-border rounded focus:border-accent-light focus:outline-none"})]})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:J.map(Y=>{const H=G[Y],te=p===Y&&!v;return m.jsx("button",{onClick:()=>{h(Y),g("")},className:Ge("px-3 py-1.5 rounded-lg border text-sm transition-all duration-200 font-medium",te?`${H.color} text-white border-transparent shadow-md transform scale-105`:"bg-surface border-surface-border text-content hover:border-accent-light/50 hover:shadow-sm"),children:H.label},Y)})})]}),(c!=="all"||p!=="all"||y||v)&&m.jsx("div",{className:"mt-4 pt-4 border-t border-surface-border/50",children:m.jsx("button",{onClick:()=>{d("all"),h("all"),g(""),b("")},className:"text-sm text-content-subtle hover:text-accent-light transition-colors",children:"Rinitialiser tous les filtres"})})]}),V.length>0?m.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:V.map(Y=>m.jsx(A_,{npc:Y,onClick:()=>$(Y)},`${Y.source}-${Y.id}`))}):m.jsxs("div",{className:"text-center py-16",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-surface-raised rounded-full mb-4 border border-surface-border",children:m.jsx(Fr,{size:32,className:"text-content-subtle"})}),m.jsx("h3",{className:"text-lg font-serif text-content mb-2",children:"Aucun PNJ trouv"}),m.jsx("p",{className:"text-content-subtle",children:y?`Aucun rsultat pour "${y}" avec les filtres actuels`:"Aucun PNJ ne correspond aux filtres slectionns"}),(c!=="all"||p!=="all"||y)&&m.jsx("button",{onClick:()=>{d("all"),h("all"),b("")},className:"mt-4 text-accent-light hover:text-accent-light/80 transition-colors",children:"Afficher tous les PNJ"})]}),m.jsx(N_,{npc:n,isOpen:r,onClose:ie})]})}function R_({scene:n,isOpen:i,onClose:r}){return!n||!n.image?null:m.jsx(_c,{isOpen:i,onClose:r,title:n.title,maxWidth:"max-w-3xl",children:m.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[m.jsx("div",{className:"relative w-full",children:m.jsx("img",{src:n.image,alt:n.title,className:"w-full h-auto max-h-[40vh] object-contain rounded-lg border border-surface-border"})}),n.description&&m.jsx("div",{className:"w-full max-w-3xl",children:m.jsxs("div",{className:"bg-surface-raised/40 rounded-lg p-4 border border-surface-border",children:[m.jsx("h4",{className:"text-lg font-serif text-accent-light font-bold mb-2",children:"Description"}),m.jsxs("div",{className:"space-y-1.5 text-sm text-content-muted",children:[n.description.resume&&m.jsx("p",{className:"italic text-content-secondary/90",children:n.description.resume}),n.description.visuel&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Visuel : "}),n.description.visuel]}),n.description.audio&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Audio : "}),n.description.audio]}),n.description.odeur&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Odeur : "}),n.description.odeur]}),n.description.lumiere&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Lumire : "}),n.description.lumiere]})]})]})})]})})}function Si({title:n,children:i,className:r="bg-surface-raised/40"}){return m.jsxs("div",{className:`mt-3 border border-surface-border rounded p-3 ${r}`,children:[m.jsx("h6",{className:"text-xs font-mono uppercase tracking-widest text-content-subtle mb-1",children:n}),i]})}Si.propTypes={title:O.string.isRequired,children:O.node.isRequired,className:O.string};function Eg({description:n}){return!n||!Object.entries(n).some(([,r])=>r&&String(r).trim()!==""&&r!==n.resume)?null:m.jsx(Si,{title:"Description",className:"bg-surface-raised/40",children:m.jsxs("div",{className:"space-y-1.5 text-sm text-content-muted",children:[n.resume&&m.jsx("p",{className:"italic text-content-secondary/90",children:n.resume}),n.visuel&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Visuel : "}),n.visuel]}),n.audio&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Audio : "}),n.audio]}),n.odeur&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Odeur : "}),n.odeur]}),n.lumiere&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Lumire : "}),n.lumiere]})]})})}Eg.propTypes={description:O.shape({resume:O.string,visuel:O.string,audio:O.string,odeur:O.string,lumiere:O.string})};function Rg({narration:n}){return!n||!Object.values(n).some(r=>r&&String(r).trim()!=="")?null:m.jsx(Si,{title:"Narration",className:"bg-surface-raised/60",children:m.jsxs("div",{className:"space-y-1.5 text-sm text-content-muted",children:[n.declencheur&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Dclencheur : "}),n.declencheur]}),n.texte_a_lire&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:" lire : "}),m.jsx("span",{className:"whitespace-pre-line",children:n.texte_a_lire})]}),n.contexte_mj&&m.jsxs("div",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Contexte MJ : "}),Array.isArray(n.contexte_mj)?m.jsx("ul",{className:"list-disc ml-4 mt-1 space-y-0.5",children:n.contexte_mj.map((r,o)=>m.jsx("li",{children:r},o))}):m.jsx("span",{className:"whitespace-pre-line",children:n.contexte_mj})]}),n.objectif&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Objectif : "}),n.objectif]})]})})}Rg.propTypes={narration:O.shape({declencheur:O.string,texte_a_lire:O.string,contexte_mj:O.oneOfType([O.string,O.arrayOf(O.string)]),objectif:O.string})};function zg({mecaniques:n}){return!n||!(Array.isArray(n.defis)&&n.defis.length>0||Array.isArray(n.indices)&&n.indices.length>0||n.recompenses)?null:m.jsx(Si,{title:"Mcaniques",className:"bg-surface",children:m.jsxs("div",{className:"space-y-1.5 text-sm text-content-muted",children:[Array.isArray(n.defis)&&n.defis.length>0&&m.jsxs("div",{children:[m.jsx("strong",{className:"text-content-secondary block",children:"Dfis"}),m.jsx("ul",{className:"list-disc ml-4 space-y-0.5",children:n.defis.map((r,o)=>m.jsx("li",{children:r},o))})]}),Array.isArray(n.indices)&&n.indices.length>0&&m.jsxs("div",{children:[m.jsx("strong",{className:"text-content-secondary block",children:"Indices"}),m.jsx("ul",{className:"list-disc ml-4 space-y-0.5",children:n.indices.map((r,o)=>m.jsx("li",{children:r},o))})]}),n.recompenses&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Rcompenses : "}),n.recompenses]})]})})}zg.propTypes={mecaniques:O.shape({defis:O.arrayOf(O.string),indices:O.arrayOf(O.string),recompenses:O.string})};function Og({transitions:n}){return!n||!Object.values(n).some(r=>r&&String(r).trim()!=="")?null:m.jsx(Si,{title:"Transitions",className:"bg-surface-raised/40",children:m.jsxs("div",{className:"text-sm text-content-muted space-y-1",children:[n.resume&&m.jsx("p",{className:"italic text-content-secondary/90",children:n.resume}),n.success&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"Succs : "}),n.success]}),n.fail&&m.jsxs("p",{children:[m.jsx("strong",{className:"text-content-secondary",children:"chec : "}),n.fail]})]})})}Og.propTypes={transitions:O.shape({resume:O.string,success:O.string,fail:O.string})};const z_=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4","aria-hidden":"true",children:[m.jsx("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),m.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"18"}),m.jsx("line",{x1:"16",x2:"16",y1:"6",y2:"22"})]}),_h=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4","aria-hidden":"true",children:m.jsx("path",{d:"M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"})}),qh=(n,i)=>{if(n==="bestiary"&&i&&i.est_ennemi)return"border-red-500/60 text-red-400 bg-red-500/10 hover:border-red-400 hover:text-red-300";switch(n){case"principaux":return"border-blue-500/60 text-blue-400 bg-blue-500/10 hover:border-blue-400 hover:text-blue-300";case"ennemis":return"border-red-500/60 text-red-400 bg-red-500/10 hover:border-red-400 hover:text-red-300";case"bestiary":return"border-purple-500/60 text-purple-400 bg-purple-500/10 hover:border-purple-400 hover:text-purple-300";default:return"border-surface-border text-content-muted bg-surface-raised/30"}};function qc({linkedLocation:n,linkedNpcs:i}){return!n&&(!i||i.length===0)?null:m.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:[n&&m.jsxs(ya,{to:sc({zoneId:n.zone.id,locId:n.loc.id}),className:"inline-flex items-center gap-1 px-2 py-1 rounded border border-accent-muted text-accent-light bg-accent-surface hover:bg-accent-surface transition-colors",children:[m.jsx(z_,{}),n.loc.name]}),i.map(r=>r.link?m.jsxs(ya,{to:r.link,title:r.id,className:Ge("inline-flex items-center gap-1 px-2 py-1 rounded border transition-colors",qh(r.source,r)),children:[m.jsx(_h,{}),r.name]},r.id):m.jsxs("span",{title:r.id,className:Ge("inline-flex items-center gap-1 px-2 py-1 rounded border",qh(r.source,r)),children:[m.jsx(_h,{}),r.name]},r.id))]})}qc.propTypes={linkedLocation:O.shape({zone:O.shape({id:O.string}),loc:O.shape({id:O.string,name:O.string})}),linkedNpcs:O.arrayOf(O.shape({id:O.string,name:O.string,link:O.string,source:O.string}))};qc.defaultProps={linkedNpcs:[]};const O_=n=>`/antagoniste?pnj=${encodeURIComponent(n)}`;function Tc({scene:n,highlight:i,expanded:r,onToggle:o}){const[c,d]=Ka(`scene-note-${n.title}`,""),[p,h]=Ka(`scene-fav-${n.title}`,!1),[v,g]=A.useState(!1),y=()=>{n.image&&g(!0)},b=()=>{g(!1)},T=n.locationId?b_(n.locationId):null,C=Array.isArray(n.npcIds)?n.npcIds.map(z=>{const V=xc(z);return V?{...V,id:z,name:V.name||z,link:O_(z),source:V.source}:{id:z,name:z,link:null,source:null}}):[],L=Array.isArray(n.details)?n.details:[];return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:Ge("bg-surface border border-surface-border p-4 rounded hover:border-accent-muted transition-colors group",i&&"border-accent-dark shadow-[0_0_0_1px_rgba(217,119,6,0.35)]"),children:[m.jsxs("div",{className:"flex justify-between items-start mb-3 border-b border-surface-border pb-2 gap-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[r&&n.image&&m.jsx("img",{src:n.image,alt:n.title,className:"w-64 h-64 object-cover rounded border border-surface-border flex-shrink-0 cursor-pointer hover:border-accent-muted transition-colors",onClick:y}),m.jsxs("div",{children:[m.jsx("h5",{className:"font-serif font-bold text-content text-lg",children:n.title}),p&&m.jsx("span",{className:"text-xs text-accent uppercase tracking-widest",children:"Favori"})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:o,className:"text-xs px-2 py-1 rounded border border-surface-border text-content-muted hover:border-accent-dark hover:text-accent-light transition-colors",children:r?"Masquer":"Afficher"}),m.jsx("button",{type:"button",onClick:()=>h(z=>!z),className:Ge("text-xs px-2 py-1 rounded border transition-colors",p?"border-accent text-accent-light bg-accent-surface":"border-surface-border text-content-muted hover:border-accent-dark hover:text-accent-light"),children:""}),m.jsx(nl,{type:n.type})]})]}),r&&m.jsxs(m.Fragment,{children:[m.jsx("ul",{className:"space-y-1.5",children:L.map((z,V)=>m.jsxs("li",{className:"flex gap-2 text-sm text-content-muted group-hover:text-content-secondary transition-colors leading-relaxed",children:[m.jsx("span",{className:"text-content-subtle mt-1.5 w-1 h-1 rounded-full bg-surface-border block flex-shrink-0 group-hover:bg-accent-dark transition-colors"}),m.jsx("span",{children:z})]},V))}),m.jsx(Eg,{description:n.description}),m.jsx(Rg,{narration:n.narration}),m.jsx(zg,{mecaniques:n.mecaniques}),m.jsx(Og,{transitions:n.transitions})]}),m.jsx(qc,{linkedLocation:T,linkedNpcs:C}),m.jsxs("div",{className:"mt-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[!r&&n.image&&m.jsx("img",{src:n.image,alt:n.title,className:"w-16 h-16 object-cover rounded border border-surface-border flex-shrink-0 cursor-pointer hover:border-accent-muted transition-colors",onClick:y}),m.jsx("label",{className:"text-xs uppercase tracking-widest text-content-subtle",children:"Notes MJ"})]}),m.jsx("textarea",{value:c,onChange:z=>d(z.target.value),className:"w-full bg-surface-raised border border-surface-border rounded p-2 text-sm text-content focus:border-accent-dark focus:outline-none",rows:3,placeholder:"Notes, rappels, ajustements..."})]})]}),m.jsx(R_,{scene:n,isOpen:v,onClose:b})]})}Tc.propTypes={scene:O.shape({title:O.string.isRequired,type:O.string,details:O.arrayOf(O.string).isRequired}).isRequired,highlight:O.bool};Tc.defaultProps={highlight:!1};function Cc({act:n,isOpen:i,onToggle:r,targetSceneTitle:o}){const[c,d]=A.useState("");return A.useEffect(()=>{if(!i)return;const p=n.scenes?.find(h=>h.title.toLowerCase()===o?.toLowerCase());if(p){d(p.title);return}!c&&n.scenes?.[0]&&d(n.scenes[0].title)},[i,n.scenes,o,c]),m.jsxs("div",{className:"border-l-2 border-surface-border ml-4 pl-6 relative pb-8 last:pb-0",children:[m.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-surface-overlay border-2 border-surface-border"}),m.jsxs("button",{onClick:r,className:"flex items-center gap-3 w-full text-left group mb-2",children:[m.jsx("h4",{className:"text-lg font-serif font-bold text-content-secondary group-hover:text-accent transition-colors",children:n.title}),m.jsx("div",{className:`transition-transform duration-300 ${i?"rotate-180":""}`,children:m.jsx("span",{className:"text-content-subtle",children:""})})]}),m.jsxs("div",{className:"flex flex-wrap gap-4 text-xs font-mono text-content-subtle mb-4 pl-1",children:[m.jsxs("span",{className:"flex items-center gap-1.5 bg-surface-raised px-2 py-1 rounded border border-surface-border",children:[m.jsx("span",{className:"text-accent-dark",children:""}),"ENJEU : ",n.stake]}),m.jsxs("span",{className:"flex items-center gap-1.5 bg-surface-raised px-2 py-1 rounded border border-surface-border",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4 text-blue-500","aria-hidden":"true",children:[m.jsx("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),m.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"18"}),m.jsx("line",{x1:"16",x2:"16",y1:"6",y2:"22"})]}),"LIEU : ",n.location]})]}),i&&m.jsx("div",{className:"grid grid-cols-1 gap-3 animate-slideDown",children:n.scenes.map((p,h)=>m.jsx(Tc,{scene:p,expanded:c===p.title,onToggle:()=>d(v=>v===p.title?"":p.title),highlight:p.title.toLowerCase()===o?.toLowerCase()},h))})]})}Cc.propTypes={act:O.shape({title:O.string.isRequired,stake:O.string,location:O.string,scenes:O.arrayOf(O.object).isRequired}).isRequired,isOpen:O.bool,onToggle:O.func.isRequired,targetSceneTitle:O.string};Cc.defaultProps={isOpen:!1,targetSceneTitle:""};function jc({scenario:n,isOpen:i,onToggle:r,targetSceneTitle:o}){const[c,d]=Ka(`scenario-open-act-${n.id}`,""),p=A.useRef(!1);return A.useEffect(()=>{i&&typeof window<"u"&&window.localStorage.setItem("current-scenario",String(n.id))},[i,n.id]),A.useEffect(()=>{if(!i||p.current)return;const h=n.acts.find(v=>v.scenes?.some(g=>g.title.toLowerCase()===o.toLowerCase()));if(h){d(h.title),p.current=!0;return}!c&&n.acts[0]&&(d(n.acts[0].title),p.current=!0)},[i,n.acts,o,c,d]),m.jsxs("div",{className:"border border-surface-border bg-surface/60 rounded-lg overflow-hidden transition-all duration-300 hover:border-surface-border",children:[m.jsxs("div",{onClick:r,className:"p-6 cursor-pointer flex items-center justify-between bg-gradient-to-r from-surface-raised to-surface-overlay group",children:[m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-surface border border-surface-border rounded-full font-serif font-bold text-xl text-accent shadow-inner group-hover:text-accent group-hover:border-accent-muted transition-all",children:n.id}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-serif font-bold text-content group-hover:text-accent-light transition-colors",children:n.title}),m.jsx("span",{className:"text-sm text-content-subtle font-mono tracking-wider",children:n.level})]})]}),m.jsx("div",{className:`transition-transform duration-300 ${i?"rotate-180":""}`,children:m.jsx("span",{className:"text-content-subtle",children:""})})]}),i&&m.jsxs("div",{className:"p-6 border-t border-surface-border bg-surface/50",children:[m.jsx("div",{className:"mb-8 p-4 italic text-content-muted text-sm leading-relaxed max-w-3xl mx-auto text-center font-serif",children:n.synopsis}),m.jsx("div",{className:"space-y-2",children:n.acts.map((h,v)=>m.jsx(Cc,{act:h,isOpen:c===h.title,onToggle:()=>d(g=>g===h.title?"":h.title),targetSceneTitle:o},v))})]})]})}jc.propTypes={scenario:O.shape({id:O.oneOfType([O.string,O.number]).isRequired,title:O.string.isRequired,level:O.string,synopsis:O.string,acts:O.arrayOf(O.object).isRequired}).isRequired,isOpen:O.bool.isRequired,onToggle:O.func.isRequired,targetSceneTitle:O.string};jc.defaultProps={targetSceneTitle:""};function Th(){const n=K1(),[i]=fc(),r=i.get("scene")||"",o=n.id||i.get("scenario")||"",[c,d]=Ka("scenario-open-active",o||"");return A.useEffect(()=>{o&&d(String(o))},[o,d]),m.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[m.jsx(fn,{title:"Le Livre des Scnarios",icon:Gh,subtitle:"Les dieux ont cr la mort par ngligence, c'est un dfaut de conception."}),m.jsx("div",{className:"space-y-4",children:yi.map(p=>m.jsx(jc,{scenario:p,isOpen:String(c)===String(p.id),onToggle:()=>d(h=>String(h)===String(p.id)?"":String(p.id)),targetSceneTitle:r},p.id))})]})}function V_(){return m.jsx(dx,{children:m.jsxs(ha,{element:m.jsx(__,{}),children:[m.jsx(ha,{index:!0,element:m.jsx(kf,{to:"/univers",replace:!0})}),m.jsx(ha,{path:"/univers",element:m.jsx(q_,{})}),m.jsx(ha,{path:"/factions",element:m.jsx(C_,{})}),m.jsx(ha,{path:"/antagoniste",element:m.jsx(E_,{})}),m.jsx(ha,{path:"/scenarios",element:m.jsx(Th,{})}),m.jsx(ha,{path:"/scenarios/:id",element:m.jsx(Th,{})}),m.jsx(ha,{path:"*",element:m.jsx(kf,{to:"/univers",replace:!0})})]})})}const P_={title:"Factions",subtitle:"Les forces en prsence  Val-d'Ombre",hierarchy:"Hirarchie",npcs:"PNJ"},U_={title:"Le Livre des Scnarios",subtitle:"Les dieux ont cr la mort par ngligence, c'est un dfaut de conception."},w_={title:"Univers",subtitle:"Dcouvrez les lieux et personnages de Val-d'Ombre"},I_={placeholder:"Rechercher (PNJ, lieux, scnarios...)"},B_={factions:P_,scenarios:U_,universe:w_,search:I_},G_={title:"Factions",subtitle:"The forces present in Val-d'Ombre",hierarchy:"Hierarchy",npcs:"NPCs"},H_={title:"The Book of Scenarios",subtitle:"The gods created death by negligence, it's a design flaw."},k_={title:"Universe",subtitle:"Discover the places and characters of Val-d'Ombre"},J_={placeholder:"Search (NPCs, locations, scenarios...)"},F_={factions:G_,scenarios:H_,universe:k_,search:J_};ot.use(P0).init({resources:{fr:{translation:B_},en:{translation:F_}},lng:"fr",fallbackLng:"fr",interpolation:{escapeValue:!1}});window.onerror=function(n,i,r,o,c){const d=document.getElementById("root");d&&(d.innerHTML=`
      <div style="padding: 20px; color: red; font-family: monospace; background: #fff;">
        <h1>Erreur Critique</h1>
        <p><strong>Message:</strong> ${n}</p>
        <p><strong>Source:</strong> ${i}:${r}:${o}</p>
        <pre>${c?c.stack:"No stack trace"}</pre>
      </div>
    `)};try{h1.createRoot(document.getElementById("root")).render(m.jsx(Ch.StrictMode,{children:m.jsx(Ox,{children:m.jsx(V_,{})})}))}catch(n){console.error("Render error:",n),document.getElementById("root").innerHTML=`
    <div style="padding: 20px; color: red; font-family: monospace; background: #fff;">
      <h1>Erreur de Rendu</h1>
      <pre>${n.stack}</pre>
    </div>
  `}
